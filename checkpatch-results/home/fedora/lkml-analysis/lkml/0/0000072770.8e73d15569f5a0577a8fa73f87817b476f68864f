WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#26: 
--- linux-2.6.17-rc5.orig/perfmon/perfmon_file.c	1969-12-31 16:00:00.000000000 -0800

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#29: FILE: perfmon/perfmon_file.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#50: FILE: perfmon/perfmon_file.c:22:
+ * ^Ihttp://www.hpl.hp.com/research/linux/perfmon$

WARNING:CONST_STRUCT: struct file_operations should normally be const
#63: FILE: perfmon/perfmon_file.c:35:
+static struct file_operations pfm_file_ops;

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:CONST_STRUCT: struct dentry_operations should normally be const
#70: FILE: perfmon/perfmon_file.c:42:
+static struct dentry_operations pfmfs_dentry_operations = {

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#74: FILE: perfmon/perfmon_file.c:46:
+int pfm_is_fd(struct file *filp)
                            ^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#94: FILE: perfmon/perfmon_file.c:66:
+	msg = ctx->msgq+ctx->msgq_head;
 	               ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#99: FILE: perfmon/perfmon_file.c:71:
+	ctx->msgq_head = (ctx->msgq_head+1) % PFM_MAX_MSGS;
 	                                ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#119: FILE: perfmon/perfmon_file.c:91:
+	if (ctx == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:SPACING: No space is necessary after a cast
#125: FILE: perfmon/perfmon_file.c:97:
+	if ( (address < (unsigned long) vma->vm_start) ||

ERROR:SPACING: space prohibited after that open parenthesis '('
#125: FILE: perfmon/perfmon_file.c:97:
+	if ( (address < (unsigned long) vma->vm_start) ||

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'address < (unsigned long) vma->vm_start'
#125: FILE: perfmon/perfmon_file.c:97:
+	if ( (address < (unsigned long) vma->vm_start) ||
+	     (address > (unsigned long) (vma->vm_start + size)) )

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#126: FILE: perfmon/perfmon_file.c:98:
+	if ( (address < (unsigned long) vma->vm_start) ||
+	     (address > (unsigned long) (vma->vm_start + size)) )

CHECK:SPACING: No space is necessary after a cast
#126: FILE: perfmon/perfmon_file.c:98:
+	     (address > (unsigned long) (vma->vm_start + size)) )

ERROR:SPACING: space prohibited before that close parenthesis ')'
#126: FILE: perfmon/perfmon_file.c:98:
+	     (address > (unsigned long) (vma->vm_start + size)) )

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!kaddr"
#151: FILE: perfmon/perfmon_file.c:123:
+	if (kaddr == NULL) {

CHECK:SPACING: No space is necessary after a cast
#156: FILE: perfmon/perfmon_file.c:128:
+	if ( (address < (unsigned long) vma->vm_start) ||

ERROR:SPACING: space prohibited after that open parenthesis '('
#156: FILE: perfmon/perfmon_file.c:128:
+	if ( (address < (unsigned long) vma->vm_start) ||

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'address < (unsigned long) vma->vm_start'
#156: FILE: perfmon/perfmon_file.c:128:
+	if ( (address < (unsigned long) vma->vm_start) ||
+	     (address > (unsigned long) (vma->vm_start + PAGE_SIZE)) )

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#157: FILE: perfmon/perfmon_file.c:129:
+	if ( (address < (unsigned long) vma->vm_start) ||
+	     (address > (unsigned long) (vma->vm_start + PAGE_SIZE)) )

CHECK:SPACING: No space is necessary after a cast
#157: FILE: perfmon/perfmon_file.c:129:
+	     (address > (unsigned long) (vma->vm_start + PAGE_SIZE)) )

ERROR:SPACING: space prohibited before that close parenthesis ')'
#157: FILE: perfmon/perfmon_file.c:129:
+	     (address > (unsigned long) (vma->vm_start + PAGE_SIZE)) )

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#169: FILE: perfmon/perfmon_file.c:141:
+	PFM_DBG("[%d] start=%p ref_count=%d",
+		  current->pid,

WARNING:CONST_STRUCT: struct vm_operations_struct should normally be const
#175: FILE: perfmon/perfmon_file.c:147:
+struct vm_operations_struct pfm_buf_map_vm_ops = {

WARNING:CONST_STRUCT: struct vm_operations_struct should normally be const
#179: FILE: perfmon/perfmon_file.c:151:
+struct vm_operations_struct pfm_view_map_vm_ops = {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#183: FILE: perfmon/perfmon_file.c:155:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#193: FILE: perfmon/perfmon_file.c:165:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#197: FILE: perfmon/perfmon_file.c:169:
+	if (ctx == NULL)

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#215: FILE: perfmon/perfmon_file.c:187:
+	if (vma->vm_pgoff == 0) {
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx->smpl_addr"
#216: FILE: perfmon/perfmon_file.c:188:
+		if (ctx->smpl_addr == NULL) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#223: FILE: perfmon/perfmon_file.c:195:
+			PFM_DBG("mmap size=%zu >= actual buf size=%zu",
+				  size,

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#238: FILE: perfmon/perfmon_file.c:210:
+		if (vma->vm_pgoff < PFM_SET_REMAP_OFFS
+		    || vma->vm_pgoff >= PFM_SET_REMAP_OFFS_MAX) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!set"
#250: FILE: perfmon/perfmon_file.c:222:
+		if (set == NULL) {

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#267: FILE: perfmon/perfmon_file.c:239:
+		vma->vm_end-vma->vm_start);
 		           ^

ERROR:SPACING: space required before the open parenthesis '('
#287: FILE: perfmon/perfmon_file.c:259:
+	if(PFM_CTXQ_EMPTY(ctx) == 0)

ERROR:SPACING: space required before the open parenthesis '('
#300: FILE: perfmon/perfmon_file.c:272:
+	if(PFM_CTXQ_EMPTY(ctx))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!msg"
#312: FILE: perfmon/perfmon_file.c:284:
+	if (unlikely(msg == NULL))

ERROR:SPACING: space required before the open parenthesis '('
#347: FILE: perfmon/perfmon_file.c:319:
+	if(PFM_CTXQ_EMPTY(ctx) == 0)

ERROR:CODE_INDENT: code indent should use tabs where possible
#357: FILE: perfmon/perfmon_file.c:329:
+      ^Iret = -EAGAIN;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#357: FILE: perfmon/perfmon_file.c:329:
+      ^Iret = -EAGAIN;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#357: FILE: perfmon/perfmon_file.c:329:
+      ^Iret = -EAGAIN;$

ERROR:SPACING: space required before the open parenthesis '('
#358: FILE: perfmon/perfmon_file.c:330:
+	if(non_block)

ERROR:SPACING: space required before the open parenthesis '('
#389: FILE: perfmon/perfmon_file.c:361:
+		if(signal_pending(current))

ERROR:SPACING: space required before the open parenthesis '('
#393: FILE: perfmon/perfmon_file.c:365:
+		if(PFM_CTXQ_EMPTY(ctx) == 0)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!msg"
#415: FILE: perfmon/perfmon_file.c:387:
+	if (unlikely(msg == NULL))

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#445: FILE: perfmon/perfmon_file.c:417:
+static ssize_t pfm_read(struct file *filp, char __user *buf, size_t size,
                                      ^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#453: FILE: perfmon/perfmon_file.c:425:
+	if (ctx == NULL) {

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'pfm_read', this function's name, in a string
#454: FILE: perfmon/perfmon_file.c:426:
+		PFM_ERR("no ctx for pfm_read");

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

ERROR:CODE_INDENT: code indent should use tabs where possible
#476: FILE: perfmon/perfmon_file.c:448:
+  ^I^Iif(copy_to_user(buf, &msg_buf, sizeof(msg_buf)))$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#476: FILE: perfmon/perfmon_file.c:448:
+  ^I^Iif(copy_to_user(buf, &msg_buf, sizeof(msg_buf)))$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#476: FILE: perfmon/perfmon_file.c:448:
+  ^I^Iif(copy_to_user(buf, &msg_buf, sizeof(msg_buf)))$

ERROR:SPACING: space required before the open parenthesis '('
#476: FILE: perfmon/perfmon_file.c:448:
+  		if(copy_to_user(buf, &msg_buf, sizeof(msg_buf)))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#483: FILE: perfmon/perfmon_file.c:455:
+static ssize_t pfm_write(struct file *file, const char __user *ubuf,
+			  size_t size, loff_t *ppos)

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'pfm_write', this function's name, in a string
#485: FILE: perfmon/perfmon_file.c:457:
+	PFM_DBG("pfm_write called");

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#489: FILE: perfmon/perfmon_file.c:461:
+static unsigned int pfm_poll(struct file *filp, poll_table * wait)
                                           ^^^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#489: FILE: perfmon/perfmon_file.c:461:
+static unsigned int pfm_poll(struct file *filp, poll_table * wait)

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#495: FILE: perfmon/perfmon_file.c:467:
+	if (!pfm_is_fd(filp)) {
 	               ^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'pfm_poll', this function's name, in a string
#496: FILE: perfmon/perfmon_file.c:468:
+		PFM_ERR("pfm_poll bad magic");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#501: FILE: perfmon/perfmon_file.c:473:
+	if (ctx == NULL) {

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'pfm_poll', this function's name, in a string
#502: FILE: perfmon/perfmon_file.c:474:
+		PFM_ERR("pfm_poll no ctx");

CHECK:LINE_SPACING: Please don't use multiple blank lines
#506: FILE: perfmon/perfmon_file.c:478:
+
+

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#509: FILE: perfmon/perfmon_file.c:481:
+	poll_wait(filp, &ctx->msgq_wait, wait);
 	          ^^^^

ERROR:CODE_INDENT: code indent should use tabs where possible
#524: FILE: perfmon/perfmon_file.c:496:
+^I  ^I     unsigned long arg)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#524: FILE: perfmon/perfmon_file.c:496:
+^I  ^I     unsigned long arg)$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#524: FILE: perfmon/perfmon_file.c:496:
+static int pfm_ioctl(struct inode *inode, struct file *file, unsigned int cmd,
+	  	     unsigned long arg)

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'pfm_ioctl', this function's name, in a string
#526: FILE: perfmon/perfmon_file.c:498:
+	PFM_DBG("pfm_ioctl called");

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#533: FILE: perfmon/perfmon_file.c:505:
+static inline int __pfm_fasync(int fd, struct file *filp,
                                                     ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#538: FILE: perfmon/perfmon_file.c:510:
+	ret = fasync_helper (fd, filp, on, &ctx->async_queue);
 	                         ^^^^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#538: FILE: perfmon/perfmon_file.c:510:
+	ret = fasync_helper (fd, filp, on, &ctx->async_queue);

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#548: FILE: perfmon/perfmon_file.c:520:
+static int pfm_fasync(int fd, struct file *filp, int on)
                                            ^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#554: FILE: perfmon/perfmon_file.c:526:
+	if (ctx == NULL) {

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'pfm_fasync', this function's name, in a string
#555: FILE: perfmon/perfmon_file.c:527:
+		PFM_ERR("pfm_fasync no ctx");

WARNING:TYPO_SPELLING: 'avalaible' may be misspelled - perhaps 'available'?
#561: FILE: perfmon/perfmon_file.c:533:
+	 * may go to sleep if memory is not readily avalaible.
 	                                            ^^^^^^^^^

WARNING:REPEATED_WORD: Possible repeated word: 'may'
#561: FILE: perfmon/perfmon_file.c:533:
+	 * we cannot mask interrupts during this call because this may
+	 * may go to sleep if memory is not readily avalaible.

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#567: FILE: perfmon/perfmon_file.c:539:
+	ret = __pfm_fasync(fd, filp, ctx, on);
 	                       ^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'pfm_fasync', this function's name, in a string
#569: FILE: perfmon/perfmon_file.c:541:
+	PFM_DBG("pfm_fasync called on fd=%d on=%d async_queue=%p ret=%d",

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#592: FILE: perfmon/perfmon_file.c:564:
+int __pfm_close(struct pfm_context *ctx, struct file *filp)
                                                       ^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!task"
#611: FILE: perfmon/perfmon_file.c:583:
+	if (task == NULL)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#629: FILE: perfmon/perfmon_file.c:601:
+^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:CODE_INDENT: code indent should use tabs where possible
#633: FILE: perfmon/perfmon_file.c:605:
+^I ^I * We need to release the resource on the ORIGINAL cpu.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#633: FILE: perfmon/perfmon_file.c:605:
+^I ^I * We need to release the resource on the ORIGINAL cpu.$

ERROR:CODE_INDENT: code indent should use tabs where possible
#634: FILE: perfmon/perfmon_file.c:606:
+^I ^I */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#634: FILE: perfmon/perfmon_file.c:606:
+^I ^I */$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#660: FILE: perfmon/perfmon_file.c:632:
+^I^I$

ERROR:CODE_INDENT: code indent should use tabs where possible
#663: FILE: perfmon/perfmon_file.c:635:
+^I^I ^I* force task to wake up from MASKED state$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#663: FILE: perfmon/perfmon_file.c:635:
+^I^I ^I* force task to wake up from MASKED state$

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#663: FILE: perfmon/perfmon_file.c:635:
+			/*
+		 	* force task to wake up from MASKED state

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

ERROR:CODE_INDENT: code indent should use tabs where possible
#664: FILE: perfmon/perfmon_file.c:636:
+^I^I ^I*/$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#664: FILE: perfmon/perfmon_file.c:636:
+^I^I ^I*/$

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#673: FILE: perfmon/perfmon_file.c:645:
+		free_possible = can_unload = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#694: FILE: perfmon/perfmon_file.c:666:
+	if (filp)
 	    ^^^^

WARNING:TYPO_SPELLING: 'unreacheable' may be misspelled - perhaps 'unreachable'?
#698: FILE: perfmon/perfmon_file.c:670:
+	 * if we free on the spot, the context is now completely unreacheable
 	                                                         ^^^^^^^^^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#715: FILE: perfmon/perfmon_file.c:687:
+static int pfm_close(struct inode *inode, struct file *filp)
                                                        ^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#720: FILE: perfmon/perfmon_file.c:692:
+	if (ctx == NULL) {

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#724: FILE: perfmon/perfmon_file.c:696:
+	return __pfm_close(ctx, filp);
 	                        ^^^^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#739: FILE: perfmon/perfmon_file.c:711:
+ * ^I- remove from fasync queue$

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#741: FILE: perfmon/perfmon_file.c:713:
+static int pfm_flush(struct file *filp)
                                   ^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#746: FILE: perfmon/perfmon_file.c:718:
+	if (ctx == NULL) {

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'pfm_flush', this function's name, in a string
#747: FILE: perfmon/perfmon_file.c:719:
+		PFM_ERR("pfm_flush no ctx");

WARNING:TYPO_SPELLING: 'unreacheable' may be misspelled - perhaps 'unreachable'?
#754: FILE: perfmon/perfmon_file.c:726:
+	 * here when the context has become unreacheable by other tasks.
 	                                    ^^^^^^^^^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#766: FILE: perfmon/perfmon_file.c:738:
+		__pfm_fasync (-1, filp, ctx, 0);
 		                  ^^^^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#766: FILE: perfmon/perfmon_file.c:738:
+		__pfm_fasync (-1, filp, ctx, 0);

WARNING:CONST_STRUCT: struct file_operations should normally be const
#771: FILE: perfmon/perfmon_file.c:743:
+static struct file_operations pfm_file_ops = {

ERROR:SPACING: spaces required around that '=' (ctx:VxW)
#780: FILE: perfmon/perfmon_file.c:752:
+	.flush= pfm_flush,
 	      ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#784: FILE: perfmon/perfmon_file.c:756:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#799: FILE: perfmon/perfmon_file.c:771:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#811: FILE: perfmon/perfmon_file.c:783:
+	int err = register_filesystem(&pfm_fs_type);
+	if (!err) {

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#832: FILE: perfmon/perfmon_file.c:804:
+	struct inode * inode;

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#856: FILE: perfmon/perfmon_file.c:828:
+	inode->i_mode = S_IFCHR|S_IRUGO;
 	                       ^

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#856: FILE: perfmon/perfmon_file.c:828:
+	inode->i_mode = S_IFCHR|S_IRUGO;

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#897: FILE: perfmon/perfmon_fmt.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#918: FILE: perfmon/perfmon_fmt.c:22:
+ * ^Ihttp://www.hpl.hp.com/research/linux/perfmon$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#937: FILE: perfmon/perfmon_fmt.c:41:
+
+

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#945: FILE: perfmon/perfmon_fmt.c:49:
+	struct pfm_smpl_fmt * entry;

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#956: FILE: perfmon/perfmon_fmt.c:60:
+	struct pfm_smpl_fmt * entry;

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#964: FILE: perfmon/perfmon_fmt.c:68:
+}
+/*

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#969: FILE: perfmon/perfmon_fmt.c:73:
+	struct pfm_smpl_fmt * fmt;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt"
#988: FILE: perfmon/perfmon_fmt.c:92:
+	if (fmt == NULL || fmt_is_mod(fmt) == 0)

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#990: FILE: perfmon/perfmon_fmt.c:94:
+	BUG_ON(fmt->owner == NULL);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt->owner"
#990: FILE: perfmon/perfmon_fmt.c:94:
+	BUG_ON(fmt->owner == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt"
#1002: FILE: perfmon/perfmon_fmt.c:106:
+	if (fmt == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt->fmt_name"
#1007: FILE: perfmon/perfmon_fmt.c:111:
+	if (fmt->fmt_name == NULL) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1018: FILE: perfmon/perfmon_fmt.c:122:
+		PFM_INFO("perfmon: format %s requires %u msg queue depth (max %d)",
+		       fmt->fmt_name,

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt->owner"
#1028: FILE: perfmon/perfmon_fmt.c:132:
+	if (fmt->owner == NULL && fmt_is_mod(fmt)) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt->fmt_handler"
#1035: FILE: perfmon/perfmon_fmt.c:139:
+	if (fmt->fmt_handler == NULL) {

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#1100: FILE: perfmon/perfmon_fmt.c:204:
+
+}

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1110: FILE: perfmon/perfmon_fmt.c:214:
+	struct pfm_smpl_fmt * entry;

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1123: FILE: perfmon/perfmon_intr.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1144: FILE: perfmon/perfmon_intr.c:22:
+ * ^Ihttp://www.hpl.hp.com/research/linux/perfmon$

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1199: FILE: perfmon/perfmon_intr.c:77:
+	num_ovfl = num_ovfl_orig = set->npend_ovfls;

WARNING:SPLIT_STRING: quoted string split across lines
#1206: FILE: perfmon/perfmon_intr.c:84:
+	PFM_DBG_ovfl("ovfl_pmds=0x%llx ip=%p, blocking=%d "
+		     "u_pmds=0x%llx use_fmt=%u",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "hdr"
#1211: FILE: perfmon/perfmon_intr.c:89:
+		     hdr != NULL);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1255: FILE: perfmon/perfmon_intr.c:133:
+		old_val = new_val = pmds[i];

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1269: FILE: perfmon/perfmon_intr.c:147:
+		if (likely(old_val > new_val)) {
+

WARNING:SPLIT_STRING: quoted string split across lines
#1299: FILE: perfmon/perfmon_intr.c:177:
+		PFM_DBG_ovfl("pmd%u=0x%llx old_val=0x%llx "
+			     "hw_pmd=0x%llx o_pmds=0x%llx must_switch=%u "

WARNING:SPLIT_STRING: quoted string split across lines
#1300: FILE: perfmon/perfmon_intr.c:178:
+			     "hw_pmd=0x%llx o_pmds=0x%llx must_switch=%u "
+			     "o_thres=%llu o_thres_ref=%llu",

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1328: FILE: perfmon/perfmon_intr.c:206:
+
+

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1369: FILE: perfmon/perfmon_intr.c:247:
+		for (i = first_cnt_pmd; num_ovfl && ret == 0; i++) {
+

ERROR:CODE_INDENT: code indent should use tabs where possible
#1382: FILE: perfmon/perfmon_intr.c:260:
+^I^I ^I * copy values of pmds of interest.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1382: FILE: perfmon/perfmon_intr.c:260:
+^I^I ^I * copy values of pmds of interest.$

ERROR:CODE_INDENT: code indent should use tabs where possible
#1385: FILE: perfmon/perfmon_intr.c:263:
+^I^I ^I */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1385: FILE: perfmon/perfmon_intr.c:263:
+^I^I ^I */$

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1389: FILE: perfmon/perfmon_intr.c:267:
+			if (bitmap_empty(ulp(smpl_pmds), max_pmd) == 0) {
+

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1391: FILE: perfmon/perfmon_intr.c:269:
+				for (j = 0; j < max_pmd; j++) {
+

WARNING:SPLIT_STRING: quoted string split across lines
#1405: FILE: perfmon/perfmon_intr.c:283:
+					PFM_DBG_ovfl("s_pmd_val[%u]="
+						     "pmd%u=0x%llx",

ERROR:CODE_INDENT: code indent should use tabs where possible
#1417: FILE: perfmon/perfmon_intr.c:295:
+^I^I ^I * call custom buffer format record (handler) routine$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1417: FILE: perfmon/perfmon_intr.c:295:
+^I^I ^I * call custom buffer format record (handler) routine$

ERROR:CODE_INDENT: code indent should use tabs where possible
#1418: FILE: perfmon/perfmon_intr.c:296:
+^I^I ^I */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1418: FILE: perfmon/perfmon_intr.c:296:
+^I^I ^I */$

WARNING:REPEATED_WORD: Possible repeated word: 'may'
#1436: FILE: perfmon/perfmon_intr.c:314:
+			 * status. It may may deferred until pfm_restart().

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1439: FILE: perfmon/perfmon_intr.c:317:
+				   & (PFM_OVFL_CTRL_NOTIFY|PFM_OVFL_CTRL_MASK);
 				                          ^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1456: FILE: perfmon/perfmon_intr.c:334:
+^I^I * ^I- mask monitoring$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1457: FILE: perfmon/perfmon_intr.c:335:
+^I^I * ^I- notify user if requested$

WARNING:SPLIT_STRING: quoted string split across lines
#1471: FILE: perfmon/perfmon_intr.c:349:
+	PFM_DBG_ovfl("o_notify=0x%llx o_pmds=0x%llx "
+		     "r_pmds=0x%llx masking=%d notify=%d",

ERROR:SPACING: spaces required around that '!=' (ctx:VxW)
#1476: FILE: perfmon/perfmon_intr.c:354:
+		     (ovfl_ctrl & PFM_OVFL_CTRL_NOTIFY)!= 0);
 		                                       ^

ERROR:CODE_INDENT: code indent should use tabs where possible
#1485: FILE: perfmon/perfmon_intr.c:363:
+^I ^I */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1485: FILE: perfmon/perfmon_intr.c:363:
+^I ^I */$

CHECK:BRACES: braces {} should be used on all arms of this statement
#1486: FILE: perfmon/perfmon_intr.c:364:
+		if (must_switch) {
[...]
+		} else
[...]

ERROR:CODE_INDENT: code indent should use tabs where possible
#1494: FILE: perfmon/perfmon_intr.c:372:
+^I^I ^I * update our view of the active set$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1494: FILE: perfmon/perfmon_intr.c:372:
+^I^I ^I * update our view of the active set$

ERROR:CODE_INDENT: code indent should use tabs where possible
#1495: FILE: perfmon/perfmon_intr.c:373:
+^I^I ^I */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1495: FILE: perfmon/perfmon_intr.c:373:
+^I^I ^I */$

CHECK:BRACES: Unbalanced braces around else statement
#1499: FILE: perfmon/perfmon_intr.c:377:
+		} else

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1545: FILE: perfmon/perfmon_intr.c:423:
+}
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1549: FILE: perfmon/perfmon_intr.c:427:
+ * ^I- per-thread: ctx attached to current thread, so LOADED,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1550: FILE: perfmon/perfmon_intr.c:428:
+ * ^I  and cannot be unloaded or modified without current being$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1551: FILE: perfmon/perfmon_intr.c:429:
+ * ^I  stopped or not in the interrupt handler (self)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1553: FILE: perfmon/perfmon_intr.c:431:
+ * ^I- system-wide: is controlled either by current thread, or remote$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1554: FILE: perfmon/perfmon_intr.c:432:
+ * ^I  but then needs IPI to this CPU to unload or modify state and$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1555: FILE: perfmon/perfmon_intr.c:433:
+ * ^I  interrupts are masked by virtue of SA_INTERRUPT. Furthermore,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1556: FILE: perfmon/perfmon_intr.c:434:
+ * ^I  the PMU interrupt is in the same priority class as IPI, so even$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1557: FILE: perfmon/perfmon_intr.c:435:
+ * ^I  with interrupt unmasked, there is no race.$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#1570: FILE: perfmon/perfmon_intr.c:448:
+	if (unlikely(ctx == NULL))

WARNING:TYPO_SPELLING: 'requried' may be misspelled - perhaps 'required'?
#1628: FILE: perfmon/perfmon_intr.c:506:
+ * irq and arg requried because of IA-64 using this function directly
                ^^^^^^^^

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1651: FILE: perfmon/perfmon_kapi.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1662: FILE: perfmon/perfmon_kapi.c:12:
+ * ^Ihttp://perfmon2.sf.net$

WARNING:REPEATED_WORD: Possible repeated word: 'this'
#1670: FILE: perfmon/perfmon_kapi.c:20:
+ *  is comosed by a set of functions  implemented in this this. For

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1680: FILE: perfmon/perfmon_kapi.c:30:
+ *  ^Ipfmk_create_context();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1681: FILE: perfmon/perfmon_kapi.c:31:
+ *  ^Ipfmk_write_pmcs();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1682: FILE: perfmon/perfmon_kapi.c:32:
+ *  ^Ipfmk_write_pmds();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1683: FILE: perfmon/perfmon_kapi.c:33:
+ *  ^Ipfmk_read_pmds();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1684: FILE: perfmon/perfmon_kapi.c:34:
+ *  ^Ipfmk_restart();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1685: FILE: perfmon/perfmon_kapi.c:35:
+ *  ^Ipfmk_stop();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1686: FILE: perfmon/perfmon_kapi.c:36:
+ *  ^Ipfmk_start();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1687: FILE: perfmon/perfmon_kapi.c:37:
+ *  ^Ipfmk_load_context();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1688: FILE: perfmon/perfmon_kapi.c:38:
+ *  ^Ipfmk_unload_context();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1689: FILE: perfmon/perfmon_kapi.c:39:
+ *  ^Ipfmk_delete_evtsets();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1690: FILE: perfmon/perfmon_kapi.c:40:
+ *  ^Ipfmk_create_evtsets();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1691: FILE: perfmon/perfmon_kapi.c:41:
+ *  ^Ipfmk_getinfo_evtsets();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1692: FILE: perfmon/perfmon_kapi.c:42:
+ *  ^Ipfmk_close();$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1693: FILE: perfmon/perfmon_kapi.c:43:
+ *  ^Ipfmk_read();$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1703: FILE: perfmon/perfmon_kapi.c:53:
+ * $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1720: FILE: perfmon/perfmon_kapi.c:70:
+ * ^I- only system-wide contexts are supported$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1721: FILE: perfmon/perfmon_kapi.c:71:
+ * ^I- with a sampling buffer defined, it is not possible$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1722: FILE: perfmon/perfmon_kapi.c:72:
+ * ^I  to call pfmk_close() from an interrupt context$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1723: FILE: perfmon/perfmon_kapi.c:73:
+ * ^I  (e.g. from IPI handler)$

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#1728: FILE: perfmon/perfmon_kapi.c:78:
+#include <asm/uaccess.h>

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1731: FILE: perfmon/perfmon_kapi.c:81:
+static int pfmk_get_smpl_arg(pfm_uuid_t uuid, void *addr, size_t size,
+		     struct pfm_smpl_fmt **fmt)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!f"
#1744: FILE: perfmon/perfmon_kapi.c:94:
+	if (f == NULL) {

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1775: FILE: perfmon/perfmon_kapi.c:125:
+ * ^I     struct (i.e. no init_completion). Completion used with pfmk_read()$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#1790: FILE: perfmon/perfmon_kapi.c:140:
+	if (desc == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c"
#1793: FILE: perfmon/perfmon_kapi.c:143:
+	if (c == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#1824: FILE: perfmon/perfmon_kapi.c:174:
+	if (count < 0 || desc == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#1847: FILE: perfmon/perfmon_kapi.c:197:
+	if (count < 0 || desc == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#1870: FILE: perfmon/perfmon_kapi.c:220:
+	if (count < 0 || desc == NULL)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1907: FILE: perfmon/perfmon_kapi.c:257:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#1933: FILE: perfmon/perfmon_kapi.c:283:
+	if (desc == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#1955: FILE: perfmon/perfmon_kapi.c:305:
+	if (desc == NULL)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1972: FILE: perfmon/perfmon_kapi.c:322:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#1979: FILE: perfmon/perfmon_kapi.c:329:
+	if (desc == NULL)

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1986: FILE: perfmon/perfmon_kapi.c:336:
+	ret = pfm_check_task_state(ctx, PFM_CMD_STOPPED|PFM_CMD_UNLOAD, &flags);
 	                                               ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#2002: FILE: perfmon/perfmon_kapi.c:352:
+	if (count < 0 || desc == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#2025: FILE: perfmon/perfmon_kapi.c:375:
+	if (count < 0 || desc == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#2048: FILE: perfmon/perfmon_kapi.c:398:
+	if (count < 0 || desc == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#2069: FILE: perfmon/perfmon_kapi.c:419:
+	if (desc == NULL)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#2081: FILE: perfmon/perfmon_kapi.c:431:
+ * sz     : sizeof of message argument. Must be equal to 1 message $

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!desc"
#2101: FILE: perfmon/perfmon_kapi.c:451:
+	if (desc == NULL || msg == NULL || sz != sizeof(*msg))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!msg"
#2101: FILE: perfmon/perfmon_kapi.c:451:
+	if (desc == NULL || msg == NULL || sz != sizeof(*msg))

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2112: FILE: perfmon/perfmon_pmu.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2133: FILE: perfmon/perfmon_pmu.c:22:
+ * ^Ihttp://www.hpl.hp.com/research/linux/perfmon$

WARNING:TYPO_SPELLING: 'acces' may be misspelled - perhaps 'access'?
#2152: FILE: perfmon/perfmon_pmu.c:41:
+ * perfmon core must acces PMU information ONLY through pfm_pmu_conf
                      ^^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2158: FILE: perfmon/perfmon_pmu.c:47:
+
+

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#2172: FILE: perfmon/perfmon_pmu.c:61:
+	memset(&_pfm_pmu_conf, 0 , sizeof(_pfm_pmu_conf));
 	                         ^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2181: FILE: perfmon/perfmon_pmu.c:70:
+	max1 = max2 = -1;

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#2183: FILE: perfmon/perfmon_pmu.c:72:
+	for (i = 0; i < cfg->num_pmc_entries;  i++) {
+

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2207: FILE: perfmon/perfmon_pmu.c:96:
+	n = n_counters = 0;

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2208: FILE: perfmon/perfmon_pmu.c:97:
+	max1 = max2 = max3 = first_cnt = first_i = -1;

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#2210: FILE: perfmon/perfmon_pmu.c:99:
+	for (i = 0; i < cfg->num_pmd_entries;  i++) {
+

CHECK:SPACING: spaces preferred around that '-' (ctx:WxV)
#2268: FILE: perfmon/perfmon_pmu.c:157:
+	_pfm_pmu_conf.ovfl_mask = (PFM_ONE_64 << cfg->counter_width) -1;
 	                                                             ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2271: FILE: perfmon/perfmon_pmu.c:160:
+
+

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2289: FILE: perfmon/perfmon_pmu.c:178:
+	nspec = nspec_ro = num_pmds = num_pmcs = 0;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg"
#2292: FILE: perfmon/perfmon_pmu.c:181:
+	if (cfg == NULL || cfg->pmu_name == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg->pmu_name"
#2292: FILE: perfmon/perfmon_pmu.c:181:
+	if (cfg == NULL || cfg->pmu_name == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg->owner"
#2297: FILE: perfmon/perfmon_pmu.c:186:
+	if ((cfg->flags & PFM_PMUFL_IS_BUILTIN) == 0 && cfg->owner == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg->probe_pmu"
#2318: FILE: perfmon/perfmon_pmu.c:207:
+	if (cfg->probe_pmu == NULL) {

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#2327: FILE: perfmon/perfmon_pmu.c:216:
+	for (i = 0; i < cfg->num_pmc_entries;  i++) {
+

WARNING:SPLIT_STRING: quoted string split across lines
#2338: FILE: perfmon/perfmon_pmu.c:227:
+			PFM_INFO("PFM_REG_V is not supported on "
+				 "PMCs (PMC%d)", i);

WARNING:SPLIT_STRING: quoted string split across lines
#2343: FILE: perfmon/perfmon_pmu.c:232:
+			PFM_INFO("PFM_REG_RO meaningless on "
+				 "PMCs (PMC%u)", i);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg->pmc_write_check"
#2348: FILE: perfmon/perfmon_pmu.c:237:
+	if (num_wc && cfg->pmc_write_check == NULL) {

ERROR:SPACING: spaces required around that '=' (ctx:VxW)
#2356: FILE: perfmon/perfmon_pmu.c:245:
+	num_wc= 0;
 	      ^

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#2358: FILE: perfmon/perfmon_pmu.c:247:
+	for (i = 0; i < cfg->num_pmd_entries;  i++) {
+

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#2370: FILE: perfmon/perfmon_pmu.c:259:
+		if ((type & (PFM_REG_V|PFM_REG_RO)) == (PFM_REG_V|PFM_REG_RO))
 		                      ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#2370: FILE: perfmon/perfmon_pmu.c:259:
+		if ((type & (PFM_REG_V|PFM_REG_RO)) == (PFM_REG_V|PFM_REG_RO))
 		                                                 ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg->pmd_write_check"
#2374: FILE: perfmon/perfmon_pmu.c:263:
+	if (num_wc && cfg->pmd_write_check == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg->pmd_sread"
#2379: FILE: perfmon/perfmon_pmu.c:268:
+	if (nspec_ro && cfg->pmd_sread == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg->pmd_swrite"
#2385: FILE: perfmon/perfmon_pmu.c:274:
+	if (nspec && cfg->pmd_swrite == NULL) {

WARNING:LONG_LINE: line length of 105 exceeds 100 columns
#2411: FILE: perfmon/perfmon_pmu.c:300:
+	if (pfm_pmu_conf && (pmu_is_module(pfm_pmu_conf) == 0 || module_refcount(pfm_pmu_conf->owner))) {

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#2411: FILE: perfmon/perfmon_pmu.c:300:
+	if (pfm_pmu_conf && (pmu_is_module(pfm_pmu_conf) == 0 || module_refcount(pfm_pmu_conf->owner))) {
[...]
+	} else {
[...]

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cfg"
#2444: FILE: perfmon/perfmon_pmu.c:333:
+	if (cfg == NULL)

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2449: FILE: perfmon/perfmon_pmu.c:338:
+	BUG_ON(module_refcount(pfm_pmu_conf->owner));

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!mod_name"
#2466: FILE: perfmon/perfmon_pmu.c:355:
+	if (mod_name == NULL)

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#2467: FILE: perfmon/perfmon_pmu.c:356:
+		return -ENOSYS;

ENOSYS means that a nonexistent system call was called.
Earlier, it was wrongly used for things like invalid operations on
otherwise valid syscalls.  This should be avoided in new code.

See: https://lore.kernel.org/lkml/5eb299021dec23c1a48fa7d9f2c8b794e967766d.1408730669.git.luto@amacapital.net/

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2477: FILE: perfmon/perfmon_pmu.c:366:
+ * ^I0     : do not try to autoload the PMu description module$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2478: FILE: perfmon/perfmon_pmu.c:367:
+ * ^Inot 0 : try to autoload the PMu description module$

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#2487: FILE: perfmon/perfmon_pmu.c:376:
+		ret = -ENOSYS;

ERROR:TRAILING_WHITESPACE: trailing whitespace
#2490: FILE: perfmon/perfmon_pmu.c:379:
+^I$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pfm_pmu_conf"
#2491: FILE: perfmon/perfmon_pmu.c:380:
+	if (autoload && pfm_pmu_conf == NULL) {

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#2492: FILE: perfmon/perfmon_pmu.c:381:
+	if (autoload && pfm_pmu_conf == NULL) {
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#2508: FILE: perfmon/perfmon_pmu.c:397:
+^I} $

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#2510: FILE: perfmon/perfmon_pmu.c:399:
+	ret = pfm_pmu_conf == NULL ? -ENOSYS : 0;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pfm_pmu_conf"
#2510: FILE: perfmon/perfmon_pmu.c:399:
+	ret = pfm_pmu_conf == NULL ? -ENOSYS : 0;

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2513: FILE: perfmon/perfmon_pmu.c:402:
+	if (ret == 0 && pmu_is_module(pfm_pmu_conf)
+	    && !try_module_get(pfm_pmu_conf->owner))

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#2514: FILE: perfmon/perfmon_pmu.c:403:
+		ret = -ENOSYS;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pfm_pmu_conf"
#2523: FILE: perfmon/perfmon_pmu.c:412:
+	if (pfm_pmu_conf == NULL || pmu_is_module(pfm_pmu_conf) == 0)

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2533: FILE: perfmon/perfmon_res.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2554: FILE: perfmon/perfmon_res.c:22:
+ * ^Ihttp://www.hpl.hp.com/research/linux/perfmon$

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#2615: FILE: perfmon/perfmon_res.c:83:
+	if (locked > current->signal->rlim[RLIMIT_MEMLOCK].rlim_cur) {
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2666: FILE: perfmon/perfmon_res.c:134:
+
+

WARNING:SPLIT_STRING: quoted string split across lines
#2694: FILE: perfmon/perfmon_res.c:162:
+			PFM_DBG("system wide imppossible, %u conflicting"
+				"task_sessions\n",

WARNING:MISSING_SPACE: break quoted strings at a space character
#2694: FILE: perfmon/perfmon_res.c:162:
+			PFM_DBG("system wide imppossible, %u conflicting"
+				"task_sessions\n",

ERROR:CODE_INDENT: code indent should use tabs where possible
#2695: FILE: perfmon/perfmon_res.c:163:
+^I^I^I  ^Ipfm_sessions.pfs_task_sessions);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2695: FILE: perfmon/perfmon_res.c:163:
+^I^I^I  ^Ipfm_sessions.pfs_task_sessions);$

WARNING:SPLIT_STRING: quoted string split across lines
#2701: FILE: perfmon/perfmon_res.c:169:
+			PFM_DBG("syswide not possible, conflicting session "
+				"on CPU%u\n", cpu);

WARNING:SPLIT_STRING: quoted string split across lines
#2706: FILE: perfmon/perfmon_res.c:174:
+		PFM_DBG("reserving syswide session on CPU%u currently "
+			"on CPU%u\n",

WARNING:SPACING: space prohibited before semicolon
#2712: FILE: perfmon/perfmon_res.c:180:
+		pfm_sessions.pfs_sys_sessions++ ;

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#2777: FILE: perfmon/perfmon_res.c:245:
+static struct _pfm_pmu_config empty_config={
                                           ^

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#2794: FILE: perfmon/perfmon_res.c:262:
+	switch(what) {
+		case 0: ret = snprintf(buf, sz, "%s\n", p->pmu_name);
[...]
+		case 1: ret = snprintf(buf, sz, "%d\n", p->counter_width);
[...]
+		case 2: ret = snprintf(buf, sz, "%u\n", pfm_sessions.pfs_task_sessions);
[...]
+		case 3: ret = snprintf(buf, sz, "%u\n", pfm_sessions.pfs_sys_sessions);
[...]
+		case 4: ret = snprintf(buf, sz, "%zu\n", pfm_sessions.pfs_cur_smpl_buf_mem);

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

ERROR:SPACING: space required before the open parenthesis '('
#2794: FILE: perfmon/perfmon_res.c:262:
+	switch(what) {

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#2795: FILE: perfmon/perfmon_res.c:263:
+		case 0: ret = snprintf(buf, sz, "%s\n", p->pmu_name);

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#2797: FILE: perfmon/perfmon_res.c:265:
+		case 1: ret = snprintf(buf, sz, "%d\n", p->counter_width);

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#2799: FILE: perfmon/perfmon_res.c:267:
+		case 2: ret = snprintf(buf, sz, "%u\n", pfm_sessions.pfs_task_sessions);

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#2801: FILE: perfmon/perfmon_res.c:269:
+		case 3: ret = snprintf(buf, sz, "%u\n", pfm_sessions.pfs_sys_sessions);

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#2803: FILE: perfmon/perfmon_res.c:271:
+		case 4: ret = snprintf(buf, sz, "%zu\n", pfm_sessions.pfs_cur_smpl_buf_mem);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2814: FILE: perfmon/perfmon_syscalls.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2835: FILE: perfmon/perfmon_syscalls.c:22:
+ * ^Ihttp://www.hpl.hp.com/research/linux/perfmon$

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#2839: FILE: perfmon/perfmon_syscalls.c:26:
+#include <asm/uaccess.h>

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'task->state != TASK_STOPPED'
#2912: FILE: perfmon/perfmon_syscalls.c:99:
+		if ((task->state != TASK_STOPPED)
+		     && (task->state != TASK_TRACED)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'task->state != TASK_TRACED'
#2912: FILE: perfmon/perfmon_syscalls.c:99:
+		if ((task->state != TASK_STOPPED)
+		     && (task->state != TASK_TRACED)) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2913: FILE: perfmon/perfmon_syscalls.c:100:
+		if ((task->state != TASK_STOPPED)
+		     && (task->state != TASK_TRACED)) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!addr"
#2974: FILE: perfmon/perfmon_syscalls.c:161:
+	if (unlikely(addr == NULL))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!f"
#3001: FILE: perfmon/perfmon_syscalls.c:188:
+	if (f == NULL) {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#3017: FILE: perfmon/perfmon_syscalls.c:204:
+^I$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!addr"
#3020: FILE: perfmon/perfmon_syscalls.c:207:
+	if (addr == NULL)

WARNING:LONG_LINE: line length of 106 exceeds 100 columns
#3037: FILE: perfmon/perfmon_syscalls.c:224:
+asmlinkage long sys_pfm_create_context(struct pfarg_ctx __user *ureq, void __user *uarg, size_t smpl_size)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3070: FILE: perfmon/perfmon_syscalls.c:257:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3083: FILE: perfmon/perfmon_syscalls.c:270:
+	if (unlikely(ctx == NULL))

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3086: FILE: perfmon/perfmon_syscalls.c:273:
+
+

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3087: FILE: perfmon/perfmon_syscalls.c:274:
+	sz = count*sizeof(*ureq);
 	          ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3122: FILE: perfmon/perfmon_syscalls.c:309:
+	if (unlikely(ctx == NULL))

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3125: FILE: perfmon/perfmon_syscalls.c:312:
+
+

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3126: FILE: perfmon/perfmon_syscalls.c:313:
+	sz = count*sizeof(*ureq);
 	          ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3161: FILE: perfmon/perfmon_syscalls.c:348:
+	if (unlikely(ctx == NULL))

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3164: FILE: perfmon/perfmon_syscalls.c:351:
+	sz = count*sizeof(*ureq);
 	          ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3194: FILE: perfmon/perfmon_syscalls.c:381:
+	if (unlikely(ctx == NULL))

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3210: FILE: perfmon/perfmon_syscalls.c:397:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3218: FILE: perfmon/perfmon_syscalls.c:405:
+	if (unlikely(ctx == NULL))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3242: FILE: perfmon/perfmon_syscalls.c:429:
+	if (ctx == NULL)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3264: FILE: perfmon/perfmon_syscalls.c:451:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3274: FILE: perfmon/perfmon_syscalls.c:461:
+	if (ctx == NULL)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3293: FILE: perfmon/perfmon_syscalls.c:480:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3301: FILE: perfmon/perfmon_syscalls.c:488:
+	if (ctx == NULL)

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#3306: FILE: perfmon/perfmon_syscalls.c:493:
+	ret = pfm_check_task_state(ctx, PFM_CMD_STOPPED|PFM_CMD_UNLOAD, &flags);
 	                                               ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3329: FILE: perfmon/perfmon_syscalls.c:516:
+	if (ctx == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3332: FILE: perfmon/perfmon_syscalls.c:519:
+	sz = count*sizeof(*ureq);
 	          ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3369: FILE: perfmon/perfmon_syscalls.c:556:
+	if (ctx == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3372: FILE: perfmon/perfmon_syscalls.c:559:
+	sz = count*sizeof(*ureq);
 	          ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ctx"
#3409: FILE: perfmon/perfmon_syscalls.c:596:
+	if (ctx == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3412: FILE: perfmon/perfmon_syscalls.c:599:
+	sz = count*sizeof(*ureq);
 	          ^

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#3438: FILE: perfmon/perfmon_sysfs.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3459: FILE: perfmon/perfmon_sysfs.c:22:
+ * ^Ihttp://www.hpl.hp.com/research/linux/perfmon$

WARNING:INCLUDE_LINUX: Use #include <linux/bitops.h> instead of <asm/bitops.h>
#3472: FILE: perfmon/perfmon_sysfs.c:35:
+#include <asm/bitops.h>

WARNING:INCLUDE_LINUX: Use #include <linux/processor.h> instead of <asm/processor.h>
#3474: FILE: perfmon/perfmon_sysfs.c:37:
+#include <asm/processor.h>

WARNING:FUNCTION_ARGUMENTS: function definition argument 'void *' should also have an identifier name
#3478: FILE: perfmon/perfmon_sysfs.c:41:
+	ssize_t (*show)(void *, char *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'char *' should also have an identifier name
#3478: FILE: perfmon/perfmon_sysfs.c:41:
+	ssize_t (*show)(void *, char *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'void *' should also have an identifier name
#3479: FILE: perfmon/perfmon_sysfs.c:42:
+	ssize_t (*store)(void *, const char *, size_t);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'const char *' should also have an identifier name
#3479: FILE: perfmon/perfmon_sysfs.c:42:
+	ssize_t (*store)(void *, const char *, size_t);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'size_t' should also have an identifier name
#3479: FILE: perfmon/perfmon_sysfs.c:42:
+	ssize_t (*store)(void *, const char *, size_t);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#3481: FILE: perfmon/perfmon_sysfs.c:44:
+};
+#define to_attr(n) container_of(n, struct pfm_attribute, attr);

WARNING:TRAILING_SEMICOLON: macros should not use a trailing semicolon
#3481: FILE: perfmon/perfmon_sysfs.c:44:
+#define to_attr(n) container_of(n, struct pfm_attribute, attr);

Macro definition should not end with a semicolon. The macro
invocation style should be consistent with function calls.
This can prevent any unexpected code paths::

  #define MAC do_something;

If this macro is used within a if else statement, like::

  if (some_condition)
          MAC;

  else
          do_something;

Then there would be a compilation error, because when the macro is
expanded there are two trailing semicolons, so the else branch gets
orphaned.

See: https://lore.kernel.org/lkml/1399671106.2912.21.camel@joe-AO725/

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3486: FILE: perfmon/perfmon_sysfs.c:49:
+#define PFM_RW_ATTR(_name,_mode,_show,_store) ^I^I^I\$

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3486: FILE: perfmon/perfmon_sysfs.c:49:
+#define PFM_RW_ATTR(_name,_mode,_show,_store) 			\
                          ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3486: FILE: perfmon/perfmon_sysfs.c:49:
+#define PFM_RW_ATTR(_name,_mode,_show,_store) 			\
                                ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3486: FILE: perfmon/perfmon_sysfs.c:49:
+#define PFM_RW_ATTR(_name,_mode,_show,_store) 			\
                                      ^

WARNING:TRAILING_SEMICOLON: macros should not use a trailing semicolon
#3486: FILE: perfmon/perfmon_sysfs.c:49:
+#define PFM_RW_ATTR(_name,_mode,_show,_store) 			\
+struct pfm_attribute attr_##_name = __ATTR(_name,_mode,_show,_store);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3487: FILE: perfmon/perfmon_sysfs.c:50:
+struct pfm_attribute attr_##_name = __ATTR(_name,_mode,_show,_store);
                                                 ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3487: FILE: perfmon/perfmon_sysfs.c:50:
+struct pfm_attribute attr_##_name = __ATTR(_name,_mode,_show,_store);
                                                       ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3487: FILE: perfmon/perfmon_sysfs.c:50:
+struct pfm_attribute attr_##_name = __ATTR(_name,_mode,_show,_store);
                                                             ^

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#3493: FILE: perfmon/perfmon_sysfs.c:56:
+int pfm_sysfs_add_pmu(struct _pfm_pmu_config *pmu);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#3516: FILE: perfmon/perfmon_sysfs.c:79:
+	for_each_online_cpu(m) {
+

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3517: FILE: perfmon/perfmon_sysfs.c:80:
+		st = &per_cpu(pfm_stats,m);
 		                       ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3536: FILE: perfmon/perfmon_sysfs.c:99:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3538: FILE: perfmon/perfmon_sysfs.c:101:
+static ssize_t pfm_fmt_attr_show(struct kobject *kobj,
+		struct attribute *attr, char *buf)

WARNING:LINE_SPACING: Missing a blank line after declarations
#3542: FILE: perfmon/perfmon_sysfs.c:105:
+	struct pfm_attribute *attribute = to_attr(attr);
+	return attribute->show ? attribute->show(fmt, buf) : -EIO;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3546: FILE: perfmon/perfmon_sysfs.c:109:
+static ssize_t pfm_pmu_attr_show(struct kobject *kobj,
+		struct attribute *attr, char *buf)

ERROR:SPACING: spaces required around that '=' (ctx:VxW)
#3548: FILE: perfmon/perfmon_sysfs.c:111:
+	struct _pfm_pmu_config *pmu= to_pmu(kobj);
 	                           ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#3550: FILE: perfmon/perfmon_sysfs.c:113:
+	struct pfm_attribute *attribute = to_attr(attr);
+	return attribute->show ? attribute->show(pmu, buf) : -EIO;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3554: FILE: perfmon/perfmon_sysfs.c:117:
+static ssize_t pfm_stats_attr_show(struct kobject *kobj,
+		struct attribute *attr, char *buf)

WARNING:LINE_SPACING: Missing a blank line after declarations
#3558: FILE: perfmon/perfmon_sysfs.c:121:
+	struct pfm_attribute *attribute = to_attr(attr);
+	return attribute->show ? attribute->show(st, buf) : -EIO;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3562: FILE: perfmon/perfmon_sysfs.c:125:
+static ssize_t pfm_stats_attr_store(struct kobject *kobj,
+		struct attribute *attr, const char *buf, size_t count)

WARNING:LINE_SPACING: Missing a blank line after declarations
#3566: FILE: perfmon/perfmon_sysfs.c:129:
+	struct pfm_attribute *attribute = to_attr(attr);
+	return attribute->store ? attribute->store(st, buf, count) : -EIO;

WARNING:CONST_STRUCT: struct sysfs_ops should normally be const
#3569: FILE: perfmon/perfmon_sysfs.c:132:
+static struct sysfs_ops pfm_fmt_sysfs_ops = {

WARNING:CONST_STRUCT: struct sysfs_ops should normally be const
#3573: FILE: perfmon/perfmon_sysfs.c:136:
+static struct sysfs_ops pfm_pmu_sysfs_ops = {

WARNING:CONST_STRUCT: struct sysfs_ops should normally be const
#3577: FILE: perfmon/perfmon_sysfs.c:140:
+static struct sysfs_ops pfm_stats_sysfs_ops = {

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3637: FILE: perfmon/perfmon_sysfs.c:200:
+	if (sscanf(buf,"%d", &d) != 1)
 	              ^

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#3637: FILE: perfmon/perfmon_sysfs.c:200:
+	if (sscanf(buf,"%d", &d) != 1)
+		return -EINVAL;

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3656: FILE: perfmon/perfmon_sysfs.c:219:
+	if (sscanf(buf,"%d", &d) != 1)
 	              ^

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#3656: FILE: perfmon/perfmon_sysfs.c:219:
+	if (sscanf(buf,"%d", &d) != 1)
+		return -EINVAL;

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#3666: FILE: perfmon/perfmon_sysfs.c:229:
+	buf[0]='0';
 	      ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#3667: FILE: perfmon/perfmon_sysfs.c:230:
+	buf[1]='\0';
 	      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3686: FILE: perfmon/perfmon_sysfs.c:249:
+	if (sscanf(buf,"%d", &d) != 1)
 	              ^

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#3686: FILE: perfmon/perfmon_sysfs.c:249:
+	if (sscanf(buf,"%d", &d) != 1)
+		return -EINVAL;

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3703: FILE: perfmon/perfmon_sysfs.c:266:
+	if (sscanf(buf,"%d", &d) != 1)
 	              ^

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#3703: FILE: perfmon/perfmon_sysfs.c:266:
+	if (sscanf(buf,"%d", &d) != 1)
+		return -EINVAL;

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3720: FILE: perfmon/perfmon_sysfs.c:283:
+	if (sscanf(buf,"%d", &d) != 1)
 	              ^

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#3720: FILE: perfmon/perfmon_sysfs.c:283:
+	if (sscanf(buf,"%d", &d) != 1)
+		return -EINVAL;

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3737: FILE: perfmon/perfmon_sysfs.c:300:
+	if (sscanf(buf,"%zu", &d) != 1)
 	              ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3759: FILE: perfmon/perfmon_sysfs.c:322:
+	if (sscanf(buf,"%zu", &d) != 1)
 	              ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3814: FILE: perfmon/perfmon_sysfs.c:377:
+
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#3818: FILE: perfmon/perfmon_sysfs.c:381:
+^I$

WARNING:LINE_SPACING: Missing a blank line after declarations
#3892: FILE: perfmon/perfmon_sysfs.c:455:
+	struct pfm_stats *st = info;
+	return snprintf(buf, PAGE_SIZE, "%llu\n",

WARNING:LINE_SPACING: Missing a blank line after declarations
#3900: FILE: perfmon/perfmon_sysfs.c:463:
+	struct pfm_stats *st = info;
+	return snprintf(buf, PAGE_SIZE, "%llu\n",

WARNING:SPLIT_STRING: quoted string split across lines
#3953: FILE: perfmon/perfmon_sysfs.c:516:
+	return snprintf(buf, PAGE_SIZE, "%02x-%02x-%02x-%02x-%02x-%02x-%02x-%02x"
+			   "-%02x-%02x-%02x-%02x-%02x-%02x-%02x-%02x\n",

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#4015: FILE: perfmon/perfmon_sysfs.c:578:
+	for (i = 0; i < PFM_MAX_PMCS;  i++) {
+

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#4031: FILE: perfmon/perfmon_sysfs.c:594:
+	for (i = 0; i < PFM_MAX_PMDS;  i++) {
+

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000072770.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 69 errors, 156 warnings, 149 checks, 4027 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000072770.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
