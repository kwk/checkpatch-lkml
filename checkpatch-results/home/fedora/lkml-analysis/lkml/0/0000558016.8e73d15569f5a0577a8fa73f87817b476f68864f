WARNING:PATCH_PREFIX: patch prefix 'drivers' exists, appears to be a -p0 patch

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#41: FILE: ide/ide-floppy.c:2:
+ * linux/drivers/ide/ide-floppy.c	Version 0.9.sv	Jan 6 2001

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

ERROR:SPACING: spaces required around that '=' (ctx:VxW)
#119: FILE: ide/ide-floppy.c:769:
+	floppy->progress_indication= result->sksv[0] & 0x80 ?
 	                           ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#120: FILE: ide/ide-floppy.c:770:
+		(unsigned short)get_unaligned((u16 *)(result->sksv+1)):0x10000;
 		                                                  ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#120: FILE: ide/ide-floppy.c:770:
+		(unsigned short)get_unaligned((u16 *)(result->sksv+1)):0x10000;
 		                                                      ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#129: FILE: ide/ide-floppy.c:979:
+	atapi_output_bytes (drive, floppy->pc->c, 12); /* Send the actual packet */

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#137: FILE: ide/ide-floppy.c:1087:
+static void idefloppy_create_format_unit_cmd (idefloppy_pc_t *pc, int b, int l)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#139: FILE: ide/ide-floppy.c:1089:
+	idefloppy_init_pc (pc);

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#149: FILE: ide/ide-floppy.c:1099:
+	pc->buffer_size=12;
 	               ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#167: FILE: ide/ide-floppy.c:1283:
+	floppy->srfp=0;
 	            ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#168: FILE: ide/ide-floppy.c:1284:
+	idefloppy_create_mode_sense_cmd (&pc, IDEFLOPPY_CAPABILITIES_PAGE,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#169: FILE: ide/ide-floppy.c:1285:
+	idefloppy_create_mode_sense_cmd (&pc, IDEFLOPPY_CAPABILITIES_PAGE,
+						 MODE_SENSE_CURRENT);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#170: FILE: ide/ide-floppy.c:1286:
+	if (idefloppy_queue_pc_tail (drive,&pc)) {

ERROR:SPACING: space required after that ',' (ctx:VxO)
#170: FILE: ide/ide-floppy.c:1286:
+	if (idefloppy_queue_pc_tail (drive,&pc)) {
 	                                  ^

ERROR:SPACING: space required before that '&' (ctx:OxV)
#170: FILE: ide/ide-floppy.c:1286:
+	if (idefloppy_queue_pc_tail (drive,&pc)) {
 	                                   ^

WARNING:BRACES: braces {} are not necessary for single statement blocks
#170: FILE: ide/ide-floppy.c:1286:
+	if (idefloppy_queue_pc_tail (drive,&pc)) {
+		return 1;
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:SPACING: No space is necessary after a cast
#173: FILE: ide/ide-floppy.c:1289:
+	header = (idefloppy_mode_parameter_header_t *) pc.buffer;

ERROR:SPACING: spaces required around that '=' (ctx:VxW)
#174: FILE: ide/ide-floppy.c:1290:
+	page= (idefloppy_capabilities_page_t *)(header+1);
 	    ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#174: FILE: ide/ide-floppy.c:1290:
+	page= (idefloppy_capabilities_page_t *)(header+1);
 	                                              ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#175: FILE: ide/ide-floppy.c:1291:
+	floppy->srfp=page->srfp;
 	            ^

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#176: FILE: ide/ide-floppy.c:1292:
+	return (0);

return is not a function and as such doesn't need parentheses::

  return (bar);

can simply be::

  return bar;

CHECK:SPACING: No space is necessary after a cast
#186: FILE: ide/ide-floppy.c:1346:
+	(void) idefloppy_get_capability_page (drive);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#186: FILE: ide/ide-floppy.c:1346:
+	(void) idefloppy_get_capability_page (drive);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#213: FILE: ide/ide-floppy.c:1373:
+static int idefloppy_get_format_capacities (ide_drive_t *drive,

ERROR:CODE_INDENT: code indent should use tabs where possible
#218: FILE: ide/ide-floppy.c:1378:
+        idefloppy_pc_t pc;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#218: FILE: ide/ide-floppy.c:1378:
+        idefloppy_pc_t pc;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#220: FILE: ide/ide-floppy.c:1380:
+        idefloppy_capacity_descriptor_t *descriptor;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#220: FILE: ide/ide-floppy.c:1380:
+        idefloppy_capacity_descriptor_t *descriptor;$

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#232: FILE: ide/ide-floppy.c:1392:
+	idefloppy_create_read_capacity_cmd (&pc);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#233: FILE: ide/ide-floppy.c:1393:
+	if (idefloppy_queue_pc_tail (drive, &pc)) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#234: FILE: ide/ide-floppy.c:1394:
+		printk (KERN_ERR "ide-floppy: Can't get floppy parameters\n");

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#234: FILE: ide/ide-floppy.c:1394:
+		printk (KERN_ERR "ide-floppy: Can't get floppy parameters\n");

ERROR:CODE_INDENT: code indent should use tabs where possible
#235: FILE: ide/ide-floppy.c:1395:
+                return (-EIO);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#235: FILE: ide/ide-floppy.c:1395:
+                return (-EIO);$

ERROR:CODE_INDENT: code indent should use tabs where possible
#236: FILE: ide/ide-floppy.c:1396:
+        }$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#236: FILE: ide/ide-floppy.c:1396:
+        }$

ERROR:CODE_INDENT: code indent should use tabs where possible
#237: FILE: ide/ide-floppy.c:1397:
+        header = (idefloppy_capacity_header_t *) pc.buffer;$

CHECK:SPACING: No space is necessary after a cast
#237: FILE: ide/ide-floppy.c:1397:
+        header = (idefloppy_capacity_header_t *) pc.buffer;

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#237: FILE: ide/ide-floppy.c:1397:
+        header = (idefloppy_capacity_header_t *) pc.buffer;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#238: FILE: ide/ide-floppy.c:1398:
+        descriptors = header->length /$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#238: FILE: ide/ide-floppy.c:1398:
+        descriptors = header->length /$

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#239: FILE: ide/ide-floppy.c:1399:
+		sizeof (idefloppy_capacity_descriptor_t);

CHECK:SPACING: No space is necessary after a cast
#240: FILE: ide/ide-floppy.c:1400:
+	descriptor = (idefloppy_capacity_descriptor_t *) (header + 1);

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#242: FILE: ide/ide-floppy.c:1402:
+	u_index=0;
 	       ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#243: FILE: ide/ide-floppy.c:1403:
+	argp=arg+1;
 	    ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#243: FILE: ide/ide-floppy.c:1403:
+	argp=arg+1;
 	        ^

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#246: FILE: ide/ide-floppy.c:1406:
+	/*
+	** We always skip the first capacity descriptor.  That's the

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#251: FILE: ide/ide-floppy.c:1411:
+	for (i=0; i<descriptors; i++, descriptor++)
+	{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#251: FILE: ide/ide-floppy.c:1411:
+	for (i=0; i<descriptors; i++, descriptor++)
 	      ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#251: FILE: ide/ide-floppy.c:1411:
+	for (i=0; i<descriptors; i++, descriptor++)
 	           ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#258: FILE: ide/ide-floppy.c:1418:
+		blocks = ntohl (descriptor->blocks);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#259: FILE: ide/ide-floppy.c:1419:
+		length = ntohs (descriptor->length);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#274: FILE: ide/ide-floppy.c:1434:
+	return (0);

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#278: FILE: ide/ide-floppy.c:1438:
+/*
+** Send ATAPI_FORMAT_UNIT to the drive.

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#297: FILE: ide/ide-floppy.c:1457:
+	if (get_user(blocks, arg)
+	    || get_user(length, arg+1))
+	{

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#298: FILE: ide/ide-floppy.c:1458:
+	if (get_user(blocks, arg)
+	    || get_user(length, arg+1))

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#298: FILE: ide/ide-floppy.c:1458:
+	    || get_user(length, arg+1))
 	                           ^

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#304: FILE: ide/ide-floppy.c:1464:
+	if (idefloppy_queue_pc_tail (drive, &pc))
+	{

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#304: FILE: ide/ide-floppy.c:1464:
+	if (idefloppy_queue_pc_tail (drive, &pc))

ERROR:CODE_INDENT: code indent should use tabs where possible
#306: FILE: ide/ide-floppy.c:1466:
+                return (-EIO);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#306: FILE: ide/ide-floppy.c:1466:
+                return (-EIO);$

ERROR:CODE_INDENT: code indent should use tabs where possible
#307: FILE: ide/ide-floppy.c:1467:
+        }$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#307: FILE: ide/ide-floppy.c:1467:
+        }$

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#312: FILE: ide/ide-floppy.c:1472:
+/*
+** Get ATAPI_FORMAT_UNIT progress indication.

WARNING:TYPO_SPELLING: 'progresss' may be misspelled - perhaps 'progress'?
#314: FILE: ide/ide-floppy.c:1474:
+** Userland gives a pointer to an int.  The int is set to a progresss
                                                             ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#328: FILE: ide/ide-floppy.c:1488:
+	int progress_indication=0x10000;
 	                       ^

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#330: FILE: ide/ide-floppy.c:1490:
+	if (floppy->srfp)
+	{

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#333: FILE: ide/ide-floppy.c:1493:
+		if (idefloppy_queue_pc_tail (drive, &pc))
+		{

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#333: FILE: ide/ide-floppy.c:1493:
+		if (idefloppy_queue_pc_tail (drive, &pc))

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#338: FILE: ide/ide-floppy.c:1498:
+		if (floppy->sense_key == 2 && floppy->asc == 4 &&
+		    floppy->ascq == 4)
+		{

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#341: FILE: ide/ide-floppy.c:1501:
+			progress_indication=floppy->progress_indication;
 			                   ^

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#348: FILE: ide/ide-floppy.c:1508:
+	return (0);

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#384: FILE: ide/ide-floppy.c:1545:
+			if (drive->usage > 1)
+			{

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#392: FILE: ide/ide-floppy.c:1553:
+			else
+			{

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#392: FILE: ide/ide-floppy.c:1553:
+			}
+			else

`else {` should follow the closing block `}` on the same line.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#394: FILE: ide/ide-floppy.c:1555:
+				int rc=idefloppy_begin_format(drive, inode,
 				      ^

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#401: FILE: ide/ide-floppy.c:1562:
+				return (rc);

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#404: FILE: ide/ide-floppy.c:1565:
+			/*
+			** Note, the bit will be cleared when the device is

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#421: FILE: ide/ide-floppy.c:1593:
 	if (drive->usage == 1) {
+

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#444: FILE: ide/ide-floppy.c:1619:
+	else if (test_bit(IDEFLOPPY_FORMAT_IN_PROGRESS, &floppy->flags))
+	{

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#444: FILE: ide/ide-floppy.c:1619:
 	}
+	else if (test_bit(IDEFLOPPY_FORMAT_IN_PROGRESS, &floppy->flags))

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000558016.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 37 errors, 32 warnings, 12 checks, 412 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000558016.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
