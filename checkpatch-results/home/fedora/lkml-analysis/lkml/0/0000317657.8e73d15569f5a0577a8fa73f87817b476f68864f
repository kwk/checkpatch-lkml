WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#25: 
V4L: - fix a bunch of race conditions and locking bugs in video and vbi capture code on device closure

WARNING:TYPO_SPELLING: 'arbitrition' may be misspelled - perhaps 'arbitration'?
#36: 
V4L: - set up arbitrition control for video dma3 correctly
              ^^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

ERROR:SPACING: space required before the open parenthesis '('
#54: FILE: drivers/media/common/saa7146_core.c:57:
+	if(pin > 3)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space prohibited before that close parenthesis ')'
#58: FILE: drivers/media/common/saa7146_core.c:61:
+	value = saa7146_read(dev, GPIO_CTRL );

ERROR:TRAILING_WHITESPACE: trailing whitespace
#59: FILE: drivers/media/common/saa7146_core.c:62:
+^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#60: FILE: drivers/media/common/saa7146_core.c:63:
+	value &= ~(0xff << (8*pin));
 	                     ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#61: FILE: drivers/media/common/saa7146_core.c:64:
+	value |= (data << (8*pin));
 	                    ^

ERROR:CODE_INDENT: code indent should use tabs where possible
#74: FILE: drivers/media/common/saa7146_core.c:77:
+                if (saa7146_read(dev, MC2) & 2)$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#74: FILE: drivers/media/common/saa7146_core.c:77:
+                if (saa7146_read(dev, MC2) & 2)$

ERROR:CODE_INDENT: code indent should use tabs where possible
#75: FILE: drivers/media/common/saa7146_core.c:78:
+                        break;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#75: FILE: drivers/media/common/saa7146_core.c:78:
+                        break;$

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#76: FILE: drivers/media/common/saa7146_core.c:79:
+		if (jiffies-start > HZ/20) {
 		           ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#76: FILE: drivers/media/common/saa7146_core.c:79:
+		if (jiffies-start > HZ/20) {
 		                      ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#88: FILE: drivers/media/common/saa7146_core.c:91:
+		if (jiffies-start > HZ/4) {
 		           ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#88: FILE: drivers/media/common/saa7146_core.c:91:
+		if (jiffies-start > HZ/4) {
 		                      ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#102: FILE: drivers/media/common/saa7146_core.c:104:
+/* this is videobuf_vmalloc_to_sg() from video-buf.c $

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#103: FILE: drivers/media/common/saa7146_core.c:105:
+/* this is videobuf_vmalloc_to_sg() from video-buf.c 
+   make sure virt has been allocated with vmalloc_32(), otherwise the BUG()

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#104: FILE: drivers/media/common/saa7146_core.c:106:
+   may be triggered on highmem machines */

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#122: FILE: drivers/media/common/saa7146_core.c:161:
+	if (0 != saa7146_pgtable_build_single(pci, pt, slist, slen)) {

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:BRACES: braces {} are not necessary for single statement blocks
#122: FILE: drivers/media/common/saa7146_core.c:161:
+	if (0 != saa7146_pgtable_build_single(pci, pt, slist, slen)) {
+		return NULL;
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#134: FILE: drivers/media/common/saa7146_core.c:200:
+int saa7146_pgtable_build_single(struct pci_dev *pci, struct saa7146_pgtable *pt,
 	struct scatterlist *list, int sglen  )

ERROR:TRAILING_WHITESPACE: trailing whitespace
#145: FILE: drivers/media/common/saa7146_core.c:212:
+^I$

WARNING:TYPO_SPELLING: 'arbitrition' may be misspelled - perhaps 'arbitration'?
#172: FILE: drivers/media/common/saa7146_core.c:446:
+	/* set some sane pci arbitrition values */
 	                     ^^^^^^^^^^^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#173: FILE: drivers/media/common/saa7146_core.c:447:
+^Isaa7146_write(dev, PCI_BT_V1, 0x1c00101f); $

WARNING:LONG_LINE: line length of 103 exceeds 100 columns
#202: FILE: drivers/media/common/saa7146_fops.c:101:
+		DEB_INT(("next buffer: buf:%p, prev:%p, next:%p\n", buf, q->queue.prev,q->queue.next));

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

ERROR:SPACING: space required after that ',' (ctx:VxV)
#202: FILE: drivers/media/common/saa7146_fops.c:101:
+		DEB_INT(("next buffer: buf:%p, prev:%p, next:%p\n", buf, q->queue.prev,q->queue.next));
 		                                                                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#215: FILE: drivers/media/common/saa7146_fops.c:232:
+		saa7146_vbi_uops.open(dev,file);
 		                         ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#219: FILE: drivers/media/common/saa7146_fops.c:235:
+		saa7146_video_uops.open(dev,file);
 		                           ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#228: FILE: drivers/media/common/saa7146_fops.c:258:
+		saa7146_vbi_uops.release(dev,file);
 		                            ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#231: FILE: drivers/media/common/saa7146_fops.c:260:
+		saa7146_video_uops.release(dev,file);
 		                              ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#240: FILE: drivers/media/common/saa7146_fops.c:375:
+	DEB_INT(("dev:%p, isr:0x%08x\n",dev,(u32)status));
 	                               ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#240: FILE: drivers/media/common/saa7146_fops.c:375:
+	DEB_INT(("dev:%p, isr:0x%08x\n",dev,(u32)status));
 	                                   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#334: FILE: drivers/media/common/saa7146_i2c.c:221:
+			if (time_after(jiffies,timeout)) {
 			                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#343: FILE: drivers/media/common/saa7146_i2c.c:236:
+			if (time_after(jiffies,timeout)) {
 			                      ^

ERROR:SPACING: space prohibited after that open parenthesis '('
#352: FILE: drivers/media/common/saa7146_i2c.c:304:
+	if ( count > 3 || 0 != (SAA7146_I2C_SHORT_DELAY & dev->ext->flags) )

ERROR:SPACING: space prohibited before that close parenthesis ')'
#352: FILE: drivers/media/common/saa7146_i2c.c:304:
+	if ( count > 3 || 0 != (SAA7146_I2C_SHORT_DELAY & dev->ext->flags) )

WARNING:LINUX_VERSION_CODE: LINUX_VERSION_CODE should be avoided, code should be for the version to which it is merged
#370: FILE: drivers/media/common/saa7146_i2c.c:416:
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0))

ERROR:SPACING: space required after that ',' (ctx:VxV)
#370: FILE: drivers/media/common/saa7146_i2c.c:416:
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0))
                                           ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#370: FILE: drivers/media/common/saa7146_i2c.c:416:
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0))
                                             ^

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#370: FILE: drivers/media/common/saa7146_i2c.c:416:
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0))

WARNING:LINUX_VERSION_CODE: LINUX_VERSION_CODE should be avoided, code should be for the version to which it is merged
#381: FILE: drivers/media/common/saa7146_i2c.c:426:
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0))

ERROR:SPACING: space required after that ',' (ctx:VxV)
#381: FILE: drivers/media/common/saa7146_i2c.c:426:
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0))
                                           ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#381: FILE: drivers/media/common/saa7146_i2c.c:426:
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0))
                                             ^

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#381: FILE: drivers/media/common/saa7146_i2c.c:426:
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0))

WARNING:LONG_LINE: line length of 113 exceeds 100 columns
#423: FILE: drivers/media/common/saa7146_vbi.c:252:
+		err = saa7146_pgtable_build_single(dev->pci, &buf->pt[2], buf->vb.dma.sglist, buf->vb.dma.sglen);

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#424: FILE: drivers/media/common/saa7146_vbi.c:253:
+		if (0 != err)

WARNING:BRACES: braces {} are not necessary for single statement blocks
#442: FILE: drivers/media/common/saa7146_vbi.c:331:
+	if (vv->vbi_q.curr) {
+		saa7146_buffer_finish(dev,&vv->vbi_q,STATE_DONE);
+	}

ERROR:SPACING: space required after that ',' (ctx:VxO)
#443: FILE: drivers/media/common/saa7146_vbi.c:332:
+		saa7146_buffer_finish(dev,&vv->vbi_q,STATE_DONE);
 		                         ^

ERROR:SPACING: space required before that '&' (ctx:OxV)
#443: FILE: drivers/media/common/saa7146_vbi.c:332:
+		saa7146_buffer_finish(dev,&vv->vbi_q,STATE_DONE);
 		                          ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#443: FILE: drivers/media/common/saa7146_vbi.c:332:
+		saa7146_buffer_finish(dev,&vv->vbi_q,STATE_DONE);
 		                                    ^

ERROR:SPACING: space required after that ',' (ctx:VxO)
#446: FILE: drivers/media/common/saa7146_vbi.c:335:
+	videobuf_queue_cancel(file,&fh->vbi_q);
 	                          ^

ERROR:SPACING: space required before that '&' (ctx:OxV)
#446: FILE: drivers/media/common/saa7146_vbi.c:335:
+	videobuf_queue_cancel(file,&fh->vbi_q);
 	                           ^

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#460: FILE: drivers/media/common/saa7146_vbi.c:347:
+	struct file *file = (struct file*)data;

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#479: FILE: drivers/media/common/saa7146_vbi.c:373:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#482: FILE: drivers/media/common/saa7146_vbi.c:376:
+^I$

WARNING:TYPO_SPELLING: 'arbitrition' may be misspelled - perhaps 'arbitration'?
#485: FILE: drivers/media/common/saa7146_vbi.c:379:
+	/* adjust arbitrition control for video dma 3 */
 	          ^^^^^^^^^^^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#489: FILE: drivers/media/common/saa7146_vbi.c:383:
+^Isaa7146_write(dev, MC2, (MASK_04|MASK_20));^I^I$

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#489: FILE: drivers/media/common/saa7146_vbi.c:383:
+	saa7146_write(dev, MC2, (MASK_04|MASK_20));		
 	                                ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#490: FILE: drivers/media/common/saa7146_vbi.c:384:
+^I$

ERROR:SPACING: space prohibited after that open parenthesis '('
#506: FILE: drivers/media/common/saa7146_vbi.c:410:
+	if ( 0 != (SAA7146_USE_PORT_B_FOR_VBI & dev->ext_vv_data->flags)) {

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#507: FILE: drivers/media/common/saa7146_vbi.c:411:
+		saa7146_write(dev, BRS_CTRL, MASK_30|MASK_29 | (7 << 19));
 		                                    ^

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#511: FILE: drivers/media/common/saa7146_vbi.c:415:
+		if (0 != (ret = vbi_workaround(dev))) {

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#518: FILE: drivers/media/common/saa7146_vbi.c:422:
+^Isaa7146_write(dev, MC2, (MASK_08|MASK_24));^I^I$

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#518: FILE: drivers/media/common/saa7146_vbi.c:422:
+	saa7146_write(dev, MC2, (MASK_08|MASK_24));		
 	                                ^

ERROR:SPACING: space required after that ',' (ctx:VxO)
#619: FILE: drivers/media/common/saa7146_video.c:739:
+	videobuf_queue_cancel(file,&fh->video_q);
 	                          ^

ERROR:SPACING: space required before that '&' (ctx:OxV)
#619: FILE: drivers/media/common/saa7146_video.c:739:
+	videobuf_queue_cancel(file,&fh->video_q);
 	                           ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#676: FILE: drivers/media/common/saa7146_video.c:1077:
+		return videobuf_querybuf(q,buf);
 		                          ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#685: FILE: drivers/media/common/saa7146_video.c:1082:
+		ret = videobuf_qbuf(file,q,buf);
 		                        ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#685: FILE: drivers/media/common/saa7146_video.c:1082:
+		ret = videobuf_qbuf(file,q,buf);
 		                          ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#696: FILE: drivers/media/common/saa7146_video.c:1089:
+		ret = videobuf_dqbuf(file,q,buf);
 		                         ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#696: FILE: drivers/media/common/saa7146_video.c:1089:
+		ret = videobuf_dqbuf(file,q,buf);
 		                           ^

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 32)
#706: FILE: drivers/media/common/saa7146_video.c:1097:
+		if( 0 != (err = video_begin(fh))) {
 				return err;

ERROR:SPACING: space prohibited after that open parenthesis '('
#706: FILE: drivers/media/common/saa7146_video.c:1097:
+		if( 0 != (err = video_begin(fh))) {

ERROR:SPACING: space required before the open parenthesis '('
#706: FILE: drivers/media/common/saa7146_video.c:1097:
+		if( 0 != (err = video_begin(fh))) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#706: FILE: drivers/media/common/saa7146_video.c:1097:
+		if( 0 != (err = video_begin(fh))) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#706: FILE: drivers/media/common/saa7146_video.c:1097:
+		if( 0 != (err = video_begin(fh))) {
 				return err;
 			}

ERROR:SPACING: space required after that ',' (ctx:VxV)
#729: FILE: drivers/media/common/saa7146_video.c:1108:
+		err = videobuf_streamoff(file,q);
 		                             ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#771: FILE: drivers/media/common/saa7146_video.c:1351:
+^I^Ivideo_end(fh, file);^I^I$

WARNING:LONG_LINE: line length of 121 exceeds 100 columns
#810: FILE: include/media/saa7146.h:166:
+int saa7146_pgtable_build_single(struct pci_dev *pci, struct saa7146_pgtable *pt, struct scatterlist *list, int length );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#810: FILE: include/media/saa7146.h:166:
+int saa7146_pgtable_build_single(struct pci_dev *pci, struct saa7146_pgtable *pt, struct scatterlist *list, int length );

ERROR:CODE_INDENT: code indent should use tabs where possible
#845: FILE: include/media/saa7146_vv.h:174:
+        void(*open)(struct saa7146_dev *, struct file *);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#845: FILE: include/media/saa7146_vv.h:174:
+        void(*open)(struct saa7146_dev *, struct file *);$

WARNING:SPACING: missing space after return type
#845: FILE: include/media/saa7146_vv.h:174:
+        void(*open)(struct saa7146_dev *, struct file *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct saa7146_dev *' should also have an identifier name
#845: FILE: include/media/saa7146_vv.h:174:
+        void(*open)(struct saa7146_dev *, struct file *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct file *' should also have an identifier name
#845: FILE: include/media/saa7146_vv.h:174:
+        void(*open)(struct saa7146_dev *, struct file *);

ERROR:CODE_INDENT: code indent should use tabs where possible
#846: FILE: include/media/saa7146_vv.h:175:
+        void (*release)(struct saa7146_dev *, struct file *);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#846: FILE: include/media/saa7146_vv.h:175:
+        void (*release)(struct saa7146_dev *, struct file *);$

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct saa7146_dev *' should also have an identifier name
#846: FILE: include/media/saa7146_vv.h:175:
+        void (*release)(struct saa7146_dev *, struct file *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct file *' should also have an identifier name
#846: FILE: include/media/saa7146_vv.h:175:
+        void (*release)(struct saa7146_dev *, struct file *);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000317657.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 51 errors, 28 warnings, 10 checks, 761 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000317657.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
