WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#60: 
  Added stop_dac at the end.  Otherwise the system gets locked up sometimes. 

CHECK:INVALID_UTF8: Invalid UTF-8, patch and commit message should be encoded in UTF-8
#82: 
Technische Universität Wien
                    ^

CHECK:INVALID_UTF8: Invalid UTF-8, patch and commit message should be encoded in UTF-8
#83: 
Argentinierstraße 8/E1841            Tel: +43 (1) 58801 ext. 18412
               ^

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#130: FILE: i810_audio.c:115:
+static unsigned int clocking=0;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#130: FILE: i810_audio.c:115:
+static unsigned int clocking=0;
                             ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#231: FILE: i810_audio.c:660:
+	unsigned int civ, picb, tries=2;
 	                             ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#253: FILE: i810_audio.c:677:
+		civ = inb(port+OFF_CIV);
 		              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#283: FILE: i810_audio.c:681:
+	} while (unlikely(civ != inb(port+OFF_CIV) && --tries));
 	                                 ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#284: FILE: i810_audio.c:682:
+	if (!tries) picb=0;
 	                ^

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#284: FILE: i810_audio.c:682:
+	if (!tries) picb=0;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:SPACING: space prohibited after that open parenthesis '('
#302: FILE: i810_audio.c:703:
+		outb( inb(card->iobase + PI_PICB), card->iobase + PI_PICB );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#302: FILE: i810_audio.c:703:
+		outb( inb(card->iobase + PI_PICB), card->iobase + PI_PICB );

ERROR:SPACING: space prohibited after that open parenthesis '('
#304: FILE: i810_audio.c:705:
+		outb( inb(card->iobase + PI_SR), card->iobase + PI_SR );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#304: FILE: i810_audio.c:705:
+		outb( inb(card->iobase + PI_SR), card->iobase + PI_SR );

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#325: FILE: i810_audio.c:726:
+		outb((1<<4) | (1<<2) | 1, state->card->iobase + PI_CR);
 		       ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#325: FILE: i810_audio.c:726:
+		outb((1<<4) | (1<<2) | 1, state->card->iobase + PI_CR);
 		                ^

ERROR:SPACING: space prohibited after that open parenthesis '('
#348: FILE: i810_audio.c:752:
+		outb( inb(card->iobase + PO_PICB), card->iobase + PO_PICB );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#348: FILE: i810_audio.c:752:
+		outb( inb(card->iobase + PO_PICB), card->iobase + PO_PICB );

ERROR:SPACING: space prohibited after that open parenthesis '('
#350: FILE: i810_audio.c:754:
+		outb( inb(card->iobase + PO_SR), card->iobase + PO_SR );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#350: FILE: i810_audio.c:754:
+		outb( inb(card->iobase + PO_SR), card->iobase + PO_SR );

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#371: FILE: i810_audio.c:775:
+		outb((1<<4) | (1<<2) | 1, state->card->iobase + PO_CR);
 		       ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#371: FILE: i810_audio.c:775:
+		outb((1<<4) | (1<<2) | 1, state->card->iobase + PO_CR);
 		                ^

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#374: FILE: i810_audio.c:778:
 }
+static void start_dac(struct i810_state *state)

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required before the open parenthesis '('
#390: FILE: i810_audio.c:806:
+	if(dmabuf->rawbuf && (PAGE_SIZE << dmabuf->buforder) == size)

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#467: FILE: i810_audio.c:987:
+		if(rec && dmabuf->count < dmabuf->dmasize &&
+		   (dmabuf->trigger & PCM_ENABLE_INPUT))
+		{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:SPACING: space required before the open parenthesis '('
#467: FILE: i810_audio.c:987:
+		if(rec && dmabuf->count < dmabuf->dmasize &&

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#470: FILE: i810_audio.c:990:
+			outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 			              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#470: FILE: i810_audio.c:990:
+			outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 			                       ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#470: FILE: i810_audio.c:990:
+			outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 			                          ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#470: FILE: i810_audio.c:990:
+			outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 			                                   ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#472: FILE: i810_audio.c:992:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;
 			                                 ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#472: FILE: i810_audio.c:992:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;
 			                                          ^

WARNING:SPACING: space prohibited before semicolon
#472: FILE: i810_audio.c:992:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space prohibited after that open parenthesis '('
#472: FILE: i810_audio.c:992:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space prohibited before that close parenthesis ')'
#472: FILE: i810_audio.c:992:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space required before the open parenthesis '('
#472: FILE: i810_audio.c:992:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#472: FILE: i810_audio.c:992:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#473: FILE: i810_audio.c:993:
+		} else if (!rec && dmabuf->count &&
+			   (dmabuf->trigger & PCM_ENABLE_OUTPUT))
+		{

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#476: FILE: i810_audio.c:996:
+			outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 			              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#476: FILE: i810_audio.c:996:
+			outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 			                       ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#476: FILE: i810_audio.c:996:
+			outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 			                          ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#476: FILE: i810_audio.c:996:
+			outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 			                                   ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#478: FILE: i810_audio.c:998:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;
 			                                 ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#478: FILE: i810_audio.c:998:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;
 			                                          ^

WARNING:SPACING: space prohibited before semicolon
#478: FILE: i810_audio.c:998:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space prohibited after that open parenthesis '('
#478: FILE: i810_audio.c:998:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space prohibited before that close parenthesis ')'
#478: FILE: i810_audio.c:998:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space required before the open parenthesis '('
#478: FILE: i810_audio.c:998:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#478: FILE: i810_audio.c:998:
+			while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#486: FILE: i810_audio.c:1005:
+	outb(x, port+OFF_LVI);
 	            ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#496: FILE: i810_audio.c:1033:
+		printk("ADC HWP %d,%d,%d\n", hwptr, dmabuf->hwptr, diff);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#507: FILE: i810_audio.c:1058:
+		printk("DAC HWP %d,%d,%d\n", hwptr, dmabuf->hwptr, diff);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#517: FILE: i810_audio.c:1071:
+				printk("i810_audio: CIV %d, LVI %d, hwptr %d, "

ERROR:SPACING: space required before the open parenthesis '('
#539: FILE: i810_audio.c:1097:
+	if(free < 0)

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#541: FILE: i810_audio.c:1099:
+	return(free);

return is not a function and as such doesn't need parentheses::

  return (bar);

can simply be::

  return bar;

ERROR:SPACING: space required before the open parenthesis '('
#557: FILE: i810_audio.c:1115:
+	if(avail < 0)

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#559: FILE: i810_audio.c:1117:
+	return(avail);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#573: FILE: i810_audio.c:1145:
+^I^I/* $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#612: FILE: i810_audio.c:1174:
+^I * is closed at least when using a SiS7012.  $

ERROR:SPACING: space required before the open parenthesis '('
#629: FILE: i810_audio.c:1212:
+		if(card->pci_id == PCI_DEVICE_ID_SI_7012)

ERROR:SPACING: space required before the open parenthesis '('
#788: FILE: i810_audio.c:1492:
+		if(cnt > (dmabuf->dmasize - swptr))

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#851: FILE: i810_audio.c:1591:
+	 * i810_get_free_write_space */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#852: FILE: i810_audio.c:1592:
+/*  ^Ii810_update_ptr(state); */$

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#854: FILE: i810_audio.c:1594:
+	 * overrun every other second */

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#856: FILE: i810_audio.c:1596:
+		fragsize=dmabuf->fragsize;
 		        ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#858: FILE: i810_audio.c:1598:
+		fragsize=dmabuf->userfragsize;
 		        ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "c"
#932: FILE: i810_audio.c:1698:
+		if (c != NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#933: FILE: i810_audio.c:1699:
+			outb(2, state->card->iobase+c->port+OFF_CR);   /* reset DMA machine */
 			                           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#933: FILE: i810_audio.c:1699:
+			outb(2, state->card->iobase+c->port+OFF_CR);   /* reset DMA machine */
 			                                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#934: FILE: i810_audio.c:1700:
+			outl(virt_to_bus(&c->sg[0]), state->card->iobase+c->port+OFF_BDBAR);
 			                                                ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#934: FILE: i810_audio.c:1700:
+			outl(virt_to_bus(&c->sg[0]), state->card->iobase+c->port+OFF_BDBAR);
 			                                                        ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#935: FILE: i810_audio.c:1701:
+			outb(0, state->card->iobase+c->port+OFF_CIV);
 			                           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#935: FILE: i810_audio.c:1701:
+			outb(0, state->card->iobase+c->port+OFF_CIV);
 			                                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#936: FILE: i810_audio.c:1702:
+			outb(0, state->card->iobase+c->port+OFF_LVI);
 			                           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#936: FILE: i810_audio.c:1702:
+			outb(0, state->card->iobase+c->port+OFF_LVI);
 			                                   ^

ERROR:SPACING: space required before the open parenthesis '('
#1021: FILE: i810_audio.c:1933:
+		if(dmabuf->ossmaxfrags > 256)

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 20)
#1034: FILE: i810_audio.c:1939:
+		while (val < 8192) {
+		    val <<= 1;

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 20)
#1038: FILE: i810_audio.c:1943:
+		while (val > 65536) {
+		    val >>= 1;

ERROR:CODE_INDENT: code indent should use tabs where possible
#1054: FILE: i810_audio.c:1965:
+ ^I^I^Iabinfo.bytes = dmabuf->dmasize;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1054: FILE: i810_audio.c:1965:
+ ^I^I^Iabinfo.bytes = dmabuf->dmasize;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1054: FILE: i810_audio.c:1965:
+ ^I^I^Iabinfo.bytes = dmabuf->dmasize;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#1055: FILE: i810_audio.c:1966:
+  ^I^Ielse$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1055: FILE: i810_audio.c:1966:
+  ^I^Ielse$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1055: FILE: i810_audio.c:1966:
+  ^I^Ielse$

ERROR:CODE_INDENT: code indent should use tabs where possible
#1056: FILE: i810_audio.c:1967:
+ ^I^I^Iabinfo.bytes = i810_get_free_write_space(state);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1056: FILE: i810_audio.c:1967:
+ ^I^I^Iabinfo.bytes = i810_get_free_write_space(state);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1056: FILE: i810_audio.c:1967:
+ ^I^I^Iabinfo.bytes = i810_get_free_write_space(state);$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1076: FILE: i810_audio.c:1985:
+^I^I/* TG: can this possibly be correct? $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1079: FILE: i810_audio.c:1988:
+^I^I * to this ioctl. Shouldn't it be better to set $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1084: FILE: i810_audio.c:1993:
+^I^I * This means that we set the buffer to full.  It is $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1085: FILE: i810_audio.c:1994:
+^I^I * likely, however, that the hwptr has increased since the $

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#1092: FILE: i810_audio.c:2001:
+		cinfo.blocks = val/dmabuf->userfragsize;
 		                  ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#1134: FILE: i810_audio.c:2045:
+		cinfo.blocks = dmabuf->count/dmabuf->userfragsize;
 		                            ^

ERROR:SPACING: space required before the open parenthesis '('
#1160: FILE: i810_audio.c:2092:
+		if(val & PCM_ENABLE_OUTPUT && !(dmabuf->enable & DAC_RUNNING)) {

CHECK:BRACES: Unbalanced braces around else statement
#1180: FILE: i810_audio.c:2110:
+			} else

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:SPACING: space required before the open parenthesis '('
#1184: FILE: i810_audio.c:2113:
+		if(val & PCM_ENABLE_INPUT && !(dmabuf->enable & ADC_RUNNING)) {

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#1214: FILE: i810_audio.c:2336:
+			schedule_timeout(HZ/20);
 			                   ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "card"
#1260: FILE: i810_audio.c:2487:
+	for (card = devs; card != NULL; card = card->next) {

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#1263: FILE: i810_audio.c:2490:
+			schedule_timeout(HZ/20);
 			                   ^

ERROR:SPACING: space required before the open parenthesis '('
#1288: FILE: i810_audio.c:2901:
+	if(clocking == 0) {

ERROR:CODE_INDENT: code indent should use tabs where possible
#1303: FILE: i810_audio.c:2922:
+ ^Icard->initializing = 0;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1303: FILE: i810_audio.c:2922:
+ ^Icard->initializing = 0;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1303: FILE: i810_audio.c:2922:
+ ^Icard->initializing = 0;$

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000487605.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 47 errors, 19 warnings, 37 checks, 1170 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000487605.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
