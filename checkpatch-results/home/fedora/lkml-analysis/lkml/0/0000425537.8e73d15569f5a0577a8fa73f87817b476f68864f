ERROR:DIFF_IN_COMMIT_MSG: Avoid using diff content in the commit message - patch(1) might not work
#50: 
--- a/drivers/input/keyboard/atkbd.c	Tue Oct  8 15:27:18 2002

Avoid having diff content in commit message.
This causes problems when one tries to apply a file containing both
the changelog and the diff because patch(1) tries to apply the diff
which it found in the changelog.

See: https://lore.kernel.org/lkml/20150611134006.9df79a893e3636019ad2759e@linux-foundation.org/

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#60: FILE: drivers/input/keyboard/atkbd.c:29:
+#if defined(__i386__) || defined (__x86_64__)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:ARCH_DEFINES: architecture specific defines should be avoided
#60: FILE: drivers/input/keyboard/atkbd.c:29:
+#if defined(__i386__) || defined (__x86_64__)

Architecture specific defines should be avoided wherever
possible.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#187: FILE: drivers/input/keyboard/atkbd.c:374:
+			printk(KERN_WARNING "atkbd.c: keyboard reset failed\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#203: FILE: drivers/input/keyboard/atkbd.c:430:
+	struct atkbd *atkbd = serio->private;
+	atkbd_command(atkbd, &atkbd->oldset, ATKBD_CMD_SSCANSET);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#230: FILE: drivers/input/keyboard/atkbd.c:549:
 }
+static int __init atkbd_setup_reset(char *str)

ERROR:CODE_INDENT: code indent should use tabs where possible
#232: FILE: drivers/input/keyboard/atkbd.c:551:
+        int ints[4];$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#232: FILE: drivers/input/keyboard/atkbd.c:551:
+        int ints[4];$

ERROR:CODE_INDENT: code indent should use tabs where possible
#233: FILE: drivers/input/keyboard/atkbd.c:552:
+        str = get_options(str, ARRAY_SIZE(ints), ints);$

WARNING:LINE_SPACING: Missing a blank line after declarations
#233: FILE: drivers/input/keyboard/atkbd.c:552:
+        int ints[4];
+        str = get_options(str, ARRAY_SIZE(ints), ints);

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#233: FILE: drivers/input/keyboard/atkbd.c:552:
+        str = get_options(str, ARRAY_SIZE(ints), ints);$

ERROR:CODE_INDENT: code indent should use tabs where possible
#234: FILE: drivers/input/keyboard/atkbd.c:553:
+        if (ints[0] > 0) atkbd_reset = ints[1];$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#234: FILE: drivers/input/keyboard/atkbd.c:553:
+        if (ints[0] > 0) atkbd_reset = ints[1];$

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#234: FILE: drivers/input/keyboard/atkbd.c:553:
+        if (ints[0] > 0) atkbd_reset = ints[1];

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:CODE_INDENT: code indent should use tabs where possible
#235: FILE: drivers/input/keyboard/atkbd.c:554:
+        return 1;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#235: FILE: drivers/input/keyboard/atkbd.c:554:
+        return 1;$

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#238: FILE: drivers/input/keyboard/atkbd.c:557:
+__setup("atkbd_set=", atkbd_setup_set);

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#239: FILE: drivers/input/keyboard/atkbd.c:558:
+__setup("atkbd_reset", atkbd_setup_reset);

WARNING:LINE_SPACING: Missing a blank line after declarations
#310: FILE: drivers/input/mouse/psmouse.c:556:
+	unsigned char param[2];
+	psmouse_command(psmouse, param, PSMOUSE_CMD_RESET_BAT);

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#333: FILE: drivers/input/mouse/psmouse.c:640:
+__setup("psmouse_noext", psmouse_setup);

CHECK:ARCH_DEFINES: architecture specific defines should be avoided
#358: FILE: drivers/input/serio/i8042-io.h:71:
+#if !defined(__i386__) && !defined(__x86_64__)

ERROR:CODE_INDENT: code indent should use tabs where possible
#359: FILE: drivers/input/serio/i8042-io.h:72:
+        i8042_reset = 1;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#359: FILE: drivers/input/serio/i8042-io.h:72:
+        i8042_reset = 1;$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#551: FILE: drivers/input/serio/i8042.c:121:
+		dbg("%02x <- i8042 (flush, %s)", data,
+			i8042_read_status() & I8042_STR_AUXDATA ? "aux" : "kbd");

CHECK:LINE_SPACING: Please don't use multiple blank lines
#644: FILE: drivers/input/serio/i8042.c:224:
 
+

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#718: FILE: drivers/input/serio/i8042.c:371:
+		if (i8042_mux_values[0].exists && (buffer[i].str & I8042_STR_AUXDATA)) {
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: braces {} should be used on all arms of this statement
#719: FILE: drivers/input/serio/i8042.c:372:
+			if (buffer[i].str & I8042_STR_MUXERR) {
[...]
+			} else dfl = 0;
[...]

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#720: FILE: drivers/input/serio/i8042.c:373:
+				switch (buffer[i].data) {
+					case 0xfd:
+					case 0xfe: dfl = SERIO_TIMEOUT; break;
+					case 0xff: dfl = SERIO_PARITY; break;

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#722: FILE: drivers/input/serio/i8042.c:375:
+					case 0xfe: dfl = SERIO_TIMEOUT; break;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#723: FILE: drivers/input/serio/i8042.c:376:
+					case 0xff: dfl = SERIO_PARITY; break;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#726: FILE: drivers/input/serio/i8042.c:379:
+			} else dfl = 0;

ERROR:TRAILING_WHITESPACE: trailing whitespace
#729: FILE: drivers/input/serio/i8042.c:382:
+^I^I^I^Idata, (str >> 6), irq, $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#729: FILE: drivers/input/serio/i8042.c:382:
+			dbg("%02x <- i8042 (interrupt, aux%d, %d%s%s)",
+				data, (str >> 6), irq, 

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#739: FILE: drivers/input/serio/i8042.c:392:
+		dbg("%02x <- i8042 (interrupt, %s, %d%s%s)",
 			data, (str & I8042_STR_AUXDATA) ? "aux" : "kbd", irq, 

WARNING:TABSTOP: Statements should start on a tabstop
#803: FILE: drivers/input/serio/i8042.c:485:
+		 else

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#859: FILE: drivers/input/serio/i8042.c:564:
 
+}

ERROR:CODE_INDENT: code indent should use tabs where possible
#883: FILE: drivers/input/serio/i8042.c:582:
+                return -1;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#883: FILE: drivers/input/serio/i8042.c:582:
+                return -1;$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#908: FILE: drivers/input/serio/i8042.c:607:
+	printk(KERN_INFO "i8042.c: Detected active multiplexing controller, rev%d.%d.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#909: FILE: drivers/input/serio/i8042.c:608:
+	printk(KERN_INFO "i8042.c: Detected active multiplexing controller, rev%d.%d.\n",
+		~param >> 4, ~param & 0xf);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#956: FILE: drivers/input/serio/i8042.c:755:
 }
+static int __init i8042_setup_dumbkbd(char *str)

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#968: FILE: drivers/input/serio/i8042.c:765:
+__setup("i8042_dumbkbd", i8042_setup_dumbkbd);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1023: FILE: drivers/input/serio/i8042.c:822:
+^Ielse $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1048: FILE: drivers/input/serio/i8042.c:851:
+^I$

WARNING:SINGLE_STATEMENT_DO_WHILE_MACRO: Single statement macros should not use a do {} while (0) loop
#1106: FILE: drivers/input/serio/i8042.h:106:
+#define dbg_init() do { i8042_start = jiffies; } while (0);

For the multi-statement macros, it is necessary to use the do-while
loop to avoid unpredictable code paths. The do-while loop helps to
group the multiple statements into a single one so that a
function-like macro can be used as a function only.

But for the single statement macros, it is unnecessary to use the
do-while loop. Although the code is syntactically correct but using
the do-while loop is redundant. So remove the do-while loop for single
statement macros.

WARNING:DO_WHILE_MACRO_WITH_TRAILING_SEMICOLON: do {} while (0) macros should not be semicolon terminated
#1106: FILE: drivers/input/serio/i8042.h:106:
+#define dbg_init() do { i8042_start = jiffies; } while (0);

do {} while(0) macros should not have a trailing semicolon.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1107: FILE: drivers/input/serio/i8042.h:107:
+#define dbg(format, arg...) printk(KERN_DEBUG __FILE__ ": " format "[%d]\n" ,\

ERROR:SPACING: space prohibited before that ',' (ctx:WxE)
#1107: FILE: drivers/input/serio/i8042.h:107:
+#define dbg(format, arg...) printk(KERN_DEBUG __FILE__ ": " format "[%d]\n" ,\
                                                                             ^

CHECK:SPACING: No space is necessary after a cast
#1108: FILE: drivers/input/serio/i8042.h:108:
+	 ## arg, (int) (jiffies - i8042_start))

WARNING:DO_WHILE_MACRO_WITH_TRAILING_SEMICOLON: do {} while (0) macros should not be semicolon terminated
#1110: FILE: drivers/input/serio/i8042.h:110:
+#define dbg_init() do { } while (0);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct serio *' should also have an identifier name
#1122: FILE: include/linux/serio.h:72:
+	void (*cleanup)(struct serio *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:INLINE: plain inline is preferred over __inline__
#1143: FILE: include/linux/serio.h:101:
+static __inline__ void serio_cleanup(struct serio *serio)

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000425537.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 16 errors, 19 warnings, 17 checks, 1016 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000425537.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
