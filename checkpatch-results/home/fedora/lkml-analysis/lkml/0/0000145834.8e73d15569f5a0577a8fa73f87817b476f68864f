WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#62: FILE: include/linux/spi.h:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#76: FILE: include/linux/spi.h:15:
+ * along with this program; if not, write to the Free Software$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#77: FILE: include/linux/spi.h:16:
+ * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#102: FILE: include/linux/spi.h:41:
+ * ^Ilike eight or 12 bits are common.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#104: FILE: include/linux/spi.h:43:
+ * ^Iinterrupts from this device.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#106: FILE: include/linux/spi.h:45:
+ * ^Isuch as FIFO initialization parameters.$

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#125: FILE: include/linux/spi.h:64:
+#define	SPI_MODE_0	(0|0)
        	          	  ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#126: FILE: include/linux/spi.h:65:
+#define	SPI_MODE_1	(0|SPI_CPHA)
        	          	  ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#127: FILE: include/linux/spi.h:66:
+#define	SPI_MODE_2	(SPI_CPOL|0)
        	          	         ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#128: FILE: include/linux/spi.h:67:
+#define	SPI_MODE_3	(SPI_CPOL|SPI_CPHA)
        	          	         ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#172: FILE: include/linux/spi.h:111:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#175: FILE: include/linux/spi.h:114:
+
+

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#180: FILE: include/linux/spi.h:119:
+ * ^Igiven SPI controller.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#182: FILE: include/linux/spi.h:121:
+ * ^ISPI slaves, and are numbered from zero to num_chipselects.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#183: FILE: include/linux/spi.h:122:
+ * ^Ieach slave has a chipselect signal, but it's common that not$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#184: FILE: include/linux/spi.h:123:
+ * ^Ievery chipselect is connected to a slave.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#186: FILE: include/linux/spi.h:125:
+ * ^Iby a device's SPI controller; protocol code may call this.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#240: FILE: include/linux/spi.h:179:
+	int			(*transfer)(struct spi_device *spi,
+						struct spi_message *mesg);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#248: FILE: include/linux/spi.h:187:
+spi_alloc_master(struct device *host, unsigned size);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#250: FILE: include/linux/spi.h:189:
+extern int spi_register_master(struct spi_master *master);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#251: FILE: include/linux/spi.h:190:
+extern void spi_unregister_master(struct spi_master *master);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#253: FILE: include/linux/spi.h:192:
+
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#280: FILE: include/linux/spi.h:219:
+ * ^Istarting the next transfer or completing this spi_message. $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#280: FILE: include/linux/spi.h:219:
+ * ^Istarting the next transfer or completing this spi_message. $

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#306: FILE: include/linux/spi.h:245:
+	unsigned	len;

WARNING:TYPO_SPELLING: 'segements' may be misspelled - perhaps 'segments'?
#320: FILE: include/linux/spi.h:259:
+ * @transfers: the segements of the transaction
                    ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'transferd' may be misspelled - perhaps 'transferred'?
#325: FILE: include/linux/spi.h:264:
+ * @actual_length: how many bytes were transferd
                                        ^^^^^^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#332: FILE: include/linux/spi.h:271:
+	unsigned		n_transfer;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#337: FILE: include/linux/spi.h:276:
+^Ivoid ^I^I^IFASTCALL((*complete)(void *context));$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#339: FILE: include/linux/spi.h:278:
+	unsigned		actual_length;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#365: FILE: include/linux/spi.h:304:
+
+

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#393: FILE: include/linux/spi.h:332:
+extern int spi_sync(struct spi_device *spi, struct spi_message *message);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#447: FILE: include/linux/spi.h:386:
+extern int spi_write_then_read(struct spi_device *spi,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#448: FILE: include/linux/spi.h:387:
+extern int spi_write_then_read(struct spi_device *spi,
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#448: FILE: include/linux/spi.h:387:
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#449: FILE: include/linux/spi.h:388:
+		u8 *rxbuf, unsigned n_rx);

CHECK:SPACING: No space is necessary after a cast
#485: FILE: include/linux/spi.h:424:
+	status = spi_write_then_read(spi, &cmd, 1, (u8 *) &result, 2);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#524: FILE: include/linux/spi.h:463:
+
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#544: FILE: include/linux/spi.h:483:
+spi_register_board_info(struct spi_board_info const *info, unsigned n);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#548: FILE: include/linux/spi.h:487:
+spi_register_board_info(struct spi_board_info const *info, unsigned n)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#552: FILE: include/linux/spi.h:491:
+
+

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#572: FILE: drivers/spi/spi.c:1:
+/*

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#588: FILE: drivers/spi/spi.c:17:
+ * along with this program; if not, write to the Free Software$

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#589: FILE: drivers/spi/spi.c:18:
+ * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#598: FILE: drivers/spi/spi.c:27:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#645: FILE: drivers/spi/spi.c:74:
+static int spi_hotplug(struct device *dev, char **envp, int num_envp,
+		char *buffer, int buffer_size)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#719: FILE: drivers/spi/spi.c:148:
+	unsigned		n_board_info;

ERROR:SPACING: space required after that ',' (ctx:VxV)
#726: FILE: drivers/spi/spi.c:155:
+#define	kzalloc(n, flags)	kcalloc(1,(n),(flags))
        	                 	         ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#726: FILE: drivers/spi/spi.c:155:
+#define	kzalloc(n, flags)	kcalloc(1,(n),(flags))
        	                 	             ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#737: FILE: drivers/spi/spi.c:166:
+
+

WARNING:SIZEOF_PARENTHESIS: sizeof *proxy should be sizeof(*proxy)
#760: FILE: drivers/spi/spi.c:189:
+	proxy = kzalloc(sizeof *proxy, GFP_KERNEL);

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#762: FILE: drivers/spi/spi.c:191:
+	if (!proxy) {
+		dev_err(dev, "can't alloc dev for cs%d\n",

WARNING:SIZEOF_PARENTHESIS: sizeof proxy->dev.bus_id should be sizeof(proxy->dev.bus_id)
#771: FILE: drivers/spi/spi.c:200:
+	snprintf(proxy->dev.bus_id, sizeof proxy->dev.bus_id,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#772: FILE: drivers/spi/spi.c:201:
+	snprintf(proxy->dev.bus_id, sizeof proxy->dev.bus_id,
+			"%s.%u-%s", master->cdev.class_id,

CHECK:SPACING: No space is necessary after a cast
#776: FILE: drivers/spi/spi.c:205:
+	proxy->dev.platform_data = (void *) chip->platform_data;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#785: FILE: drivers/spi/spi.c:214:
+		dev_dbg(dev, "can't %s %s, status %d\n",
+				"setup", proxy->dev.bus_id, status);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#798: FILE: drivers/spi/spi.c:227:
+		dev_dbg(dev, "can't %s %s, status %d\n",
+				"add", proxy->dev.bus_id, status);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#824: FILE: drivers/spi/spi.c:253:
+spi_register_board_info(struct spi_board_info const *info, unsigned n)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#828: FILE: drivers/spi/spi.c:257:
+	bi = kmalloc (sizeof (*bi) + n * sizeof (*info), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#828: FILE: drivers/spi/spi.c:257:
+	bi = kmalloc (sizeof (*bi) + n * sizeof (*info), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#828: FILE: drivers/spi/spi.c:257:
+	bi = kmalloc (sizeof (*bi) + n * sizeof (*info), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#832: FILE: drivers/spi/spi.c:261:
+	memcpy(bi->board_info, info, n * sizeof (*info));

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#841: FILE: drivers/spi/spi.c:270:
+/* FIXME someone should add support for a __setup("spi", ...) that

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#854: FILE: drivers/spi/spi.c:283:
+		unsigned		n;

CHECK:SPACING: No space is necessary after a cast
#865: FILE: drivers/spi/spi.c:294:
+			(void) spi_new_device(master, chip);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#889: FILE: drivers/spi/spi.c:318:
+
+

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#894: FILE: drivers/spi/spi.c:323:
+ * ^Imemory in the class_data field of the returned class_device$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#908: FILE: drivers/spi/spi.c:337:
+spi_alloc_master(struct device *dev, unsigned size)

WARNING:SIZEOF_PARENTHESIS: sizeof *master should be sizeof(*master)
#912: FILE: drivers/spi/spi.c:341:
+	master = kzalloc(size + sizeof *master, SLAB_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof master->cdev.class_id should be sizeof(master->cdev.class_id)
#957: FILE: drivers/spi/spi.c:386:
+	snprintf(master->cdev.class_id, sizeof master->cdev.class_id,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#958: FILE: drivers/spi/spi.c:387:
+	snprintf(master->cdev.class_id, sizeof master->cdev.class_id,
+		"spi%u", master->bus_num);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#974: FILE: drivers/spi/spi.c:403:
+
+

CHECK:SPACING: No space is necessary after a cast
#993: FILE: drivers/spi/spi.c:422:
+	(void) device_for_each_child(master->cdev.dev, NULL, __unregister);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#997: FILE: drivers/spi/spi.c:426:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1047: FILE: drivers/spi/spi.c:476:
+int spi_write_then_read(struct spi_device *spi,
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1047: FILE: drivers/spi/spi.c:476:
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1048: FILE: drivers/spi/spi.c:477:
+		u8 *rxbuf, unsigned n_rx)

WARNING:SIZEOF_PARENTHESIS: sizeof x should be sizeof(x)
#1058: FILE: drivers/spi/spi.c:487:
+	memset(x, 0, sizeof x);

CHECK:SPACING: No space is necessary after a cast
#1060: FILE: drivers/spi/spi.c:489:
+	x[0].tx_buf = (u8 *) txbuf;

WARNING:DEPRECATED_VARIABLE: Use of EXTRA_CFLAGS is deprecated, please use `ccflags-y instead.
#1251: FILE: drivers/spi/Makefile:6:
+EXTRA_CFLAGS += -DDEBUG

EXTRA_{A,C,CPP,LD}FLAGS are deprecated and should be replaced by the new
flags added via commit f77bf01425b1 ("kbuild: introduce ccflags-y,
asflags-y and ldflags-y").

The following conversion scheme maybe used::

  EXTRA_AFLAGS    ->  asflags-y
  EXTRA_CFLAGS    ->  ccflags-y
  EXTRA_CPPFLAGS  ->  cppflags-y
  EXTRA_LDFLAGS   ->  ldflags-y

See:

  1. https://lore.kernel.org/lkml/20070930191054.GA15876@uranus.ravnborg.org/
  2. https://lore.kernel.org/lkml/1313384834-24433-12-git-send-email-lacombar@gmail.com/
  3. https://www.kernel.org/doc/html/latest/kbuild/makefiles.html#compilation-flags

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000145834.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 7 errors, 40 warnings, 33 checks, 1189 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000145834.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
