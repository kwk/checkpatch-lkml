WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#85: FILE: drivers/message/fusion/mptscsih.c:2501:
+			printk("writeSDP1: ALL_IDS USE_NVRAM\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#335: FILE: drivers/message/fusion/mptscsih.c:2878:
+	printk("HERE2\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#346: FILE: drivers/message/fusion/mptscsih.c:2979:
+		printk(MYIOC_s_INFO_FMT "WriteSDP1 (mf=%p, id=%d, req=0x%x, cfg=0x%x)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#347: FILE: drivers/message/fusion/mptscsih.c:2980:
+		printk(MYIOC_s_INFO_FMT "WriteSDP1 (mf=%p, id=%d, req=0x%x, cfg=0x%x)\n",
+			hd->ioc->name, mf, id, requested, configuration);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#356: FILE: drivers/message/fusion/mptscsih.c:4003:
+				printk("writeSDP1: id=%d flags=0\n", id);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#362: FILE: drivers/message/fusion/mptscsih.c:4008:
+				printk("writeSDP1: id=%d SCSICFG_USE_NVRAM\n", id);

ERROR:INITIALISED_STATIC: do not initialise statics to NULL
#394: FILE: drivers/message/fusion/mptspi.c:103:
+static struct scsi_transport_template *mptspi_transport_template = NULL;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

CHECK:CAMELCASE: Avoid CamelCase: <Scsi_Host>
#402: FILE: drivers/message/fusion/mptspi.c:111:
+	struct Scsi_Host *shost = dev_to_shost(&starget->dev);

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

WARNING:LINE_SPACING: Missing a blank line after declarations
#404: FILE: drivers/message/fusion/mptspi.c:113:
+	struct _MPT_SCSI_HOST *hd = (struct _MPT_SCSI_HOST *)shost->hostdata;
+	static void mptspi_write_offset(struct scsi_target *, int);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!hd"
#407: FILE: drivers/message/fusion/mptspi.c:116:
+	if (hd == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:LINE_SPACING: Missing a blank line after declarations
#413: FILE: drivers/message/fusion/mptspi.c:122:
+		u32 nvram = hd->ioc->spi_data.nvram[starget->id];
+		spi_min_period(starget) = (nvram & MPT_NVRAM_SYNC_MASK) >> MPT_NVRAM_SYNC_SHIFT;

CHECK:CAMELCASE: Avoid CamelCase: <minSyncFactor>
#416: FILE: drivers/message/fusion/mptspi.c:125:
+		spi_min_period(starget) = hd->ioc->spi_data.minSyncFactor;

CHECK:CAMELCASE: Avoid CamelCase: <maxBusWidth>
#417: FILE: drivers/message/fusion/mptspi.c:126:
+		spi_max_width(starget) = hd->ioc->spi_data.maxBusWidth;

CHECK:CAMELCASE: Avoid CamelCase: <maxSyncOffset>
#419: FILE: drivers/message/fusion/mptspi.c:128:
+	spi_max_offset(starget) = hd->ioc->spi_data.maxSyncOffset;

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#442: FILE: drivers/message/fusion/mptspi.c:151:
+	/*
+	if (ioc->spi_data.sdp0length & 1)

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pg0"
#448: FILE: drivers/message/fusion/mptspi.c:157:
+	if (pg0 == NULL) {

WARNING:PREFER_DEV_LEVEL: Prefer dev_err(... to dev_printk(KERN_ERR, ...
#449: FILE: drivers/message/fusion/mptspi.c:158:
+		dev_printk(KERN_ERR, &starget->dev, "dma_alloc_coherent for parameters failed\n");

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#449: FILE: drivers/message/fusion/mptspi.c:158:
+	if (pg0 == NULL) {
+		dev_printk(KERN_ERR, &starget->dev, "dma_alloc_coherent for parameters failed\n");

CHECK:CAMELCASE: Avoid CamelCase: <PageVersion>
#455: FILE: drivers/message/fusion/mptspi.c:164:
+	hdr.PageVersion = ioc->spi_data.sdp0version;

CHECK:CAMELCASE: Avoid CamelCase: <PageLength>
#456: FILE: drivers/message/fusion/mptspi.c:165:
+	hdr.PageLength = ioc->spi_data.sdp0length;

CHECK:CAMELCASE: Avoid CamelCase: <PageNumber>
#457: FILE: drivers/message/fusion/mptspi.c:166:
+	hdr.PageNumber = 0;

CHECK:CAMELCASE: Avoid CamelCase: <PageType>
#458: FILE: drivers/message/fusion/mptspi.c:167:
+	hdr.PageType = MPI_CONFIG_PAGETYPE_SCSI_DEVICE;

CHECK:CAMELCASE: Avoid CamelCase: <physAddr>
#463: FILE: drivers/message/fusion/mptspi.c:172:
+	cfg.physAddr = pg0_dma;

CHECK:CAMELCASE: Avoid CamelCase: <pageAddr>
#466: FILE: drivers/message/fusion/mptspi.c:175:
+	cfg.pageAddr = (starget->channel << 8) | starget->id;

WARNING:PREFER_DEV_LEVEL: Prefer dev_err(... to dev_printk(KERN_ERR, ...
#469: FILE: drivers/message/fusion/mptspi.c:178:
+		dev_printk(KERN_ERR, &starget->dev, "mpt_config failed\n");

CHECK:CAMELCASE: Avoid CamelCase: <NegotiatedParameters>
#487: FILE: drivers/message/fusion/mptspi.c:196:
+	nego = le32_to_cpu(pg0.NegotiatedParameters);

WARNING:LONG_LINE: line length of 121 exceeds 100 columns
#497: FILE: drivers/message/fusion/mptspi.c:206:
+	spi_period(starget) = (nego & MPI_SCSIDEVPAGE0_NP_NEG_SYNC_PERIOD_MASK) >> MPI_SCSIDEVPAGE0_NP_SHIFT_SYNC_PERIOD;

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:LONG_LINE: line length of 121 exceeds 100 columns
#498: FILE: drivers/message/fusion/mptspi.c:207:
+	spi_offset(starget) = (nego & MPI_SCSIDEVPAGE0_NP_NEG_SYNC_OFFSET_MASK) >> MPI_SCSIDEVPAGE0_NP_SHIFT_SYNC_OFFSET;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#537: FILE: drivers/message/fusion/mptspi.c:252:
+static int mptspi_write_page1(struct scsi_target *starget,
+			       struct _CONFIG_PAGE_SCSI_DEVICE_1 *pass_pg1)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pg1"
#552: FILE: drivers/message/fusion/mptspi.c:267:
+	if (pg1 == NULL) {

WARNING:PREFER_DEV_LEVEL: Prefer dev_err(... to dev_printk(KERN_ERR, ...
#553: FILE: drivers/message/fusion/mptspi.c:268:
+		dev_printk(KERN_ERR, &starget->dev, "dma_alloc_coherent for parameters failed\n");

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#553: FILE: drivers/message/fusion/mptspi.c:268:
+	if (pg1 == NULL) {
+		dev_printk(KERN_ERR, &starget->dev, "dma_alloc_coherent for parameters failed\n");

CHECK:CAMELCASE: Avoid CamelCase: <Header>
#574: FILE: drivers/message/fusion/mptspi.c:289:
+	pg1->Header.PageVersion = hdr.PageVersion;

WARNING:PREFER_DEV_LEVEL: Prefer dev_err(... to dev_printk(KERN_ERR, ...
#580: FILE: drivers/message/fusion/mptspi.c:295:
+		dev_printk(KERN_ERR, &starget->dev, "mpt_config failed\n");

CHECK:CAMELCASE: Avoid CamelCase: <mptspi_getRP>
#590: FILE: drivers/message/fusion/mptspi.c:305:
+static u32 mptspi_getRP(struct scsi_target *starget)

WARNING:LONG_LINE: line length of 127 exceeds 100 columns
#603: FILE: drivers/message/fusion/mptspi.c:318:
+	nego |= (spi_period(starget) <<  MPI_SCSIDEVPAGE1_RP_SHIFT_MIN_SYNC_PERIOD) & MPI_SCSIDEVPAGE1_RP_MIN_SYNC_PERIOD_MASK;

WARNING:LONG_LINE: line length of 126 exceeds 100 columns
#604: FILE: drivers/message/fusion/mptspi.c:319:
+	nego |= (spi_offset(starget) << MPI_SCSIDEVPAGE1_RP_SHIFT_MAX_SYNC_OFFSET) & MPI_SCSIDEVPAGE1_RP_MAX_SYNC_OFFSET_MASK;

CHECK:CAMELCASE: Avoid CamelCase: <RequestedParameters>
#628: FILE: drivers/message/fusion/mptspi.c:343:
+	pg1.RequestedParameters = cpu_to_le32(nego);

CHECK:CAMELCASE: Avoid CamelCase: <Reserved>
#629: FILE: drivers/message/fusion/mptspi.c:344:
+	pg1.Reserved = 0;

CHECK:CAMELCASE: Avoid CamelCase: <Configuration>
#630: FILE: drivers/message/fusion/mptspi.c:345:
+	pg1.Configuration = 0;

ERROR:TRAILING_WHITESPACE: trailing whitespace
#682: FILE: drivers/message/fusion/mptspi.c:397:
+^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#682: FILE: drivers/message/fusion/mptspi.c:397:
+
+	

ERROR:TRAILING_WHITESPACE: trailing whitespace
#705: FILE: drivers/message/fusion/mptspi.c:420:
+^I$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#705: FILE: drivers/message/fusion/mptspi.c:420:
+
+	

WARNING:TYPO_SPELLING: 'parm' may be misspelled - perhaps 'param'?
#713: FILE: drivers/message/fusion/mptspi.c:428:
+#define MPTSPI_SIMPLE_TRANSPORT_PARM(parm) 				\
                                      ^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#713: FILE: drivers/message/fusion/mptspi.c:428:
+#define MPTSPI_SIMPLE_TRANSPORT_PARM(parm) ^I^I^I^I\$

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'parm' - possible side-effects?
#713: FILE: drivers/message/fusion/mptspi.c:428:
+#define MPTSPI_SIMPLE_TRANSPORT_PARM(parm) 				\
+static void mptspi_write_##parm(struct scsi_target *starget, int parm)\
+{									\
+	struct _CONFIG_PAGE_SCSI_DEVICE_1 pg1;				\
+	u32 nego;							\
+									\
+	spi_rd_strm(starget) = parm;					\
+									\
+	nego = mptspi_getRP(starget);					\
+									\
+	pg1.RequestedParameters = cpu_to_le32(nego);			\
+	pg1.Reserved = 0;						\
+	pg1.Configuration = 0;						\
+									\
+	mptspi_write_page1(starget, &pg1);				\
+}

WARNING:TYPO_SPELLING: 'parm' may be misspelled - perhaps 'param'?
#714: FILE: drivers/message/fusion/mptspi.c:429:
+static void mptspi_write_##parm(struct scsi_target *starget, int parm)\
                            ^^^^

WARNING:TYPO_SPELLING: 'parm' may be misspelled - perhaps 'param'?
#714: FILE: drivers/message/fusion/mptspi.c:429:
+static void mptspi_write_##parm(struct scsi_target *starget, int parm)\
                                                                  ^^^^

WARNING:TYPO_SPELLING: 'parm' may be misspelled - perhaps 'param'?
#719: FILE: drivers/message/fusion/mptspi.c:434:
+	spi_rd_strm(starget) = parm;					\
 	                       ^^^^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#751: FILE: drivers/message/fusion/mptspi.c:466:
+^I$

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#811: FILE: drivers/message/fusion/mptspi.c:766:
+	 * that we can't get the parameters */

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000161919.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 4 errors, 24 warnings, 24 checks, 751 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000161919.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
