WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#39: 
diff -urN linux-2.5/drivers/video/valkyriefb.c pmac-2.5/drivers/video/valkyriefb.c

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#162: FILE: drivers/video/valkyriefb.c:147:
+	volatile struct valkyrie_regs *valkyrie_regs = p->valkyrie_regs;

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#170: FILE: drivers/video/valkyriefb.c:152:
+	if ((err = valkyrie_var_to_par(&info->var, par, info)))

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#217: FILE: drivers/video/valkyriefb.c:159:
+	udelay(100);

usleep_range() should be preferred over udelay(). The proper way of
using usleep_range() is mentioned in the kernel docs.

See: https://www.kernel.org/doc/html/latest/timers/timers-howto.html#delays-information-on-the-various-kernel-delay-sleep-mechanisms

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#240: FILE: drivers/video/valkyriefb.c:166:
+	udelay(100);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#276: FILE: drivers/video/valkyriefb.c:180:
+	if ((err = valkyrie_var_to_par(var, &par, info)))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!init"
#331: FILE: drivers/video/valkyriefb.c:202:
+	if (init == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#343: FILE: drivers/video/valkyriefb.c:211:
+	case VESA_VSYNC_SUSPEND+1:
 	                       ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#344: FILE: drivers/video/valkyriefb.c:212:
+	case VESA_HSYNC_SUSPEND+1:
 	                       ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#352: FILE: drivers/video/valkyriefb.c:220:
+	case VESA_POWERDOWN+1:
 	                   ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#396: FILE: drivers/video/valkyriefb.c:258:
+	struct valkyrie_regvals *init = valkyrie_reg_init[video_mode-1];
 	                                                            ^

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#401: FILE: drivers/video/valkyriefb.c:260:
+	if ((pitch = init->pitch[color_mode]) == 0)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#420: FILE: drivers/video/valkyriefb.c:283:
+	printk(KERN_INFO "Monitor sense value = 0x%x\n", p->sense);

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#436: FILE: drivers/video/valkyriefb.c:308:
+	if (default_cmode < CMODE_8 || default_cmode > CMODE_16
+	    || valkyrie_reg_init[default_vmode-1]->pitch[default_cmode] == 0

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#436: FILE: drivers/video/valkyriefb.c:308:
+	    || valkyrie_reg_init[default_vmode-1]->pitch[default_cmode] == 0
 	                                      ^

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#437: FILE: drivers/video/valkyriefb.c:309:
+	    || valkyrie_reg_init[default_vmode-1]->pitch[default_cmode] == 0
+	    || valkyrie_vram_reqd(default_vmode, default_cmode) > p->total_vram)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#500: FILE: drivers/video/valkyriefb.c:312:
+	printk(KERN_INFO "using video mode %d and color mode %d.\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#519: FILE: drivers/video/valkyriefb.c:342:
+		printk(KERN_ERR "expecting 1 address for valkyrie (got %d)\n",

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!p->frame_buffer"
#549: FILE: drivers/video/valkyriefb.c:370:
+	if (p->frame_buffer == NULL || p->cmap_regs == NULL

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!p->cmap_regs"
#549: FILE: drivers/video/valkyriefb.c:370:
+	if (p->frame_buffer == NULL || p->cmap_regs == NULL

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#550: FILE: drivers/video/valkyriefb.c:371:
+	if (p->frame_buffer == NULL || p->cmap_regs == NULL
+	    || p->valkyrie_regs == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!p->valkyrie_regs"
#550: FILE: drivers/video/valkyriefb.c:371:
+	    || p->valkyrie_regs == NULL) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#551: FILE: drivers/video/valkyriefb.c:372:
+		printk(KERN_ERR "valkyriefb: couldn't map resources\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#561: FILE: drivers/video/valkyriefb.c:382:
+		printk(KERN_ERR "valkyriefb: can't set default video mode\n");

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#563: FILE: drivers/video/valkyriefb.c:384:
+	if ((err = register_framebuffer(&p->info)) != 0)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#566: FILE: drivers/video/valkyriefb.c:387:
+	printk(KERN_INFO "fb%d: valkyrie frame buffer device\n", p->info.node);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#632: FILE: drivers/video/valkyriefb.c:455:
+static int valkyrie_var_to_par(struct fb_var_screeninfo *var,
+	struct fb_par_valkyrie *par, const struct fb_info *fb_info)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#643: FILE: drivers/video/valkyriefb.c:462:
+		printk(KERN_ERR "valkyriefb: can't do %dx%dx%d.\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#651: FILE: drivers/video/valkyriefb.c:468:
+	if (vmode < 1 || vmode > VMODE_MAX || !valkyrie_reg_init[vmode-1]) {
 	                                                              ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#652: FILE: drivers/video/valkyriefb.c:469:
+		printk(KERN_ERR "valkyriefb: vmode %d not valid.\n", vmode);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#666: FILE: drivers/video/valkyriefb.c:474:
+		printk(KERN_ERR "valkyriefb: cmode %d not valid.\n", cmode);

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#677: FILE: drivers/video/valkyriefb.c:479:
+	if (var->xres_virtual > var->xres || var->yres_virtual > var->yres
+	    || var->xoffset != 0 || var->yoffset != 0) {

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#684: FILE: drivers/video/valkyriefb.c:483:
+	init = valkyrie_reg_init[vmode-1];
 	                              ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#686: FILE: drivers/video/valkyriefb.c:485:
+		printk(KERN_ERR "valkyriefb: vmode %d does not support "

WARNING:SPLIT_STRING: quoted string split across lines
#687: FILE: drivers/video/valkyriefb.c:486:
+		printk(KERN_ERR "valkyriefb: vmode %d does not support "
+		       "cmode %d.\n", vmode, cmode);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#694: FILE: drivers/video/valkyriefb.c:491:
+		printk(KERN_ERR "valkyriefb: not enough ram for vmode %d, "

WARNING:SPLIT_STRING: quoted string split across lines
#695: FILE: drivers/video/valkyriefb.c:492:
+		printk(KERN_ERR "valkyriefb: not enough ram for vmode %d, "
+		       "cmode %d.\n", vmode, cmode);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000367965.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 4 errors, 15 warnings, 18 checks, 782 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000367965.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
