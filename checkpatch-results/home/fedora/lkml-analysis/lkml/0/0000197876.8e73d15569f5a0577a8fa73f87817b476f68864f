WARNING:TYPO_SPELLING: 'seperated' may be misspelled - perhaps 'separated'?
#31: 
I have seperated out the changes related to 
       ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#34: 
(2) code to look at sharedness of the caches and store these details for future

ERROR:CODE_INDENT: code indent should use tabs where possible
#81: FILE: include/asm-i386/processor.h:152:
+^I       ^Iint *edx)$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#81: FILE: include/asm-i386/processor.h:152:
+^I       ^Iint *edx)$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#81: FILE: include/asm-i386/processor.h:152:
+static inline void cpuid_count(int op, int count, int *eax, int *ebx, int *ecx,
+	       	int *edx)

ERROR:CODE_INDENT: code indent should use tabs where possible
#102: FILE: include/asm-x86_64/msr.h:83:
+^I       ^Iint *edx)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#102: FILE: include/asm-x86_64/msr.h:83:
+^I       ^Iint *edx)$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#102: FILE: include/asm-x86_64/msr.h:83:
+static inline void cpuid_count(int op, int count, int *eax, int *ebx, int *ecx,
+	       	int *edx)

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#118: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:TYPO_SPELLING: 'indentify' may be misspelled - perhaps 'identify'?
#119: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:2:
+ *      Routines to indentify caches on Intel CPU.
                     ^^^^^^^^^

CHECK:ARCH_INCLUDE_LINUX: Consider using #include <linux/smp.h> instead of <asm/smp.h>
#132: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:15:
+#include <asm/smp.h>

Whenever asm/file.h is included and linux/file.h exists, a
conversion can be made when linux/file.h includes asm/file.h.
However this is not always the case (See signal.h).
This message type is emitted only for includes from arch/.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#140: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:74:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:OPEN_BRACE: open brace '{' following enum go on the same line
#142: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:76:
+enum _cache_type
+{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:HOTPLUG_SECTION: Using __devinitdata is unnecessary
#187: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:121:
+static unsigned short __devinitdata	num_cache_leaves;

ERROR:POINTER_LOCATION: "foo __devinitdata	bar" should be "foo __devinitdata bar"
#187: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:121:
+static unsigned short __devinitdata	num_cache_leaves;

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:MISPLACED_INIT: __devinitdata should be placed after num_cache_leaves
#187: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:121:
+static unsigned short __devinitdata	num_cache_leaves;

It is possible to use section markers on variables in a way
which gcc doesn't understand (or at least not the way the
developer intended)::

  static struct __initdata samsung_pll_clock exynos4_plls[nr_plls] = {

does not put exynos4_plls in the .initdata section. The __initdata
marker can be virtually anywhere on the line, except right after
"struct". The preferred location is before the "=" sign if there is
one, or before the trailing ";" otherwise.

See: https://lore.kernel.org/lkml/1377655732.3619.19.camel@joe-AO722/

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#189: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:123:
+static int __devinit cpuid4_cache_lookup(int index, struct _cpuid4_info *this_leaf)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#213: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:147:
+^Iint ^I^I^Ii;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#214: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:148:
+^Iint ^I^I^Iretval;$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#245: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:179:
+^I^I * Whenever possible use cpuid(4), deterministic cache $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#255: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:189:
+				switch(this_leaf.eax.split.level) {
+				    case 1:
[...]
+				    case 2:
[...]
+				    case 3:
[...]
+				    default:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

ERROR:SPACING: space required before the open parenthesis '('
#255: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:189:
+				switch(this_leaf.eax.split.level) {

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TABSTOP: Statements should start on a tabstop
#256: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:190:
+				    case 1:

ERROR:TRAILING_WHITESPACE: trailing whitespace
#257: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:191:
+^I^I^I^I^Iif (this_leaf.eax.split.type == $

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#259: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:193:
+						new_l1d = this_leaf.size/1024;
 						                        ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#260: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:194:
+^I^I^I^I^Ielse if (this_leaf.eax.split.type == $

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#262: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:196:
+						new_l1i = this_leaf.size/1024;
 						                        ^

WARNING:TABSTOP: Statements should start on a tabstop
#264: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:198:
+				    case 2:

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#265: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:199:
+					new_l2 = this_leaf.size/1024;
 					                       ^

WARNING:TABSTOP: Statements should start on a tabstop
#267: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:201:
+				    case 3:

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#268: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:202:
+					new_l3 = this_leaf.size/1024;
 					                       ^

WARNING:TABSTOP: Statements should start on a tabstop
#270: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:204:
+				    default:

ERROR:SPACING: space required after that ',' (ctx:VxV)
#305: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:301:
+#define CPUID4_INFO_IDX(x,y)    (&((cpuid4_info[x])[y]))
                          ^

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#308: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:304:
+static void __devinit cache_shared_cpu_map_setup(unsigned int cpu, int index)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#321: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:317:
+		printk(KERN_INFO "Number of CPUs sharing cache didn't match "

WARNING:SPLIT_STRING: quoted string split across lines
#322: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:318:
+		printk(KERN_INFO "Number of CPUs sharing cache didn't match "
+				"any known set of CPUs\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#334: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:330:
+static int __devinit detect_cache_attributes(unsigned int cpu)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#337: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:333:
+^Iunsigned long ^I^Ij;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#338: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:334:
+^Iint ^I^I^Iretval;$

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#343: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:339:
+	cpuid4_info[cpu] = kmalloc(

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#343: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:339:
+	cpuid4_info[cpu] = kmalloc(
+	    sizeof(struct _cpuid4_info) * num_cache_leaves, GFP_KERNEL);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cpuid4_info[cpu]"
#345: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:341:
+	if (unlikely(cpuid4_info[cpu] == NULL))

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

ERROR:TRAILING_WHITESPACE: trailing whitespace
#347: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:343:
+^Imemset(cpuid4_info[cpu], 0, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#348: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:344:
+	memset(cpuid4_info[cpu], 0, 
+	    sizeof(struct _cpuid4_info) * num_cache_leaves);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#372: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:368:
+/* pointer to kobject for cpuX/cache */ $

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#373: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:369:
+static struct kobject * cache_kobject[NR_CPUS];

ERROR:TRAILING_WHITESPACE: trailing whitespace
#381: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:377:
+/* pointer to array of kobjects for cpuX/cache/indexY */ $

ERROR:SPACING: space required after that ',' (ctx:VxV)
#383: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:379:
+#define INDEX_KOBJECT_PTR(x,y)    (&((index_kobject[x])[y]))
                            ^

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'object' may be better as '(object)' to avoid precedence issues
#385: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:381:
+#define show_one_plus(file_name, object, val)				\
+static ssize_t show_##file_name						\
+			(struct _cpuid4_info *this_leaf, char *buf)	\
+{									\
+	return sprintf (buf, "%lu\n", (unsigned long)this_leaf->object + val); \
+}

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'val' may be better as '(val)' to avoid precedence issues
#385: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:381:
+#define show_one_plus(file_name, object, val)				\
+static ssize_t show_##file_name						\
+			(struct _cpuid4_info *this_leaf, char *buf)	\
+{									\
+	return sprintf (buf, "%lu\n", (unsigned long)this_leaf->object + val); \
+}

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#389: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:385:
+	return sprintf (buf, "%lu\n", (unsigned long)this_leaf->object + val); \

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#400: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:396:
+	return sprintf (buf, "%luK\n", this_leaf->size / 1024);

WARNING:LINE_SPACING: Missing a blank line after declarations
#406: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:402:
+	char mask_str[NR_CPUS];
+	cpumask_scnprintf(mask_str, NR_CPUS, this_leaf->shared_cpu_map);

WARNING:NR_CPUS: usage of NR_CPUS is often wrong - consider using cpu_possible(), num_possible_cpus(), for_each_possible_cpu(), etc
#406: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:402:
+	cpumask_scnprintf(mask_str, NR_CPUS, this_leaf->shared_cpu_map);

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#410: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:406:
+static ssize_t show_type(struct _cpuid4_info *this_leaf, char *buf) {

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#411: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:407:
+	switch(this_leaf->eax.split.type) {
+	    case CACHE_TYPE_DATA:
[...]
+	    case CACHE_TYPE_INST:
[...]
+	    case CACHE_TYPE_UNIFIED:
[...]
+	    default:

ERROR:SPACING: space required before the open parenthesis '('
#411: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:407:
+	switch(this_leaf->eax.split.type) {

WARNING:TABSTOP: Statements should start on a tabstop
#412: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:408:
+	    case CACHE_TYPE_DATA:

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#414: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:410:
+		return sprintf(buf, "Data\n");
+		break;

WARNING:TABSTOP: Statements should start on a tabstop
#415: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:411:
+	    case CACHE_TYPE_INST:

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#417: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:413:
+		return sprintf(buf, "Instruction\n");
+		break;

WARNING:TABSTOP: Statements should start on a tabstop
#418: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:414:
+	    case CACHE_TYPE_UNIFIED:

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#420: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:416:
+		return sprintf(buf, "Unified\n");
+		break;

WARNING:TABSTOP: Statements should start on a tabstop
#421: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:417:
+	    default:

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#423: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:419:
+		return sprintf(buf, "Unknown\n");
+		break;

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct _cpuid4_info *' should also have an identifier name
#429: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:425:
+	ssize_t (*show)(struct _cpuid4_info *, char *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'char *' should also have an identifier name
#429: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:425:
+	ssize_t (*show)(struct _cpuid4_info *, char *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct _cpuid4_info *' should also have an identifier name
#430: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:426:
+	ssize_t (*store)(struct _cpuid4_info *, const char *, size_t count);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'const char *' should also have an identifier name
#430: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:426:
+	ssize_t (*store)(struct _cpuid4_info *, const char *, size_t count);

CHECK:MACRO_ARG_REUSE: Macro argument reuse '_name' - possible side-effects?
#433: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:429:
+#define define_one_ro(_name) \
+static struct _cache_attr _name = \
+	__ATTR(_name, 0444, show_##_name, NULL)

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#446: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:442:
+static struct attribute * default_attrs[] = {

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#461: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:457:
+static ssize_t show(struct kobject * kobj, struct attribute * attr, char * buf)

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#461: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:457:
+static ssize_t show(struct kobject * kobj, struct attribute * attr, char * buf)

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#461: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:457:
+static ssize_t show(struct kobject * kobj, struct attribute * attr, char * buf)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#467: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:463:
+^Iret = fattr->show ? $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#468: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:464:
+^I^Ifattr->show(CPUID4_INFO_IDX(this_leaf->cpu, this_leaf->index), $

ERROR:CODE_INDENT: code indent should use tabs where possible
#470: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:466:
+^I       ^I0;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#470: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:466:
+^I       ^I0;$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#474: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:470:
+static ssize_t store(struct kobject * kobj, struct attribute * attr, $

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#474: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:470:
+static ssize_t store(struct kobject * kobj, struct attribute * attr, 

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#474: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:470:
+static ssize_t store(struct kobject * kobj, struct attribute * attr, 

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#475: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:471:
+		     const char * buf, size_t count)

WARNING:CONST_STRUCT: struct sysfs_ops should normally be const
#480: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:476:
+static struct sysfs_ops sysfs_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#503: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:499:
+static int __devinit cpuid4_cache_sysfs_init(unsigned int cpu)

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#505: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:501:
+{
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cpuid4_info[cpu]"
#510: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:506:
+	if (cpuid4_info[cpu] == NULL)

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*cache_kobject[cpu])...) over kmalloc(sizeof(struct kobject)...)
#514: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:510:
+	cache_kobject[cpu] = kmalloc(sizeof(struct kobject), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!cache_kobject[cpu]"
#515: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:511:
+	if (unlikely(cache_kobject[cpu] == NULL))

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#519: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:515:
+	index_kobject[cpu] = kmalloc(

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#519: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:515:
+	index_kobject[cpu] = kmalloc(
+	    sizeof(struct _index_kobject ) * num_cache_leaves, GFP_KERNEL);

ERROR:SPACING: space prohibited before that close parenthesis ')'
#520: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:516:
+	    sizeof(struct _index_kobject ) * num_cache_leaves, GFP_KERNEL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!index_kobject[cpu]"
#521: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:517:
+	if (unlikely(index_kobject[cpu] == NULL))

ERROR:TRAILING_WHITESPACE: trailing whitespace
#523: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:519:
+^Imemset(index_kobject[cpu], 0, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#524: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:520:
+	memset(index_kobject[cpu], 0, 
+	    sizeof(struct _index_kobject) * num_cache_leaves);

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#534: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:530:
+static int __devinit cache_add_dev(struct sys_device * sys_dev)

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#534: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:530:
+static int __devinit cache_add_dev(struct sys_device * sys_dev)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#551: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:547:
+		this_object = INDEX_KOBJECT_PTR(cpu,i);
 		                                   ^

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around this_object->kobj
#555: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:551:
+		kobject_set_name(&(this_object->kobj), "index%1lu", i);

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around this_object->kobj
#557: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:553:
+		retval = kobject_register(&(this_object->kobj));

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#560: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:556:
+				kobject_unregister(

ERROR:SPACING: space required after that ',' (ctx:VxV)
#561: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:557:
+					&(INDEX_KOBJECT_PTR(cpu,j)->kobj));
 					                       ^

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#571: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:567:
+static int __devexit cache_remove_dev(struct sys_device * sys_dev)

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#571: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:567:
+static int __devexit cache_remove_dev(struct sys_device * sys_dev)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#577: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:573:
+		kobject_unregister(&(INDEX_KOBJECT_PTR(cpu,i)->kobj));
 		                                          ^

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#589: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:585:
+static int __devinit cache_register_driver(void)

ERROR:SPACING: space required after that ',' (ctx:VxO)
#594: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:590:
+	return sysdev_driver_register(&cpu_sysdev_class,&cache_sysdev_driver);
 	                                               ^

ERROR:SPACING: space required before that '&' (ctx:OxV)
#594: FILE: arch/i386/kernel/cpu/intel_cacheinfo.c:590:
+	return sysdev_driver_register(&cpu_sysdev_class,&cache_sysdev_driver);
 	                                                ^

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000197876.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 38 errors, 45 warnings, 24 checks, 516 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000197876.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
