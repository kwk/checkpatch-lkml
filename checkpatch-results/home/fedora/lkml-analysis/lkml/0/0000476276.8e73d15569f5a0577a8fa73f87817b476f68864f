WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#27: 
diff -Nur -X /home/nigel/.diffignore linux_pre/Documentation/preempt_logging.txt linux_log/Documentation/preempt_logging.txt

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#130: FILE: drivers/char/sysrq.c:271:
+static void sysrq_handle_show_preempt_log(int key, struct pt_regs *pt_regs,
+		struct kbd_struct *kbd, struct tty_struct *tty) {

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#131: FILE: drivers/char/sysrq.c:272:
+static void sysrq_handle_show_preempt_log(int key, struct pt_regs *pt_regs,
+		struct kbd_struct *kbd, struct tty_struct *tty) {

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#134: FILE: drivers/char/sysrq.c:275:
+}
+static struct sysrq_key_op sysrq_show_preempt_log_op = {

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:INDENTED_LABEL: labels should not be indented
#135: FILE: drivers/char/sysrq.c:276:
+	handler:	sysrq_handle_show_preempt_log,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#136: FILE: drivers/char/sysrq.c:277:
+	help_msg:	"showpreemptloG",
 	        ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:INDENTED_LABEL: labels should not be indented
#136: FILE: drivers/char/sysrq.c:277:
+	help_msg:	"showpreemptloG",

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#137: FILE: drivers/char/sysrq.c:278:
+	action_msg:	"Show Preempt Log",
 	          ^

WARNING:INDENTED_LABEL: labels should not be indented
#137: FILE: drivers/char/sysrq.c:278:
+	action_msg:	"Show Preempt Log",

WARNING:NEW_TYPEDEFS: do not add new typedefs
#205: FILE: kernel/sched.c:859:
+typedef struct {

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#217: FILE: kernel/sched.c:871:
+static int saved_pli = 0;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#247: FILE: kernel/sched.c:901:
+static int preempt_log_saved = 0;

ERROR:FUNCTION_WITHOUT_ARGS: Bad function definition - void save_preempt_log() should probably be void save_preempt_log(void)
#249: FILE: kernel/sched.c:903:
+void save_preempt_log()

Function declarations without arguments like::

  int foo()

should be::

  int foo(void)

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#251: FILE: kernel/sched.c:905:
+{
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#253: FILE: kernel/sched.c:907:
+	unsigned long flags;
+	spin_lock_irqsave(&preempt_log_lock, flags);

WARNING:SIZEOF_PARENTHESIS: sizeof saved_preempt_log should be sizeof(saved_preempt_log)
#254: FILE: kernel/sched.c:908:
+	memcpy(saved_preempt_log, preempt_log, sizeof saved_preempt_log);

ERROR:FUNCTION_WITHOUT_ARGS: Bad function definition - void show_preempt_log() should probably be void show_preempt_log(void)
#260: FILE: kernel/sched.c:914:
+void show_preempt_log()

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#276: FILE: kernel/sched.c:930:
+	printk("Most recently logged preemption event happened %ldms ago\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#277: FILE: kernel/sched.c:931:
+	printk("Most recently logged preemption event happened %ldms ago\n",
+		recent);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#279: FILE: kernel/sched.c:933:
+	printk("  pid   time preempted_IP\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#294: FILE: kernel/sched.c:948:
+		printk("%5d", saved_preempt_log[n].pid);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#295: FILE: kernel/sched.c:949:
+		printk(" %6ld", msecs);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#297: FILE: kernel/sched.c:951:
+		printk(" [<%08lx>]\n", (unsigned long)(saved_preempt_log[n].ip));

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#299: FILE: kernel/sched.c:953:
+		printk(" [<%016lx>]\n", (unsigned long)(saved_preempt_log[n].ip));

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#308: FILE: kernel/sched.c:962:
+	printk("Trace:");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#316: FILE: kernel/sched.c:970:
+		printk(" [<%08lx>]", (unsigned long)(saved_preempt_log[n].ip));

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#318: FILE: kernel/sched.c:972:
+		printk(" [<%016lx>]", (unsigned long)(saved_preempt_log[n].ip));

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#321: FILE: kernel/sched.c:975:
+	printk("\n");

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000476276.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 7 errors, 17 warnings, 4 checks, 268 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000476276.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
