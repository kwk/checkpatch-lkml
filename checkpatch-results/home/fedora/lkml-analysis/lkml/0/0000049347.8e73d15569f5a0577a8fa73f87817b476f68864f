WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#76: FILE: drivers/firmware/thinkpad_ec.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#101: FILE: drivers/firmware/thinkpad_ec.c:26:
+ *  along with this program; if not, write to the Free Software$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#102: FILE: drivers/firmware/thinkpad_ec.c:27:
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA$

WARNING:INCLUDE_LINUX: Use #include <linux/io.h> instead of <asm/io.h>
#112: FILE: drivers/firmware/thinkpad_ec.c:37:
+#include <asm/io.h>

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#141: FILE: drivers/firmware/thinkpad_ec.c:66:
+#define TPC_PREFETCH_TIMEOUT   (HZ/10)  /* invalidate prefetch after 0.1sec */
                                   ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#145: FILE: drivers/firmware/thinkpad_ec.c:70:
+  "thinkpad_ec: %s: " fmt "\n", __func__, ## args$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#147: FILE: drivers/firmware/thinkpad_ec.c:72:
+  MSG_FMT("%s: (0x%02x:0x%02x)->0x%02x", \$

ERROR:CODE_INDENT: code indent should use tabs where possible
#148: FILE: drivers/firmware/thinkpad_ec.c:73:
+          msg, args->val[0x0], args->val[0xF], code)$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#148: FILE: drivers/firmware/thinkpad_ec.c:73:
+          msg, args->val[0x0], args->val[0xF], code)$

CHECK:CAMELCASE: Avoid CamelCase: <xF>
#148: FILE: drivers/firmware/thinkpad_ec.c:73:
+          msg, args->val[0x0], args->val[0xF], code)

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#154: FILE: drivers/firmware/thinkpad_ec.c:79:
+#define TPC_PREFETCH_JUNK   (INITIAL_JIFFIES+1)   /* - Ignore prefetch */
                                             ^

WARNING:TYPO_SPELLING: 'accesing' may be misspelled - perhaps 'accessing'?
#163: FILE: drivers/firmware/thinkpad_ec.c:88:
+ * Get exclusive lock for accesing the ThinkPad embedded controller LPC3
                           ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:LINE_SPACING: Missing a blank line after declarations
#169: FILE: drivers/firmware/thinkpad_ec.c:94:
+	int ret;
+	ret = down_interruptible(&thinkpad_ec_mutex);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#173: FILE: drivers/firmware/thinkpad_ec.c:98:
+EXPORT_SYMBOL_GPL(thinkpad_ec_lock);

EXPORT_SYMBOL should immediately follow the symbol to be exported.

WARNING:TYPO_SPELLING: 'accesing' may be misspelled - perhaps 'accessing'?
#178: FILE: drivers/firmware/thinkpad_ec.c:103:
+ * Try getting an exclusive lock for accesing the ThinkPad embedded
                                      ^^^^^^^^

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#187: FILE: drivers/firmware/thinkpad_ec.c:112:
+EXPORT_SYMBOL_GPL(thinkpad_ec_try_lock);

ERROR:CODE_INDENT: code indent should use tabs where possible
#197: FILE: drivers/firmware/thinkpad_ec.c:122:
+ ^Iup(&thinkpad_ec_mutex);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#197: FILE: drivers/firmware/thinkpad_ec.c:122:
+ ^Iup(&thinkpad_ec_mutex);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#197: FILE: drivers/firmware/thinkpad_ec.c:122:
+ ^Iup(&thinkpad_ec_mutex);$

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#200: FILE: drivers/firmware/thinkpad_ec.c:125:
+EXPORT_SYMBOL_GPL(thinkpad_ec_unlock);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#210: FILE: drivers/firmware/thinkpad_ec.c:135:
+		printk(KERN_ERR MSG_FMT("bad args->mask=0x%02x", args->mask));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#219: FILE: drivers/firmware/thinkpad_ec.c:144:
+			printk(KERN_WARNING

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#224: FILE: drivers/firmware/thinkpad_ec.c:149:
+			printk(KERN_WARNING

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#228: FILE: drivers/firmware/thinkpad_ec.c:153:
+		printk(KERN_WARNING REQ_FMT("bad initial STR3", str3));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#236: FILE: drivers/firmware/thinkpad_ec.c:161:
+		printk(KERN_WARNING REQ_FMT("arg0 rejected", str3));

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#241: FILE: drivers/firmware/thinkpad_ec.c:166:
+	for (i=1; i<TP_CONTROLLER_ROW_LEN-1; i++)
 	      ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#241: FILE: drivers/firmware/thinkpad_ec.c:166:
+	for (i=1; i<TP_CONTROLLER_ROW_LEN-1; i++)
 	           ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#241: FILE: drivers/firmware/thinkpad_ec.c:166:
+	for (i=1; i<TP_CONTROLLER_ROW_LEN-1; i++)
 	                                 ^

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#242: FILE: drivers/firmware/thinkpad_ec.c:167:
+		if ((args->mask>>i)&1)
 		               ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#242: FILE: drivers/firmware/thinkpad_ec.c:167:
+		if ((args->mask>>i)&1)
 		                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#243: FILE: drivers/firmware/thinkpad_ec.c:168:
+			outb(args->val[i], TPC_TWR0_PORT+i);
 			                                ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#252: FILE: drivers/firmware/thinkpad_ec.c:177:
+	for (i=0; i<TPC_REQUEST_RETRIES; i++) {
 	      ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#252: FILE: drivers/firmware/thinkpad_ec.c:177:
+	for (i=0; i<TPC_REQUEST_RETRIES; i++) {
 	           ^

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#256: FILE: drivers/firmware/thinkpad_ec.c:181:
+		else if (str3==(H8S_STR3_IBF3B|H8S_STR3_MWMF) ||
 		             ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#256: FILE: drivers/firmware/thinkpad_ec.c:181:
+		else if (str3==(H8S_STR3_IBF3B|H8S_STR3_MWMF) ||
 		                              ^

ERROR:CODE_INDENT: code indent should use tabs where possible
#257: FILE: drivers/firmware/thinkpad_ec.c:182:
+^I^I         str3==0x00) /* normal progress, wait it out */$

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#257: FILE: drivers/firmware/thinkpad_ec.c:182:
+		         str3==0x00) /* normal progress, wait it out */
 		             ^

CHECK:BRACES: Unbalanced braces around else statement
#259: FILE: drivers/firmware/thinkpad_ec.c:184:
+		else { /* weird EC status */

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#260: FILE: drivers/firmware/thinkpad_ec.c:185:
+			printk(KERN_WARNING

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#265: FILE: drivers/firmware/thinkpad_ec.c:190:
+	printk(KERN_WARNING REQ_FMT("EC is mysteriously silent", str3));

ERROR:CODE_INDENT: code indent should use tabs where possible
#277: FILE: drivers/firmware/thinkpad_ec.c:202:
+         * in the following 'if' as it reads the request and writes its data.$

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#280: FILE: drivers/firmware/thinkpad_ec.c:205:
+	if (str3==(H8S_STR3_IBF3B|H8S_STR3_MWMF) ||
 	        ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#280: FILE: drivers/firmware/thinkpad_ec.c:205:
+	if (str3==(H8S_STR3_IBF3B|H8S_STR3_MWMF) ||
 	                         ^

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#281: FILE: drivers/firmware/thinkpad_ec.c:206:
+	    str3==0x00 ||   /* the 0x00 is indistinguishable from idle EC! */
 	        ^

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#282: FILE: drivers/firmware/thinkpad_ec.c:207:
+	    str3==H8S_STR3_SWMF )
 	        ^

ERROR:SPACING: space prohibited before that close parenthesis ')'
#282: FILE: drivers/firmware/thinkpad_ec.c:207:
+	    str3==H8S_STR3_SWMF )

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#285: FILE: drivers/firmware/thinkpad_ec.c:210:
+	if (str3 != (H8S_STR3_OBF3B|H8S_STR3_SWMF)) {
 	                           ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#286: FILE: drivers/firmware/thinkpad_ec.c:211:
+		printk(KERN_WARNING

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#294: FILE: drivers/firmware/thinkpad_ec.c:219:
+	for (i=1; i<TP_CONTROLLER_ROW_LEN-1; i++)
 	      ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#294: FILE: drivers/firmware/thinkpad_ec.c:219:
+	for (i=1; i<TP_CONTROLLER_ROW_LEN-1; i++)
 	           ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#294: FILE: drivers/firmware/thinkpad_ec.c:219:
+	for (i=1; i<TP_CONTROLLER_ROW_LEN-1; i++)
 	                                 ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#295: FILE: drivers/firmware/thinkpad_ec.c:220:
+		if ((data->mask >> i)&1)
 		                     ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#296: FILE: drivers/firmware/thinkpad_ec.c:221:
+			data->val[i] = inb(TPC_TWR0_PORT+i);
 			                                ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#303: FILE: drivers/firmware/thinkpad_ec.c:228:
+		printk(KERN_WARNING

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#310: FILE: drivers/firmware/thinkpad_ec.c:235:
+ * in practice this suffices                                        .*/

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:JIFFIES_COMPARISON: Comparing get_jiffies_64() is almost always wrong; prefer time_after64, time_before64 and friends
#317: FILE: drivers/firmware/thinkpad_ec.c:242:
+	       (get_jiffies_64() < prefetch_jiffies + TPC_PREFETCH_TIMEOUT);

ERROR:CODE_INDENT: code indent should use tabs where possible
#338: FILE: drivers/firmware/thinkpad_ec.c:263:
+                           struct thinkpad_ec_row *data)$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#338: FILE: drivers/firmware/thinkpad_ec.c:263:
+int thinkpad_ec_read_row(const struct thinkpad_ec_row *args,
+                           struct thinkpad_ec_row *data)

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#338: FILE: drivers/firmware/thinkpad_ec.c:263:
+                           struct thinkpad_ec_row *data)$

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#346: FILE: drivers/firmware/thinkpad_ec.c:271:
+	for (retries=0; retries<TPC_READ_RETRIES; ++retries) {
 	            ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#346: FILE: drivers/firmware/thinkpad_ec.c:271:
+	for (retries=0; retries<TPC_READ_RETRIES; ++retries) {
 	                       ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#354: FILE: drivers/firmware/thinkpad_ec.c:279:
+	printk(KERN_ERR REQ_FMT("failed requesting row", ret));

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#359: FILE: drivers/firmware/thinkpad_ec.c:284:
+	for (retries=0; retries<TPC_READ_RETRIES; ++retries) {
 	            ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#359: FILE: drivers/firmware/thinkpad_ec.c:284:
+	for (retries=0; retries<TPC_READ_RETRIES; ++retries) {
 	                       ^

ERROR:SPACING: spaces required around that '!=' (ctx:VxO)
#363: FILE: drivers/firmware/thinkpad_ec.c:288:
+		if (ret!=-EBUSY)
 		       ^

ERROR:SPACING: space required before that '-' (ctx:OxV)
#363: FILE: drivers/firmware/thinkpad_ec.c:288:
+		if (ret!=-EBUSY)
 		         ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#368: FILE: drivers/firmware/thinkpad_ec.c:293:
+	printk(KERN_ERR REQ_FMT("failed waiting for data", ret));

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#375: FILE: drivers/firmware/thinkpad_ec.c:300:
+EXPORT_SYMBOL_GPL(thinkpad_ec_read_row);

ERROR:CODE_INDENT: code indent should use tabs where possible
#391: FILE: drivers/firmware/thinkpad_ec.c:316:
+                               struct thinkpad_ec_row *data)$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#391: FILE: drivers/firmware/thinkpad_ec.c:316:
+int thinkpad_ec_try_read_row(const struct thinkpad_ec_row *args,
+                               struct thinkpad_ec_row *data)

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#391: FILE: drivers/firmware/thinkpad_ec.c:316:
+                               struct thinkpad_ec_row *data)$

WARNING:LINE_SPACING: Missing a blank line after declarations
#394: FILE: drivers/firmware/thinkpad_ec.c:319:
+	int ret;
+	if (!thinkpad_ec_is_row_fetched(args)) {

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#404: FILE: drivers/firmware/thinkpad_ec.c:329:
+EXPORT_SYMBOL_GPL(thinkpad_ec_try_read_row);

ERROR:CODE_INDENT: code indent should use tabs where possible
#423: FILE: drivers/firmware/thinkpad_ec.c:348:
+ ^Iret = thinkpad_ec_request_row(args);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#423: FILE: drivers/firmware/thinkpad_ec.c:348:
+ ^Iret = thinkpad_ec_request_row(args);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#423: FILE: drivers/firmware/thinkpad_ec.c:348:
+ ^Iret = thinkpad_ec_request_row(args);$

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#434: FILE: drivers/firmware/thinkpad_ec.c:359:
+EXPORT_SYMBOL_GPL(thinkpad_ec_prefetch_row);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#449: FILE: drivers/firmware/thinkpad_ec.c:374:
+EXPORT_SYMBOL_GPL(thinkpad_ec_invalidate);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#451: FILE: drivers/firmware/thinkpad_ec.c:376:
+
+

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	         ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                            ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                              ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                    ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                        ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                          ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                            ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                              ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                                ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                                    ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/firmware/thinkpad_ec.c:388:
+	  { .mask=0x8001, .val={0x01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x00} };
 	                                                        ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#465: FILE: drivers/firmware/thinkpad_ec.c:390:
+	struct thinkpad_ec_row data = { .mask = 0x0000 };
+	ret = thinkpad_ec_lock();

WARNING:LINE_SPACING: Missing a blank line after declarations
#477: FILE: drivers/firmware/thinkpad_ec.c:402:
+	struct dmi_device *dev = NULL;
+	while ((dev = dmi_find_device(type, NULL, dev))) {

ERROR:SPACING: space required after that ',' (ctx:VxV)
#484: FILE: drivers/firmware/thinkpad_ec.c:409:
+#define TP_DMI_MATCH(vendor,model)	{		\
                            ^

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'vendor' - possible side-effects?
#484: FILE: drivers/firmware/thinkpad_ec.c:409:
+#define TP_DMI_MATCH(vendor,model)	{		\
+	.ident = vendor " " model,			\
+	.matches = {					\
+		DMI_MATCH(DMI_BOARD_VENDOR, vendor),	\
+		DMI_MATCH(DMI_PRODUCT_VERSION, model)	\
+	}						\
+}

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'model' - possible side-effects?
#484: FILE: drivers/firmware/thinkpad_ec.c:409:
+#define TP_DMI_MATCH(vendor,model)	{		\
+	.ident = vendor " " model,			\
+	.matches = {					\
+		DMI_MATCH(DMI_BOARD_VENDOR, vendor),	\
+		DMI_MATCH(DMI_PRODUCT_VERSION, model)	\
+	}						\
+}

ERROR:SPACING: space required after that ',' (ctx:VxV)
#497: FILE: drivers/firmware/thinkpad_ec.c:422:
+		TP_DMI_MATCH("IBM","ThinkPad A30"),
 		                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#498: FILE: drivers/firmware/thinkpad_ec.c:423:
+		TP_DMI_MATCH("IBM","ThinkPad T23"),
 		                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#499: FILE: drivers/firmware/thinkpad_ec.c:424:
+		TP_DMI_MATCH("IBM","ThinkPad X24"),
 		                  ^

ERROR:CODE_INDENT: code indent should use tabs where possible
#503: FILE: drivers/firmware/thinkpad_ec.c:428:
+^I                          "IBM ThinkPad Embedded Controller") ||$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#512: FILE: drivers/firmware/thinkpad_ec.c:437:
+		printk(KERN_WARNING "thinkpad_ec: no ThinkPad embedded controller!\n");

ERROR:CODE_INDENT: code indent should use tabs where possible
#517: FILE: drivers/firmware/thinkpad_ec.c:442:
+^I                    "thinkpad_ec")) {$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#518: FILE: drivers/firmware/thinkpad_ec.c:443:
+		printk(KERN_ERR "thinkpad_ec: cannot claim io ports %#x-%#x\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:WxV)
#520: FILE: drivers/firmware/thinkpad_ec.c:445:
+		       TPC_BASE_PORT + TPC_NUM_PORTS -1);
 		                                     ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#525: FILE: drivers/firmware/thinkpad_ec.c:450:
+		printk(KERN_ERR "thinkpad_ec: initial ec test failed\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#529: FILE: drivers/firmware/thinkpad_ec.c:454:
+	printk(KERN_INFO "thinkpad_ec: thinkpad_ec " TP_VERSION " loaded.\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#536: FILE: drivers/firmware/thinkpad_ec.c:461:
+	printk(KERN_INFO "thinkpad_ec: unloaded.\n");

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#544: FILE: include/linux/thinkpad_ec.h:1:
+/*

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#560: FILE: include/linux/thinkpad_ec.h:17:
+ *  along with this program; if not, write to the Free Software$

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#561: FILE: include/linux/thinkpad_ec.h:18:
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA$

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#577: FILE: include/linux/thinkpad_ec.h:34:
+extern int thinkpad_ec_lock(void);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#578: FILE: include/linux/thinkpad_ec.h:35:
+extern int thinkpad_ec_try_lock(void);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#579: FILE: include/linux/thinkpad_ec.h:36:
+extern void thinkpad_ec_unlock(void);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#581: FILE: include/linux/thinkpad_ec.h:38:
+extern int thinkpad_ec_read_row(const struct thinkpad_ec_row *args,

ERROR:CODE_INDENT: code indent should use tabs where possible
#582: FILE: include/linux/thinkpad_ec.h:39:
+                                struct thinkpad_ec_row *data);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#582: FILE: include/linux/thinkpad_ec.h:39:
+                                struct thinkpad_ec_row *data);$

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#583: FILE: include/linux/thinkpad_ec.h:40:
+extern int thinkpad_ec_try_read_row(const struct thinkpad_ec_row *args,

ERROR:CODE_INDENT: code indent should use tabs where possible
#584: FILE: include/linux/thinkpad_ec.h:41:
+                                    struct thinkpad_ec_row *mask);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#584: FILE: include/linux/thinkpad_ec.h:41:
+                                    struct thinkpad_ec_row *mask);$

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#585: FILE: include/linux/thinkpad_ec.h:42:
+extern int thinkpad_ec_prefetch_row(const struct thinkpad_ec_row *args);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#586: FILE: include/linux/thinkpad_ec.h:43:
+extern void thinkpad_ec_invalidate(void);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#588: FILE: include/linux/thinkpad_ec.h:45:
+
+

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000049347.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 54 errors, 45 warnings, 28 checks, 523 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000049347.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
