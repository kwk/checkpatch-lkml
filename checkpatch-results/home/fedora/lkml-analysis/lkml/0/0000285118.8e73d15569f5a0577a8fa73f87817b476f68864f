ERROR:DIFF_IN_COMMIT_MSG: Avoid using diff content in the commit message - patch(1) might not work
#38: 
--- a/drivers/message/i2o/i2o_block.c	2004-04-03 17:37:37.000000000 -1000

Avoid having diff content in commit message.
This causes problems when one tries to apply a file containing both
the changelog and the diff because patch(1) tries to apply the diff
which it found in the changelog.

See: https://lore.kernel.org/lkml/20150611134006.9df79a893e3636019ad2759e@linux-foundation.org/

WARNING:CONST_STRUCT: struct block_device_operations should normally be const
#62: FILE: drivers/message/i2o/i2o_block.c:118:
+static struct block_device_operations i2ob_fops;

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

ERROR:SPACING: space prohibited before that '++' (ctx:WxO)
#120: FILE: drivers/message/i2o/i2o_block.c:401:
+	i2ob_queues[c->unit]->queue_depth ++;
 	                                  ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#130: FILE: drivers/message/i2o/i2o_block.c:452:
+	u8 unit = m[2]>>8;
 	              ^

ERROR:SPACING: space prohibited before that '--' (ctx:WxO)
#170: FILE: drivers/message/i2o/i2o_block.c:578:
+	i2ob_queues[c->unit]->queue_depth --;
 	                                  ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#209: FILE: drivers/message/i2o/i2o_block.c:648:
+^I^I^I^Ii2ob_install_device(dev->i2odev->controller, $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#210: FILE: drivers/message/i2o/i2o_block.c:649:
+				i2ob_install_device(dev->i2odev->controller, 
+					dev->i2odev, unit);

WARNING:LINE_SPACING: Missing a blank line after declarations
#221: FILE: drivers/message/i2o/i2o_block.c:663:
+				struct gendisk *p = dev->gd;
+				blk_queue_max_sectors(dev->gd->queue, 0);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:CODE_INDENT: code indent should use tabs where possible
#245: FILE: drivers/message/i2o/i2o_block.c:691:
+^I  ^I^I^Iif(i2ob_query_device(dev, 0x0004, 0, &size, 8) !=0 )$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#245: FILE: drivers/message/i2o/i2o_block.c:691:
+^I  ^I^I^Iif(i2ob_query_device(dev, 0x0004, 0, &size, 8) !=0 )$

ERROR:SPACING: spaces required around that '!=' (ctx:WxV)
#245: FILE: drivers/message/i2o/i2o_block.c:691:
+	  			if(i2ob_query_device(dev, 0x0004, 0, &size, 8) !=0 )
 	  			                                               ^

ERROR:SPACING: space prohibited before that close parenthesis ')'
#245: FILE: drivers/message/i2o/i2o_block.c:691:
+	  			if(i2ob_query_device(dev, 0x0004, 0, &size, 8) !=0 )

ERROR:SPACING: space required before the open parenthesis '('
#245: FILE: drivers/message/i2o/i2o_block.c:691:
+	  			if(i2ob_query_device(dev, 0x0004, 0, &size, 8) !=0 )

ERROR:TRAILING_WHITESPACE: trailing whitespace
#251: FILE: drivers/message/i2o/i2o_block.c:694:
+^I^I^I^Ispin_lock_irqsave(dev->req_queue->queue_lock, flags);^I$

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#252: FILE: drivers/message/i2o/i2o_block.c:695:
+				set_capacity(dev->gd, size>>9);
 				                          ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#253: FILE: drivers/message/i2o/i2o_block.c:696:
+^I^I^I^Ispin_unlock_irqrestore(dev->req_queue->queue_lock, flags);^I$

WARNING:LONG_LINE: line length of 118 exceeds 100 columns
#262: FILE: drivers/message/i2o/i2o_block.c:708:
+				printk(KERN_INFO "I2O Block: %s received a SCSI SMART Event\n",dev->i2odev->dev_name);

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#262: FILE: drivers/message/i2o/i2o_block.c:708:
+				printk(KERN_INFO "I2O Block: %s received a SCSI SMART Event\n",dev->i2odev->dev_name);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#262: FILE: drivers/message/i2o/i2o_block.c:708:
+				printk(KERN_INFO "I2O Block: %s received a SCSI SMART Event\n",dev->i2odev->dev_name);
 				                                                              ^

ERROR:SPACING: space required before the open parenthesis '('
#271: FILE: drivers/message/i2o/i2o_block.c:735:
+				if(dev->i2odev->controller->promise)

ERROR:SPACING: space required before the open parenthesis '('
#301: FILE: drivers/message/i2o/i2o_block.c:772:
+		if(i2ob_queues[dev->unit]->queue_depth >= dev->depth)

ERROR:SPACING: space required before the open parenthesis '('
#310: FILE: drivers/message/i2o/i2o_block.c:780:
+			if(i2ob_queues[dev->unit]->queue_depth == 0)

ERROR:SPACING: space required before the open parenthesis '('
#347: FILE: drivers/message/i2o/i2o_block.c:1073:
+	if(!i2ob_queues[c->unit]) {

ERROR:SPACING: space required before the open parenthesis '('
#348: FILE: drivers/message/i2o/i2o_block.c:1074:
+		if(i2ob_init_iop(c->unit))

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#374: FILE: drivers/message/i2o/i2o_block.c:1097:
+	disk->first_minor = unit<<4;
 	                        ^

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#387: FILE: drivers/message/i2o/i2o_block.c:1118:
+	set_capacity(disk, size>>9);
 	                       ^

ERROR:SPACING: space required before the open parenthesis '('
#409: FILE: drivers/message/i2o/i2o_block.c:1129:
+	if(segments > 16)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#411: FILE: drivers/message/i2o/i2o_block.c:1131:
+^I^I^I^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#416: FILE: drivers/message/i2o/i2o_block.c:1135:
+^Iblk_queue_max_sectors(q, 96);^I/* 256 might be nicer but many controllers $

ERROR:SPACING: space required before the open parenthesis '('
#430: FILE: drivers/message/i2o/i2o_block.c:1143:
+	if(d->controller->battery == 0)

ERROR:SPACING: space required before the open parenthesis '('
#435: FILE: drivers/message/i2o/i2o_block.c:1146:
+	if(d->controller->promise)

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#444: FILE: drivers/message/i2o/i2o_block.c:1149:
+	if(d->controller->short_req)
+	{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:SPACING: space required before the open parenthesis '('
#444: FILE: drivers/message/i2o/i2o_block.c:1149:
+	if(d->controller->short_req)

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#458: FILE: drivers/message/i2o/i2o_block.c:1160:
+		 d->dev_name, dev->max_segments, dev->depth, dev->max_sectors<<9);
 		                                                             ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#526: FILE: drivers/message/i2o/i2o_block.c:1316:
+			if(scan_unit<MAX_I2OB)
 			            ^

ERROR:SPACING: space required before the open parenthesis '('
#526: FILE: drivers/message/i2o/i2o_block.c:1316:
+			if(scan_unit<MAX_I2OB)

CHECK:BRACES: braces {} should be used on all arms of this statement
#526: FILE: drivers/message/i2o/i2o_block.c:1316:
+			if(scan_unit<MAX_I2OB)
[...]
 			else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:LONG_LINE: line length of 125 exceeds 100 columns
#532: FILE: drivers/message/i2o/i2o_block.c:1321:
+					printk(KERN_WARNING "i2o_block: too many device, registering only %d.\n", scan_unit);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#532: FILE: drivers/message/i2o/i2o_block.c:1321:
+					printk(KERN_WARNING "i2o_block: too many device, registering only %d.\n", scan_unit);

ERROR:SPACING: spaces required around that '>=' (ctx:VxV)
#541: FILE: drivers/message/i2o/i2o_block.c:1370:
+	if(i2ob_dev_count>=MAX_I2OB)
 	                 ^

ERROR:SPACING: space required before the open parenthesis '('
#541: FILE: drivers/message/i2o/i2o_block.c:1370:
+	if(i2ob_dev_count>=MAX_I2OB)

ERROR:SPACING: space prohibited before that '++' (ctx:WxB)
#547: FILE: drivers/message/i2o/i2o_block.c:1375:
+	for(unit = 0; unit < MAX_I2OB; unit ++)
 	                                    ^

ERROR:SPACING: space required before the open parenthesis '('
#547: FILE: drivers/message/i2o/i2o_block.c:1375:
+	for(unit = 0; unit < MAX_I2OB; unit ++)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#558: FILE: drivers/message/i2o/i2o_block.c:1393:
+	if(i2ob_install_device(c,d,unit)) {
 	                        ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#558: FILE: drivers/message/i2o/i2o_block.c:1393:
+	if(i2ob_install_device(c,d,unit)) {
 	                          ^

ERROR:SPACING: space required before the open parenthesis '('
#558: FILE: drivers/message/i2o/i2o_block.c:1393:
+	if(i2ob_install_device(c,d,unit)) {

ERROR:SPACING: space prohibited before that '++' (ctx:WxB)
#595: FILE: drivers/message/i2o/i2o_block.c:1419:
+	for(unit = 0; unit < MAX_I2OB; unit ++)
 	                                    ^

ERROR:SPACING: space required before the open parenthesis '('
#595: FILE: drivers/message/i2o/i2o_block.c:1419:
+	for(unit = 0; unit < MAX_I2OB; unit ++)

ERROR:SPACING: space required before the open parenthesis '('
#599: FILE: drivers/message/i2o/i2o_block.c:1422:
+		if(dev->i2odev == d)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#608: FILE: drivers/message/i2o/i2o_block.c:1430:
+	printk(KERN_INFO "I2O Block Device Deleted\n");

ERROR:SPACING: space required before the open parenthesis '('
#610: FILE: drivers/message/i2o/i2o_block.c:1432:
+	if(unit >= MAX_I2OB)

WARNING:TYPO_SPELLING: 'somtimes' may be misspelled - perhaps 'sometimes'?
#620: FILE: drivers/message/i2o/i2o_block.c:1441:
+	 * Need to do this...we somtimes get two events from the IRTOS
 	                        ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

ERROR:SPACING: space required before the open parenthesis '('
#648: FILE: drivers/message/i2o/i2o_block.c:1450:
+	if(dev->gd) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#650: FILE: drivers/message/i2o/i2o_block.c:1452:
+		struct gendisk *gd = dev->gd;
+		gd->queue = NULL;

ERROR:SPACING: space required before the open parenthesis '('
#676: FILE: drivers/message/i2o/i2o_block.c:1478:
+	if(p->media_change_flag)

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#679: FILE: drivers/message/i2o/i2o_block.c:1480:
+		p->media_change_flag=0;
 		                    ^

ERROR:SPACING: spaces required around that '=' (ctx:VxO)
#697: FILE: drivers/message/i2o/i2o_block.c:1502:
+		struct i2ob_device *dev=&i2ob_dev[i];
 		                       ^

ERROR:SPACING: space required before that '&' (ctx:OxV)
#697: FILE: drivers/message/i2o/i2o_block.c:1502:
+		struct i2ob_device *dev=&i2ob_dev[i];
 		                        ^

ERROR:SPACING: space required before the open parenthesis '('
#720: FILE: drivers/message/i2o/i2o_block.c:1571:
+	for(i = 0; i < MAX_I2O_CONTROLLERS; i++)

WARNING:LINE_SPACING: Missing a blank line after declarations
#746: FILE: drivers/message/i2o/i2o_block.c:1580:
+		struct i2ob_device *dev = &i2ob_dev[i];
+		dev->index = i;

ERROR:SPACING: space required before the open parenthesis '('
#790: FILE: drivers/message/i2o/i2o_block.c:1649:
+			if((d = i2ob_dev[i].i2odev))

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#790: FILE: drivers/message/i2o/i2o_block.c:1649:
+			if((d = i2ob_dev[i].i2odev))

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

ERROR:SPACING: space prohibited before that '++' (ctx:WxB)
#812: FILE: drivers/message/i2o/i2o_block.c:1680:
+	for (i = 0; i < MAX_I2O_CONTROLLERS; i ++)
 	                                       ^

ERROR:SPACING: space required before the open parenthesis '('
#813: FILE: drivers/message/i2o/i2o_block.c:1681:
+		if(i2ob_queues[i]) {

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000285118.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 46 errors, 11 warnings, 7 checks, 741 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000285118.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
