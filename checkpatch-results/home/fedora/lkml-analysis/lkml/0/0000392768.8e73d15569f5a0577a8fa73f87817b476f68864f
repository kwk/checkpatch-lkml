WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#64: FILE: include/asm-i386/pc9800_dma.h:1:
+/* $Id: dma.h,v 1.7 1992/12/14 00:29:34 root Exp root $

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#64: FILE: include/asm-i386/pc9800_dma.h:1:
+/* $Id: dma.h,v 1.7 1992/12/14 00:29:34 root Exp root $

Since linux moved to git, the CVS markers are no longer used.
So, CVS style keywords ($Id$, $Revision$, $Log$) should not be
added.

WARNING:INCLUDE_LINUX: Use #include <linux/io.h> instead of <asm/io.h>
#75: FILE: include/asm-i386/pc9800_dma.h:12:
+#include <asm/io.h>		/* need byte IO */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#78: FILE: include/asm-i386/pc9800_dma.h:15:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#103: FILE: include/asm-i386/pc9800_dma.h:40:
+ * DMA transfers are limited to the lower 16MB of _physical_ memory.  $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#113: FILE: include/asm-i386/pc9800_dma.h:50:
+ *   P7  ...  P0  A7 ... A0  A7 ... A0   $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#122: FILE: include/asm-i386/pc9800_dma.h:59:
+ *   P7  ...  P1 (0) A7 A6  ... A0 A7 A6 ... A0   $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#131: FILE: include/asm-i386/pc9800_dma.h:68:
+ * and up to 128K bytes may be transferred on channels 5-7 in one operation. $

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#144: FILE: include/asm-i386/pc9800_dma.h:81:
+#define DMA_CMD_REG			((IO_DMA_BASE)+0x10) /* command register (w) */
                    			              ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#145: FILE: include/asm-i386/pc9800_dma.h:82:
+#define DMA_STAT_REG		((IO_DMA_BASE)+0x10) /* status register (r) */
                     		              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#146: FILE: include/asm-i386/pc9800_dma.h:83:
+#define DMA_REQ_REG			((IO_DMA_BASE)+0x12) /* request register (w) */
                    			              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#147: FILE: include/asm-i386/pc9800_dma.h:84:
+#define DMA_MASK_REG		((IO_DMA_BASE)+0x14) /* single-channel mask (w) */
                     		              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#148: FILE: include/asm-i386/pc9800_dma.h:85:
+#define DMA_MODE_REG		((IO_DMA_BASE)+0x16) /* mode register (w) */
                     		              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#149: FILE: include/asm-i386/pc9800_dma.h:86:
+#define DMA_CLEAR_FF_REG	((IO_DMA_BASE)+0x18) /* clear pointer flip-flop (w) */
                         	              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#150: FILE: include/asm-i386/pc9800_dma.h:87:
+#define DMA_TEMP_REG		((IO_DMA_BASE)+0x1A) /* Temporary Register (r) */
                     		              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#151: FILE: include/asm-i386/pc9800_dma.h:88:
+#define DMA_RESET_REG		((IO_DMA_BASE)+0x1A) /* Master Clear (w) */
                      		              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#152: FILE: include/asm-i386/pc9800_dma.h:89:
+#define DMA_CLR_MASK_REG	((IO_DMA_BASE)+0x1C) /* Clear Mask */
                         	              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#153: FILE: include/asm-i386/pc9800_dma.h:90:
+#define DMA_MASK_ALL_REG	((IO_DMA_BASE)+0x1E) /* all-channels mask (w) */
                         	              ^

WARNING:INLINE: plain inline is preferred over __inline__
#171: FILE: include/asm-i386/pc9800_dma.h:108:
+static __inline__ unsigned long claim_dma_lock(void)

WARNING:LINE_SPACING: Missing a blank line after declarations
#174: FILE: include/asm-i386/pc9800_dma.h:111:
+	unsigned long flags;
+	spin_lock_irqsave(&dma_spin_lock, flags);

WARNING:INLINE: plain inline is preferred over __inline__
#178: FILE: include/asm-i386/pc9800_dma.h:115:
+static __inline__ void release_dma_lock(unsigned long flags)

WARNING:INLINE: plain inline is preferred over __inline__
#184: FILE: include/asm-i386/pc9800_dma.h:121:
+static __inline__ void enable_dma(unsigned int dmanr)

WARNING:INLINE: plain inline is preferred over __inline__
#189: FILE: include/asm-i386/pc9800_dma.h:126:
+static __inline__ void disable_dma(unsigned int dmanr)

WARNING:INLINE: plain inline is preferred over __inline__
#201: FILE: include/asm-i386/pc9800_dma.h:138:
+static __inline__ void clear_dma_ff(unsigned int dmanr)

WARNING:INLINE: plain inline is preferred over __inline__
#207: FILE: include/asm-i386/pc9800_dma.h:144:
+static __inline__ void set_dma_mode(unsigned int dmanr, char mode)

WARNING:INLINE: plain inline is preferred over __inline__
#217: FILE: include/asm-i386/pc9800_dma.h:154:
+static __inline__ void set_dma_page(unsigned int dmanr, unsigned int pagenr)

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#219: FILE: include/asm-i386/pc9800_dma.h:156:
+	unsigned char low=pagenr&0xff;
 	                 ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#219: FILE: include/asm-i386/pc9800_dma.h:156:
+	unsigned char low=pagenr&0xff;
 	                        ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#220: FILE: include/asm-i386/pc9800_dma.h:157:
+	unsigned char hi=pagenr>>8;
 	                ^

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#220: FILE: include/asm-i386/pc9800_dma.h:157:
+	unsigned char hi=pagenr>>8;
 	                       ^

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#222: FILE: include/asm-i386/pc9800_dma.h:159:
+	switch(dmanr) {
+		case 0:
[...]
+		case 1:
[...]
+		case 2:
[...]
+		case 3:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

ERROR:SPACING: space required before the open parenthesis '('
#222: FILE: include/asm-i386/pc9800_dma.h:159:
+	switch(dmanr) {

WARNING:INLINE: plain inline is preferred over __inline__
#245: FILE: include/asm-i386/pc9800_dma.h:182:
+static __inline__ void set_dma_addr(unsigned int dmanr, unsigned int a)

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#247: FILE: include/asm-i386/pc9800_dma.h:184:
+	set_dma_page(dmanr, a>>16);
 	                     ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#248: FILE: include/asm-i386/pc9800_dma.h:185:
+	dma_outb( a & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );
 	                           ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#248: FILE: include/asm-i386/pc9800_dma.h:185:
+	dma_outb( a & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );
 	                              ^

ERROR:SPACING: space prohibited after that open parenthesis '('
#248: FILE: include/asm-i386/pc9800_dma.h:185:
+	dma_outb( a & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#248: FILE: include/asm-i386/pc9800_dma.h:185:
+	dma_outb( a & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#249: FILE: include/asm-i386/pc9800_dma.h:186:
+	dma_outb( (a>>8) & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );
 	            ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#249: FILE: include/asm-i386/pc9800_dma.h:186:
+	dma_outb( (a>>8) & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );
 	                                ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#249: FILE: include/asm-i386/pc9800_dma.h:186:
+	dma_outb( (a>>8) & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );
 	                                   ^

ERROR:SPACING: space prohibited after that open parenthesis '('
#249: FILE: include/asm-i386/pc9800_dma.h:186:
+	dma_outb( (a>>8) & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#249: FILE: include/asm-i386/pc9800_dma.h:186:
+	dma_outb( (a>>8) & 0xff, ((dmanr&3)<<2) + IO_DMA_BASE );

CHECK:LINE_SPACING: Please don't use multiple blank lines
#252: FILE: include/asm-i386/pc9800_dma.h:189:
+
+

WARNING:INLINE: plain inline is preferred over __inline__
#261: FILE: include/asm-i386/pc9800_dma.h:198:
+static __inline__ void set_dma_count(unsigned int dmanr, unsigned int count)

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#264: FILE: include/asm-i386/pc9800_dma.h:201:
+	dma_outb( count & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );
 	                               ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#264: FILE: include/asm-i386/pc9800_dma.h:201:
+	dma_outb( count & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );
 	                                  ^

ERROR:SPACING: space prohibited after that open parenthesis '('
#264: FILE: include/asm-i386/pc9800_dma.h:201:
+	dma_outb( count & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#264: FILE: include/asm-i386/pc9800_dma.h:201:
+	dma_outb( count & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#265: FILE: include/asm-i386/pc9800_dma.h:202:
+	dma_outb( (count>>8) & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );
 	                ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#265: FILE: include/asm-i386/pc9800_dma.h:202:
+	dma_outb( (count>>8) & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );
 	                                    ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#265: FILE: include/asm-i386/pc9800_dma.h:202:
+	dma_outb( (count>>8) & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );
 	                                       ^

ERROR:SPACING: space prohibited after that open parenthesis '('
#265: FILE: include/asm-i386/pc9800_dma.h:202:
+	dma_outb( (count>>8) & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#265: FILE: include/asm-i386/pc9800_dma.h:202:
+	dma_outb( (count>>8) & 0xff, ((dmanr&3)<<2) + 2 + IO_DMA_BASE );

CHECK:LINE_SPACING: Please don't use multiple blank lines
#268: FILE: include/asm-i386/pc9800_dma.h:205:
+
+

WARNING:INLINE: plain inline is preferred over __inline__
#277: FILE: include/asm-i386/pc9800_dma.h:214:
+static __inline__ int get_dma_residue(unsigned int dmanr)

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#282: FILE: include/asm-i386/pc9800_dma.h:219:
+	count = 1 + dma_inb(((dmanr&3)<<2) + 2 + IO_DMA_BASE);
 	                           ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#282: FILE: include/asm-i386/pc9800_dma.h:219:
+	count = 1 + dma_inb(((dmanr&3)<<2) + 2 + IO_DMA_BASE);
 	                              ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#283: FILE: include/asm-i386/pc9800_dma.h:220:
+	count += dma_inb(((dmanr&3)<<2) + 2 + IO_DMA_BASE) << 8;
 	                        ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#283: FILE: include/asm-i386/pc9800_dma.h:220:
+	count += dma_inb(((dmanr&3)<<2) + 2 + IO_DMA_BASE) << 8;
 	                           ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#284: FILE: include/asm-i386/pc9800_dma.h:221:
+^I$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#288: FILE: include/asm-i386/pc9800_dma.h:225:
+
+

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#290: FILE: include/asm-i386/pc9800_dma.h:227:
+extern int request_dma(unsigned int dmanr, const char * device_id);	/* reserve a DMA channel */

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#290: FILE: include/asm-i386/pc9800_dma.h:227:
+extern int request_dma(unsigned int dmanr, const char * device_id);	/* reserve a DMA channel */

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#291: FILE: include/asm-i386/pc9800_dma.h:228:
+extern void free_dma(unsigned int dmanr);	/* release it again */

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#298: FILE: include/asm-i386/pc9800_dma.h:235:
+#define isa_dma_bridge_buggy ^I(0)$

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000392768.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 18 errors, 15 warnings, 33 checks, 300 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000392768.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
