WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#54: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#59: FILE: include/linux/powerop.h:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:SPACING: Unnecessary space before function pointer arguments
#82: FILE: include/linux/powerop.h:24:
+	void *(*create_point) (const char *pwr_params, va_list args);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: Unnecessary space before function pointer arguments
#83: FILE: include/linux/powerop.h:25:
+	int (*set_point) (void *md_opt);

WARNING:SPACING: Unnecessary space before function pointer arguments
#84: FILE: include/linux/powerop.h:26:
+	int (*get_point) (void *md_opt, const char *pwr_params, va_list args);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#107: FILE: include/linux/powerop_sysfs.h:1:
+/*

WARNING:SPACING: missing space after return type
#129: FILE: include/linux/powerop_sysfs.h:23:
+	ssize_t(*store) (void *md_opt, char *pname, const char *buf,

WARNING:SPACING: Unnecessary space before function pointer arguments
#129: FILE: include/linux/powerop_sysfs.h:23:
+	ssize_t(*store) (void *md_opt, char *pname, const char *buf,

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#181: FILE: kernel/power/Kconfig:114:
+config POWEROP
+	tristate "PowerOP Core"
+	help
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#185: FILE: kernel/power/Kconfig:118:
+config POWEROP_SYSFS
+	bool "Enable PowerOP sysfs interface"
+	depends on PM && POWEROP && SYSFS
+	help
+

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#190: FILE: kernel/power/Kconfig:123:
+config POWEROP_SYSFS_OP_CREATE
+	bool "Enable creation of operating point via sysfs interface"
+	depends on POWEROP_SYSFS
+	help
+

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#195: FILE: kernel/power/Kconfig:128:
+config POWEROP_SYSFS_OP_DEBUG_IF
+	bool "Enable special hw operating point"
+	depends on POWEROP_SYSFS
+	help 
+	"hw point(ro) is used to get snapshots of power parameter values"
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#198: FILE: kernel/power/Kconfig:131:
+^Ihelp $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#246: FILE: kernel/power/powerop.c:1:
+/*

ERROR:TRAILING_WHITESPACE: trailing whitespace
#250: FILE: kernel/power/powerop.c:5:
+ * 2006 (C) Nomad Global Solutions, Inc. $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#268: FILE: kernel/power/powerop.c:23:
+/* $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#269: FILE: kernel/power/powerop.c:24:
+ * FIXME: temporary limit. next implementation will handle unlimited number $

WARNING:TYPO_SPELLING: 'paramenters' may be misspelled - perhaps 'parameters'?
#319: FILE: kernel/power/powerop.c:74:
+ * get_point - get value of specified power paramenters
                                             ^^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

ERROR:TRAILING_WHITESPACE: trailing whitespace
#323: FILE: kernel/power/powerop.c:78:
+ * @args - array of result placeholders $

WARNING:TYPO_SPELLING: 'paramenters' may be misspelled - perhaps 'parameters'?
#325: FILE: kernel/power/powerop.c:80:
+ * Get value of specified power paramenters of operating
                                 ^^^^^^^^^^^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#347: FILE: kernel/power/powerop.c:102:
+		printk(KERN_INFO "PowerOP registering driver %s.\n", p->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#359: FILE: kernel/power/powerop.c:114:
+		printk(KERN_INFO "PowerOP unregistering driver %s\n", p->name);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#374: FILE: kernel/power/powerop.c:129:
+ * arch dependent part of new operating point and links new named operating $

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '!powerop_initialized'
#384: FILE: kernel/power/powerop.c:139:
+	if ((!powerop_initialized) || (id == NULL) ||
+	    (strlen(id) > POWEROP_MAX_OPT_NAME_LENGTH) ||
+	    (registered_opt_number >= POWEROP_MAX_OPT_NUMBER))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'id == NULL'
#384: FILE: kernel/power/powerop.c:139:
+	if ((!powerop_initialized) || (id == NULL) ||
+	    (strlen(id) > POWEROP_MAX_OPT_NAME_LENGTH) ||
+	    (registered_opt_number >= POWEROP_MAX_OPT_NUMBER))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'registered_opt_number >= POWEROP_MAX_OPT_NUMBER'
#384: FILE: kernel/power/powerop.c:139:
+	if ((!powerop_initialized) || (id == NULL) ||
+	    (strlen(id) > POWEROP_MAX_OPT_NAME_LENGTH) ||
+	    (registered_opt_number >= POWEROP_MAX_OPT_NUMBER))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!id"
#384: FILE: kernel/power/powerop.c:139:
+	if ((!powerop_initialized) || (id == NULL) ||

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#402: FILE: kernel/power/powerop.c:157:
+	if ((opt = kzalloc(sizeof(struct powerop_point), GFP_KERNEL)) == NULL)

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*opt)...) over kzalloc(sizeof(struct powerop_point)...)
#402: FILE: kernel/power/powerop.c:157:
+	if ((opt = kzalloc(sizeof(struct powerop_point), GFP_KERNEL)) == NULL)

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#405: FILE: kernel/power/powerop.c:160:
+	if ((registered_names[registered_opt_number] =

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!opt->md_opt"
#416: FILE: kernel/power/powerop.c:171:
+	if (opt->md_opt == NULL) {

WARNING:INDENTED_LABEL: labels should not be indented
#441: FILE: kernel/power/powerop.c:196:
+      fail_set_name:

WARNING:INDENTED_LABEL: labels should not be indented
#444: FILE: kernel/power/powerop.c:199:
+      fail_opt_create:

WARNING:INDENTED_LABEL: labels should not be indented
#447: FILE: kernel/power/powerop.c:202:
+      fail_name_nomem:

ERROR:TRAILING_WHITESPACE: trailing whitespace
#453: FILE: kernel/power/powerop.c:208:
+/** $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#457: FILE: kernel/power/powerop.c:212:
+ * Search for operating point with specified name and remove it from $

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '!powerop_initialized'
#466: FILE: kernel/power/powerop.c:221:
+	if ((!powerop_initialized) || (id == NULL))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'id == NULL'
#466: FILE: kernel/power/powerop.c:221:
+	if ((!powerop_initialized) || (id == NULL))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!id"
#466: FILE: kernel/power/powerop.c:221:
+	if ((!powerop_initialized) || (id == NULL))

ERROR:TRAILING_WHITESPACE: trailing whitespace
#501: FILE: kernel/power/powerop.c:256:
+/** $

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '!powerop_initialized'
#514: FILE: kernel/power/powerop.c:269:
+	if ((!powerop_initialized) || (id == NULL))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'id == NULL'
#514: FILE: kernel/power/powerop.c:269:
+	if ((!powerop_initialized) || (id == NULL))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!id"
#514: FILE: kernel/power/powerop.c:269:
+	if ((!powerop_initialized) || (id == NULL))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!selected_opt"
#526: FILE: kernel/power/powerop.c:281:
+	ret = (selected_opt == NULL) ? -EINVAL : set_point(opt->md_opt);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#536: FILE: kernel/power/powerop.c:291:
+/** $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#542: FILE: kernel/power/powerop.c:297:
+ * Search for operating point with specified name $

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "id"
#561: FILE: kernel/power/powerop.c:316:
+	if (id != NULL) {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#569: FILE: kernel/power/powerop.c:324:
+^I^I/* $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#570: FILE: kernel/power/powerop.c:325:
+^I^I * name is specified but corresponding operating point $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#571: FILE: kernel/power/powerop.c:326:
+^I^I * is not found $

WARNING:INDENTED_LABEL: labels should not be indented
#580: FILE: kernel/power/powerop.c:335:
+      out:

ERROR:TRAILING_WHITESPACE: trailing whitespace
#586: FILE: kernel/power/powerop.c:341:
+/** $

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#659: FILE: kernel/power/powerop_point.h:1:
+/*

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#701: FILE: kernel/power/powerop_sysfs.c:1:
+/*

ERROR:TRAILING_WHITESPACE: trailing whitespace
#706: FILE: kernel/power/powerop_sysfs.c:6:
+ * Integration with updated PowerOP interface by $

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#730: FILE: kernel/power/powerop_sysfs.c:30:
+extern struct subsystem power_subsys;

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:RETURN_VOID: void function return statements are not generally useful
#754: FILE: kernel/power/powerop_sysfs.c:54:
+	return;
+}

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#795: FILE: kernel/power/powerop_sysfs.c:95:
+	return -ENOTSUPP;

ENOTSUPP is not a standard error code and should be avoided in new patches.
EOPNOTSUPP should be used instead.

See: https://lore.kernel.org/netdev/20200510182252.GA411829@lunn.ch/

WARNING:CONST_STRUCT: struct sysfs_ops should normally be const
#799: FILE: kernel/power/powerop_sysfs.c:99:
+static struct sysfs_ops powerop_sysfs_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#863: FILE: kernel/power/powerop_sysfs.c:163:
+		if ((error = sysfs_create_group(kobj, &param_attr_group)))

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#864: FILE: kernel/power/powerop_sysfs.c:164:
+			printk(KERN_ERR

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#884: FILE: kernel/power/powerop_sysfs.c:184:
+	if ((error = kobject_register(&op->kobj))) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#885: FILE: kernel/power/powerop_sysfs.c:185:
+		printk(KERN_ERR "PowerOP kobject_register for op %s failed.\n",

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!param_attr_group.attrs"
#932: FILE: kernel/power/powerop_sysfs.c:232:
+	if (param_attr_group.attrs == NULL) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#933: FILE: kernel/power/powerop_sysfs.c:233:
+		printk(KERN_ERR "PowerOP SysFS: register pwr params first!\n");

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#937: FILE: kernel/power/powerop_sysfs.c:237:
+	if ((error =

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#939: FILE: kernel/power/powerop_sysfs.c:239:
+		printk(KERN_ERR "PowerOP subsys sysfs_create_group failed.\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#944: FILE: kernel/power/powerop_sysfs.c:244:
+		printk(KERN_ERR "PowerOP subsys HW point creation failed\n");

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#961: FILE: kernel/power/powerop_sysfs_point.h:1:
+/*

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#986: FILE: kernel/power/powerop_sysfs_point.h:26:
+}
+static inline int powerop_sysfs_unregister_point(struct powerop_point *opt)

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#990: FILE: kernel/power/powerop_sysfs_point.h:30:
+}
+static inline void powerop_sysfs_set_activeop(const char *id)

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#993: FILE: kernel/power/powerop_sysfs_point.h:33:
+}
+static inline int powerop_sysfs_init(void)

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#997: FILE: kernel/power/powerop_sysfs_point.h:37:
+}
+static inline void powerop_sysfs_exit(void)

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000038332.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 21 errors, 33 warnings, 19 checks, 898 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000038332.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
