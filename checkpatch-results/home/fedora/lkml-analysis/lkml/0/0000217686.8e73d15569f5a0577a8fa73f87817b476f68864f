WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#35: 
the relevant transaction translator's buffer.  (TT-per-port hubs are already

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#85: FILE: drivers/usb/host/ehci-hcd.c:996:
+			intr_deschedule (ehci, qh);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PREFER_FALLTHROUGH: Prefer 'fallthrough;' over fallthrough comment
#86: FILE: drivers/usb/host/ehci-hcd.c:997:
+			/* FALL THROUGH */

Use the `fallthrough;` pseudo keyword instead of
`/* fallthrough */` like comments.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#88: FILE: drivers/usb/host/ehci-hcd.c:999:
+			qh_completions (ehci, qh, NULL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#91: FILE: drivers/usb/host/ehci-hcd.c:1002:
+			ehci_dbg (ehci, "bogus qh %p state %d\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#92: FILE: drivers/usb/host/ehci-hcd.c:1003:
+			ehci_dbg (ehci, "bogus qh %p state %d\n",
+					qh, qh->qh_state);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#116: FILE: drivers/usb/host/ehci-q.c:271:
+static void intr_deschedule (struct ehci_hcd *ehci, struct ehci_qh *qh);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#125: FILE: drivers/usb/host/ehci-q.c:430:
+				intr_deschedule (ehci, qh);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#161: FILE: drivers/usb/host/ehci-sched.c:63:
+static void periodic_unlink (struct ehci_hcd *ehci, unsigned frame, void *ptr)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#161: FILE: drivers/usb/host/ehci-sched.c:63:
+static void periodic_unlink (struct ehci_hcd *ehci, unsigned frame, void *ptr)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#197: FILE: drivers/usb/host/ehci-sched.c:82:
+	*prev_p = *periodic_next_shadow (&here, Q_NEXT_TYPE (*hw_p));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#197: FILE: drivers/usb/host/ehci-sched.c:82:
+	*prev_p = *periodic_next_shadow (&here, Q_NEXT_TYPE (*hw_p));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#223: FILE: drivers/usb/host/ehci-sched.c:146:
+		ehci_err (ehci, "uframe %d sched overrun: %d usecs\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#224: FILE: drivers/usb/host/ehci-sched.c:147:
+		ehci_err (ehci, "uframe %d sched overrun: %d usecs\n",
 			frame * 8 + uframe, usecs);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#238: FILE: drivers/usb/host/ehci-sched.c:297:
+static int qh_link_periodic (struct ehci_hcd *ehci, struct ehci_qh *qh)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#240: FILE: drivers/usb/host/ehci-sched.c:299:
+	unsigned	i;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#241: FILE: drivers/usb/host/ehci-sched.c:300:
+	unsigned	period = qh->period;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#250: FILE: drivers/usb/host/ehci-sched.c:302:
+	dev_dbg (&qh->dev->dev,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#251: FILE: drivers/usb/host/ehci-sched.c:303:
+	dev_dbg (&qh->dev->dev,
+		"link qh%d-%04x/%p start %d [%d/%d us]\n",

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#252: FILE: drivers/usb/host/ehci-sched.c:304:
+		period, le32_to_cpup (&qh->hw_info2) & 0xffff,

ERROR:BRACKET_SPACE: space prohibited before open square bracket '['
#260: FILE: drivers/usb/host/ehci-sched.c:312:
+		union ehci_shadow	*prev = &ehci->pshadow [i];

Whitespace before opening bracket '[' is prohibited.
There are some exceptions:

1. With a type on the left::

    int [] a;

2. At the beginning of a line for slice initialisers::

    [0...10] = 5,

3. Inside a curly brace::

    = { [0...10] = 5 }

ERROR:BRACKET_SPACE: space prohibited before open square bracket '['
#261: FILE: drivers/usb/host/ehci-sched.c:313:
+		u32			*hw_p = &ehci->periodic [i];

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#272: FILE: drivers/usb/host/ehci-sched.c:319:
+			type = Q_NEXT_TYPE (*hw_p);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#275: FILE: drivers/usb/host/ehci-sched.c:322:
+			prev = periodic_next_shadow (prev, type);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#295: FILE: drivers/usb/host/ehci-sched.c:342:
+			wmb ();

WARNING:MEMORY_BARRIER: memory barrier without comment
#295: FILE: drivers/usb/host/ehci-sched.c:342:
+			wmb ();

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#297: FILE: drivers/usb/host/ehci-sched.c:344:
+			*hw_p = QH_NEXT (qh->qh_dma);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#301: FILE: drivers/usb/host/ehci-sched.c:348:
+	qh_get (qh);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#304: FILE: drivers/usb/host/ehci-sched.c:351:
+	hcd_to_bus (&ehci->hcd)->bandwidth_allocated += qh->period

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#310: FILE: drivers/usb/host/ehci-sched.c:357:
+		return enable_periodic (ehci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#315: FILE: drivers/usb/host/ehci-sched.c:362:
+static void qh_unlink_periodic (struct ehci_hcd *ehci, struct ehci_qh *qh)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#317: FILE: drivers/usb/host/ehci-sched.c:364:
+	unsigned	i;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#318: FILE: drivers/usb/host/ehci-sched.c:365:
+	unsigned	period;

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#326: FILE: drivers/usb/host/ehci-sched.c:373:
+	//   qh->hw_info1 |= __constant_cpu_to_le32 (1 << 7 /* "ignore" */);
+

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#328: FILE: drivers/usb/host/ehci-sched.c:375:
+	if ((period = qh->period) == 0)

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#332: FILE: drivers/usb/host/ehci-sched.c:379:
+		periodic_unlink (ehci, i, qh);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#335: FILE: drivers/usb/host/ehci-sched.c:382:
+	hcd_to_bus (&ehci->hcd)->bandwidth_allocated -= qh->period

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#339: FILE: drivers/usb/host/ehci-sched.c:386:
+	dev_dbg (&qh->dev->dev,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#340: FILE: drivers/usb/host/ehci-sched.c:387:
+	dev_dbg (&qh->dev->dev,
+		"unlink qh%d-%04x/%p start %d [%d/%d us]\n",

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#341: FILE: drivers/usb/host/ehci-sched.c:388:
+		qh->period, le32_to_cpup (&qh->hw_info2) & 0xffff,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#348: FILE: drivers/usb/host/ehci-sched.c:394:
+	qh_put (qh);

CHECK:SPACING: No space is necessary after a cast
#358: FILE: drivers/usb/host/ehci-sched.c:399:
+		(void) disable_periodic (ehci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#358: FILE: drivers/usb/host/ehci-sched.c:399:
+		(void) disable_periodic (ehci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#365: FILE: drivers/usb/host/ehci-sched.c:402:
+static void intr_deschedule (struct ehci_hcd *ehci, struct ehci_qh *qh)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#367: FILE: drivers/usb/host/ehci-sched.c:404:
+	unsigned	wait;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#369: FILE: drivers/usb/host/ehci-sched.c:406:
+	qh_unlink_periodic (ehci, qh);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#389: FILE: drivers/usb/host/ehci-sched.c:413:
+	if (list_empty (&qh->qtd_list)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '&qh->qtd_list'
#389: FILE: drivers/usb/host/ehci-sched.c:413:
+	if (list_empty (&qh->qtd_list)
+			|| (__constant_cpu_to_le32 (0x0ff << 8)
+					& qh->hw_info2) != 0)

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#390: FILE: drivers/usb/host/ehci-sched.c:414:
+	if (list_empty (&qh->qtd_list)
+			|| (__constant_cpu_to_le32 (0x0ff << 8)

WARNING:CONSTANT_CONVERSION: __constant_cpu_to_le32 should be cpu_to_le32
#390: FILE: drivers/usb/host/ehci-sched.c:414:
+			|| (__constant_cpu_to_le32 (0x0ff << 8)

Use of __constant_<foo> form is discouraged for the following functions::

  __constant_cpu_to_be[x]
  __constant_cpu_to_le[x]
  __constant_be[x]_to_cpu
  __constant_le[x]_to_cpu
  __constant_htons
  __constant_ntohs

Using any of these outside of include/uapi/ is not preferred as using the
function without __constant_ is identical when the argument is a
constant.

In big endian systems, the macros like __constant_cpu_to_be32(x) and
cpu_to_be32(x) expand to the same expression::

  #define __constant_cpu_to_be32(x) ((__force __be32)(__u32)(x))
  #define __cpu_to_be32(x)          ((__force __be32)(__u32)(x))

In little endian systems, the macros __constant_cpu_to_be32(x) and
cpu_to_be32(x) expand to __constant_swab32 and __swab32.  __swab32
has a __builtin_constant_p check::

  #define __swab32(x)				\
    (__builtin_constant_p((__u32)(x)) ?	\
    ___constant_swab32(x) :			\
    __fswab32(x))

So ultimately they have a special case for constants.
Similar is the case with all of the macros in the list.  Thus
using the __constant_... forms are unnecessarily verbose and
not preferred outside of include/uapi.

See: https://lore.kernel.org/lkml/1400106425.12666.6.camel@joe-AO725/

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#396: FILE: drivers/usb/host/ehci-sched.c:420:
+	udelay (wait);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#407: FILE: drivers/usb/host/ehci-sched.c:423:
+	wmb ();

WARNING:MEMORY_BARRIER: memory barrier without comment
#407: FILE: drivers/usb/host/ehci-sched.c:423:
+	wmb ();

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#444: FILE: drivers/usb/host/ehci-sched.c:452:
+	if (unlikely (period == 0)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'period == 0'
#444: FILE: drivers/usb/host/ehci-sched.c:452:
+	if (unlikely (period == 0)) {

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#447: FILE: drivers/usb/host/ehci-sched.c:455:
+				claimed = periodic_usecs (ehci, frame, uframe);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#458: FILE: drivers/usb/host/ehci-sched.c:464:
+			claimed = periodic_usecs (ehci, frame, uframe);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#497: FILE: drivers/usb/host/ehci-sched.c:499:
+^I * $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#513: FILE: drivers/usb/host/ehci-sched.c:507:
+	if (tt_no_collision (ehci, qh->period, qh->dev, frame, mask)) {

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#514: FILE: drivers/usb/host/ehci-sched.c:508:
+		if (!check_period (ehci, frame, uframe + qh->gap_uf + 1,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#515: FILE: drivers/usb/host/ehci-sched.c:509:
+		if (!check_period (ehci, frame, uframe + qh->gap_uf + 1,
+					qh->period, qh->c_usecs))

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#517: FILE: drivers/usb/host/ehci-sched.c:511:
+		if (!check_period (ehci, frame, uframe + qh->gap_uf,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#518: FILE: drivers/usb/host/ehci-sched.c:512:
+		if (!check_period (ehci, frame, uframe + qh->gap_uf,
+					qh->period, qh->c_usecs))

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#551: FILE: drivers/usb/host/ehci-sched.c:554:
+					status = check_intr_schedule (ehci,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#552: FILE: drivers/usb/host/ehci-sched.c:555:
+					status = check_intr_schedule (ehci,
+							frame, uframe, qh,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#562: FILE: drivers/usb/host/ehci-sched.c:565:
+			status = check_intr_schedule (ehci, 0, 0, qh, &c_mask);

WARNING:CONSTANT_CONVERSION: __constant_cpu_to_le32 should be cpu_to_le32
#571: FILE: drivers/usb/host/ehci-sched.c:572:
+		qh->hw_info2 &= __constant_cpu_to_le32 (~0xffff);

WARNING:CONSTANT_CONVERSION: __constant_cpu_to_le32 should be cpu_to_le32
#574: FILE: drivers/usb/host/ehci-sched.c:575:
+			: __constant_cpu_to_le32 (0xff);

ERROR:CODE_INDENT: code indent should use tabs where possible
#609: FILE: drivers/usb/host/ehci-sched.c:581:
+ ^Istatus = qh_link_periodic (ehci, qh);$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#609: FILE: drivers/usb/host/ehci-sched.c:581:
+ ^Istatus = qh_link_periodic (ehci, qh);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#609: FILE: drivers/usb/host/ehci-sched.c:581:
+ ^Istatus = qh_link_periodic (ehci, qh);$

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#609: FILE: drivers/usb/host/ehci-sched.c:581:
+ 	status = qh_link_periodic (ehci, qh);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#627: FILE: drivers/usb/host/ehci-sched.c:1906:
+					intr_deschedule (ehci, temp.qh);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000217686.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 5 errors, 57 warnings, 11 checks, 541 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000217686.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
