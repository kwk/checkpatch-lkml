WARNING:TYPO_SPELLING: 'ND' may be misspelled - perhaps 'AND'?
#36: 
The ARP/ND implementation for this driver is not completely
        ^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#50: 
  http://www.ietf.org/internet-drafts/draft-ietf-ipoib-ip-over-infiniband-07.txt

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#73: FILE: drivers/infiniband/ulp/ipoib/Kconfig:1:
+config INFINIBAND_IPOIB
+	tristate "IP-over-InfiniBand"
+	depends on INFINIBAND && NETDEVICES && INET
+	---help---
+	  Support for the IP-over-InfiniBand protocol (IPoIB). This
+	  transports IP packets over InfiniBand so you can use your IB
+	  device as a fancy NIC.
+
+	  The IPoIB protocol is defined by the IETF ipoib working
+	  group: <http://www.ietf.org/html.charters/ipoib-charter.html>.
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#84: FILE: drivers/infiniband/ulp/ipoib/Kconfig:12:
+config INFINIBAND_IPOIB_DEBUG
+	bool "IP-over-InfiniBand debugging"
+	depends on INFINIBAND_IPOIB
+	---help---
+	  This option causes debugging code to be compiled into the
+	  IPoIB driver.  The output can be turned on via the
+	  debug_level and mcast_debug_level module parameters (which
+	  can also be set after the driver is loaded through sysfs).
+
+	  This option also creates an "ipoib_debugfs," which can be
+	  mounted to expose debugging information about IB multicast
+	  groups used by the IPoIB driver.
+

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#97: FILE: drivers/infiniband/ulp/ipoib/Kconfig:25:
+config INFINIBAND_IPOIB_DEBUG_DATA
+	bool "IP-over-InfiniBand data path debugging"
+	depends on INFINIBAND_IPOIB_DEBUG
+	---help---
+	  This option compiles debugging code into the the data path
+	  of the IPoIB driver.  The output can be turned on by setting
+	  the debug_level parameter to 2; however, even with output
+	  turned off, this debugging code will have some performance
+	  impact.
+++ linux-bk/drivers/infiniband/ulp/ipoib/Makefile	2004-11-23 08:10:22.683217739 -0800
+++ linux-bk/drivers/infiniband/ulp/ipoib/Makefile	2004-11-23 08:10:22.683217739 -0800

WARNING:REPEATED_WORD: Possible repeated word: 'the'
#101: FILE: drivers/infiniband/ulp/ipoib/Kconfig:29:
+	  This option compiles debugging code into the the data path

WARNING:DEPRECATED_VARIABLE: Use of EXTRA_CFLAGS is deprecated, please use `ccflags-y instead.
#109: FILE: drivers/infiniband/ulp/ipoib/Makefile:1:
+EXTRA_CFLAGS += -Idrivers/infiniband/include

EXTRA_{A,C,CPP,LD}FLAGS are deprecated and should be replaced by the new
flags added via commit f77bf01425b1 ("kbuild: introduce ccflags-y,
asflags-y and ldflags-y").

The following conversion scheme maybe used::

  EXTRA_AFLAGS    ->  asflags-y
  EXTRA_CFLAGS    ->  ccflags-y
  EXTRA_CPPFLAGS  ->  cppflags-y
  EXTRA_LDFLAGS   ->  ldflags-y

See:

  1. https://lore.kernel.org/lkml/20070930191054.GA15876@uranus.ravnborg.org/
  2. https://lore.kernel.org/lkml/1313384834-24433-12-git-send-email-lacombar@gmail.com/
  3. https://www.kernel.org/doc/html/latest/kbuild/makefiles.html#compilation-flags

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#123: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#143: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:21:
+ * $Id: ipoib.h 1275 2004-11-22 23:04:04Z roland $

Since linux moved to git, the CVS markers are no longer used.
So, CVS style keywords ($Id$, $Revision$, $Log$) should not be
added.

WARNING:INCLUDE_LINUX: Use #include <linux/atomic.h> instead of <asm/atomic.h>
#160: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:38:
+#include <asm/atomic.h>

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#173: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:51:
+^IIPOIB_BUF_SIZE ^I^I  = IPOIB_PACKET_SIZE + IB_GRH_BYTES,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#175: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:53:
+^IIPOIB_ENCAP_LEN ^I  = 4,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#177: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:55:
+^IIPOIB_RX_RING_SIZE ^I  = 128,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#178: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:56:
+^IIPOIB_TX_RING_SIZE ^I  = 64,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#180: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:58:
+^IIPOIB_NUM_WC ^I^I  = 4,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#185: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:63:
+^IIPOIB_FLAG_TX_FULL ^I  = 0,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#186: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:64:
+^IIPOIB_FLAG_OPER_UP ^I  = 1,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#187: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:65:
+^IIPOIB_FLAG_ADMIN_UP ^I  = 2,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#188: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:66:
+^IIPOIB_PKEY_ASSIGNED ^I  = 3,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#189: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:67:
+^IIPOIB_PKEY_STOP ^I  = 4,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#191: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:69:
+^IIPOIB_MCAST_RUN ^I  = 6,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#196: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:74:
+^IIPOIB_MCAST_FLAG_FOUND ^I  = 0,^I/* used in set_multicast_list */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#198: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:76:
+^IIPOIB_MCAST_FLAG_BUSY ^I  = 2,^I/* joining or already joined */$

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#221: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:99:
+	spinlock_t lock;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#241: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:119:
+^Iu8            ^I  port;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#242: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:120:
+^Iu16           ^I  pkey;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#243: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:121:
+^Istruct ib_pd  ^I *pd;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#244: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:122:
+^Istruct ib_mr  ^I *mr;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#245: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:123:
+^Istruct ib_cq  ^I *cq;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#246: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:124:
+^Istruct ib_qp  ^I *qp;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#247: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:125:
+^Iu32           ^I  qkey;$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#258: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:136:
+	unsigned tx_head;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#259: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:137:
+	unsigned tx_tail;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#284: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:162:
+	unsigned           last_send;

CHECK:SPACING: No space is necessary after a cast
#297: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:175:
+	return (struct ipoib_path **) (neigh->ha + 24);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#349: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:227:
+void ipoib_mcast_iter_read(struct ipoib_mcast_iter *iter,
+				  union ib_gid *gid,

CHECK:LINE_SPACING: Please don't use multiple blank lines
#385: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:263:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: No space is necessary after a cast
#387: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:265:
+	printk(level "%s: " format, ((struct ipoib_dev_priv *) priv)->dev->name , ## arg)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#387: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:265:
+	printk(level "%s: " format, ((struct ipoib_dev_priv *) priv)->dev->name , ## arg)

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#387: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:265:
+	printk(level "%s: " format, ((struct ipoib_dev_priv *) priv)->dev->name , ## arg)
 	                                                                        ^

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#389: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:267:
+	ipoib_printk(KERN_WARNING, priv, format , ## arg)
 	                                        ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#391: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:269:
+
+

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#399: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:277:
+			ipoib_printk(KERN_DEBUG, priv, format , ## arg); \
 			                                      ^

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#404: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:282:
+			ipoib_printk(KERN_DEBUG, priv, format , ## arg); \
 			                                      ^

WARNING:SINGLE_STATEMENT_DO_WHILE_MACRO: Single statement macros should not use a do {} while (0) loop
#407: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:285:
+#define ipoib_dbg(priv, format, arg...)			\
+	do { (void) (priv); } while (0)

For the multi-statement macros, it is necessary to use the do-while
loop to avoid unpredictable code paths. The do-while loop helps to
group the multiple statements into a single one so that a
function-like macro can be used as a function only.

But for the single statement macros, it is unnecessary to use the
do-while loop. Although the code is syntactically correct but using
the do-while loop is redundant. So remove the do-while loop for single
statement macros.

CHECK:SPACING: No space is necessary after a cast
#408: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:286:
+	do { (void) (priv); } while (0)

WARNING:SINGLE_STATEMENT_DO_WHILE_MACRO: Single statement macros should not use a do {} while (0) loop
#409: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:287:
+#define ipoib_dbg_mcast(priv, format, arg...)		\
+	do { (void) (priv); } while (0)

CHECK:SPACING: No space is necessary after a cast
#410: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:288:
+	do { (void) (priv); } while (0)

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#417: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:295:
+			ipoib_printk(KERN_DEBUG, priv, format , ## arg); \
 			                                      ^

WARNING:SINGLE_STATEMENT_DO_WHILE_MACRO: Single statement macros should not use a do {} while (0) loop
#420: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:298:
+#define ipoib_dbg_data(priv, format, arg...)		\
+	do { (void) (priv); } while (0)

CHECK:SPACING: No space is necessary after a cast
#421: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:299:
+	do { (void) (priv); } while (0)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#424: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:302:
+
+

CHECK:SPACING: No space is necessary after a cast
#427: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:305:
+#define IPOIB_GID_ARG(gid)	be16_to_cpup((__be16 *) ((gid).raw +  0)), \

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#427: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:305:
+#define IPOIB_GID_ARG(gid)	be16_to_cpup((__be16 *) ((gid).raw +  0)), \
+				be16_to_cpup((__be16 *) ((gid).raw +  2)), \
+				be16_to_cpup((__be16 *) ((gid).raw +  4)), \
+				be16_to_cpup((__be16 *) ((gid).raw +  6)), \
+				be16_to_cpup((__be16 *) ((gid).raw +  8)), \
+				be16_to_cpup((__be16 *) ((gid).raw + 10)), \
+				be16_to_cpup((__be16 *) ((gid).raw + 12)), \
+				be16_to_cpup((__be16 *) ((gid).raw + 14))

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'gid' - possible side-effects?
#427: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:305:
+#define IPOIB_GID_ARG(gid)	be16_to_cpup((__be16 *) ((gid).raw +  0)), \
+				be16_to_cpup((__be16 *) ((gid).raw +  2)), \
+				be16_to_cpup((__be16 *) ((gid).raw +  4)), \
+				be16_to_cpup((__be16 *) ((gid).raw +  6)), \
+				be16_to_cpup((__be16 *) ((gid).raw +  8)), \
+				be16_to_cpup((__be16 *) ((gid).raw + 10)), \
+				be16_to_cpup((__be16 *) ((gid).raw + 12)), \
+				be16_to_cpup((__be16 *) ((gid).raw + 14))

CHECK:SPACING: No space is necessary after a cast
#428: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:306:
+				be16_to_cpup((__be16 *) ((gid).raw +  2)), \

CHECK:SPACING: No space is necessary after a cast
#429: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:307:
+				be16_to_cpup((__be16 *) ((gid).raw +  4)), \

CHECK:SPACING: No space is necessary after a cast
#430: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:308:
+				be16_to_cpup((__be16 *) ((gid).raw +  6)), \

CHECK:SPACING: No space is necessary after a cast
#431: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:309:
+				be16_to_cpup((__be16 *) ((gid).raw +  8)), \

CHECK:SPACING: No space is necessary after a cast
#432: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:310:
+				be16_to_cpup((__be16 *) ((gid).raw + 10)), \

CHECK:SPACING: No space is necessary after a cast
#433: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:311:
+				be16_to_cpup((__be16 *) ((gid).raw + 12)), \

CHECK:SPACING: No space is necessary after a cast
#434: FILE: drivers/infiniband/ulp/ipoib/ipoib.h:312:
+				be16_to_cpup((__be16 *) ((gid).raw + 14))

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#440: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:1:
+/*

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#460: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:21:
+ * $Id$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#497: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:58:
+static void *ipoib_mcg_seq_next(struct seq_file *file, void *iter_ptr,
+				   loff_t *pos)

WARNING:SIZEOF_PARENTHESIS: sizeof mgid should be sizeof(mgid)
#529: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:90:
+		for (n = 0, i = 0; i < sizeof mgid / 2; ++i) {

WARNING:SIZEOF_PARENTHESIS: sizeof mgid should be sizeof(mgid)
#532: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:93:
+			if (i < sizeof mgid / 2 - 1)

CHECK:SPACING: No space is necessary after a cast
#537: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:98:
+	seq_printf(file, "GID: %*s", -(1 + (int) sizeof gid_buf), gid_buf);

WARNING:SIZEOF_PARENTHESIS: sizeof gid_buf should be sizeof(gid_buf)
#537: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:98:
+	seq_printf(file, "GID: %*s", -(1 + (int) sizeof gid_buf), gid_buf);

WARNING:CONST_STRUCT: struct seq_operations should normally be const
#546: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:107:
+static struct seq_operations ipoib_seq_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:CONST_STRUCT: struct file_operations should normally be const
#568: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:129:
+static struct file_operations ipoib_fops = {

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#581: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:142:
+^I^Iinode->i_mode ^I = S_IFREG | S_IRUGO;$

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#581: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:142:
+		inode->i_mode 	 = S_IFREG | S_IRUGO;

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#582: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:143:
+^I^Iinode->i_uid ^I = 0;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#583: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:144:
+^I^Iinode->i_gid ^I = 0;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#586: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:147:
+^I^Iinode->i_atime ^I = inode->i_mtime = inode->i_ctime = CURRENT_TIME;$

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#586: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:147:
+		inode->i_atime 	 = inode->i_mtime = inode->i_ctime = CURRENT_TIME;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:SIZEOF_PARENTHESIS: sizeof name should be sizeof(name)
#600: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:161:
+	snprintf(name, sizeof name, "%s_mcg", dev->name);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#686: FILE: drivers/infiniband/ulp/ipoib/ipoib_fs.c:247:
+static struct super_block *ipoib_get_sb(struct file_system_type *fs_type,
+	int flags, const char *dev_name, void *data)

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#719: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:1:
+/*

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#739: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:21:
+ * $Id: ipoib_ib.c 1267 2004-11-18 20:31:22Z roland $

CHECK:BIT_MACRO: Prefer using the BIT macro
#748: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:30:
+#define	IPOIB_OP_RECV	(1ul << 31)

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

WARNING:SIZEOF_PARENTHESIS: sizeof *ah should be sizeof(*ah)
#757: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:39:
+	ah = kmalloc(sizeof *ah, GFP_KERNEL);

CHECK:BRACES: braces {} should be used on all arms of this statement
#766: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:48:
+	if (IS_ERR(ah->ah)) {
[...]
+	} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#769: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:51:
+	} else

CHECK:BRACES: braces {} should be used on all arms of this statement
#783: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:65:
+	if (ah->last_send <= priv->tx_tail) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#787: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:69:
+	} else

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#802: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:84:
+^I^I.wr_id ^I    = wr_id | IPOIB_OP_RECV,$

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#821: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:103:
+	if (!skb) {
+		ipoib_warn(priv, "failed to allocate receive buffer\n");

WARNING:SPLIT_STRING: quoted string split across lines
#884: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:166:
+					ipoib_warn(priv, "failed recv event "
+						   "(status=%d, wrid=%d vend_err %x)\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:SPACING: No space is necessary after a cast
#898: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:180:
+				skb->protocol = ((struct ipoib_header *) skb->data)->proto;

WARNING:SPLIT_STRING: quoted string split across lines
#918: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:200:
+				ipoib_warn(priv, "ipoib_ib_post_receive failed "
+					   "for buf %d\n", wr_id);

CHECK:BRACES: Unbalanced braces around else statement
#919: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:201:
+		} else

WARNING:SPLIT_STRING: quoted string split across lines
#956: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:238:
+			ipoib_warn(priv, "failed send event "
+				   "(status=%d, wrid=%d vend_err %x)\n",

CHECK:SPACING: No space is necessary after a cast
#963: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:245:
+	struct net_device *dev = (struct net_device *) dev_ptr;

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1020: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:302:
+	if (!(skb = skb_unshare(skb, GFP_ATOMIC))) {

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:YIELD: Using yield() is generally wrong. See yield() kernel-doc (sched/core.c)
#1190: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:472:
+		yield();

WARNING:YIELD: Using yield() is generally wrong. See yield() kernel-doc (sched/core.c)
#1205: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:487:
+		yield();

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1224: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:506:
+		printk(KERN_WARNING "%s: ipoib_transport_dev_init failed\n", ca->name);

WARNING:TYPO_SPELLING: 'Assigment' may be misspelled - perhaps 'Assignment'?
#1277: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:559:
+ * Delayed P_Key Assigment Interim Support
                  ^^^^^^^^^

WARNING:TYPO_SPELLING: 'assigment' may be misspelled - perhaps 'assignment'?
#1279: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:561:
+ * The following is initial implementation of delayed P_Key assigment
                                                             ^^^^^^^^^

CHECK:BRACES: braces {} should be used on all arms of this statement
#1305: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:587:
+	if (test_bit(IPOIB_PKEY_ASSIGNED, &priv->flags))
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1307: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:589:
+	else {

WARNING:TYPO_SPELLING: 'assigment' may be misspelled - perhaps 'assignment'?
#1322: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:604:
+	/* set the interface pkey assigment flag                            */
 	                          ^^^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1340: FILE: drivers/infiniband/ulp/ipoib/ipoib_ib.c:622:
+/*
+  Local Variables:

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1348: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:1:
+/*

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#1368: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:21:
+ * $Id: ipoib_main.c 1273 2004-11-22 22:59:30Z roland $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1542: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:195:
+^I^I^I.dlid ^I       = be16_to_cpu(pathrec->dlid),$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1543: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:196:
+^I^I^I.sl ^I       = pathrec->sl,$

WARNING:SPLIT_STRING: quoted string split across lines
#1565: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:218:
+			ipoib_warn(priv, "dev_queue_xmit failed "
+				   "to requeue packet\n");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1573: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:226:
+^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SIZEOF_PARENTHESIS: sizeof *path should be sizeof(*path)
#1583: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:236:
+	struct ipoib_path *path = kmalloc(sizeof *path, GFP_ATOMIC);

CHECK:SPACING: No space is necessary after a cast
#1642: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:295:
+			 (union ib_gid *) (skb->dst->neighbour->ha + 4),

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1663: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:316:
+^I^I^I.dlid ^I       = be16_to_cpu(pathrec->dlid),$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1664: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:317:
+^I^I^I.sl ^I       = pathrec->sl,$

CHECK:SPACING: No space is necessary after a cast
#1677: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:330:
+	*(struct ipoib_ah **) skb->cb = ah;

WARNING:SPLIT_STRING: quoted string split across lines
#1681: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:334:
+		ipoib_warn(priv, "dev_queue_xmit failed "
+			   "to requeue ARP packet\n");

CHECK:SPACING: No space is necessary after a cast
#1692: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:345:
+	struct ipoib_ah *ah = *(struct ipoib_ah **) skb->cb;

WARNING:SIZEOF_PARENTHESIS: sizeof skb->cb should be sizeof(skb->cb)
#1734: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:387:
+	memset(skb->cb, 0, sizeof skb->cb);

CHECK:SPACING: No space is necessary after a cast
#1774: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:427:
+				   be32_to_cpup((__be32 *) skb->dst->neighbour->ha));

CHECK:SPACING: No space is necessary after a cast
#1784: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:437:
+			(struct ipoib_pseudoheader *) skb->data;

WARNING:SIZEOF_PARENTHESIS: sizeof *phdr should be sizeof(*phdr)
#1785: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:438:
+		skb_pull(skb, sizeof *phdr);

CHECK:SPACING: No space is necessary after a cast
#1792: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:445:
+			ipoib_mcast_send(dev, (union ib_gid *) (phdr->hwaddr + 4), skb);

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#1794: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:447:
+		}
+		else {

`else {` should follow the closing block `}` on the same line.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1794: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:447:
+		else {

CHECK:SPACING: No space is necessary after a cast
#1803: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:456:
+				ipoib_send(dev, skb, *(struct ipoib_ah **) skb->cb,

CHECK:SPACING: No space is necessary after a cast
#1804: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:457:
+					   be32_to_cpup((u32 *) phdr->hwaddr));

CHECK:SPACING: No space is necessary after a cast
#1808: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:461:
+			if (be16_to_cpup((u16 *) skb->data) != ETH_P_ARP) {

CHECK:SPACING: No space is necessary after a cast
#1812: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:465:
+					   be16_to_cpup((u16 *) skb->data),

CHECK:SPACING: No space is necessary after a cast
#1813: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:466:
+					   be32_to_cpup((u32 *) phdr->hwaddr),

CHECK:SPACING: No space is necessary after a cast
#1814: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:467:
+					   IPOIB_GID_ARG(*(union ib_gid *) (phdr->hwaddr + 4)));

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1820: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:473:
+^I^I^I/* put the pseudoheader back on */^I^I^I  $

WARNING:SIZEOF_PARENTHESIS: sizeof *phdr should be sizeof(*phdr)
#1821: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:474:
+			skb_push(skb, sizeof *phdr);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1854: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:507:
+			     void *daddr, void *saddr, unsigned len)

CHECK:SPACING: No space is necessary after a cast
#1858: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:511:
+	header = (struct ipoib_header *) skb_push(skb, sizeof *header);

WARNING:SIZEOF_PARENTHESIS: sizeof *header should be sizeof(*header)
#1858: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:511:
+	header = (struct ipoib_header *) skb_push(skb, sizeof *header);

CHECK:SPACING: No space is necessary after a cast
#1870: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:523:
+			(struct ipoib_pseudoheader *) skb_push(skb, sizeof *phdr);

WARNING:SIZEOF_PARENTHESIS: sizeof *phdr should be sizeof(*phdr)
#1870: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:523:
+			(struct ipoib_pseudoheader *) skb_push(skb, sizeof *phdr);

CHECK:SPACING: No space is necessary after a cast
#1890: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:543:
+		  be32_to_cpup((__be32 *) neigh->ha),

CHECK:SPACING: No space is necessary after a cast
#1891: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:544:
+		  IPOIB_GID_ARG(*((union ib_gid *) (neigh->ha + 4))));

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#1911: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:564:
+static int ipoib_neigh_setup_dev(struct net_device *dev, struct neigh_parms *parms)
                                                                              ^^^^^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1924: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:577:
+	priv->rx_ring =	kmalloc(IPOIB_RX_RING_SIZE * sizeof (struct ipoib_buf),

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1924: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:577:
+	priv->rx_ring =	kmalloc(IPOIB_RX_RING_SIZE * sizeof (struct ipoib_buf),
+				GFP_KERNEL);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1927: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:580:
+		printk(KERN_WARNING "%s: failed to allocate RX ring (%d entries)\n",

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#1927: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:580:
+	if (!priv->rx_ring) {
+		printk(KERN_WARNING "%s: failed to allocate RX ring (%d entries)\n",

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1932: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:585:
+	       IPOIB_RX_RING_SIZE * sizeof (struct ipoib_buf));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1934: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:587:
+	priv->tx_ring = kmalloc(IPOIB_TX_RING_SIZE * sizeof (struct ipoib_buf),

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1934: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:587:
+	priv->tx_ring = kmalloc(IPOIB_TX_RING_SIZE * sizeof (struct ipoib_buf),
+				GFP_KERNEL);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1937: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:590:
+		printk(KERN_WARNING "%s: failed to allocate TX ring (%d entries)\n",

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#1937: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:590:
+	if (!priv->tx_ring) {
+		printk(KERN_WARNING "%s: failed to allocate TX ring (%d entries)\n",

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1942: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:595:
+	       IPOIB_TX_RING_SIZE * sizeof (struct ipoib_buf));

WARNING:NEEDLESS_IF: kfree(NULL) is safe and this check is probably not required
#1977: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:630:
+	if (priv->rx_ring) {
+		kfree(priv->rx_ring);

WARNING:NEEDLESS_IF: kfree(NULL) is safe and this check is probably not required
#1982: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:635:
+	if (priv->tx_ring) {
+		kfree(priv->tx_ring);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1991: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:644:
+^Idev->open ^I^I = ipoib_open;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1992: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:645:
+^Idev->stop ^I^I = ipoib_stop;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1993: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:646:
+^Idev->change_mtu ^I = ipoib_change_mtu;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1994: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:647:
+^Idev->hard_start_xmit ^I = ipoib_start_xmit;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1995: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:648:
+^Idev->get_stats ^I^I = ipoib_get_stats;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1996: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:649:
+^Idev->tx_timeout ^I = ipoib_timeout;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1997: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:650:
+^Idev->hard_header ^I = ipoib_hard_header;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2001: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:654:
+^Idev->watchdog_timeo ^I = HZ;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2003: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:656:
+^Idev->rebuild_header ^I = NULL;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2004: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:657:
+^Idev->set_mac_address ^I = NULL;$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#2008: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:661:
+^I$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2013: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:666:
+^Idev->hard_header_len ^I = IPOIB_ENCAP_LEN + INFINIBAND_ALEN;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2014: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:667:
+^Idev->addr_len ^I^I = INFINIBAND_ALEN;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2015: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:668:
+^Idev->type ^I^I = ARPHRD_INFINIBAND;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2016: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:669:
+^Idev->tx_queue_len ^I = IPOIB_TX_RING_SIZE * 2;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2020: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:673:
+^Idev->mtu ^I^I = IPOIB_PACKET_SIZE - IPOIB_ENCAP_LEN;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2021: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:674:
+^Ipriv->mcast_mtu ^I = priv->admin_mtu = dev->mtu;$

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2021: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:674:
+	priv->mcast_mtu 	 = priv->admin_mtu = dev->mtu;

CHECK:SPACING: No space is necessary after a cast
#2051: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:704:
+	dev = alloc_netdev((int) sizeof (struct ipoib_dev_priv), name,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2051: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:704:
+	dev = alloc_netdev((int) sizeof (struct ipoib_dev_priv), name,

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#2066: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:719:
+static CLASS_DEVICE_ATTR(pkey, S_IRUGO, show_pkey, NULL);

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#2074: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:727:
+	if (sscanf(buf, "%i", &pkey) != 1)
+		return -EINVAL;

WARNING:EXPORTED_WORLD_WRITABLE: Exporting world writable files is usually an error. Consider more restrictive permissions.
#2085: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:738:
+static CLASS_DEVICE_ATTR(create_child, S_IWUGO, NULL, create_child);

Exporting world writable sysfs/debugfs files is usually a bad thing.
When done arbitrarily they can introduce serious security bugs.
In the past, some of the debugfs vulnerabilities would seemingly allow
any local user to write arbitrary values into device registers - a
situation from which little good can be expected to emerge.

See: https://lore.kernel.org/linux-arm-kernel/cover.1296818921.git.segoon@openwall.com/

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IWUGO' are not preferred. Consider using octal permissions '0222'.
#2085: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:738:
+static CLASS_DEVICE_ATTR(create_child, S_IWUGO, NULL, create_child);

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#2093: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:746:
+	if (sscanf(buf, "%i", &pkey) != 1)
+		return -EINVAL;

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#2104: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:757:
+
+}

WARNING:EXPORTED_WORLD_WRITABLE: Exporting world writable files is usually an error. Consider more restrictive permissions.
#2105: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:758:
+static CLASS_DEVICE_ATTR(delete_child, S_IWUGO, NULL, delete_child);

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IWUGO' are not preferred. Consider using octal permissions '0222'.
#2105: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:758:
+static CLASS_DEVICE_ATTR(delete_child, S_IWUGO, NULL, delete_child);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#2127: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:780:
+		printk(KERN_WARNING "%s: ib_query_pkey port %d failed (ret = %d)\n",

CHECK:BRACES: braces {} should be used on all arms of this statement
#2136: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:789:
+	if (result) {
[...]
+	} else
[...]

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#2137: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:790:
+		printk(KERN_WARNING "%s: ib_query_gid port %d failed (ret = %d)\n",

CHECK:BRACES: Unbalanced braces around else statement
#2140: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:793:
+	} else

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2141: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:794:
+		memcpy(priv->dev->dev_addr + 4, priv->local_gid.raw, sizeof (union ib_gid));

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2143: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:796:
+
+

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#2146: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:799:
+		printk(KERN_WARNING "%s: failed to initialize port %d (ret = %d)\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#2155: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:808:
+		printk(KERN_WARNING "%s: ib_register_event_handler failed for "

WARNING:SPLIT_STRING: quoted string split across lines
#2156: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:809:
+		printk(KERN_WARNING "%s: ib_register_event_handler failed for "
+		       "port %d (ret = %d)\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#2163: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:816:
+		printk(KERN_WARNING "%s: couldn't register ipoib port %d; error %d\n",

WARNING:SIZEOF_PARENTHESIS: sizeof *dev_list should be sizeof(*dev_list)
#2208: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:861:
+	dev_list = kmalloc(sizeof *dev_list, GFP_KERNEL);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2297: FILE: drivers/infiniband/ulp/ipoib/ipoib_main.c:950:
+/*
+  Local Variables:

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2305: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:1:
+/*

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#2325: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:21:
+ * $Id: ipoib_multicast.c 1277 2004-11-23 01:08:07Z roland $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#2349: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:45:
+^I$

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2399: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:95:
+	mcast = kmalloc(sizeof (*mcast), can_sleep ? GFP_KERNEL : GFP_ATOMIC);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2403: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:99:
+	memset(mcast, 0, sizeof (*mcast));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2433: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:129:
+			     sizeof (union ib_gid));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2458: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:154:
+			     sizeof (union ib_gid));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2484: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:180:
+		    sizeof (union ib_gid)))

CHECK:BRACES: braces {} should be used on all arms of this statement
#2560: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:256:
+	if (!status)
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#2562: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:258:
+	else {

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#2589: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:285:
+#if 0				/* Some SMs don't support send-only yet */

CHECK:BRACES: braces {} should be used on all arms of this statement
#2681: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:377:
+	if (test_bit(IPOIB_MCAST_RUN, &priv->flags)) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#2687: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:383:
+	} else

WARNING:RETURN_VOID: void function return statements are not generally useful
#2692: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:388:
+	return;
+}

CHECK:BRACES: braces {} should be used on all arms of this statement
#2735: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:431:
+	if (ret < 0) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#2748: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:444:
+	} else

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2763: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:459:
+		memcpy(priv->dev->dev_addr + 4, priv->local_gid.raw, sizeof (union ib_gid));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2778: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:474:
+		       sizeof (union ib_gid));

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2796: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:492:
+			if (!test_bit(IPOIB_MCAST_FLAG_SENDONLY, &mcast->flags)
+			    && !test_bit(IPOIB_MCAST_FLAG_BUSY, &mcast->flags)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2797: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:493:
+			    && !test_bit(IPOIB_MCAST_FLAG_BUSY, &mcast->flags)
+			    && !test_bit(IPOIB_MCAST_FLAG_ATTACHED, &mcast->flags)) {

WARNING:SPLIT_STRING: quoted string split across lines
#2917: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:613:
+		ipoib_warn(priv, "ib_sa_mcmember_rec_delete failed "
+			   "for leave (result = %d)\n", ret);

WARNING:SPLIT_STRING: quoted string split across lines
#2939: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:635:
+			ipoib_warn(priv, "unable to allocate memory for "
+				   "multicast structure\n");

WARNING:SPLIT_STRING: quoted string split across lines
#2958: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:654:
+			ipoib_dbg_mcast(priv, "no address vector, "
+					"but multicast join already started\n");

WARNING:SIZEOF_PARENTHESIS: sizeof *path should be sizeof(*path)
#2975: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:671:
+			struct ipoib_path *path = kmalloc(sizeof *path, GFP_ATOMIC);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2979: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:675:
+^I^I^I^Ipath->ah  ^I= mcast->ah;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2980: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:676:
+^I^I^I^Ipath->dev ^I= dev;$

WARNING:SIZEOF_PARENTHESIS: sizeof mgid should be sizeof(mgid)
#3093: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:789:
+		memcpy(mgid.raw, mclist->dmi_addr + 4, sizeof mgid);

CHECK:BRACES: braces {} should be used on all arms of this statement
#3117: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:813:
+			if (mcast) {
[...]
+			} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#3125: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:821:
+			} else

WARNING:SIZEOF_PARENTHESIS: sizeof *iter should be sizeof(*iter)
#3165: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:861:
+	iter = kmalloc(sizeof *iter, GFP_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof iter->mgid should be sizeof(iter->mgid)
#3170: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:866:
+	memset(iter->mgid.raw, 0, sizeof iter->mgid);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#3200: FILE: drivers/infiniband/ulp/ipoib/ipoib_multicast.c:896:
+			   sizeof (union ib_gid)) < 0) {

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#3236: FILE: drivers/infiniband/ulp/ipoib/ipoib_proto.h:1:
+/*

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#3256: FILE: drivers/infiniband/ulp/ipoib/ipoib_proto.h:21:
+ * $Id: ipoib_proto.h 1254 2004-11-17 17:19:12Z roland $

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#3276: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:1:
+/*

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#3296: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:21:
+ * $Id: ipoib_verbs.c 1262 2004-11-18 17:38:36Z roland $

WARNING:SIZEOF_PARENTHESIS: sizeof *qp_attr should be sizeof(*qp_attr)
#3312: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:37:
+	qp_attr = kmalloc(sizeof *qp_attr, GFP_KERNEL);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#3438: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:163:
+		printk(KERN_WARNING "%s: failed to allocate PD\n", ca->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#3445: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:170:
+		printk(KERN_WARNING "%s: failed to create CQ\n", ca->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#3454: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:179:
+		printk(KERN_WARNING "%s: ib_reg_phys_mr failed\n", ca->name);

WARNING:SUSPECT_COMMA_SEMICOLON: Possible comma where semicolon could be used
#3459: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:184:
+	init_attr.recv_cq = priv->cq,
+
+	priv->qp = ib_create_qp(priv->pd, &init_attr);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#3463: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:188:
+		printk(KERN_WARNING "%s: failed to create QP\n", ca->name);

ERROR:SPACING: space prohibited before that close parenthesis ')'
#3469: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:194:
+	priv->dev->dev_addr[3] = (priv->qp->qp_num      ) & 0xff;

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3519: FILE: drivers/infiniband/ulp/ipoib/ipoib_verbs.c:244:
+/*
+  Local Variables:

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#3527: FILE: drivers/infiniband/ulp/ipoib/ipoib_vlan.c:1:
+/*

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#3547: FILE: drivers/infiniband/ulp/ipoib/ipoib_vlan.c:21:
+ * $Id: ipoib_vlan.c 1271 2004-11-18 22:11:29Z roland $

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#3557: FILE: drivers/infiniband/ulp/ipoib/ipoib_vlan.c:31:
+#include <asm/uaccess.h>

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#3569: FILE: drivers/infiniband/ulp/ipoib/ipoib_vlan.c:43:
+static CLASS_DEVICE_ATTR(parent, S_IRUGO, show_parent, NULL);

WARNING:SIZEOF_PARENTHESIS: sizeof intf_name should be sizeof(intf_name)
#3600: FILE: drivers/infiniband/ulp/ipoib/ipoib_vlan.c:74:
+	snprintf(intf_name, sizeof intf_name, "%s.%04x",

WARNING:SPLIT_STRING: quoted string split across lines
#3619: FILE: drivers/infiniband/ulp/ipoib/ipoib_vlan.c:93:
+		ipoib_warn(ppriv, "failed to initialize subinterface: "
+			   "device %s, port %d",

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000228280.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 13 errors, 164 warnings, 66 checks, 3602 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000228280.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
