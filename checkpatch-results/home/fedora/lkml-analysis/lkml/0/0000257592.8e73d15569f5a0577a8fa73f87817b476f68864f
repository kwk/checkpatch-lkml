WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#42: FILE: drivers/i2c/i2c-sensor-detect.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#43: FILE: drivers/i2c/i2c-sensor-detect.c:2:
+/*
+    i2c-sensor.c - Part of lm_sensors, Linux kernel modules for hardware

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

ERROR:CODE_INDENT: code indent should use tabs where possible
#44: FILE: drivers/i2c/i2c-sensor-detect.c:3:
+                monitoring$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#59: FILE: drivers/i2c/i2c-sensor-detect.c:18:
+    along with this program; if not, write to the Free Software$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#60: FILE: drivers/i2c/i2c-sensor-detect.c:19:
+    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.$

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#73: FILE: drivers/i2c/i2c-sensor-detect.c:32:
+#include <asm/uaccess.h>

CHECK:LINE_SPACING: Please don't use multiple blank lines
#75: FILE: drivers/i2c/i2c-sensor-detect.c:34:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: Unnecessary space before function pointer arguments
#79: FILE: drivers/i2c/i2c-sensor-detect.c:38:
+	       int (*found_proc) (struct i2c_adapter *, int, int))

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '!is_isa'
#88: FILE: drivers/i2c/i2c-sensor-detect.c:47:
+	if ((!is_isa) &&
+	    !i2c_check_functionality(adapter, I2C_FUNC_SMBUS_QUICK))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#97: FILE: drivers/i2c/i2c-sensor-detect.c:56:
+		/* If it is in one of the force entries, we don't do any
+		   detection at all */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#97: FILE: drivers/i2c/i2c-sensor-detect.c:56:
+		   detection at all */

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#99: FILE: drivers/i2c/i2c-sensor-detect.c:58:
+		for (i = 0; !found && (this_force = address_data->forces + i, this_force->force); i++) {

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

ERROR:SPACING: space prohibited after that open parenthesis '('
#101: FILE: drivers/i2c/i2c-sensor-detect.c:60:
+				if ( ((adapter_id == this_force->force[j]) ||

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'adapter_id == this_force->force[j]'
#101: FILE: drivers/i2c/i2c-sensor-detect.c:60:
+				if ( ((adapter_id == this_force->force[j]) ||
+				      ((this_force->force[j] == ANY_I2C_BUS) && !is_isa)) &&
+				      (addr == this_force->force[j + 1]) ) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'this_force->force[j] == ANY_I2C_BUS'
#101: FILE: drivers/i2c/i2c-sensor-detect.c:60:
+				if ( ((adapter_id == this_force->force[j]) ||
+				      ((this_force->force[j] == ANY_I2C_BUS) && !is_isa)) &&
+				      (addr == this_force->force[j + 1]) ) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr == this_force->force[j + 1]'
#101: FILE: drivers/i2c/i2c-sensor-detect.c:60:
+				if ( ((adapter_id == this_force->force[j]) ||
+				      ((this_force->force[j] == ANY_I2C_BUS) && !is_isa)) &&
+				      (addr == this_force->force[j + 1]) ) {

ERROR:SPACING: space prohibited before that close parenthesis ')'
#103: FILE: drivers/i2c/i2c-sensor-detect.c:62:
+				      (addr == this_force->force[j + 1]) ) {

WARNING:LONG_LINE: line length of 134 exceeds 100 columns
#104: FILE: drivers/i2c/i2c-sensor-detect.c:63:
+					dev_dbg(&adapter->dev, "found force parameter for adapter %d, addr %04x\n", adapter_id, addr);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#105: FILE: drivers/i2c/i2c-sensor-detect.c:64:
+					if ((err = found_proc(adapter, addr, this_force->kind)))

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#115: FILE: drivers/i2c/i2c-sensor-detect.c:74:
+		/* If this address is in one of the ignores, we can forget about it
+		   right now */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#115: FILE: drivers/i2c/i2c-sensor-detect.c:74:
+		   right now */

ERROR:SPACING: space prohibited after that open parenthesis '('
#117: FILE: drivers/i2c/i2c-sensor-detect.c:76:
+			if ( ((adapter_id == address_data->ignore[i]) ||

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'adapter_id == address_data->ignore[i]'
#117: FILE: drivers/i2c/i2c-sensor-detect.c:76:
+			if ( ((adapter_id == address_data->ignore[i]) ||
+			      ((address_data->ignore[i] == ANY_I2C_BUS) &&
+			       !is_isa)) &&
+			      (addr == address_data->ignore[i + 1])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'address_data->ignore[i] == ANY_I2C_BUS'
#117: FILE: drivers/i2c/i2c-sensor-detect.c:76:
+			if ( ((adapter_id == address_data->ignore[i]) ||
+			      ((address_data->ignore[i] == ANY_I2C_BUS) &&
+			       !is_isa)) &&
+			      (addr == address_data->ignore[i + 1])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr == address_data->ignore[i + 1]'
#117: FILE: drivers/i2c/i2c-sensor-detect.c:76:
+			if ( ((adapter_id == address_data->ignore[i]) ||
+			      ((address_data->ignore[i] == ANY_I2C_BUS) &&
+			       !is_isa)) &&
+			      (addr == address_data->ignore[i + 1])) {

WARNING:LONG_LINE: line length of 127 exceeds 100 columns
#121: FILE: drivers/i2c/i2c-sensor-detect.c:80:
+				dev_dbg(&adapter->dev, "found ignore parameter for adapter %d, addr %04x\n", adapter_id, addr);

ERROR:SPACING: space prohibited after that open parenthesis '('
#126: FILE: drivers/i2c/i2c-sensor-detect.c:85:
+			if ( ((adapter_id == address_data->ignore_range[i]) ||

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'adapter_id == address_data->ignore_range[i]'
#126: FILE: drivers/i2c/i2c-sensor-detect.c:85:
+			if ( ((adapter_id == address_data->ignore_range[i]) ||
+			      ((address_data-> ignore_range[i] == ANY_I2C_BUS) & 
+			       !is_isa)) &&
+			     (addr >= address_data->ignore_range[i + 1]) &&
+			     (addr <= address_data->ignore_range[i + 2])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr >= address_data->ignore_range[i + 1]'
#126: FILE: drivers/i2c/i2c-sensor-detect.c:85:
+			if ( ((adapter_id == address_data->ignore_range[i]) ||
+			      ((address_data-> ignore_range[i] == ANY_I2C_BUS) & 
+			       !is_isa)) &&
+			     (addr >= address_data->ignore_range[i + 1]) &&
+			     (addr <= address_data->ignore_range[i + 2])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr <= address_data->ignore_range[i + 2]'
#126: FILE: drivers/i2c/i2c-sensor-detect.c:85:
+			if ( ((adapter_id == address_data->ignore_range[i]) ||
+			      ((address_data-> ignore_range[i] == ANY_I2C_BUS) & 
+			       !is_isa)) &&
+			     (addr >= address_data->ignore_range[i + 1]) &&
+			     (addr <= address_data->ignore_range[i + 2])) {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#127: FILE: drivers/i2c/i2c-sensor-detect.c:86:
+^I^I^I      ((address_data-> ignore_range[i] == ANY_I2C_BUS) & $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: spaces prohibited around that '->' (ctx:VxW)
#127: FILE: drivers/i2c/i2c-sensor-detect.c:86:
+			      ((address_data-> ignore_range[i] == ANY_I2C_BUS) & 
 			                    ^

WARNING:LONG_LINE: line length of 134 exceeds 100 columns
#131: FILE: drivers/i2c/i2c-sensor-detect.c:90:
+				dev_dbg(&adapter->dev,  "found ignore_range parameter for adapter %d, addr %04x\n", adapter_id, addr);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#138: FILE: drivers/i2c/i2c-sensor-detect.c:97:
+^I^I/* Now, we will do a detection, but only if it is in the normal or $

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#139: FILE: drivers/i2c/i2c-sensor-detect.c:98:
+		/* Now, we will do a detection, but only if it is in the normal or 
+		   probe entries */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#139: FILE: drivers/i2c/i2c-sensor-detect.c:98:
+		   probe entries */

WARNING:LONG_LINE: line length of 108 exceeds 100 columns
#141: FILE: drivers/i2c/i2c-sensor-detect.c:100:
+			for (i = 0; !found && (address_data->normal_isa[i] != I2C_CLIENT_ISA_END); i += 1) {

WARNING:LONG_LINE: line length of 135 exceeds 100 columns
#143: FILE: drivers/i2c/i2c-sensor-detect.c:102:
+					dev_dbg(&adapter->dev, "found normal isa entry for adapter %d, addr %04x\n", adapter_id, addr);

WARNING:LONG_LINE: line length of 114 exceeds 100 columns
#147: FILE: drivers/i2c/i2c-sensor-detect.c:106:
+			for (i = 0; !found && (address_data->normal_isa_range[i] != I2C_CLIENT_ISA_END); i += 3) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr >= address_data->normal_isa_range[i]'
#148: FILE: drivers/i2c/i2c-sensor-detect.c:107:
+				if ((addr >= address_data->normal_isa_range[i]) &&
+				    (addr <= address_data->normal_isa_range[i + 1]) &&
+				    ((addr - address_data->normal_isa_range[i]) % address_data->normal_isa_range[i + 2] == 0)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr <= address_data->normal_isa_range[i + 1]'
#148: FILE: drivers/i2c/i2c-sensor-detect.c:107:
+				if ((addr >= address_data->normal_isa_range[i]) &&
+				    (addr <= address_data->normal_isa_range[i + 1]) &&
+				    ((addr - address_data->normal_isa_range[i]) % address_data->normal_isa_range[i + 2] == 0)) {

WARNING:LONG_LINE: line length of 128 exceeds 100 columns
#150: FILE: drivers/i2c/i2c-sensor-detect.c:109:
+				    ((addr - address_data->normal_isa_range[i]) % address_data->normal_isa_range[i + 2] == 0)) {

WARNING:LONG_LINE: line length of 139 exceeds 100 columns
#151: FILE: drivers/i2c/i2c-sensor-detect.c:110:
+					dev_dbg(&adapter->dev, "found normal isa_range entry for adapter %d, addr %04x", adapter_id, addr);

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#156: FILE: drivers/i2c/i2c-sensor-detect.c:115:
+			for (i = 0; !found && (address_data->normal_i2c[i] != I2C_CLIENT_END); i += 1) {

WARNING:LONG_LINE: line length of 133 exceeds 100 columns
#159: FILE: drivers/i2c/i2c-sensor-detect.c:118:
+					dev_dbg(&adapter->dev, "found normal i2c entry for adapter %d, addr %02x", adapter_id, addr);

WARNING:LONG_LINE: line length of 110 exceeds 100 columns
#162: FILE: drivers/i2c/i2c-sensor-detect.c:121:
+			for (i = 0; !found && (address_data->normal_i2c_range[i] != I2C_CLIENT_END); i += 2) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr >= address_data->normal_i2c_range[i]'
#163: FILE: drivers/i2c/i2c-sensor-detect.c:122:
+				if ((addr >= address_data->normal_i2c_range[i]) &&
+				    (addr <= address_data->normal_i2c_range[i + 1])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr <= address_data->normal_i2c_range[i + 1]'
#163: FILE: drivers/i2c/i2c-sensor-detect.c:122:
+				if ((addr >= address_data->normal_i2c_range[i]) &&
+				    (addr <= address_data->normal_i2c_range[i + 1])) {

WARNING:LONG_LINE: line length of 141 exceeds 100 columns
#165: FILE: drivers/i2c/i2c-sensor-detect.c:124:
+					dev_dbg(&adapter->dev, "found normal i2c_range entry for adapter %d, addr %04x\n", adapter_id, addr);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'adapter_id == address_data->probe[i]'
#174: FILE: drivers/i2c/i2c-sensor-detect.c:133:
+			if (((adapter_id == address_data->probe[i]) ||
+			     ((address_data->
+			       probe[i] == ANY_I2C_BUS) && !is_isa))
+			    && (addr == address_data->probe[i + 1])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr == address_data->probe[i + 1]'
#174: FILE: drivers/i2c/i2c-sensor-detect.c:133:
+			if (((adapter_id == address_data->probe[i]) ||
+			     ((address_data->
+			       probe[i] == ANY_I2C_BUS) && !is_isa))
+			    && (addr == address_data->probe[i + 1])) {

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'address_data->probe[i]'
#176: FILE: drivers/i2c/i2c-sensor-detect.c:135:
+			     ((address_data->
+			       probe[i] == ANY_I2C_BUS) && !is_isa))

A single dereferencing identifier spanned on multiple lines like::

  struct_identifier->member[index].
  member = <foo>;

is generally hard to follow. It can easily lead to typos and so makes
the code vulnerable to bugs.

If fixing the multiple line dereferencing leads to an 80 column
violation, then either rewrite the code in a more simple way or if the
starting part of the dereferencing identifier is the same and used at
multiple places then store it in a temporary variable, and use that
temporary variable only at all the places. For example, if there are
two dereferencing identifiers::

  member1->member2->member3.foo1;
  member1->member2->member3.foo2;

then store the member1->member2->member3 part in a temporary variable.
It not only helps to avoid the 80 column violation but also reduces
the program size by removing the unnecessary dereferences.

But if none of the above methods work then ignore the 80 column
violation because it is much easier to read a dereferencing identifier
on a single line.

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#177: FILE: drivers/i2c/i2c-sensor-detect.c:136:
+			       probe[i] == ANY_I2C_BUS) && !is_isa))
+			    && (addr == address_data->probe[i + 1])) {

WARNING:LONG_LINE: line length of 126 exceeds 100 columns
#178: FILE: drivers/i2c/i2c-sensor-detect.c:137:
+				dev_dbg(&adapter->dev, "found probe parameter for adapter %d, addr %04x\n", adapter_id, addr);

ERROR:SPACING: space prohibited after that open parenthesis '('
#183: FILE: drivers/i2c/i2c-sensor-detect.c:142:
+			if ( ((adapter_id == address_data->probe_range[i]) ||

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'adapter_id == address_data->probe_range[i]'
#183: FILE: drivers/i2c/i2c-sensor-detect.c:142:
+			if ( ((adapter_id == address_data->probe_range[i]) ||
+			      ((address_data->probe_range[i] == ANY_I2C_BUS) && !is_isa)) &&
+			     (addr >= address_data->probe_range[i + 1]) &&
+			     (addr <= address_data->probe_range[i + 2])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'address_data->probe_range[i] == ANY_I2C_BUS'
#183: FILE: drivers/i2c/i2c-sensor-detect.c:142:
+			if ( ((adapter_id == address_data->probe_range[i]) ||
+			      ((address_data->probe_range[i] == ANY_I2C_BUS) && !is_isa)) &&
+			     (addr >= address_data->probe_range[i + 1]) &&
+			     (addr <= address_data->probe_range[i + 2])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr >= address_data->probe_range[i + 1]'
#183: FILE: drivers/i2c/i2c-sensor-detect.c:142:
+			if ( ((adapter_id == address_data->probe_range[i]) ||
+			      ((address_data->probe_range[i] == ANY_I2C_BUS) && !is_isa)) &&
+			     (addr >= address_data->probe_range[i + 1]) &&
+			     (addr <= address_data->probe_range[i + 2])) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'addr <= address_data->probe_range[i + 2]'
#183: FILE: drivers/i2c/i2c-sensor-detect.c:142:
+			if ( ((adapter_id == address_data->probe_range[i]) ||
+			      ((address_data->probe_range[i] == ANY_I2C_BUS) && !is_isa)) &&
+			     (addr >= address_data->probe_range[i + 1]) &&
+			     (addr <= address_data->probe_range[i + 2])) {

WARNING:LONG_LINE: line length of 132 exceeds 100 columns
#188: FILE: drivers/i2c/i2c-sensor-detect.c:147:
+				dev_dbg(&adapter->dev, "found probe_range parameter for adapter %d, addr %04x\n", adapter_id, addr);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#195: FILE: drivers/i2c/i2c-sensor-detect.c:154:
+		/* OK, so we really should examine this address. First check
+		   whether there is some client here at all! */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#195: FILE: drivers/i2c/i2c-sensor-detect.c:154:
+		   whether there is some client here at all! */

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#197: FILE: drivers/i2c/i2c-sensor-detect.c:156:
+		    (i2c_smbus_xfer (adapter, addr, 0, 0, 0, I2C_SMBUS_QUICK, NULL) >= 0))

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#198: FILE: drivers/i2c/i2c-sensor-detect.c:157:
+			if ((err = found_proc(adapter, addr, -1)))

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#204: FILE: drivers/i2c/i2c-sensor-detect.c:163:
+EXPORT_SYMBOL(i2c_detect);

EXPORT_SYMBOL should immediately follow the symbol to be exported.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000257592.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 13 errors, 30 warnings, 22 checks, 167 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000257592.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
