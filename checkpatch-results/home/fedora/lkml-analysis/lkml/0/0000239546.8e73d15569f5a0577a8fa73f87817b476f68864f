WARNING:BAD_SIGN_OFF: email address 'zaitcev@redhat.com, Aleksey_Gorelov@Phoenix.com, vojtech@suse.cz' might be better as 'zaitcev@redhat.com Aleksey_Gorelov@Phoenix.com, vojtech@suse.cz'
#49: 
Cc: zaitcev@redhat.com, Aleksey_Gorelov@Phoenix.com, vojtech@suse.cz

The signed-off-by line does not fall in line with the standards
specified by the community.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#developer-s-certificate-of-origin-1-1

WARNING:BAD_SIGN_OFF: Unexpected content after email: 'zaitcev@redhat.com, Aleksey_Gorelov@Phoenix.com, vojtech@suse.cz', should be: 'zaitcev@redhat.com (Aleksey_Gorelov@Phoenix.com, vojtech@suse.cz)'
#49: 
Cc: zaitcev@redhat.com, Aleksey_Gorelov@Phoenix.com, vojtech@suse.cz

WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#75: 
diff -Nru a/Documentation/kernel-parameters.txt b/Documentation/kernel-parameters.txt

ERROR:DIFF_IN_COMMIT_MSG: Avoid using diff content in the commit message - patch(1) might not work
#76: 
--- a/Documentation/kernel-parameters.txt	2004-09-09 17:59:01 -07:00

Avoid having diff content in commit message.
This causes problems when one tries to apply a file containing both
the changelog and the diff because patch(1) tries to apply the diff
which it found in the changelog.

See: https://lore.kernel.org/lkml/20150611134006.9df79a893e3636019ad2759e@linux-foundation.org/

CHECK:LINE_SPACING: Please don't use multiple blank lines
#94: FILE: drivers/pci/quirks.c:829:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:BIT_MACRO: Prefer using the BIT macro
#100: FILE: drivers/pci/quirks.c:835:
+#define UHCI_USBCMD_RUN		(1 << 0)	/* RUN/STOP bit */

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

CHECK:BIT_MACRO: Prefer using the BIT macro
#101: FILE: drivers/pci/quirks.c:836:
+#define UHCI_USBCMD_GRESET	(1 << 2)	/* Global reset */

CHECK:BIT_MACRO: Prefer using the BIT macro
#102: FILE: drivers/pci/quirks.c:837:
+#define UHCI_USBCMD_CONFIGURE	(1 << 6)	/* config semaphore */

CHECK:BIT_MACRO: Prefer using the BIT macro
#103: FILE: drivers/pci/quirks.c:838:
+#define UHCI_USBSTS_HALTED	(1 << 5)	/* HCHalted bit */

CHECK:BIT_MACRO: Prefer using the BIT macro
#110: FILE: drivers/pci/quirks.c:845:
+#define OHCI_OCR		(1 << 3)	/* ownership change request */

CHECK:BIT_MACRO: Prefer using the BIT macro
#111: FILE: drivers/pci/quirks.c:846:
+#define OHCI_CTRL_IR		(1 << 8)	/* interrupt routing */

CHECK:BIT_MACRO: Prefer using the BIT macro
#112: FILE: drivers/pci/quirks.c:847:
+#define OHCI_INTR_OC		(1 << 30)	/* ownership change */

CHECK:BIT_MACRO: Prefer using the BIT macro
#116: FILE: drivers/pci/quirks.c:851:
+#define EHCI_USBCMD_RUN		(1 << 0)	/* RUN/STOP bit */

CHECK:BIT_MACRO: Prefer using the BIT macro
#118: FILE: drivers/pci/quirks.c:853:
+#define EHCI_USBSTS_HALTED	(1 << 12)	/* HCHalted bit */

CHECK:BIT_MACRO: Prefer using the BIT macro
#121: FILE: drivers/pci/quirks.c:856:
+#define EHCI_USBLEGSUP_BIOS	(1 << 16)	/* BIOS semaphore */

CHECK:BIT_MACRO: Prefer using the BIT macro
#122: FILE: drivers/pci/quirks.c:857:
+#define EHCI_USBLEGSUP_OS	(1 << 24)	/* OS semaphore */

CHECK:BIT_MACRO: Prefer using the BIT macro
#124: FILE: drivers/pci/quirks.c:859:
+#define EHCI_USBLEGCTLSTS_SOOE	(1 << 13)	/* SMI on ownership change */

ERROR:GLOBAL_INITIALISERS: do not initialise globals to 0
#126: FILE: drivers/pci/quirks.c:861:
+int usb_early_handoff __initdata = 0;

Global variables should not be initialized explicitly to
0 (or NULL, false, etc.).  Your compiler (or rather your
loader, which is responsible for zeroing out the relevant
sections) automatically does it for you.

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#132: FILE: drivers/pci/quirks.c:867:
+__setup("usb-handoff", usb_handoff_early);

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#161: FILE: drivers/pci/quirks.c:896:
+	if ((sts & UHCI_USBSTS_HALTED) == 0)
+	{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#182: FILE: drivers/pci/quirks.c:917:
+^Iif (val & 0xbf) $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#184: FILE: drivers/pci/quirks.c:919:
+^I^I$

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#185: FILE: drivers/pci/quirks.c:920:
+		
+}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#193: FILE: drivers/pci/quirks.c:928:
+	base = ioremap_nocache(pci_resource_start(pdev, 0),
+				     pci_resource_len(pdev, 0));

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#194: FILE: drivers/pci/quirks.c:929:
+	if (base == NULL) return;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!base"
#194: FILE: drivers/pci/quirks.c:929:
+	if (base == NULL) return;

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

ERROR:TRAILING_WHITESPACE: trailing whitespace
#200: FILE: drivers/pci/quirks.c:935:
+^I^Iwhile (wait_time > 0 && $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#201: FILE: drivers/pci/quirks.c:936:
+		while (wait_time > 0 && 
+				readl(base + OHCI_CONTROL) & OHCI_CTRL_IR) {

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#204: FILE: drivers/pci/quirks.c:939:
+			schedule_timeout((HZ*10 + 999) / 1000);
 			                    ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#225: FILE: drivers/pci/quirks.c:960:
+	base = ioremap_nocache(pci_resource_start(pdev, 0),
+				pci_resource_len(pdev, 0));

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#226: FILE: drivers/pci/quirks.c:961:
+	if (base == NULL) return;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!base"
#226: FILE: drivers/pci/quirks.c:961:
+	if (base == NULL) return;

ERROR:TRAILING_WHITESPACE: trailing whitespace
#233: FILE: drivers/pci/quirks.c:968:
+^I^Ipci_read_config_dword(pdev, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#234: FILE: drivers/pci/quirks.c:969:
+		pci_read_config_dword(pdev, 
+					hcc_params + EHCI_USBLEGSUP,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#241: FILE: drivers/pci/quirks.c:976:
+			pci_read_config_dword(pdev,
+						hcc_params + EHCI_USBLEGCTLSTS,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#244: FILE: drivers/pci/quirks.c:979:
+			pci_write_config_dword(pdev,
+						hcc_params + EHCI_USBLEGCTLSTS,

ERROR:TRAILING_WHITESPACE: trailing whitespace
#247: FILE: drivers/pci/quirks.c:982:
+^I^I^Ipci_write_config_dword(pdev, $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#248: FILE: drivers/pci/quirks.c:983:
+^I^I^I^I^I^Ihcc_params + EHCI_USBLEGSUP, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#248: FILE: drivers/pci/quirks.c:983:
+			pci_write_config_dword(pdev, 
+						hcc_params + EHCI_USBLEGSUP, 

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#254: FILE: drivers/pci/quirks.c:989:
+				schedule_timeout((HZ*10+999)/1000);
 				                    ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#254: FILE: drivers/pci/quirks.c:989:
+				schedule_timeout((HZ*10+999)/1000);
 				                       ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#254: FILE: drivers/pci/quirks.c:989:
+				schedule_timeout((HZ*10+999)/1000);
 				                            ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#257: FILE: drivers/pci/quirks.c:992:
+				pci_read_config_dword(pdev,
+						hcc_params + EHCI_USBLEGSUP,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#264: FILE: drivers/pci/quirks.c:999:
+				printk(KERN_WARNING "EHCI early BIOS handoff "

WARNING:SPLIT_STRING: quoted string split across lines
#265: FILE: drivers/pci/quirks.c:1000:
+				printk(KERN_WARNING "EHCI early BIOS handoff "
+						"failed (BIOS bug ?)\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#267: FILE: drivers/pci/quirks.c:1002:
+				pci_write_config_dword(pdev,
+						hcc_params + EHCI_USBLEGSUP,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#270: FILE: drivers/pci/quirks.c:1005:
+				pci_write_config_dword(pdev,
+						hcc_params + EHCI_USBLEGCTLSTS,

WARNING:BRACES: braces {} are not necessary for single statement blocks
#292: FILE: drivers/pci/quirks.c:1027:
+			if ((val == ~(u32)0) || (val & EHCI_USBSTS_HALTED)) {
+				break;
+			}

WARNING:RETURN_VOID: void function return statements are not generally useful
#303: FILE: drivers/pci/quirks.c:1038:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#305: FILE: drivers/pci/quirks.c:1040:
+
+

WARNING:RETURN_VOID: void function return statements are not generally useful
#321: FILE: drivers/pci/quirks.c:1056:
+	return;
+}

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000239546.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 11 errors, 8 warnings, 32 checks, 265 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000239546.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
