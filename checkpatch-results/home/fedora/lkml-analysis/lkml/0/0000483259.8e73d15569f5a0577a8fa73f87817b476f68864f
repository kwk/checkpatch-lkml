WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#21: 
This is the second of seven patches against 2.4.18-pre4, beginning the breakup

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#38: FILE: drivers/ide/hpt366.c:2:
+ * linux/drivers/ide/hpt366.c		Version 0.22	20 Sep 2001

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#62: FILE: drivers/ide/hpt366.c:28:
+ * ^IAdrian Sun <a.sun@sun.com>$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#68: FILE: drivers/ide/hpt366.c:34:
+ * ^IDuncan Laurie <void@sun.com>$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#76: FILE: drivers/ide/hpt366.c:42:
+ * ^IMike Waychison <crlf@sun.com>$

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#84: FILE: drivers/ide/hpt366.c:60:
+#include <asm/uaccess.h>

WARNING:IF_1: Consider removing the #if 1 and its #endif
#239: FILE: drivers/ide/hpt366.c:229:
+#if 1

ERROR:CODE_INDENT: code indent should use tabs where possible
#242: FILE: drivers/ide/hpt366.c:232:
+        {       XFER_UDMA_5,    0x12446231      },$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#242: FILE: drivers/ide/hpt366.c:232:
+        {       XFER_UDMA_5,    0x12446231      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#243: FILE: drivers/ide/hpt366.c:233:
+        {       XFER_UDMA_4,    0x12446231      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#243: FILE: drivers/ide/hpt366.c:233:
+        {       XFER_UDMA_4,    0x12446231      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#244: FILE: drivers/ide/hpt366.c:234:
+        {       XFER_UDMA_3,    0x126c6231      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#244: FILE: drivers/ide/hpt366.c:234:
+        {       XFER_UDMA_3,    0x126c6231      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#245: FILE: drivers/ide/hpt366.c:235:
+        {       XFER_UDMA_2,    0x12486231      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#245: FILE: drivers/ide/hpt366.c:235:
+        {       XFER_UDMA_2,    0x12486231      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#246: FILE: drivers/ide/hpt366.c:236:
+        {       XFER_UDMA_1,    0x124c6233      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#246: FILE: drivers/ide/hpt366.c:236:
+        {       XFER_UDMA_1,    0x124c6233      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#247: FILE: drivers/ide/hpt366.c:237:
+        {       XFER_UDMA_0,    0x12506297      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#247: FILE: drivers/ide/hpt366.c:237:
+        {       XFER_UDMA_0,    0x12506297      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#249: FILE: drivers/ide/hpt366.c:239:
+        {       XFER_MW_DMA_2,  0x22406c31      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#249: FILE: drivers/ide/hpt366.c:239:
+        {       XFER_MW_DMA_2,  0x22406c31      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#250: FILE: drivers/ide/hpt366.c:240:
+        {       XFER_MW_DMA_1,  0x22406c33      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#250: FILE: drivers/ide/hpt366.c:240:
+        {       XFER_MW_DMA_1,  0x22406c33      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#251: FILE: drivers/ide/hpt366.c:241:
+        {       XFER_MW_DMA_0,  0x22406c97      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#251: FILE: drivers/ide/hpt366.c:241:
+        {       XFER_MW_DMA_0,  0x22406c97      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#253: FILE: drivers/ide/hpt366.c:243:
+        {       XFER_PIO_4,     0x06414e31      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#253: FILE: drivers/ide/hpt366.c:243:
+        {       XFER_PIO_4,     0x06414e31      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#254: FILE: drivers/ide/hpt366.c:244:
+        {       XFER_PIO_3,     0x06414e42      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#254: FILE: drivers/ide/hpt366.c:244:
+        {       XFER_PIO_3,     0x06414e42      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#255: FILE: drivers/ide/hpt366.c:245:
+        {       XFER_PIO_2,     0x06414e53      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#255: FILE: drivers/ide/hpt366.c:245:
+        {       XFER_PIO_2,     0x06414e53      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#256: FILE: drivers/ide/hpt366.c:246:
+        {       XFER_PIO_1,     0x06814e93      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#256: FILE: drivers/ide/hpt366.c:246:
+        {       XFER_PIO_1,     0x06814e93      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#257: FILE: drivers/ide/hpt366.c:247:
+        {       XFER_PIO_0,     0x06814ea7      },$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#257: FILE: drivers/ide/hpt366.c:247:
+        {       XFER_PIO_0,     0x06814ea7      },$

ERROR:CODE_INDENT: code indent should use tabs where possible
#258: FILE: drivers/ide/hpt366.c:248:
+        {       0,              0x06814ea7      }$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#258: FILE: drivers/ide/hpt366.c:248:
+        {       0,              0x06814ea7      }$

ERROR:GLOBAL_INITIALISERS: do not initialise globals to 0
#377: FILE: drivers/ide/hpt366.c:350:
+byte hpt366_proc = 0;

Global variables should not be initialized explicitly to
0 (or NULL, false, etc.).  Your compiler (or rather your
loader, which is responsible for zeroing out the relevant
sections) automatically does it for you.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#380: FILE: drivers/ide/hpt366.c:353:
+extern char *ide_xfer_verbose (byte xfer_rate);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#380: FILE: drivers/ide/hpt366.c:353:
+extern char *ide_xfer_verbose (byte xfer_rate);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:STATIC_CONST_CHAR_ARRAY: char * array declaration might be better as static const
#423: FILE: drivers/ide/hpt366.c:363:
+	char *chipset_nums[] = {"366", "366", "368", "370", "370A"};

WARNING:SPLIT_STRING: quoted string split across lines
#427: FILE: drivers/ide/hpt366.c:367:
+	p += sprintf(p, "\n                             "
+		"HighPoint HPT366/368/370\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#440: FILE: drivers/ide/hpt366.c:380:
+		p += sprintf(p, "--------------- Primary Channel "
+				"--------------- Secondary Channel "

WARNING:SPLIT_STRING: quoted string split across lines
#441: FILE: drivers/ide/hpt366.c:381:
+				"--------------- Secondary Channel "
+				"--------------\n");

WARNING:SPLIT_STRING: quoted string split across lines
#447: FILE: drivers/ide/hpt366.c:387:
+		p += sprintf(p, "Enabled:        %s"
+				"                             %s\n",

WARNING:LINE_SPACING: Missing a blank line after declarations
#453: FILE: drivers/ide/hpt366.c:393:
+			u8 cbl;
+			cbl = inb_p(iobase + 0x7b);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPLIT_STRING: quoted string split across lines
#458: FILE: drivers/ide/hpt366.c:398:
+			p += sprintf(p, "Cable:          ATA-%d"
+					"                          ATA-%d\n",

WARNING:SPLIT_STRING: quoted string split across lines
#465: FILE: drivers/ide/hpt366.c:405:
+		p += sprintf(p, "--------------- drive0 --------- drive1 "
+				"------- drive0 ---------- drive1 -------\n");

WARNING:SPLIT_STRING: quoted string split across lines
#467: FILE: drivers/ide/hpt366.c:407:
+		p += sprintf(p, "DMA capable:    %s              %s"
+				"            %s               %s\n",

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#476: FILE: drivers/ide/hpt366.c:416:
+			 * into io space */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:SPLIT_STRING: quoted string split across lines
#483: FILE: drivers/ide/hpt366.c:423:
+			p += sprintf(p, "Mode:           %s             %s"
+					"           %s              %s\n",

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#514: FILE: drivers/ide/hpt366.c:476:
+static unsigned int pci_bus_clock_list (byte speed, struct chipset_bus_clock_list_entry * chipset_table)

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#514: FILE: drivers/ide/hpt366.c:476:
+static unsigned int pci_bus_clock_list (byte speed, struct chipset_bus_clock_list_entry * chipset_table)

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#514: FILE: drivers/ide/hpt366.c:476:
+static unsigned int pci_bus_clock_list (byte speed, struct chipset_bus_clock_list_entry * chipset_table)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#526: FILE: drivers/ide/hpt366.c:485:
+static void hpt366_tune_chipset (ide_drive_t *drive, byte speed)

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#547: FILE: drivers/ide/hpt366.c:518:
+#if 0

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#561: FILE: drivers/ide/hpt366.c:537:
+static void hpt370_tune_chipset (ide_drive_t *drive, byte speed)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#573: FILE: drivers/ide/hpt366.c:545:
+^Istruct pci_dev *dev ^I= HWIF(drive)->pci_dev;$

WARNING:BRACES: braces {} are not necessary for single statement blocks
#617: FILE: drivers/ide/hpt366.c:573:
+	if (speed < XFER_MW_DMA_0) {
+		list_conf &= ~0x80000000; /* Disable on-chip PIO FIFO/buffer */
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:CODE_INDENT: code indent should use tabs where possible
#634: FILE: drivers/ide/hpt366.c:591:
+                hpt366_tune_chipset(drive, speed);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#634: FILE: drivers/ide/hpt366.c:591:
+                hpt366_tune_chipset(drive, speed);$

WARNING:PREFER_FALLTHROUGH: Prefer 'fallthrough;' over fallthrough comment
#656: FILE: drivers/ide/hpt366.c:824:
+			/* fall through to a reset */

Use the `fallthrough;` pseudo keyword instead of
`/* fallthrough */` like comments.

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#657: FILE: drivers/ide/hpt366.c:825:
+#if 0

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#676: FILE: drivers/ide/hpt366.c:847:
 	switch (func) {
[...]
+		case ide_dma_test_irq:	/* returns 1 if dma irq issued, 0 otherwise */
[...]
+		case ide_dma_end:
[...]
+		case ide_dma_timeout:
+		case ide_dma_lostirq:
[...]
+	        case ide_dma_begin:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#680: FILE: drivers/ide/hpt366.c:851:
+			dma_stat = inb(dma_base+2);
 			                       ^

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#686: FILE: drivers/ide/hpt366.c:857:
+				udelay(20); /* wait a little */

usleep_range() should be preferred over udelay(). The proper way of
using usleep_range() is mentioned in the kernel docs.

See: https://www.kernel.org/doc/html/latest/timers/timers-howto.html#delays-information-on-the-various-kernel-delay-sleep-mechanisms

WARNING:PREFER_FALLTHROUGH: Prefer 'fallthrough;' over fallthrough comment
#693: FILE: drivers/ide/hpt366.c:864:
+			/* fallthrough */

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#699: FILE: drivers/ide/hpt366.c:870:
+			printk("%s: %d bytes in FIFO\n", drive->name,

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#702: FILE: drivers/ide/hpt366.c:873:
+			udelay(10);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#706: FILE: drivers/ide/hpt366.c:877:
+			outb(dma_stat | 0x6, dma_base+2); /* clear errors */
 			                             ^

WARNING:PREFER_FALLTHROUGH: Prefer 'fallthrough;' over fallthrough comment
#707: FILE: drivers/ide/hpt366.c:878:
+			/* fallthrough */

ERROR:CODE_INDENT: code indent should use tabs where possible
#710: FILE: drivers/ide/hpt366.c:881:
+^I        case ide_dma_begin:$

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#713: FILE: drivers/ide/hpt366.c:884:
+			udelay(10);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#728: FILE: drivers/ide/hpt366.c:899:
+void hpt3xx_reset (ide_drive_t *drive)

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#730: FILE: drivers/ide/hpt366.c:901:
+#if 0

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#736: FILE: drivers/ide/hpt366.c:907:
+	pci_write_config_byte(HWIF(drive)->pci_dev, 0x59, reg59h|reset);
 	                                                        ^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#741: FILE: drivers/ide/hpt366.c:912:
+static int hpt3xx_tristate (ide_drive_t * drive, int state)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#741: FILE: drivers/ide/hpt366.c:912:
+static int hpt3xx_tristate (ide_drive_t * drive, int state)

CHECK:CAMELCASE: Avoid CamelCase: <regXXh>
#748: FILE: drivers/ide/hpt366.c:919:
+	byte regXXh		= 0;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:SPACING: No space is necessary after a cast
#759: FILE: drivers/ide/hpt366.c:930:
+		(void) ide_do_reset(drive);

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#760: FILE: drivers/ide/hpt366.c:931:
+		pci_write_config_byte(dev, state_reg, regXXh|0x80);
 		                                            ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#761: FILE: drivers/ide/hpt366.c:932:
+		pci_write_config_byte(dev, 0x59, reg59h|reset);
 		                                       ^

CHECK:SPACING: No space is necessary after a cast
#765: FILE: drivers/ide/hpt366.c:936:
+		(void) ide_do_reset(drive);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#779: FILE: drivers/ide/hpt366.c:950:
+static int hpt370_busproc(ide_drive_t * drive, int state)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#805: FILE: drivers/ide/hpt366.c:976:
+	 * make sure that the drive knows that it has failed if it's off */

CHECK:SPACING: No space is necessary after a cast
#859: FILE: drivers/ide/hpt366.c:1030:
+		dev->sysdata = (void *) thirty_three_base_hpt370;

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#860: FILE: drivers/ide/hpt366.c:1031:
+		printk("HPT370: using 33MHz PCI clock\n");

CHECK:SPACING: No space is necessary after a cast
#865: FILE: drivers/ide/hpt366.c:1036:
+		dev->sysdata = (void *) fifty_base_hpt370;

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#866: FILE: drivers/ide/hpt366.c:1037:
+		printk("HPT370: using 50MHz PCI clock\n");

CHECK:SPACING: No space is necessary after a cast
#869: FILE: drivers/ide/hpt366.c:1040:
+		dev->sysdata = (void *) sixty_six_base_hpt370;

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#870: FILE: drivers/ide/hpt366.c:1041:
+		printk("HPT370: using 66MHz PCI clock\n");

CHECK:SPACING: No space is necessary after a cast
#908: FILE: drivers/ide/hpt366.c:1079:
+				dev->sysdata = (void *) fifty_base_hpt370;

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#909: FILE: drivers/ide/hpt366.c:1080:
+				printk("HPT370: using 50MHz internal PLL\n");

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#924: FILE: drivers/ide/hpt366.c:1095:
+	udelay(100);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1017: FILE: drivers/ide/hpt366.c:1179:
+		hwif->serialized = hwif->mate->serialized = 1;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1023: FILE: drivers/ide/hpt366.c:1185:
+		 * drives on each channel */

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000483259.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 22 errors, 57 warnings, 17 checks, 998 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000483259.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
