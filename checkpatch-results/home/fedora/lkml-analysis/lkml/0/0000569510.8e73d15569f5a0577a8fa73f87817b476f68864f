WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#42: 
> * mmap now only limited to number of free pages in the system (busts vmalloc limits)

WARNING:PATCH_PREFIX: patch prefix 'include' exists, appears to be a -p0 patch

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct file *' should also have an identifier name
#70: FILE: linux/videodev.h:35:
+	int (*mmap_vma)(struct file *, struct vm_area_struct *, struct video_device *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct vm_area_struct *' should also have an identifier name
#70: FILE: linux/videodev.h:35:
+	int (*mmap_vma)(struct file *, struct vm_area_struct *, struct video_device *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct video_device *' should also have an identifier name
#70: FILE: linux/videodev.h:35:
+	int (*mmap_vma)(struct file *, struct vm_area_struct *, struct video_device *);

WARNING:PATCH_PREFIX: patch prefix 'drivers' exists, appears to be a -p0 patch

ERROR:TRAILING_WHITESPACE: trailing whitespace
#120: FILE: media/video/bttv-driver.c:159:
+ $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#120: FILE: media/video/bttv-driver.c:159:
+ $

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#142: FILE: media/video/bttv-driver.c:167:
+				pci_free_consistent (btv->dev, PAGE_SIZE,

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#174: FILE: media/video/bttv-driver.c:182:
+		printk(KERN_ERR "bttv%d: Double alloc of DMA pages!\n",	btv->nr);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#198: FILE: media/video/bttv-driver.c:190:
+	btv->page = kmalloc (sizeof(btv->page) * btv->n_pages, GFP_KERNEL);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#198: FILE: media/video/bttv-driver.c:190:
+	btv->page = kmalloc (sizeof(btv->page) * btv->n_pages, GFP_KERNEL);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#203: FILE: media/video/bttv-driver.c:195:
+	memset (btv->page, 0, sizeof(btv->page) * btv->n_pages);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#204: FILE: media/video/bttv-driver.c:196:
+^I^I$

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#206: FILE: media/video/bttv-driver.c:198:
+		btv->page[i].cpuaddr = pci_alloc_consistent (

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#206: FILE: media/video/bttv-driver.c:198:
+		btv->page[i].cpuaddr = pci_alloc_consistent (

ERROR:TRAILING_WHITESPACE: trailing whitespace
#212: FILE: media/video/bttv-driver.c:204:
+^I$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!btv->page"
#230: FILE: media/video/bttv-driver.c:1242:
+	if (btv->page == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:LINE_SPACING: Missing a blank line after declarations
#235: FILE: media/video/bttv-driver.c:1245:
+		int rc = alloc_dmabuffers(btv);
+		if (rc) return rc;

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#235: FILE: media/video/bttv-driver.c:1245:
+		if (rc) return rc;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

CHECK:SPACING: No space is necessary after a cast
#246: FILE: media/video/bttv-driver.c:1270:
+	vbuf = (unsigned int *) (btv->page[page].cpuaddr + page_ofs);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#278: FILE: media/video/bttv-driver.c:2140:
+static struct page * bttv_mm_nopage (struct vm_area_struct * vma,

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#278: FILE: media/video/bttv-driver.c:2140:
+static struct page * bttv_mm_nopage (struct vm_area_struct * vma,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#278: FILE: media/video/bttv-driver.c:2140:
+static struct page * bttv_mm_nopage (struct vm_area_struct * vma,

ERROR:CODE_INDENT: code indent should use tabs where possible
#285: FILE: media/video/bttv-driver.c:2147:
+        if (address > vma->vm_end) return NOPAGE_SIGBUS; /* Disallow mremap */$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#285: FILE: media/video/bttv-driver.c:2147:
+        if (address > vma->vm_end) return NOPAGE_SIGBUS; /* Disallow mremap */$

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#285: FILE: media/video/bttv-driver.c:2147:
+        if (address > vma->vm_end) return NOPAGE_SIGBUS; /* Disallow mremap */

ERROR:CODE_INDENT: code indent should use tabs where possible
#286: FILE: media/video/bttv-driver.c:2148:
+        if (!btv) return NOPAGE_OOM;^I/* Nothing allocated */$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#286: FILE: media/video/bttv-driver.c:2148:
+        if (!btv) return NOPAGE_OOM;^I/* Nothing allocated */$

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#286: FILE: media/video/bttv-driver.c:2148:
+        if (!btv) return NOPAGE_OOM;	/* Nothing allocated */

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#289: FILE: media/video/bttv-driver.c:2151:
+	if (pgoff > btv->n_pages) return NOPAGE_SIGBUS;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#291: FILE: media/video/bttv-driver.c:2153:
+	dmapage = virt_to_page (btv->page[pgoff].cpuaddr);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#292: FILE: media/video/bttv-driver.c:2154:
+	get_page (dmapage);

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#297: FILE: media/video/bttv-driver.c:2159:
+static int bttv_mm_swapout (struct page *page, struct file *filp)
                                                             ^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#297: FILE: media/video/bttv-driver.c:2159:
+static int bttv_mm_swapout (struct page *page, struct file *filp)

WARNING:CONST_STRUCT: struct vm_operations_struct should normally be const
#303: FILE: media/video/bttv-driver.c:2165:
+struct vm_operations_struct bttv_mm_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:INDENTED_LABEL: labels should not be indented
#304: FILE: media/video/bttv-driver.c:2166:
+	nopage:		bttv_mm_nopage,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#306: FILE: media/video/bttv-driver.c:2168:
+	swapout:	bttv_mm_swapout,
 	       ^

WARNING:INDENTED_LABEL: labels should not be indented
#306: FILE: media/video/bttv-driver.c:2168:
+	swapout:	bttv_mm_swapout,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#320: FILE: media/video/bttv-driver.c:2176:
+static int do_bttv_mmap (struct file *file, struct vm_area_struct *vma,

ERROR:CODE_INDENT: code indent should use tabs where possible
#378: FILE: media/video/bttv-driver.c:2214:
+        r=do_bttv_mmap(file, vma, btv);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#378: FILE: media/video/bttv-driver.c:2214:
+        r=do_bttv_mmap(file, vma, btv);$

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#378: FILE: media/video/bttv-driver.c:2214:
+        r=do_bttv_mmap(file, vma, btv);
          ^

WARNING:INDENTED_LABEL: labels should not be indented
#400: FILE: media/video/bttv-driver.c:2222:
+	name:		"UNSET",

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#401: FILE: media/video/bttv-driver.c:2223:
+	type:		VID_TYPE_TUNER|VID_TYPE_CAPTURE|
 	    ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#401: FILE: media/video/bttv-driver.c:2223:
+	type:		VID_TYPE_TUNER|VID_TYPE_CAPTURE|
 	     		              ^

CHECK:SPACING: space preferred before that '|' (ctx:VxE)
#401: FILE: media/video/bttv-driver.c:2223:
+	type:		VID_TYPE_TUNER|VID_TYPE_CAPTURE|
 	     		                               ^

WARNING:INDENTED_LABEL: labels should not be indented
#401: FILE: media/video/bttv-driver.c:2223:
+	type:		VID_TYPE_TUNER|VID_TYPE_CAPTURE|

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#402: FILE: media/video/bttv-driver.c:2224:
+			VID_TYPE_OVERLAY|VID_TYPE_TELETEXT,
 			                ^

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#403: FILE: media/video/bttv-driver.c:2225:
+	hardware:	VID_HARDWARE_BT848,
 	        ^

WARNING:INDENTED_LABEL: labels should not be indented
#403: FILE: media/video/bttv-driver.c:2225:
+	hardware:	VID_HARDWARE_BT848,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#404: FILE: media/video/bttv-driver.c:2226:
+	open:		bttv_open,
 	    ^

WARNING:INDENTED_LABEL: labels should not be indented
#404: FILE: media/video/bttv-driver.c:2226:
+	open:		bttv_open,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#405: FILE: media/video/bttv-driver.c:2227:
+	close:		bttv_close,
 	     ^

WARNING:INDENTED_LABEL: labels should not be indented
#405: FILE: media/video/bttv-driver.c:2227:
+	close:		bttv_close,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#406: FILE: media/video/bttv-driver.c:2228:
+	read:		bttv_read,
 	    ^

WARNING:INDENTED_LABEL: labels should not be indented
#406: FILE: media/video/bttv-driver.c:2228:
+	read:		bttv_read,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#407: FILE: media/video/bttv-driver.c:2229:
+	write:		bttv_write,
 	     ^

WARNING:INDENTED_LABEL: labels should not be indented
#407: FILE: media/video/bttv-driver.c:2229:
+	write:		bttv_write,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#408: FILE: media/video/bttv-driver.c:2230:
+	ioctl:		bttv_ioctl,
 	     ^

WARNING:INDENTED_LABEL: labels should not be indented
#408: FILE: media/video/bttv-driver.c:2230:
+	ioctl:		bttv_ioctl,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#409: FILE: media/video/bttv-driver.c:2231:
+	mmap_vma:	bttv_mmap_vma,
 	        ^

WARNING:INDENTED_LABEL: labels should not be indented
#409: FILE: media/video/bttv-driver.c:2231:
+	mmap_vma:	bttv_mmap_vma,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#410: FILE: media/video/bttv-driver.c:2232:
+	initialize:	bttv_init_done,
 	          ^

WARNING:INDENTED_LABEL: labels should not be indented
#410: FILE: media/video/bttv-driver.c:2232:
+	initialize:	bttv_init_done,

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#411: FILE: media/video/bttv-driver.c:2233:
+	minor:		-1,
 	     ^

WARNING:INDENTED_LABEL: labels should not be indented
#411: FILE: media/video/bttv-driver.c:2233:
+	minor:		-1,

WARNING:PATCH_PREFIX: patch prefix 'drivers' exists, appears to be a -p0 patch

CHECK:LINE_SPACING: Please don't use multiple blank lines
#436: FILE: media/video/bttv.h:254:
 
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#442: FILE: media/video/bttv.h:260:
+
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#451: FILE: media/video/bttv.h:322:
+^I$

WARNING:PATCH_PREFIX: patch prefix 'drivers' exists, appears to be a -p0 patch

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#470: FILE: media/video/videodev.c:231:
+		return vfl->mmap_vma (file, vma, vfl);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000569510.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 25 errors, 40 warnings, 8 checks, 375 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000569510.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
