CHECK:INVALID_UTF8: Invalid UTF-8, patch and commit message should be encoded in UTF-8
#54: FILE: Documentation/sonypi.txt:4:
+	Copyright (C) 2001-2002 Alcôve <www.alcove.com>
 	                           ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#90: FILE: Documentation/sonypi.txt:68:
+^Iverbose:^Iset to 1 to print unknown events received from the $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#92: FILE: Documentation/sonypi.txt:70:
+^I^I^Iset to 2 to print all events received from the $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#103: FILE: Documentation/sonypi.txt:79:
+^I^I^Ireported to the user. This parameter is required for some $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#104: FILE: Documentation/sonypi.txt:80:
+^I^I^IVaio models where the hardware reuses values used in $

CHECK:INVALID_UTF8: Invalid UTF-8, patch and commit message should be encoded in UTF-8
#135: FILE: include/linux/sonypi.h:6:
+ * Copyright (C) 2001-2002 Alcôve <www.alcove.com>
                               ^

CHECK:INVALID_UTF8: Invalid UTF-8, patch and commit message should be encoded in UTF-8
#160: FILE: drivers/char/sonypi.h:6:
+ * Copyright (C) 2001-2002 Alcôve <www.alcove.com>
                               ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#277: FILE: drivers/char/sonypi.h:255:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:POINTER_LOCATION: "foo *	bar" should be "foo *bar"
#309: FILE: drivers/char/sonypi.h:286:
+	struct sonypi_event *	events;

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'quiet' may be better as '(quiet)' to avoid precedence issues
#358: FILE: drivers/char/sonypi.h:342:
+#define wait_on_command(quiet, command, iterations) { \
+	unsigned int n = iterations; \
 	while (--n && (command)) \
 		udelay(1); \
 	if (!n && (verbose || !quiet)) \
 		printk(KERN_WARNING "sonypi command failed at %s : %s (line %d)\n", __FILE__, __FUNCTION__, __LINE__); \
 }

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#369: FILE: drivers/char/sonypi.h:353:
+static inline int ec_write(u8 addr, u8 value) {

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#380: FILE: drivers/char/sonypi.h:364:
+static inline int ec_read(u8 addr, u8 *value) {

CHECK:INVALID_UTF8: Invalid UTF-8, patch and commit message should be encoded in UTF-8
#403: FILE: drivers/char/sonypi.c:6:
+ * Copyright (C) 2001-2002 Alcôve <www.alcove.com>
                               ^

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#451: FILE: drivers/char/sonypi.c:119:
+static int ec_read16(u8 addr, u16 *value) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#453: FILE: drivers/char/sonypi.c:121:
+	u8 val_lb, val_hb;
+	if (ec_read(addr, &val_lb))

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#465: FILE: drivers/char/sonypi.c:152:
 static void __devinit sonypi_type2_srs(void) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#470: FILE: drivers/char/sonypi.c:154:
+		printk(KERN_WARNING "ec_write failed\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#472: FILE: drivers/char/sonypi.c:156:
+		printk(KERN_WARNING "ec_write failed\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#474: FILE: drivers/char/sonypi.c:158:
+		printk(KERN_WARNING "ec_write failed\n");

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#481: FILE: drivers/char/sonypi.c:175:
 static void __devexit sonypi_type2_dis(void) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#486: FILE: drivers/char/sonypi.c:177:
+		printk(KERN_WARNING "ec_write failed\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#488: FILE: drivers/char/sonypi.c:179:
+		printk(KERN_WARNING "ec_write failed\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#490: FILE: drivers/char/sonypi.c:181:
+		printk(KERN_WARNING "ec_write failed\n");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#613: FILE: drivers/char/sonypi.c:314:
+^I^Iprintk(KERN_INFO $

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#613: FILE: drivers/char/sonypi.c:314:
+		printk(KERN_INFO 

ERROR:SPACING: space prohibited after that '!' (ctx:BxW)
#621: FILE: drivers/char/sonypi.c:322:
+		if (! (mask & sonypi_eventtypes[i].mask))
 		    ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#757: FILE: drivers/char/sonypi.c:583:
+static int sonypi_pm_callback(struct pm_dev *dev, pm_request_t rqst, void *data) {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#790: FILE: drivers/char/sonypi.c:616:
+^I^I^Isonypi_call1(0x92); $

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#801: FILE: drivers/char/sonypi.c:627:
 static int __devinit sonypi_probe(struct pci_dev *pcidev) {

WARNING:SPLIT_STRING: quoted string split across lines
#809: FILE: drivers/char/sonypi.c:718:
 	       "verbose = %s, fnkeyinit = %s, camera = %s, "
+	       "compat = %s, mask = 0x%08lx\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#835: FILE: drivers/char/sonypi.c:747:
 static void __devexit sonypi_remove(void) {

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#836: FILE: drivers/char/sonypi.c:748:
 static void __devexit sonypi_remove(void) {
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000411533.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 12 errors, 13 warnings, 7 checks, 779 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000411533.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
