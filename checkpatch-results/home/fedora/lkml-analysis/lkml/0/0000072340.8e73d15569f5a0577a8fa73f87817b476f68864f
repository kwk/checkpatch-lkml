WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#88: FILE: fs/Kconfig:409:
+config INOTIFY_USER
+	bool "Inotify support for userspace"
+	depends on INOTIFY
+	default y
+	---help---
+	  Say Y here to enable inotify support for userspace, including the
+	  associated system calls.  Inotify allows monitoring of both files and
+	  directories via a single open fd.  Events are read from the file
+	  descriptor, which is also select()- and poll()-able.
+
+	  For more information, see Documentation/filesystems/inotify.txt
+
+	  If unsure, say Y.
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#173: FILE: fs/inotify.c:44:
+ * ^I^Iinotify_handle->mutex (protects inotify_handle and watches->h_list)$

WARNING:TYPO_SPELLING: 'reponsible' may be misspelled - perhaps 'responsible'?
#199: FILE: fs/inotify.c:63:
+ * is reponsible for the final put after receiving IN_IGNORED, or when using
       ^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#493: FILE: fs/inotify.c:119:
+		iput(watch->inode);
 		^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#519: FILE: fs/inotify.c:139:
+		ret = idr_get_new_above(&ih->idr, watch, ih->last_wd+1, &watch->wd);
 		                                                    ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: spaces required around that '=' (ctx:VxW)
#680: FILE: fs/inotify.c:291:
+			struct inotify_handle *ih= watch->ih;
 			                         ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#681: FILE: fs/inotify.c:292:
+			struct inotify_handle *ih= watch->ih;
+			mutex_lock(&ih->mutex);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: spaces required around that '=' (ctx:VxW)
#701: FILE: fs/inotify.c:407:
+			struct inotify_handle *ih= watch->ih;
 			                         ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#702: FILE: fs/inotify.c:408:
+			struct inotify_handle *ih= watch->ih;
+			mutex_lock(&ih->mutex);

WARNING:LINE_SPACING: Missing a blank line after declarations
#719: FILE: fs/inotify.c:433:
+		struct inotify_handle *ih = watch->ih;
+		mutex_lock(&ih->mutex);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*ih)...) over kmalloc(sizeof(struct inotify_handle)...)
#819: FILE: fs/inotify.c:451:
+	ih = kmalloc(sizeof(struct inotify_handle), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#1292: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1297: FILE: fs/inotify_user.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#1298: FILE: fs/inotify_user.c:2:
+ * fs/inotify_user.c - inotify support for userspace

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1347: FILE: fs/inotify_user.c:51:
+ * ^Iinode->inotify_mutex (protects inode's watch list)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1348: FILE: fs/inotify_user.c:52:
+ * ^I^Iinotify_handle->mutex (protects inotify_handle's watch list)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1349: FILE: fs/inotify_user.c:53:
+ * ^I^I^Iinotify_dev->ev_mutex (protects device's event queue)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1370: FILE: fs/inotify_user.c:74:
+^Iwait_queue_head_t ^Iwq;^I^I/* wait queue for i/o */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1373: FILE: fs/inotify_user.c:77:
+^Istruct list_head ^Ievents;^I^I/* list of queued events */$

WARNING:DUPLICATED_SYSCTL_CONST: duplicated sysctl range checking value 'zero', consider using the shared one in include/linux/sysctl.h
#1420: FILE: fs/inotify_user.c:124:
+		.extra1		= &zero,

Commit d91bff3011cf ("proc/sysctl: add shared variables for range
check") added some shared const variables to be used instead of a local
copy in each source file.

Consider replacing the sysctl range checking value with the shared
one in include/linux/sysctl.h.  The following conversion scheme may
be used::

  &zero     ->  SYSCTL_ZERO
  &one      ->  SYSCTL_ONE
  &int_max  ->  SYSCTL_INT_MAX

See:

  1. https://lore.kernel.org/lkml/20190430180111.10688-1-mcroce@redhat.com/
  2. https://lore.kernel.org/lkml/20190531131422.14970-1-mcroce@redhat.com/

WARNING:DUPLICATED_SYSCTL_CONST: duplicated sysctl range checking value 'zero', consider using the shared one in include/linux/sysctl.h
#1430: FILE: fs/inotify_user.c:134:
+		.extra1		= &zero,

WARNING:DUPLICATED_SYSCTL_CONST: duplicated sysctl range checking value 'zero', consider using the shared one in include/linux/sysctl.h
#1440: FILE: fs/inotify_user.c:144:
+		.extra1		= &zero

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1481: FILE: fs/inotify_user.c:185:
+static struct inotify_kernel_event * kernel_event(s32 wd, u32 mask, u32 cookie,

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1572: FILE: fs/inotify_user.c:276:
+	if (last && last->event.mask == mask && last->event.wd == wd &&
+			last->event.cookie == cookie) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#1630: FILE: fs/inotify_user.c:334:
+		struct inotify_kernel_event *kevent;
+		kevent = inotify_dev_get_event(dev);

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1636: FILE: fs/inotify_user.c:340:
+ * find_inode - resolve a user-given path to a specific inode and return a nd
                                                                            ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1638: FILE: fs/inotify_user.c:342:
+static int find_inode(const char __user *dirname, struct nameidata *nd,
                                                                     ^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1639: FILE: fs/inotify_user.c:343:
+		      unsigned flags)

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1643: FILE: fs/inotify_user.c:347:
+	error = __user_walk(dirname, flags, nd);
 	                                    ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1647: FILE: fs/inotify_user.c:351:
+	error = vfs_permission(nd, MAY_READ);
 	                       ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1649: FILE: fs/inotify_user.c:353:
+		path_release(nd);
 		             ^^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1704: FILE: fs/inotify_user.c:408:
+	size_t event_size = sizeof (struct inotify_event);

ERROR:SPACING: space required before the open brace '{'
#1763: FILE: fs/inotify_user.c:467:
+			if (copy_to_user(buf, kevent->name, kevent->event.len)){

CHECK:SPACING: No space is necessary after a cast
#1804: FILE: fs/inotify_user.c:508:
+	p = (void __user *) arg;

CHECK:SPACING: No space is necessary after a cast
#1808: FILE: fs/inotify_user.c:512:
+		ret = put_user(dev->queue_size, (int __user *) p);

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1833: FILE: fs/inotify_user.c:537:
+	struct file *filp;
 	             ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1840: FILE: fs/inotify_user.c:544:
+	filp = get_empty_filp();
 	^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1841: FILE: fs/inotify_user.c:545:
+	if (!filp) {
 	     ^^^^

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*dev)...) over kmalloc(sizeof(struct inotify_device)...)
#1853: FILE: fs/inotify_user.c:557:
+	dev = kmalloc(sizeof(struct inotify_device), GFP_KERNEL);

WARNING:LIKELY_MISUSE: nested (un)?likely() calls, IS_ERR already uses unlikely() internally
#1860: FILE: fs/inotify_user.c:564:
+	if (unlikely(IS_ERR(ih))) {

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1886: FILE: fs/inotify_user.c:590:
+	fd_install(fd, filp);
 	               ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1893: FILE: fs/inotify_user.c:597:
+	put_filp(filp);
 	         ^^^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1903: FILE: fs/inotify_user.c:607:
+	struct nameidata nd;
 	                 ^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1904: FILE: fs/inotify_user.c:608:
+	struct file *filp;
 	             ^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1906: FILE: fs/inotify_user.c:610:
+	unsigned flags = 0;

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1908: FILE: fs/inotify_user.c:612:
+	filp = fget_light(fd, &fput_needed);
 	^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1909: FILE: fs/inotify_user.c:613:
+	if (unlikely(!filp))
 	              ^^^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1923: FILE: fs/inotify_user.c:627:
+	ret = find_inode(path, &nd, flags);
 	                        ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1927: FILE: fs/inotify_user.c:631:
+	/* inode held in place by reference to nd; dev by fget on fd */
 	                                       ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1928: FILE: fs/inotify_user.c:632:
+	inode = nd.dentry->d_inode;
 	        ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1937: FILE: fs/inotify_user.c:641:
+	path_release(&nd);
 	              ^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1939: FILE: fs/inotify_user.c:643:
+	fput_light(filp, fput_needed);
 	           ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1945: FILE: fs/inotify_user.c:649:
+	struct file *filp;
 	             ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1949: FILE: fs/inotify_user.c:653:
+	filp = fget_light(fd, &fput_needed);
 	^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1950: FILE: fs/inotify_user.c:654:
+	if (unlikely(!filp))
 	              ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1965: FILE: fs/inotify_user.c:669:
+	fput_light(filp, fput_needed);
 	           ^^^^

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1973: FILE: fs/inotify_user.c:677:
+    return get_sb_pseudo(fs_type, "inotify", NULL, 0xBAD1DEA);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1977: FILE: fs/inotify_user.c:681:
+    .name           = "inotifyfs",$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1978: FILE: fs/inotify_user.c:682:
+    .get_sb         = inotify_get_sb,$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1979: FILE: fs/inotify_user.c:683:
+    .kill_sb        = kill_anon_super,$

WARNING:TYPO_SPELLING: 'cannnot' may be misspelled - perhaps 'cannot'?
#1983: FILE: fs/inotify_user.c:687:
+ * inotify_user_setup - Our initialization function.  Note that we cannnot return
                                                                    ^^^^^^^

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_watch *' should also have an identifier name
#2044: FILE: include/linux/inotify.h:93:
+	void (*handle_event)(struct inotify_watch *, u32, u32, u32,

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'u32' should also have an identifier name
#2044: FILE: include/linux/inotify.h:93:
+	void (*handle_event)(struct inotify_watch *, u32, u32, u32,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'u32' should also have an identifier name
#2044: FILE: include/linux/inotify.h:93:
+	void (*handle_event)(struct inotify_watch *, u32, u32, u32,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'u32' should also have an identifier name
#2044: FILE: include/linux/inotify.h:93:
+	void (*handle_event)(struct inotify_watch *, u32, u32, u32,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'const char *' should also have an identifier name
#2044: FILE: include/linux/inotify.h:93:
+	void (*handle_event)(struct inotify_watch *, u32, u32, u32,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_watch *' should also have an identifier name
#2046: FILE: include/linux/inotify.h:95:
+	void (*destroy_watch)(struct inotify_watch *);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2062: FILE: include/linux/inotify.h:114:
+extern struct inotify_handle *inotify_init(const struct inotify_operations *);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'const struct inotify_operations *' should also have an identifier name
#2062: FILE: include/linux/inotify.h:114:
+extern struct inotify_handle *inotify_init(const struct inotify_operations *);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2063: FILE: include/linux/inotify.h:115:
+extern void inotify_destroy(struct inotify_handle *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_handle *' should also have an identifier name
#2063: FILE: include/linux/inotify.h:115:
+extern void inotify_destroy(struct inotify_handle *);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2064: FILE: include/linux/inotify.h:116:
+extern __s32 inotify_find_update_watch(struct inotify_handle *, struct inode *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_handle *' should also have an identifier name
#2064: FILE: include/linux/inotify.h:116:
+extern __s32 inotify_find_update_watch(struct inotify_handle *, struct inode *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inode *' should also have an identifier name
#2064: FILE: include/linux/inotify.h:116:
+extern __s32 inotify_find_update_watch(struct inotify_handle *, struct inode *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'u32' should also have an identifier name
#2064: FILE: include/linux/inotify.h:116:
+extern __s32 inotify_find_update_watch(struct inotify_handle *, struct inode *,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2066: FILE: include/linux/inotify.h:118:
+extern __s32 inotify_add_watch(struct inotify_handle *, struct inotify_watch *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_handle *' should also have an identifier name
#2066: FILE: include/linux/inotify.h:118:
+extern __s32 inotify_add_watch(struct inotify_handle *, struct inotify_watch *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_watch *' should also have an identifier name
#2066: FILE: include/linux/inotify.h:118:
+extern __s32 inotify_add_watch(struct inotify_handle *, struct inotify_watch *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inode *' should also have an identifier name
#2066: FILE: include/linux/inotify.h:118:
+extern __s32 inotify_add_watch(struct inotify_handle *, struct inotify_watch *,

WARNING:FUNCTION_ARGUMENTS: function definition argument '__u32' should also have an identifier name
#2066: FILE: include/linux/inotify.h:118:
+extern __s32 inotify_add_watch(struct inotify_handle *, struct inotify_watch *,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2068: FILE: include/linux/inotify.h:120:
+extern int inotify_rm_wd(struct inotify_handle *, __u32);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_handle *' should also have an identifier name
#2068: FILE: include/linux/inotify.h:120:
+extern int inotify_rm_wd(struct inotify_handle *, __u32);

WARNING:FUNCTION_ARGUMENTS: function definition argument '__u32' should also have an identifier name
#2068: FILE: include/linux/inotify.h:120:
+extern int inotify_rm_wd(struct inotify_handle *, __u32);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2069: FILE: include/linux/inotify.h:121:
+extern void get_inotify_watch(struct inotify_watch *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_watch *' should also have an identifier name
#2069: FILE: include/linux/inotify.h:121:
+extern void get_inotify_watch(struct inotify_watch *);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2070: FILE: include/linux/inotify.h:122:
+extern void put_inotify_watch(struct inotify_watch *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inotify_watch *' should also have an identifier name
#2070: FILE: include/linux/inotify.h:122:
+extern void put_inotify_watch(struct inotify_watch *);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000072340.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 4 errors, 70 warnings, 13 checks, 2050 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000072340.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
