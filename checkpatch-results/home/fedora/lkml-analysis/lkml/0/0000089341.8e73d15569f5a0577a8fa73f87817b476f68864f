WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#40: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:LINE_SPACING: Missing a blank line after declarations
#88: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:49:
+	static char iname[16];
+	snprintf(iname, sizeof iname, "infinipath%u", unit);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SIZEOF_PARENTHESIS: sizeof iname should be sizeof(iname)
#88: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:49:
+	snprintf(iname, sizeof iname, "infinipath%u", unit);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#92: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:53:
+EXPORT_SYMBOL_GPL(ipath_get_unit_name);

EXPORT_SYMBOL should immediately follow the symbol to be exported.

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#109: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:70:
+unsigned ipath_debug = __IPATH_INFO;

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IWUSR | S_IRUGO' are not preferred. Consider using octal permissions '0644'.
#111: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:72:
+module_param_named(debug, ipath_debug, uint, S_IWUSR | S_IRUGO);

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#148: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:109:
+static void __devexit ipath_remove_one(struct pci_dev *);

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#149: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:110:
+static int __devinit ipath_init_one(struct pci_dev *,

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#178: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:139:
+volatile __le64 *ipath_port0_rcvhdrtail;

WARNING:SPLIT_STRING: quoted string split across lines
#190: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:151:
+		ipath_dev_err(dd, "failed to read bar0 before enable: "
+			      "error %d\n", -ret);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#195: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:156:
+		ipath_dev_err(dd, "failed to read bar1 before enable: "
+			      "error %d\n", -ret);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#243: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:204:
+		printk(KERN_ERR IPATH_DRV_NAME

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#286: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:247:
+	nunits = npresent = nup = maxports = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:SPACING: No space is necessary after a cast
#347: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:308:
+				  (void *) ipath_port0_rcvhdrtail,

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __weak over __attribute__((weak))
#361: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:322:
+int __attribute__((weak)) ipath_enable_wc(struct ipath_devdata *dd)

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __weak over __attribute__((weak))
#366: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:327:
+void __attribute__((weak)) ipath_disable_wc(struct ipath_devdata *dd)

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#370: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:331:
+static int __devinit ipath_init_one(struct pci_dev *pdev,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#381: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:342:
+		printk(KERN_ERR IPATH_DRV_NAME

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#390: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:351:
+		printk(KERN_ERR IPATH_DRV_NAME

WARNING:SPLIT_STRING: quoted string split across lines
#420: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:381:
+	ipath_cdbg(VERBOSE, "regbase (0) %llx len %d irq %x, vend %x/%x "
+		   "driver_data %lx\n", addr, len, pdev->irq, ent->vendor,

WARNING:SPLIT_STRING: quoted string split across lines
#428: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:389:
+			dev_info(&pdev->dev, "BAR is 0 (probable RESET), "
+				 "rewriting as %llx\n", addr);

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#429: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:390:
+			ret = pci_write_config_dword(

WARNING:SPLIT_STRING: quoted string split across lines
#433: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:394:
+				ipath_dev_err(dd, "rewrite of BAR0 "
+					      "failed: err %d\n", -ret);

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#436: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:397:
+			ret = pci_write_config_dword(

WARNING:SPLIT_STRING: quoted string split across lines
#440: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:401:
+				ipath_dev_err(dd, "rewrite of BAR1 "
+					      "failed: err %d\n", -ret);

WARNING:SPLIT_STRING: quoted string split across lines
#445: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:406:
+			ipath_dev_err(dd, "BAR is 0 (probable RESET), "
+				      "not usable until reboot\n");

WARNING:SPLIT_STRING: quoted string split across lines
#454: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:415:
+		dev_info(&pdev->dev, "pci_request_regions unit %u fails: "
+			 "err %d\n", dd->ipath_unit, -ret);

WARNING:SPLIT_STRING: quoted string split across lines
#461: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:422:
+		dev_info(&pdev->dev, "pci_set_dma_mask unit %u "
+			 "fails: %d\n", dd->ipath_unit, ret);

WARNING:SPLIT_STRING: quoted string split across lines
#486: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:447:
+		ipath_dev_err(dd, "Found unknown PathScale deviceid 0x%x, "
+			      "failing\n", ent->device);

WARNING:SPLIT_STRING: quoted string split across lines
#511: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:472:
+		ipath_dev_err(dd, "Failed to read PCI revision ID unit "
+			      "%u: err %d\n", dd->ipath_unit, -ret);

CHECK:SPACING: No space is necessary after a cast
#528: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:489:
+	dd->ipath_kregvirt = (u64 __iomem *) phys_to_virt(addr);

WARNING:SPLIT_STRING: quoted string split across lines
#530: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:491:
+	ipath_cdbg(VERBOSE, "mapped io addr %llx to kregbase %p "
+		   "kregvirt %p\n", addr, dd->ipath_kregbase,

WARNING:SPLIT_STRING: quoted string split across lines
#551: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:512:
+		ipath_dev_err(dd, "irq is 0, BIOS error?  Interrupts won't "
+			      "work\n");

CHECK:BRACES: Unbalanced braces around else statement
#552: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:513:
+	else {

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SPLIT_STRING: quoted string split across lines
#557: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:518:
+			ipath_dev_err(dd, "Couldn't setup irq handler, "
+				      "irq=%u: %d\n", pdev->irq, ret);

WARNING:SPLIT_STRING: quoted string split across lines
#570: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:531:
+		ipath_dev_err(dd, "Write combining not enabled "
+			      "(err %d): performance may be poor\n",

CHECK:SPACING: No space is necessary after a cast
#583: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:544:
+	iounmap((volatile void __iomem *) dd->ipath_kregbase);

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#583: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:544:
+	iounmap((volatile void __iomem *) dd->ipath_kregbase);

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#601: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:562:
+static void __devexit ipath_remove_one(struct pci_dev *pdev)

CHECK:SPACING: No space is necessary after a cast
#615: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:576:
+		   "unit %u\n", dd, (u32) dd->ipath_unit);

WARNING:SPLIT_STRING: quoted string split across lines
#615: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:576:
+	ipath_cdbg(VERBOSE, "Releasing pci memory regions, dd %p, "
+		   "unit %u\n", dd, (u32) dd->ipath_unit);

CHECK:SPACING: No space is necessary after a cast
#619: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:580:
+		iounmap((volatile void __iomem *) dd->ipath_kregbase);

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#619: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:580:
+		iounmap((volatile void __iomem *) dd->ipath_kregbase);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#646: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:607:
+void ipath_disarm_piobufs(struct ipath_devdata *dd, unsigned first,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#647: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:608:
+			  unsigned cnt)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#649: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:610:
+	unsigned i, last = first + cnt;

WARNING:LINE_SPACING: Missing a blank line after declarations
#699: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:660:
+		u64 val;
+		ipath_cdbg(SMA, "Didn't reach linkstate %s within %u ms\n",

CHECK:SPACING: No space is necessary after a cast
#707: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:668:
+			   (unsigned long long) ipath_read_kreg64(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#707: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:668:
+			   (unsigned long long) ipath_read_kreg64(

CHECK:SPACING: No space is necessary after a cast
#709: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:670:
+			   (unsigned long long) val,

CHECK:BRACES: braces {} should be used on all arms of this statement
#857: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:818:
+	if (dd->ipath_flags & IPATH_4BYTE_TID) {
[...]
+	else
[...]

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#864: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:825:
+	}
+	else

`else {` should follow the closing block `}` on the same line.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: braces {} should be used on all arms of this statement
#872: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:833:
+	if (dd->ipath_flags & IPATH_4BYTE_TID) {
[...]
+	} else
[...]

WARNING:LINE_SPACING: Missing a blank line after declarations
#874: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:835:
+		u32 una = ((1 << 11) - 1) & (unsigned long)(skb->data + 4);
+		if (una)

CHECK:BRACES: Unbalanced braces around else statement
#878: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:839:
+	} else

CHECK:BRACES: braces {} should be used on all arms of this statement
#901: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:862:
+	if (dd->ipath_port0_skbs && hdr->sub_opcode == OPCODE_ENCAP) {
[...]
+	else if (hdr->sub_opcode == OPCODE_LID_ARP)
[...]

CHECK:SPACING: No space is necessary after a cast
#913: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:874:
+		bthbytes = (u8 *) hdr->bth;

CHECK:SPACING: No space is necessary after a cast
#923: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:884:
+				    ((char __iomem *) dd->ipath_kregbase

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#932: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:893:
+	}
+	else if (hdr->sub_opcode == OPCODE_LID_ARP)

CHECK:SPACING: No space is necessary after a cast
#980: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:941:
+		rc = (u64 *) (dd->ipath_pd[0]->port_rcvhdrq + (l << 2));

CHECK:SPACING: No space is necessary after a cast
#987: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:948:
+		bthbytes = (u8 *) hdr->bth;

CHECK:SPACING: No space is necessary after a cast
#989: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:950:
+		eflags = ips_get_hdr_err_flags((__le32 *) rc);

CHECK:SPACING: No space is necessary after a cast
#990: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:951:
+		etype = ips_get_rcv_type((__le32 *) rc);

CHECK:SPACING: No space is necessary after a cast
#992: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:953:
+		tlen = ips_get_length_in_bytes((__le32 *) rc);

CHECK:SPACING: No space is necessary after a cast
#1002: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:963:
+			etail = ips_get_index((__le32 *) rc);

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1014: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:975:
+		    RCVHQ_RCV_TYPE_ERROR && ips_get_ipath_ver(

WARNING:SPLIT_STRING: quoted string split across lines
#1018: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:979:
+			ipath_cdbg(PKT, "Bad InfiniPath protocol version "
+				   "%x\n", etype);

WARNING:SIZEOF_PARENTHESIS: sizeof emsg should be sizeof(emsg)
#1023: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:984:
+			get_rhf_errstring(eflags, emsg, sizeof emsg);

WARNING:SPLIT_STRING: quoted string split across lines
#1025: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:986:
+			ipath_cdbg(PKT, "RHFerrs %x hdrqtail=%x typ=%u "
+				   "tlen=%x opcode=%x egridx=%x: %s\n",

CHECK:SPACING: No space is necessary after a cast
#1027: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:988:
+				   ips_get_index((__le32 *) rc), emsg);

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 32)
#1028: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:989:
+		} else if (etype == RCVHQ_RCV_TYPE_NON_KD) {
+				int ret = __ipath_verbs_rcv(dd, rc + 1,

WARNING:SPLIT_STRING: quoted string split across lines
#1034: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:995:
+						   "received IB packet, "
+						   "not SMA (QP=%x)\n", qp);

WARNING:SPLIT_STRING: quoted string split across lines
#1043: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1004:
+				ipath_cdbg(PKT, "typ %x, opcode %x (eager, "
+					   "qp=%x), len %x; ignored\n",

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#1046: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1007:
+		}
+		else if (etype == RCVHQ_RCV_TYPE_EXPECTED)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1057: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1018:
+			u8 opcode;
+			if (ebuf) {

CHECK:BRACES: braces {} should be used on all arms of this statement
#1057: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1018:
+			if (ebuf) {
[...]
+			else
[...]

CHECK:SPACING: No space is necessary after a cast
#1058: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1019:
+				bthbytes = (u8 *) ebuf;

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#1061: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1022:
+			}
+			else

WARNING:SIZEOF_PARENTHESIS: sizeof emsg should be sizeof(emsg)
#1063: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1024:
+			get_rhf_errstring(eflags, emsg, sizeof emsg);

WARNING:SPLIT_STRING: quoted string split across lines
#1065: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1026:
+			ipath_dbg("Err %x (%s), opcode %x, egrbuf %x, "
+				  "len %x\n", eflags, emsg, opcode, etail,

WARNING:SPLIT_STRING: quoted string split across lines
#1074: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1035:
+			ipath_dbg("Error Pkt, but no eflags! egrbuf %x, "
+				  "len %x\nhdrq@%lx;hdrq+%x rhf: %llx; "

CHECK:SPACING: No space is necessary after a cast
#1076: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1037:
+				  etail, tlen, (unsigned long) rc, l,

CHECK:SPACING: No space is necessary after a cast
#1077: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1038:
+				  (unsigned long long) rc[0],

CHECK:SPACING: No space is necessary after a cast
#1078: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1039:
+				  (unsigned long long) rc[1],

CHECK:SPACING: No space is necessary after a cast
#1079: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1040:
+				  (unsigned long long) rc[2],

CHECK:SPACING: No space is necessary after a cast
#1080: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1041:
+				  (unsigned long long) rc[3],

CHECK:SPACING: No space is necessary after a cast
#1081: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1042:
+				  (unsigned long long) rc[4],

CHECK:SPACING: No space is necessary after a cast
#1082: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1043:
+				  (unsigned long long) rc[5]);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1132: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1093:
+	const unsigned piobregs = (unsigned)dd->ipath_pioavregs;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1132: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1093:
+	const unsigned piobregs = (unsigned)dd->ipath_pioavregs;

WARNING:TYPO_SPELLING: 'atomicly' may be misspelled - perhaps 'atomically'?
#1140: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1101:
+	 * We would like to do this atomicly, to avoid spinlocks in the
 	                            ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#1158: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1119:
+		volatile __le64 *dma = dd->ipath_pioavailregs_dma;

WARNING:SPLIT_STRING: quoted string split across lines
#1162: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1123:
+		ipath_cdbg(PKT, "Refill avail, dma0=%llx shad0=%lx, "
+			   "d1=%llx s1=%lx, d2=%llx s2=%lx, d3=%llx "

WARNING:SPLIT_STRING: quoted string split across lines
#1163: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1124:
+			   "d1=%llx s1=%lx, d2=%llx s2=%lx, d3=%llx "
+			   "s3=%lx\n",

CHECK:SPACING: No space is necessary after a cast
#1164: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1125:
+			   (unsigned long long) le64_to_cpu(dma[0]),

CHECK:SPACING: No space is necessary after a cast
#1166: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1127:
+			   (unsigned long long) le64_to_cpu(dma[1]),

CHECK:SPACING: No space is necessary after a cast
#1168: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1129:
+			   (unsigned long long) le64_to_cpu(dma[2]),

CHECK:SPACING: No space is necessary after a cast
#1170: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1131:
+			   (unsigned long long) le64_to_cpu(dma[3]),

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1173: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1134:
+			ipath_cdbg(

WARNING:SPLIT_STRING: quoted string split across lines
#1175: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1136:
+				PKT, "2nd group, dma4=%llx shad4=%lx, "
+				"d5=%llx s5=%lx, d6=%llx s6=%lx, "

WARNING:SPLIT_STRING: quoted string split across lines
#1176: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1137:
+				"d5=%llx s5=%lx, d6=%llx s6=%lx, "
+				"d7=%llx s7=%lx\n",

CHECK:SPACING: No space is necessary after a cast
#1177: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1138:
+				(unsigned long long) le64_to_cpu(dma[4]),

CHECK:SPACING: No space is necessary after a cast
#1179: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1140:
+				(unsigned long long) le64_to_cpu(dma[5]),

CHECK:SPACING: No space is necessary after a cast
#1181: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1142:
+				(unsigned long long) le64_to_cpu(dma[6]),

CHECK:SPACING: No space is necessary after a cast
#1183: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1144:
+				(unsigned long long) le64_to_cpu(dma[7]),

CHECK:BRACES: braces {} should be used on all arms of this statement
#1192: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1153:
+		if (i > 3) {
[...]
+		} else
[...]

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1194: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1155:
+				piov = le64_to_cpu(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1197: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1158:
+				piov = le64_to_cpu(

CHECK:BRACES: Unbalanced braces around else statement
#1199: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1160:
+		} else

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1220: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1181:
+int ipath_setrcvhdrsize(struct ipath_devdata *dd, unsigned rhdrsize)

WARNING:SPLIT_STRING: quoted string split across lines
#1228: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1189:
+				 "Error: can't set protocol header "
+				 "size %u, already %u\n",

CHECK:BRACES: Unbalanced braces around else statement
#1231: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1192:
+		} else

WARNING:SPLIT_STRING: quoted string split across lines
#1233: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1194:
+			ipath_cdbg(VERBOSE, "Reuse same protocol header "
+				   "size %u\n", dd->ipath_rcvhdrsize);

WARNING:SPLIT_STRING: quoted string split across lines
#1237: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1198:
+		ipath_dbg("Error: can't set protocol header size %u "
+			  "(> max %u)\n", rhdrsize,

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1261: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1222:
+u32 __iomem *ipath_getpiobuf(struct ipath_devdata *dd, u32 * pbufnum)

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1264: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1225:
+	unsigned piobcnt, iter;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1269: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1230:
+	piobcnt = (unsigned)(dd->ipath_piobcnt2k

CHECK:BRACES: braces {} should be used on all arms of this statement
#1273: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1234:
+	if (dd->ipath_upd_pio_shadow) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1283: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1244:
+	} else

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#1311: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1272:
+		volatile __le64 *dma = dd->ipath_pioavailregs_dma;

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1330: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1291:
+			ipath_dbg(

WARNING:SPLIT_STRING: quoted string split across lines
#1332: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1293:
+				"%u pio sends with no bufavail; dmacopy: "
+				"%llx %llx %llx %llx; shadow:  "

WARNING:SPLIT_STRING: quoted string split across lines
#1333: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1294:
+				"%llx %llx %llx %llx; shadow:  "
+				"%lx %lx %lx %lx\n",

CHECK:SPACING: No space is necessary after a cast
#1335: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1296:
+				(unsigned long long) le64_to_cpu(dma[0]),

CHECK:SPACING: No space is necessary after a cast
#1336: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1297:
+				(unsigned long long) le64_to_cpu(dma[1]),

CHECK:SPACING: No space is necessary after a cast
#1337: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1298:
+				(unsigned long long) le64_to_cpu(dma[2]),

CHECK:SPACING: No space is necessary after a cast
#1338: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1299:
+				(unsigned long long) le64_to_cpu(dma[3]),

WARNING:SPLIT_STRING: quoted string split across lines
#1348: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1309:
+				ipath_dbg("2nd group: dmacopy: %llx %llx "
+					  "%llx %llx; shadow: %lx %lx "

WARNING:SPLIT_STRING: quoted string split across lines
#1349: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1310:
+					  "%llx %llx; shadow: %lx %lx "
+					  "%lx %lx\n",

CHECK:SPACING: No space is necessary after a cast
#1382: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1343:
+		buf = (u32 __iomem *) (dd->ipath_pio2kbase +

WARNING:TYPO_SPELLING: 'inbetween' may be misspelled - perhaps 'between'?
#1416: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1377:
+		 * "forever".  There isn't an inbetween, unfortunately.  We
 		                              ^^^^^^^^^

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1423: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1384:
+		pd->port_rcvhdrq = dma_alloc_coherent(

WARNING:SPLIT_STRING: quoted string split across lines
#1429: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1390:
+			ipath_dev_err(dd, "attempt to allocate %d bytes "
+				      "for port %u rcvhdrq failed\n",

WARNING:SPLIT_STRING: quoted string split across lines
#1438: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1399:
+		ipath_cdbg(VERBOSE, "%d pages at %p (phys %lx) size=%lu "
+			   "for port %u rcvhdr Q\n",

CHECK:SPACING: No space is necessary after a cast
#1440: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1401:
+			   (unsigned long) pd->port_rcvhdrq_phys,

CHECK:SPACING: No space is necessary after a cast
#1441: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1402:
+			   (unsigned long) pd->port_rcvhdrq_size,

CHECK:SPACING: No space is necessary after a cast
#1456: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1417:
+		   pd->port_port, (unsigned long) pd->port_rcvhdrq_phys);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1466: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1427:
+			   u64 bits_to_wait_for, u64 * valp)

WARNING:SPLIT_STRING: quoted string split across lines
#1485: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1446:
+			ipath_cdbg(VERBOSE, "Changed from %llx to %llx, "
+				   "waiting for %llx bits\n",

CHECK:SPACING: No space is necessary after a cast
#1486: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1447:
+				   (unsigned long long) lastval,

CHECK:SPACING: No space is necessary after a cast
#1487: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1448:
+				   (unsigned long long) val,

CHECK:SPACING: No space is necessary after a cast
#1488: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1449:
+				   (unsigned long long) bits_to_wait_for);

WARNING:SPLIT_STRING: quoted string split across lines
#1492: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1453:
+			ipath_dbg("Didn't get bits %llx in register 0x%x, "
+				  "got %llx\n",

CHECK:SPACING: No space is necessary after a cast
#1493: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1454:
+				  (unsigned long long) bits_to_wait_for,

CHECK:SPACING: No space is necessary after a cast
#1494: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1455:
+				  reg_id, (unsigned long long) *valp);

CHECK:SPACING: No space is necessary after a cast
#1527: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1488:
+				  (unsigned long long) val);

WARNING:SPLIT_STRING: quoted string split across lines
#1545: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1506:
+	ipath_cdbg(SMA, "Trying to move unit %u to %s, current ltstate "
+		   "is %s\n", dd->ipath_unit,

CHECK:OPEN_ENDED_LINE: Lines should not end with a '['
#1548: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1509:
+		   ipath_ibcstatus_str[

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1568: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1529:
+			   unsigned port)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1593: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1554:
+void ipath_write_kreg_port(const struct ipath_devdata *dd, ipath_kreg regno,
+			  unsigned port, u64 value)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1593: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1554:
+			  unsigned port, u64 value)

WARNING:TYPO_SPELLING: 'explictly' may be misspelled - perhaps 'explicitly'?
#1676: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1637:
+	 * Turn the LEDs off explictly for the same reason.
 	                     ^^^^^^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#1724: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1685:
+		ipath_cdbg(VERBOSE, "free closed port %d rcvhdrq @ %p "
+			   "(size=%lu)\n", pd->port_port, pd->port_rcvhdrq,

CHECK:SPACING: No space is necessary after a cast
#1725: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1686:
+			   (unsigned long) pd->port_rcvhdrq_size);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1733: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1694:
+			unsigned e;

WARNING:SPLIT_STRING: quoted string split across lines
#1740: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1701:
+				ipath_cdbg(VERBOSE, "egrbuf free(%p, %lu), "
+					   "chunk %u/%u\n", base,

CHECK:SPACING: No space is necessary after a cast
#1741: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1702:
+					   (unsigned long) size,

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1743: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1704:
+				dma_free_coherent(

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1754: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1715:
+		unsigned e;

WARNING:SPLIT_STRING: quoted string split across lines
#1759: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1720:
+		ipath_cdbg(VERBOSE, "free closed port %d ipath_port0_skbs "
+			   "@ %p\n", pd->port_port, skbs);

WARNING:UNNECESSARY_KERN_LEVEL: Possible unnecessary KERN_INFO
#1775: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1736:
+	ipath_dbg(KERN_INFO DRIVER_LOAD_MSG "%s", ipath_core_version);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1789: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1750:
+		printk(KERN_ERR IPATH_DRV_NAME

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1796: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1757:
+		printk(KERN_ERR IPATH_DRV_NAME ": Unable to create driver "

WARNING:SPLIT_STRING: quoted string split across lines
#1797: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1758:
+		printk(KERN_ERR IPATH_DRV_NAME ": Unable to create driver "
+		       "sysfs entries: error %d\n", -ret);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1803: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1764:
+		printk(KERN_ERR IPATH_DRV_NAME ": Unable to create "

WARNING:SPLIT_STRING: quoted string split across lines
#1804: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1765:
+		printk(KERN_ERR IPATH_DRV_NAME ": Unable to create "
+		       "ipathfs: error %d\n", -ret);

CHECK:SPACING: No space is necessary after a cast
#1850: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1811:
+				  (void *) dd->ipath_pioavailregs_dma,

WARNING:SPLIT_STRING: quoted string split across lines
#1860: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1821:
+		ipath_cdbg(VERBOSE, "Unlocking any expTID pages still "
+			   "locked\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#1864: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1825:
+			int maxtid = port_tidbase + dd->ipath_rcvtidcnt;
+			for (i = port_tidbase; i < maxtid; i++) {

WARNING:SPLIT_STRING: quoted string split across lines
#1875: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1836:
+			ipath_cdbg(VERBOSE, "There were still %u expTID "
+				   "entries locked\n", cnt);

WARNING:SPLIT_STRING: quoted string split across lines
#1880: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1841:
+			ipath_cdbg(VERBOSE, "%llu pages locked, %llu "
+				   "unlocked via ipath_m{un}lock\n",

CHECK:BRACES: Unbalanced braces around else statement
#1935: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1896:
+			} else

WARNING:SPLIT_STRING: quoted string split across lines
#1937: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1898:
+				ipath_dbg("irq is 0, not doing free_irq "
+					  "for unit %u\n", dd->ipath_unit);

WARNING:SPLIT_STRING: quoted string split across lines
#1985: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1946:
+		dev_info(&dd->pcidev->dev, "Invalid unit number %u or "
+			 "not initialized or not present\n", unit);

WARNING:SPLIT_STRING: quoted string split across lines
#1994: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1955:
+				ipath_dbg("unit %u port %d is in use "
+					  "(PID %u cmd %s), can't reset\n",

WARNING:SPLIT_STRING: quoted string split across lines
#2012: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1973:
+		ipath_dev_err(dd, "Reinitialize unit %u after "
+			      "reset failed with %d\n", unit, ret);

WARNING:SPLIT_STRING: quoted string split across lines
#2015: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1976:
+		dev_info(&dd->pcidev->dev, "Reinitialized unit %u after "
+			 "resetting\n", unit);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000089341.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 6 errors, 97 warnings, 74 checks, 1983 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000089341.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
