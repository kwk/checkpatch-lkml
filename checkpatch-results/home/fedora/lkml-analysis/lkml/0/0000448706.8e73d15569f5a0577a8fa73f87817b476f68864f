WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#59: 
   NTFS: 2.0.15 - Fake inodes based attribute i/o via the pagecache, fixes, cleanups.

ERROR:DIFF_IN_COMMIT_MSG: Avoid using diff content in the commit message - patch(1) might not work
#88: 
--- a/Documentation/filesystems/ntfs.txt	Mon Jul  8 18:41:18 2002

Avoid having diff content in commit message.
This causes problems when one tries to apply a file containing both
the changelog and the diff because patch(1) tries to apply the diff
which it found in the changelog.

See: https://lore.kernel.org/lkml/20150611134006.9df79a893e3636019ad2759e@linux-foundation.org/

WARNING:DEPRECATED_VARIABLE: Use of EXTRA_CFLAGS is deprecated, please use `ccflags-y instead.
#149: FILE: fs/ntfs/Makefile:8:
+EXTRA_CFLAGS = -DNTFS_VERSION=\"2.0.15\"

EXTRA_{A,C,CPP,LD}FLAGS are deprecated and should be replaced by the new
flags added via commit f77bf01425b1 ("kbuild: introduce ccflags-y,
asflags-y and ldflags-y").

The following conversion scheme maybe used::

  EXTRA_AFLAGS    ->  asflags-y
  EXTRA_CFLAGS    ->  ccflags-y
  EXTRA_CPPFLAGS  ->  cppflags-y
  EXTRA_LDFLAGS   ->  ldflags-y

See:

  1. https://lore.kernel.org/lkml/20070930191054.GA15876@uranus.ravnborg.org/
  2. https://lore.kernel.org/lkml/1313384834-24433-12-git-send-email-lacombar@gmail.com/
  3. https://www.kernel.org/doc/html/latest/kbuild/makefiles.html#compilation-flags

WARNING:TYPO_SPELLING: 'uptodate' may be misspelled - perhaps 'up-to-date'?
#170: FILE: fs/ntfs/aops.c:48:
+static void ntfs_end_buffer_read_async(struct buffer_head *bh, int uptodate)
                                                                    ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:CAMELCASE: Avoid CamelCase: <NInoEncrypted>
#269: FILE: fs/ntfs/aops.c:327:
+			if (NInoEncrypted(ni)) {

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <NInoCompressed>
#274: FILE: fs/ntfs/aops.c:332:
+			if (NInoCompressed(ni))

CHECK:CAMELCASE: Avoid CamelCase: <NInoAttr>
#282: FILE: fs/ntfs/aops.c:339:
+	if (!NInoAttr(ni))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#307: FILE: fs/ntfs/aops.c:356:
+	if (unlikely(!lookup_attr(ni->type, ni->name, ni->name_len,
+			IGNORE_CASE, 0, NULL, 0, ctx))) {

WARNING:CONST_STRUCT: struct address_space_operations should normally be const
#371: FILE: fs/ntfs/aops.c:578:
+struct address_space_operations ntfs_aops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#374: FILE: fs/ntfs/aops.c:580:
+	readpage:	ntfs_readpage,		/* Fill page with data. */
 	        ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:INDENTED_LABEL: labels should not be indented
#374: FILE: fs/ntfs/aops.c:580:
+	readpage:	ntfs_readpage,		/* Fill page with data. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#454: FILE: fs/ntfs/attrib.c:960:
+	if (!lookup_attr(ni->type, ni->name, ni->name_len, IGNORE_CASE, vcn,
+			NULL, 0, ctx)) {

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#509: FILE: fs/ntfs/compress.c:469:
+	BUG_ON(ni->type != AT_DATA || ni->name_len);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:CAMELCASE: Avoid CamelCase: <NInoSetMstProtected>
#532: FILE: fs/ntfs/inode.c:118:
+		NInoSetMstProtected(ni);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#580: FILE: fs/ntfs/inode.c:229:
+struct inode *ntfs_attr_iget(struct inode *base_vi, ATTR_TYPES type,
+		uchar_t *name, u32 name_len)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#592: FILE: fs/ntfs/inode.c:241:
+	vi = iget5_locked(base_vi->i_sb, na.mft_no, (test_t)ntfs_test_inode,
+			(set_t)ntfs_init_locked_inode, &na);

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#609: FILE: fs/ntfs/inode.c:258:
+		iput(vi);
 		^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#626: FILE: fs/ntfs/inode.c:753:
+			ntfs_error(vi->i_sb, "Indexed attribute is not "
+					"$FILE_NAME. Not allowed.");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#710: FILE: fs/ntfs/inode.c:1158:
+	if (!lookup_attr(ni->type, ni->name, ni->name_len, IGNORE_CASE, 0,
+			NULL, 0, ctx))

CHECK:CAMELCASE: Avoid CamelCase: <NInoMstProtected>
#714: FILE: fs/ntfs/inode.c:1162:
+		if (NInoMstProtected(ni) || ctx->attr->flags) {

WARNING:SPLIT_STRING: quoted string split across lines
#716: FILE: fs/ntfs/inode.c:1164:
+			ntfs_error(vi->i_sb, "Found mst protected attribute "
+					"or attribute with non-zero flags but "

WARNING:SPLIT_STRING: quoted string split across lines
#717: FILE: fs/ntfs/inode.c:1165:
+					"or attribute with non-zero flags but "
+					"the attribute is resident (mft_no "

WARNING:SPLIT_STRING: quoted string split across lines
#718: FILE: fs/ntfs/inode.c:1166:
+					"the attribute is resident (mft_no "
+					"0x%lx, type 0x%x, name_len %i). "

WARNING:SPLIT_STRING: quoted string split across lines
#719: FILE: fs/ntfs/inode.c:1167:
+					"0x%lx, type 0x%x, name_len %i). "
+					"Please report you saw this message "

WARNING:SPLIT_STRING: quoted string split across lines
#720: FILE: fs/ntfs/inode.c:1168:
+					"Please report you saw this message "
+					"to linux-ntfs-dev@lists.sf.net",

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#728: FILE: fs/ntfs/inode.c:1176:
+		vi->i_size = ni->initialized_size = ni->allocated_size =

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:CAMELCASE: Avoid CamelCase: <NInoSetNonResident>
#731: FILE: fs/ntfs/inode.c:1179:
+		NInoSetNonResident(ni);

WARNING:SPLIT_STRING: quoted string split across lines
#735: FILE: fs/ntfs/inode.c:1183:
+				ntfs_error(vi->i_sb, "Found mst protected "
+						"attribute but the attribute "

WARNING:SPLIT_STRING: quoted string split across lines
#736: FILE: fs/ntfs/inode.c:1184:
+						"attribute but the attribute "
+						"is compressed (mft_no 0x%lx, "

WARNING:SPLIT_STRING: quoted string split across lines
#737: FILE: fs/ntfs/inode.c:1185:
+						"is compressed (mft_no 0x%lx, "
+						"type 0x%x, name_len %i). "

WARNING:SPLIT_STRING: quoted string split across lines
#738: FILE: fs/ntfs/inode.c:1186:
+						"type 0x%x, name_len %i). "
+						"Please report you saw this "

WARNING:SPLIT_STRING: quoted string split across lines
#739: FILE: fs/ntfs/inode.c:1187:
+						"Please report you saw this "
+						"message to linux-ntfs-dev@"

WARNING:SPLIT_STRING: quoted string split across lines
#740: FILE: fs/ntfs/inode.c:1188:
+						"message to linux-ntfs-dev@"
+						"lists.sf.net", vi->i_ino,

CHECK:CAMELCASE: Avoid CamelCase: <NInoSetCompressed>
#744: FILE: fs/ntfs/inode.c:1192:
+			NInoSetCompressed(ni);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ni->type != AT_DATA'
#745: FILE: fs/ntfs/inode.c:1193:
+			if ((ni->type != AT_DATA) || (ni->type == AT_DATA &&
+					ni->name_len)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#746: FILE: fs/ntfs/inode.c:1194:
+			if ((ni->type != AT_DATA) || (ni->type == AT_DATA &&
+					ni->name_len)) {

WARNING:SPLIT_STRING: quoted string split across lines
#748: FILE: fs/ntfs/inode.c:1196:
+				ntfs_error(vi->i_sb, "Found compressed non-"
+						"data or named data attribute "

WARNING:SPLIT_STRING: quoted string split across lines
#749: FILE: fs/ntfs/inode.c:1197:
+						"data or named data attribute "
+						"(mft_no 0x%lx, type 0x%x, "

WARNING:SPLIT_STRING: quoted string split across lines
#750: FILE: fs/ntfs/inode.c:1198:
+						"(mft_no 0x%lx, type 0x%x, "
+						"name_len %i). Please report "

WARNING:SPLIT_STRING: quoted string split across lines
#751: FILE: fs/ntfs/inode.c:1199:
+						"name_len %i). Please report "
+						"you saw this message to "

WARNING:SPLIT_STRING: quoted string split across lines
#752: FILE: fs/ntfs/inode.c:1200:
+						"you saw this message to "
+						"linux-ntfs-dev@lists.sf.net",

WARNING:SPLIT_STRING: quoted string split across lines
#759: FILE: fs/ntfs/inode.c:1207:
+				ntfs_error(vi->i_sb, "Found "
+					"compressed attribute but "

WARNING:SPLIT_STRING: quoted string split across lines
#760: FILE: fs/ntfs/inode.c:1208:
+					"compressed attribute but "
+					"compression is disabled due "

WARNING:SPLIT_STRING: quoted string split across lines
#761: FILE: fs/ntfs/inode.c:1209:
+					"compression is disabled due "
+					"to cluster size (%i) > 4kiB.",

WARNING:SPLIT_STRING: quoted string split across lines
#768: FILE: fs/ntfs/inode.c:1216:
+				ntfs_error(vi->i_sb, "Found unknown "
+						"compression method or "

WARNING:SPLIT_STRING: quoted string split across lines
#769: FILE: fs/ntfs/inode.c:1217:
+						"compression method or "
+						"corrupt file.");

WARNING:SPLIT_STRING: quoted string split across lines
#776: FILE: fs/ntfs/inode.c:1224:
+				ntfs_error(vi->i_sb, "Found "
+					"nonstandard compression unit "

WARNING:SPLIT_STRING: quoted string split across lines
#777: FILE: fs/ntfs/inode.c:1225:
+					"nonstandard compression unit "
+					"(%u instead of 4). Cannot "

WARNING:SPLIT_STRING: quoted string split across lines
#778: FILE: fs/ntfs/inode.c:1226:
+					"(%u instead of 4). Cannot "
+					"handle this. This might "

WARNING:SPLIT_STRING: quoted string split across lines
#779: FILE: fs/ntfs/inode.c:1227:
+					"handle this. This might "
+					"indicate corruption so you "

WARNING:SPLIT_STRING: quoted string split across lines
#780: FILE: fs/ntfs/inode.c:1228:
+					"indicate corruption so you "
+					"should run chkdsk.",

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#785: FILE: fs/ntfs/inode.c:1233:
+			ni->_ICF(compression_block_size) = 1U << (

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#786: FILE: fs/ntfs/inode.c:1234:
+					ctx->attr->_ANR(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#789: FILE: fs/ntfs/inode.c:1237:
+			ni->_ICF(compression_block_size_bits) = ffs(

WARNING:SPLIT_STRING: quoted string split across lines
#795: FILE: fs/ntfs/inode.c:1243:
+				ntfs_error(vi->i_sb, "Found encrypted "
+						"and compressed data.");

WARNING:SPLIT_STRING: quoted string split across lines
#800: FILE: fs/ntfs/inode.c:1248:
+				ntfs_error(vi->i_sb, "Found mst protected "
+						"attribute but the attribute "

WARNING:SPLIT_STRING: quoted string split across lines
#801: FILE: fs/ntfs/inode.c:1249:
+						"attribute but the attribute "
+						"is encrypted (mft_no 0x%lx, "

WARNING:SPLIT_STRING: quoted string split across lines
#802: FILE: fs/ntfs/inode.c:1250:
+						"is encrypted (mft_no 0x%lx, "
+						"type 0x%x, name_len %i). "

WARNING:SPLIT_STRING: quoted string split across lines
#803: FILE: fs/ntfs/inode.c:1251:
+						"type 0x%x, name_len %i). "
+						"Please report you saw this "

WARNING:SPLIT_STRING: quoted string split across lines
#804: FILE: fs/ntfs/inode.c:1252:
+						"Please report you saw this "
+						"message to linux-ntfs-dev@"

WARNING:SPLIT_STRING: quoted string split across lines
#805: FILE: fs/ntfs/inode.c:1253:
+						"message to linux-ntfs-dev@"
+						"lists.sf.net", vi->i_ino,

CHECK:CAMELCASE: Avoid CamelCase: <NInoSetEncrypted>
#809: FILE: fs/ntfs/inode.c:1257:
+			NInoSetEncrypted(ni);

WARNING:SPLIT_STRING: quoted string split across lines
#814: FILE: fs/ntfs/inode.c:1262:
+				ntfs_error(vi->i_sb, "Found mst protected "
+						"attribute but the attribute "

WARNING:SPLIT_STRING: quoted string split across lines
#815: FILE: fs/ntfs/inode.c:1263:
+						"attribute but the attribute "
+						"is sparse (mft_no 0x%lx, "

WARNING:SPLIT_STRING: quoted string split across lines
#816: FILE: fs/ntfs/inode.c:1264:
+						"is sparse (mft_no 0x%lx, "
+						"type 0x%x, name_len %i). "

WARNING:SPLIT_STRING: quoted string split across lines
#817: FILE: fs/ntfs/inode.c:1265:
+						"type 0x%x, name_len %i). "
+						"Please report you saw this "

WARNING:SPLIT_STRING: quoted string split across lines
#818: FILE: fs/ntfs/inode.c:1266:
+						"Please report you saw this "
+						"message to linux-ntfs-dev@"

WARNING:SPLIT_STRING: quoted string split across lines
#819: FILE: fs/ntfs/inode.c:1267:
+						"message to linux-ntfs-dev@"
+						"lists.sf.net", vi->i_ino,

CHECK:CAMELCASE: Avoid CamelCase: <NInoSetSparse>
#823: FILE: fs/ntfs/inode.c:1271:
+			NInoSetSparse(ni);

WARNING:SPLIT_STRING: quoted string split across lines
#827: FILE: fs/ntfs/inode.c:1275:
+			ntfs_error(vi->i_sb, "First extent of attribute has "
+					"non-zero lowest_vcn. Inode is "

WARNING:SPLIT_STRING: quoted string split across lines
#828: FILE: fs/ntfs/inode.c:1276:
+					"non-zero lowest_vcn. Inode is "
+					"corrupt. You should run chkdsk.");

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#833: FILE: fs/ntfs/inode.c:1281:
+		ni->initialized_size = sle64_to_cpu(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#835: FILE: fs/ntfs/inode.c:1283:
+		ni->allocated_size = sle64_to_cpu(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#838: FILE: fs/ntfs/inode.c:1286:
+			ni->_ICF(compressed_size) = sle64_to_cpu(

WARNING:SPLIT_STRING: quoted string split across lines
#842: FILE: fs/ntfs/inode.c:1290:
+				ntfs_warning(vi->i_sb, "Compressed attribute "
+						"with data_size unequal to "

WARNING:SPLIT_STRING: quoted string split across lines
#843: FILE: fs/ntfs/inode.c:1291:
+						"with data_size unequal to "
+						"initialized size found. This "

WARNING:SPLIT_STRING: quoted string split across lines
#844: FILE: fs/ntfs/inode.c:1292:
+						"initialized size found. This "
+						"will probably cause problems "

WARNING:SPLIT_STRING: quoted string split across lines
#845: FILE: fs/ntfs/inode.c:1293:
+						"will probably cause problems "
+						"when trying to access the "

WARNING:SPLIT_STRING: quoted string split across lines
#846: FILE: fs/ntfs/inode.c:1294:
+						"when trying to access the "
+						"file. Please notify "

WARNING:SPLIT_STRING: quoted string split across lines
#847: FILE: fs/ntfs/inode.c:1295:
+						"file. Please notify "
+						"linux-ntfs-dev@ lists.sf.net "

WARNING:SPLIT_STRING: quoted string split across lines
#848: FILE: fs/ntfs/inode.c:1296:
+						"linux-ntfs-dev@ lists.sf.net "
+						"that you saw this message.");

WARNING:SPLIT_STRING: quoted string split across lines
#884: FILE: fs/ntfs/inode.c:1332:
+	ntfs_error(vi->i_sb, "Failed with error code %i while reading "
+			"attribute inode (mft_no 0x%lx, type 0x%x, name_len "

WARNING:SPLIT_STRING: quoted string split across lines
#885: FILE: fs/ntfs/inode.c:1333:
+			"attribute inode (mft_no 0x%lx, type 0x%x, name_len "
+			"%i.", -err, vi->i_ino, ni->type, ni->name_len);

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#901: FILE: fs/ntfs/inode.c:1898:
+			iput(VFS_I(ni->_INE(base_ntfs_ino)));
 			^^^^

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#929: FILE: fs/ntfs/mft.c:111:
+	readpage:	ntfs_readpage,		/* Fill page with data. */
 	        ^

WARNING:INDENTED_LABEL: labels should not be indented
#929: FILE: fs/ntfs/mft.c:111:
+	readpage:	ntfs_readpage,		/* Fill page with data. */

WARNING:CONST_STRUCT: struct address_space_operations should normally be const
#962: FILE: fs/ntfs/ntfs.h:68:
+extern struct address_space_operations ntfs_aops;

WARNING:CONST_STRUCT: struct address_space_operations should normally be const
#963: FILE: fs/ntfs/ntfs.h:69:
+extern struct address_space_operations ntfs_mft_aops;

WARNING:CONST_STRUCT: struct address_space_operations should normally be const
#964: FILE: fs/ntfs/ntfs.h:70:
+extern struct address_space_operations ntfs_mftbmp_aops;

WARNING:CONST_STRUCT: struct file_operations should normally be const
#966: FILE: fs/ntfs/ntfs.h:72:
+extern struct  file_operations ntfs_file_ops;

WARNING:CONST_STRUCT: struct file_operations should normally be const
#971: FILE: fs/ntfs/ntfs.h:75:
+extern struct  file_operations ntfs_dir_ops;

WARNING:CONST_STRUCT: struct file_operations should normally be const
#976: FILE: fs/ntfs/ntfs.h:78:
+extern struct  file_operations ntfs_empty_file_ops;

WARNING:NEW_TYPEDEFS: do not add new typedefs
#1084: FILE: fs/ntfs/volume.h:105:
+typedef enum {

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1087: FILE: fs/ntfs/volume.h:108:
+	NV_CaseSensitive,	/* 1: Treat file names as case sensitive and
+				      create filenames in the POSIX namespace.

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1089: FILE: fs/ntfs/volume.h:110:
+				      file names in WIN32 namespace. */

CHECK:CAMELCASE: Avoid CamelCase: <NVol##flag>
#1097: FILE: fs/ntfs/volume.h:118:
+static inline int NVol##flag(ntfs_volume *vol)		\

CHECK:CAMELCASE: Avoid CamelCase: <NVolSet##flag>
#1101: FILE: fs/ntfs/volume.h:122:
+static inline void NVolSet##flag(ntfs_volume *vol)	\

CHECK:CAMELCASE: Avoid CamelCase: <NVolClear##flag>
#1105: FILE: fs/ntfs/volume.h:126:
+static inline void NVolClear##flag(ntfs_volume *vol)	\

CHECK:CAMELCASE: Avoid CamelCase: <ShowSystemFiles>
#1111: FILE: fs/ntfs/volume.h:132:
+NVOL_FNS(ShowSystemFiles)

CHECK:CAMELCASE: Avoid CamelCase: <CaseSensitive>
#1112: FILE: fs/ntfs/volume.h:133:
+NVOL_FNS(CaseSensitive)

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000448706.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 3 errors, 69 warnings, 28 checks, 959 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000448706.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
