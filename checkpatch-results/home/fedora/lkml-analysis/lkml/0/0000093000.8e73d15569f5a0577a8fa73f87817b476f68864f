WARNING:SINGLE_STATEMENT_DO_WHILE_MACRO: Single statement macros should not use a do {} while (0) loop
#51: FILE: drivers/media/video/tvp5150.c:32:
+#define tvp5150_err(fmt, arg...) do { \
+	printk(KERN_ERR "%s %d-%04x: " fmt, c->driver->driver.name, \
+	       i2c_adapter_id(c->adapter), c->addr , ## arg); } while (0)

For the multi-statement macros, it is necessary to use the do-while
loop to avoid unpredictable code paths. The do-while loop helps to
group the multiple statements into a single one so that a
function-like macro can be used as a function only.

But for the single statement macros, it is unnecessary to use the
do-while loop. Although the code is syntactically correct but using
the do-while loop is redundant. So remove the do-while loop for single
statement macros.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#52: FILE: drivers/media/video/tvp5150.c:33:
+	printk(KERN_ERR "%s %d-%04x: " fmt, c->driver->driver.name, \

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#53: FILE: drivers/media/video/tvp5150.c:34:
+	       i2c_adapter_id(c->adapter), c->addr , ## arg); } while (0)
 	                                           ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required after that ',' (ctx:VxV)
#70: FILE: drivers/media/video/tvp5150.c:131:
+static void dump_reg_range(struct i2c_client *c, char *s, u8 init, const u8 end,int max_line)
                                                                                ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#72: FILE: drivers/media/video/tvp5150.c:133:
+	int i=0;
 	     ^

ERROR:SPACING: spaces required around that '!=' (ctx:VxV)
#74: FILE: drivers/media/video/tvp5150.c:135:
+	while (init!=(u8)(end+1)) {
 	           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#74: FILE: drivers/media/video/tvp5150.c:135:
+	while (init!=(u8)(end+1)) {
 	                     ^

CHECK:SPACING: spaces preferred around that '%' (ctx:VxV)
#75: FILE: drivers/media/video/tvp5150.c:136:
+		if ((i%max_line) == 0) {
 		      ^

ERROR:SPACING: spaces required around that '>' (ctx:VxV)
#76: FILE: drivers/media/video/tvp5150.c:137:
+			if (i>0)
 			     ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#77: FILE: drivers/media/video/tvp5150.c:138:
+				printk("\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#78: FILE: drivers/media/video/tvp5150.c:139:
+			printk("tvp5150: %s reg 0x%02x = ",s,init);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#78: FILE: drivers/media/video/tvp5150.c:139:
+			printk("tvp5150: %s reg 0x%02x = ",s,init);
 			                                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#78: FILE: drivers/media/video/tvp5150.c:139:
+			printk("tvp5150: %s reg 0x%02x = ",s,init);
 			                                    ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#80: FILE: drivers/media/video/tvp5150.c:141:
+		printk("%02x ",tvp5150_read(c, init));

ERROR:SPACING: space required after that ',' (ctx:VxV)
#80: FILE: drivers/media/video/tvp5150.c:141:
+		printk("%02x ",tvp5150_read(c, init));
 		              ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#85: FILE: drivers/media/video/tvp5150.c:146:
+	printk("\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#104: FILE: drivers/media/video/tvp5150.c:159:
+	printk("tvp5150: Autoswitch mask= 0x%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#105: FILE: drivers/media/video/tvp5150.c:160:
+	printk("tvp5150: Autoswitch mask= 0x%02x\n",
+					tvp5150_read(c, TVP5150_AUTOSW_MSK));

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#113: FILE: drivers/media/video/tvp5150.c:163:
+	printk("tvp5150: Luminance processing controls #1 #2 and #3 = %02x %02x %02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#114: FILE: drivers/media/video/tvp5150.c:164:
+	printk("tvp5150: Luminance processing controls #1 #2 and #3 = %02x %02x %02x\n",
+					tvp5150_read(c, TVP5150_LUMA_PROC_CTL_1),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#145: FILE: drivers/media/video/tvp5150.c:179:
+	printk("tvp5150: Active video cropping start = 0x%02x%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#146: FILE: drivers/media/video/tvp5150.c:180:
+	printk("tvp5150: Active video cropping start = 0x%02x%02x\n",
+					tvp5150_read(c, TVP5150_ACT_VD_CROP_ST_MSB),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#148: FILE: drivers/media/video/tvp5150.c:182:
+	printk("tvp5150: Active video cropping stop  = 0x%02x%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#149: FILE: drivers/media/video/tvp5150.c:183:
+	printk("tvp5150: Active video cropping stop  = 0x%02x%02x\n",
+					tvp5150_read(c, TVP5150_ACT_VD_CROP_STP_MSB),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#167: FILE: drivers/media/video/tvp5150.c:193:
+	printk("tvp5150: Chrominance processing control #1 and #2 = %02x %02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#168: FILE: drivers/media/video/tvp5150.c:194:
+	printk("tvp5150: Chrominance processing control #1 and #2 = %02x %02x\n",
+					tvp5150_read(c, TVP5150_CHROMA_PROC_CTL_1),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#186: FILE: drivers/media/video/tvp5150.c:204:
+	printk("tvp5150: Chroma gain factor: Cb=0x%02x Cr=0x%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#187: FILE: drivers/media/video/tvp5150.c:205:
+	printk("tvp5150: Chroma gain factor: Cb=0x%02x Cr=0x%02x\n",
+					tvp5150_read(c, TVP5150_CB_GAIN_FACT),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#209: FILE: drivers/media/video/tvp5150.c:211:
+	printk("tvp5150: ITU-R BT.656.%d timing(TVP5150AM1 only)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#210: FILE: drivers/media/video/tvp5150.c:212:
+	printk("tvp5150: ITU-R BT.656.%d timing(TVP5150AM1 only)\n",
+					(tvp5150_read(c, TVP5150_REV_SELECT)&1)?3:4);

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#210: FILE: drivers/media/video/tvp5150.c:212:
+					(tvp5150_read(c, TVP5150_REV_SELECT)&1)?3:4);
 					                                    ^

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#210: FILE: drivers/media/video/tvp5150.c:212:
+					(tvp5150_read(c, TVP5150_REV_SELECT)&1)?3:4);
 					                                       ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#210: FILE: drivers/media/video/tvp5150.c:212:
+					(tvp5150_read(c, TVP5150_REV_SELECT)&1)?3:4);
 					                                         ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#211: FILE: drivers/media/video/tvp5150.c:213:
+	printk("tvp5150: Device ID = %02x%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#212: FILE: drivers/media/video/tvp5150.c:214:
+	printk("tvp5150: Device ID = %02x%02x\n",
+					tvp5150_read(c, TVP5150_MSB_DEV_ID),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#214: FILE: drivers/media/video/tvp5150.c:216:
+	printk("tvp5150: ROM version = (hex) %02x.%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#215: FILE: drivers/media/video/tvp5150.c:217:
+	printk("tvp5150: ROM version = (hex) %02x.%02x\n",
+					tvp5150_read(c, TVP5150_ROM_MAJOR_VER),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#217: FILE: drivers/media/video/tvp5150.c:219:
+	printk("tvp5150: Vertical line count = 0x%02x%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#218: FILE: drivers/media/video/tvp5150.c:220:
+	printk("tvp5150: Vertical line count = 0x%02x%02x\n",
+					tvp5150_read(c, TVP5150_VERT_LN_COUNT_MSB),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#322: FILE: drivers/media/video/tvp5150.c:226:
+	printk("tvp5150: Status regs #1 to #5 = %02x %02x %02x %02x %02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#323: FILE: drivers/media/video/tvp5150.c:227:
+	printk("tvp5150: Status regs #1 to #5 = %02x %02x %02x %02x %02x\n",
+					tvp5150_read(c, TVP5150_STATUS_REG_1),

ERROR:SPACING: space required after that ',' (ctx:VxV)
#329: FILE: drivers/media/video/tvp5150.c:233:
+	dump_reg_range(c,"Teletext filter 1",   TVP5150_TELETEXT_FIL1_INI,
 	                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#330: FILE: drivers/media/video/tvp5150.c:234:
+	dump_reg_range(c,"Teletext filter 1",   TVP5150_TELETEXT_FIL1_INI,
+						TVP5150_TELETEXT_FIL1_END,8);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#330: FILE: drivers/media/video/tvp5150.c:234:
+						TVP5150_TELETEXT_FIL1_END,8);
 						                         ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#331: FILE: drivers/media/video/tvp5150.c:235:
+	dump_reg_range(c,"Teletext filter 2",   TVP5150_TELETEXT_FIL2_INI,
 	                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#332: FILE: drivers/media/video/tvp5150.c:236:
+	dump_reg_range(c,"Teletext filter 2",   TVP5150_TELETEXT_FIL2_INI,
+						TVP5150_TELETEXT_FIL2_END,8);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#332: FILE: drivers/media/video/tvp5150.c:236:
+						TVP5150_TELETEXT_FIL2_END,8);
 						                         ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#371: FILE: drivers/media/video/tvp5150.c:256:
+	printk("tvp5150: Pixel alignment register = 0x%02x%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#372: FILE: drivers/media/video/tvp5150.c:257:
+	printk("tvp5150: Pixel alignment register = 0x%02x%02x\n",
+					tvp5150_read(c, TVP5150_PIX_ALIGN_REG_HIGH),

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#467: FILE: drivers/media/video/tvp5150.c:261:
+	printk("tvp5150: Full field enable = 0x%02x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#468: FILE: drivers/media/video/tvp5150.c:262:
+	printk("tvp5150: Full field enable = 0x%02x\n",
+					tvp5150_read(c, TVP5150_FULL_FIELD_ENA));

ERROR:SPACING: space required after that ',' (ctx:VxV)
#473: FILE: drivers/media/video/tvp5150.c:266:
+	dump_reg_range(c,"CC   data",   TVP5150_CC_DATA_INI,
 	                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#474: FILE: drivers/media/video/tvp5150.c:267:
+	dump_reg_range(c,"CC   data",   TVP5150_CC_DATA_INI,
+					TVP5150_CC_DATA_END,8);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#474: FILE: drivers/media/video/tvp5150.c:267:
+					TVP5150_CC_DATA_END,8);
 					                   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#476: FILE: drivers/media/video/tvp5150.c:269:
+	dump_reg_range(c,"WSS  data",   TVP5150_WSS_DATA_INI,
 	                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#477: FILE: drivers/media/video/tvp5150.c:270:
+	dump_reg_range(c,"WSS  data",   TVP5150_WSS_DATA_INI,
+					TVP5150_WSS_DATA_END,8);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#477: FILE: drivers/media/video/tvp5150.c:270:
+					TVP5150_WSS_DATA_END,8);
 					                    ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#479: FILE: drivers/media/video/tvp5150.c:272:
+	dump_reg_range(c,"VPS  data",   TVP5150_VPS_DATA_INI,
 	                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#480: FILE: drivers/media/video/tvp5150.c:273:
+	dump_reg_range(c,"VPS  data",   TVP5150_VPS_DATA_INI,
+					TVP5150_VPS_DATA_END,8);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#480: FILE: drivers/media/video/tvp5150.c:273:
+					TVP5150_VPS_DATA_END,8);
 					                    ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#482: FILE: drivers/media/video/tvp5150.c:275:
+	dump_reg_range(c,"VITC data",   TVP5150_VITC_DATA_INI,
 	                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#483: FILE: drivers/media/video/tvp5150.c:276:
+	dump_reg_range(c,"VITC data",   TVP5150_VITC_DATA_INI,
+					TVP5150_VITC_DATA_END,10);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#483: FILE: drivers/media/video/tvp5150.c:276:
+					TVP5150_VITC_DATA_END,10);
 					                     ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#485: FILE: drivers/media/video/tvp5150.c:278:
+	dump_reg_range(c,"Line mode",   TVP5150_LINE_MODE_INI,
 	                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#486: FILE: drivers/media/video/tvp5150.c:279:
+	dump_reg_range(c,"Line mode",   TVP5150_LINE_MODE_INI,
+					TVP5150_LINE_MODE_END,8);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#486: FILE: drivers/media/video/tvp5150.c:279:
+					TVP5150_LINE_MODE_END,8);
 					                     ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#495: FILE: drivers/media/video/tvp5150.c:444:
+		TVP5150_FULL_FIELD_ENA,0x00
 		                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#499: FILE: drivers/media/video/tvp5150.c:447:
+		TVP5150_LINE_MODE_INI,0x00
 		                     ^

WARNING:LONG_LINE: line length of 110 exceeds 100 columns
#581: FILE: drivers/media/video/tvp5150.c:547:
+		{ 0xaa, 0xaa, 0xff, 0xff, 0xba, 0xce, 0x2b, 0x0d, 0xa6, 0xda, 0x0b, 0x0, 0x0, 0x0, 0x60, 0x0 }

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:LONG_LINE: line length of 110 exceeds 100 columns
#584: FILE: drivers/media/video/tvp5150.c:550:
+		{ 0xcc, 0xcc, 0xff, 0xff, 0x05, 0x51, 0x6e, 0x05, 0x69, 0x19, 0x13, 0x0, 0x0, 0x0, 0x60, 0x0 }

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#598: FILE: drivers/media/video/tvp5150.c:573:
+	for (i=TVP5150_LINE_MODE_INI; i<=TVP5150_LINE_MODE_END; i++)
 	      ^

ERROR:SPACING: spaces required around that '<=' (ctx:VxV)
#598: FILE: drivers/media/video/tvp5150.c:573:
+	for (i=TVP5150_LINE_MODE_INI; i<=TVP5150_LINE_MODE_END; i++)
 	                               ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#620: FILE: drivers/media/video/tvp5150.c:603:
+static int tvp5150_set_vbi(struct i2c_client *c, enum tvp5150_vbi_types type,
+					u8 flags, int line, const int fields)

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#623: FILE: drivers/media/video/tvp5150.c:606:
+	v4l2_std_id std=decoder->norm;
 	               ^

WARNING:TYPO_SPELLING: 'convension' may be misspelled - perhaps 'convention'?
#630: FILE: drivers/media/video/tvp5150.c:613:
+		/* Don't follow NTSC Line number convension */
 		                                 ^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#634: FILE: drivers/media/video/tvp5150.c:617:
+	if (line<6||line>27)
 	        ^

ERROR:SPACING: spaces required around that '||' (ctx:VxV)
#634: FILE: drivers/media/video/tvp5150.c:617:
+	if (line<6||line>27)
 	          ^

ERROR:SPACING: spaces required around that '>' (ctx:VxV)
#634: FILE: drivers/media/video/tvp5150.c:617:
+	if (line<6||line>27)
 	                ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#637: FILE: drivers/media/video/tvp5150.c:620:
+	type=type | (flags & 0xf0);
 	    ^

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#638: FILE: drivers/media/video/tvp5150.c:621:
+	reg=((line-6)<<1)+TVP5150_LINE_MODE_INI;
 	   ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#638: FILE: drivers/media/video/tvp5150.c:621:
+	reg=((line-6)<<1)+TVP5150_LINE_MODE_INI;
 	          ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#638: FILE: drivers/media/video/tvp5150.c:621:
+	reg=((line-6)<<1)+TVP5150_LINE_MODE_INI;
 	             ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#638: FILE: drivers/media/video/tvp5150.c:621:
+	reg=((line-6)<<1)+TVP5150_LINE_MODE_INI;
 	                 ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#640: FILE: drivers/media/video/tvp5150.c:623:
+	if (fields&1) {
 	          ^

WARNING:BRACES: braces {} are not necessary for single statement blocks
#640: FILE: drivers/media/video/tvp5150.c:623:
+	if (fields&1) {
+		tvp5150_write(c, reg, type);
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#644: FILE: drivers/media/video/tvp5150.c:627:
+	if (fields&2) {
 	          ^

WARNING:BRACES: braces {} are not necessary for single statement blocks
#644: FILE: drivers/media/video/tvp5150.c:627:
+	if (fields&2) {
+		tvp5150_write(c, reg+1, type);
+	}

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#645: FILE: drivers/media/video/tvp5150.c:628:
+		tvp5150_write(c, reg+1, type);
 		                    ^

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000093000.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 32 errors, 24 warnings, 32 checks, 738 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000093000.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
