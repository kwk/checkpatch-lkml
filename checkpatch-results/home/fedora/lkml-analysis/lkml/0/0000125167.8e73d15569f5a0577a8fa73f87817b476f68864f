WARNING:COMMIT_MESSAGE: Missing commit description - Add an appropriate one

The patch is missing a commit description.  A brief
description of the changes made by the patch should be added.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#describe-your-changes

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#54: FILE: Documentation/spi.txt:1:
+Documentation/spi.txt

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

ERROR:TRAILING_WHITESPACE: trailing whitespace
#164: FILE: Documentation/spi.txt:111:
+* set CVSROOT environment variable to $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#233: FILE: drivers/spi/Kconfig:6:
+config SPI
+	tristate "SPI (Serial Peripheral Interface) bus support"
+        default false
+	help
+	  Say Y if you need to enable SPI support on your kernel.
+ 	  Say M if you want to create the spi loadable module.
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#249: FILE: drivers/spi/Kconfig:22:
+config SPI_CUSTOM_ALLOC
+	bool "Custom (faster) SPI message allocation"
+	default false
+	help
+	  Say Y here to use faster SPI message allocation.
+	  If unsure, say N.
+

WARNING:DEPRECATED_VARIABLE: Use of EXTRA_CFLAGS is deprecated, please use `ccflags-y instead.
#295: FILE: drivers/spi/Makefile:17:
+EXTRA_CFLAGS += -DDEBUG

EXTRA_{A,C,CPP,LD}FLAGS are deprecated and should be replaced by the new
flags added via commit f77bf01425b1 ("kbuild: introduce ccflags-y,
asflags-y and ldflags-y").

The following conversion scheme maybe used::

  EXTRA_AFLAGS    ->  asflags-y
  EXTRA_CFLAGS    ->  ccflags-y
  EXTRA_CPPFLAGS  ->  cppflags-y
  EXTRA_LDFLAGS   ->  ldflags-y

See:

  1. https://lore.kernel.org/lkml/20070930191054.GA15876@uranus.ravnborg.org/
  2. https://lore.kernel.org/lkml/1313384834-24433-12-git-send-email-lacombar@gmail.com/
  3. https://www.kernel.org/doc/html/latest/kbuild/makefiles.html#compilation-flags

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#303: FILE: drivers/spi/spi-core.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#304: FILE: drivers/spi/spi-core.c:2:
+ *  drivers/spi/spi-core.c

WARNING:INCLUDE_LINUX: Use #include <linux/atomic.h> instead of <asm/atomic.h>
#326: FILE: drivers/spi/spi-core.c:24:
+#include <asm/atomic.h>

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#339: FILE: drivers/spi/spi-core.c:37:
+void spimsg_set_clock (struct spi_msg* message, u32 clock)

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#339: FILE: drivers/spi/spi-core.c:37:
+void spimsg_set_clock (struct spi_msg* message, u32 clock)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#348: FILE: drivers/spi/spi-core.c:46:
+u32 spimsg_get_clock (struct spi_msg* message)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#348: FILE: drivers/spi/spi-core.c:46:
+u32 spimsg_get_clock (struct spi_msg* message)

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#357: FILE: drivers/spi/spi-core.c:55:
+u32 spimsg_get_flags (struct spi_msg* message)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#357: FILE: drivers/spi/spi-core.c:55:
+u32 spimsg_get_flags (struct spi_msg* message)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#367: FILE: drivers/spi/spi-core.c:65:
+u32 spimsg_get_buffer (struct spi_msg *message, void **buffer)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#370: FILE: drivers/spi/spi-core.c:68:
+^I$

WARNING:LONG_LINE: line length of 118 exceeds 100 columns
#377: FILE: drivers/spi/spi-core.c:75:
+		*buffer = bdrv->dma_safe_alloc (message->buf_ptr, message->len, message->flags & (SPI_M_RD|SPI_M_WR));

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#377: FILE: drivers/spi/spi-core.c:75:
+		*buffer = bdrv->dma_safe_alloc (message->buf_ptr, message->len, message->flags & (SPI_M_RD|SPI_M_WR));

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#377: FILE: drivers/spi/spi-core.c:75:
+		*buffer = bdrv->dma_safe_alloc (message->buf_ptr, message->len, message->flags & (SPI_M_RD|SPI_M_WR));
 		                                                                                          ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#389: FILE: drivers/spi/spi-core.c:87:
+void spimsg_put_buffer (struct spi_msg *message, void *buffer)

WARNING:LONG_LINE: line length of 115 exceeds 100 columns
#394: FILE: drivers/spi/spi-core.c:92:
+		bdrv->dma_safe_free (message->buf_ptr, buffer, message->len, message->flags & (SPI_M_RD|SPI_M_WR));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#394: FILE: drivers/spi/spi-core.c:92:
+		bdrv->dma_safe_free (message->buf_ptr, buffer, message->len, message->flags & (SPI_M_RD|SPI_M_WR));

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#394: FILE: drivers/spi/spi-core.c:92:
+		bdrv->dma_safe_free (message->buf_ptr, buffer, message->len, message->flags & (SPI_M_RD|SPI_M_WR));
 		                                                                                       ^

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#401: FILE: drivers/spi/spi-core.c:99:
+struct spi_device *spimsg_get_spidev (struct spi_msg* message)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#401: FILE: drivers/spi/spi-core.c:99:
+struct spi_device *spimsg_get_spidev (struct spi_msg* message)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#424: FILE: drivers/spi/spi-core.c:122:
+static inline struct spi_msg *__spimsg_alloc(struct spi_device *device,
+					   struct spi_msg *link,

WARNING:SPACING: Unnecessary space before function pointer arguments
#428: FILE: drivers/spi/spi-core.c:126:
+					   void (*status) (struct spi_msg *,

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#433: FILE: drivers/spi/spi-core.c:131:
+	if ((flags & (SPI_M_RD|SPI_M_WR)) == (SPI_M_RD|SPI_M_WR))
 	                      ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#433: FILE: drivers/spi/spi-core.c:131:
+	if ((flags & (SPI_M_RD|SPI_M_WR)) == (SPI_M_RD|SPI_M_WR))
 	                                              ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#461: FILE: drivers/spi/spi-core.c:159:
+struct spi_msg *spimsg_alloc(struct spi_device *device,
+					   u32 flags,

WARNING:SPACING: Unnecessary space before function pointer arguments
#464: FILE: drivers/spi/spi-core.c:162:
+					   void (*status) (struct spi_msg *,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#479: FILE: drivers/spi/spi-core.c:177:
+struct spi_msg *spimsg_chain(struct spi_msg *msg,
+					   u32 flags,

WARNING:SPACING: Unnecessary space before function pointer arguments
#482: FILE: drivers/spi/spi-core.c:180:
+					   void (*status) (struct spi_msg *,

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#515: FILE: drivers/spi/spi-core.c:213:
+ * ^Imatch the device to driver.Drivers and devices on SPI bus$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#516: FILE: drivers/spi/spi-core.c:214:
+ * ^Iare matched by name, just like the platform devices$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#528: FILE: drivers/spi/spi-core.c:226:
+ * ^Ithis function set device on SPI bus to suspended state, just$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#529: FILE: drivers/spi/spi-core.c:227:
+ * ^Ilike platform_bus does$

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#531: FILE: drivers/spi/spi-core.c:229:
+static int spi_bus_suspend(struct device * dev, pm_message_t message)

ERROR:SPACING: space prohibited before that close parenthesis ')'
#535: FILE: drivers/spi/spi-core.c:233:
+	if (dev->driver && TO_SPI_DRIVER(dev->driver)->suspend ) {

ERROR:SPACING: space prohibited after that open parenthesis '('
#536: FILE: drivers/spi/spi-core.c:234:
+		ret = TO_SPI_DRIVER(dev->driver)->suspend( TO_SPI_DEV(dev), message);

ERROR:SPACING: space prohibited before that close parenthesis ')'
#537: FILE: drivers/spi/spi-core.c:235:
+		if (ret == 0 )

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#547: FILE: drivers/spi/spi-core.c:245:
+ * ^IThis function resumes device on SPI bus, just like platform_bus does$

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#549: FILE: drivers/spi/spi-core.c:247:
+static int spi_bus_resume(struct device * dev)

ERROR:SPACING: space prohibited before that close parenthesis ')'
#553: FILE: drivers/spi/spi-core.c:251:
+	if (dev->driver && TO_SPI_DRIVER(dev->driver)->suspend ) {

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#573: FILE: drivers/spi/spi-core.c:271:
+ * ^IOnce registered by spi_bus_register, the bus driver needs$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#574: FILE: drivers/spi/spi-core.c:272:
+ * ^Iinitialization, that includes starting thread, initializing$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#575: FILE: drivers/spi/spi-core.c:273:
+ * ^Iinternal structures.. The best place where the spi_bus_driver_init$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#576: FILE: drivers/spi/spi-core.c:274:
+ * ^Iis in the `probe' function, when we already sure that passed$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#577: FILE: drivers/spi/spi-core.c:275:
+ * ^Idevice object is SPI master controller.$

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#621: FILE: drivers/spi/spi-core.c:319:
+int spi_bus_driver_cleanup (struct spi_bus_driver *bus_drv, struct device *dev)

ERROR:SPACING: space required before the open parenthesis '('
#626: FILE: drivers/spi/spi-core.c:324:
+		if(bus_drv->stop_async)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#628: FILE: drivers/spi/spi-core.c:326:
+		kfree (pd);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#634: FILE: drivers/spi/spi-core.c:332:
+}
+/**

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#639: FILE: drivers/spi/spi-core.c:337:
+ * ^IThis is an internal function that is called when unregistering$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#640: FILE: drivers/spi/spi-core.c:338:
+ * ^Ibus driver. Responsibility of this function is freeing the$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#641: FILE: drivers/spi/spi-core.c:339:
+ * ^Iresources that were requested by spi_bus_driver_init$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#652: FILE: drivers/spi/spi-core.c:350:
+ * ^IThis routine unregisters the SPI bus from the system. Before$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#653: FILE: drivers/spi/spi-core.c:351:
+ * ^Iunregistering, it deletes each SPI device on the bus using call$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#654: FILE: drivers/spi/spi-core.c:352:
+ * ^Ito __spi_device_free$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#668: FILE: drivers/spi/spi-core.c:366:
+ * ^IPointer to this function will be put to dev->release place$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#669: FILE: drivers/spi/spi-core.c:367:
+ * ^IThis fus called as a part of device removing$

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#673: FILE: drivers/spi/spi-core.c:371:
+	struct spi_device* sdev = TO_SPI_DEV(dev);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#684: FILE: drivers/spi/spi-core.c:382:
+ * ^ISPI device usually cannot be discovered by SPI bus driver, so it$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#685: FILE: drivers/spi/spi-core.c:383:
+ * ^Ineeds to take the configuration somewhere from hardcoded structures,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#686: FILE: drivers/spi/spi-core.c:384:
+ * ^Iand prepare bus_data for its devices$

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#688: FILE: drivers/spi/spi-core.c:386:
+struct spi_device* spi_device_add(struct device *parent, char *name, void *bus_data)

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#690: FILE: drivers/spi/spi-core.c:388:
+	struct spi_device* dev;

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#691: FILE: drivers/spi/spi-core.c:389:
+	static int minor = 0;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*dev)...) over kzalloc(sizeof(struct spi_device)...)
#696: FILE: drivers/spi/spi-core.c:394:
+	dev = kzalloc(sizeof(struct spi_device), SLAB_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

ERROR:SPACING: space required before the open parenthesis '('
#697: FILE: drivers/spi/spi-core.c:395:
+	if(!dev)

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#707: FILE: drivers/spi/spi-core.c:405:
+	if (device_register(&dev->dev)<0) {
 	                              ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#729: FILE: drivers/spi/spi-core.c:427:
+	struct spi_device *spidev = TO_SPI_DEV(dev);
+	if (spidev->cdev) {

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#736: FILE: drivers/spi/spi-core.c:434:
+}
+/**

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#741: FILE: drivers/spi/spi-core.c:439:
+ * ^Icallback for synchronously processed message. If spi_transfer$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#742: FILE: drivers/spi/spi-core.c:440:
+ * ^Idetermines that there is no callback provided neither by$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#743: FILE: drivers/spi/spi-core.c:441:
+ * ^Imsg->status nor callback parameter, the __spi_transfer_callback$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#744: FILE: drivers/spi/spi-core.c:442:
+ * ^Iwill be used, and spi_transfer does not return until transfer$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#745: FILE: drivers/spi/spi-core.c:443:
+ * ^Iis finished$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#757: FILE: drivers/spi/spi-core.c:455:
+ * ^Iif both msg->status and callback are set, the error code of -EINVAL$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#758: FILE: drivers/spi/spi-core.c:456:
+ * ^Iwill be returned$

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#765: FILE: drivers/spi/spi-core.c:463:
+	if (msg && TO_SPI_BUS_DRIVER(bus->driver)->queue)
+	{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#774: FILE: drivers/spi/spi-core.c:472:
+				init_completion (&msg->sync);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#828: FILE: drivers/spi/spi-core.c:526:
+ * ^IThis function is intended to populate the SPI bus corresponding to$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#829: FILE: drivers/spi/spi-core.c:527:
+ * ^Idevice passed as 1st parameter. If some device cannot be added$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#830: FILE: drivers/spi/spi-core.c:528:
+ * ^Ibecause of spi_device_add fail, the function will not try to parse$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#831: FILE: drivers/spi/spi-core.c:529:
+ * ^Ithe rest of list$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#834: FILE: drivers/spi/spi-core.c:532:
+int spi_bus_populate(struct device *parent,
+			struct spi_device_desc* devices_s,

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#834: FILE: drivers/spi/spi-core.c:532:
+			struct spi_device_desc* devices_s,

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#835: FILE: drivers/spi/spi-core.c:533:
+			void (*callback) (struct device* bus,

WARNING:SPACING: Unnecessary space before function pointer arguments
#835: FILE: drivers/spi/spi-core.c:533:
+			void (*callback) (struct device* bus,

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#837: FILE: drivers/spi/spi-core.c:535:
+					  void* params))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#844: FILE: drivers/spi/spi-core.c:542:
+		dev_dbg(parent, " discovered new SPI device, name '%s'\n",
+				devices_s->name);

WARNING:LONG_LINE: line length of 102 exceeds 100 columns
#845: FILE: drivers/spi/spi-core.c:543:
+		if ((new_device = spi_device_add(parent, devices_s->name, devices_s->params)) == NULL)

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#845: FILE: drivers/spi/spi-core.c:543:
+		if ((new_device = spi_device_add(parent, devices_s->name, devices_s->params)) == NULL)

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#860: FILE: drivers/spi/spi-core.c:558:
+ * ^IThis is simple wrapper for bus' `reset' method$

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#862: FILE: drivers/spi/spi-core.c:560:
+void spi_bus_reset (struct device *bus, u32 context)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#871: FILE: drivers/spi/spi-core.c:569:
+static int spi_driver_probe (struct device *dev)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#879: FILE: drivers/spi/spi-core.c:577:
+static int spi_driver_remove (struct device *dev)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#887: FILE: drivers/spi/spi-core.c:585:
+static void spi_driver_shutdown (struct device *dev)

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#935: FILE: drivers/spi/spi-core.c:633:
+EXPORT_SYMBOL_GPL(spi_bus_reset);

EXPORT_SYMBOL should immediately follow the symbol to be exported.

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#936: FILE: drivers/spi/spi-core.c:634:
+EXPORT_SYMBOL_GPL(spi_device_add);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#937: FILE: drivers/spi/spi-core.c:635:
+EXPORT_SYMBOL_GPL(spi_driver_add);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#938: FILE: drivers/spi/spi-core.c:636:
+EXPORT_SYMBOL_GPL(spi_bus_driver_unregister);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#939: FILE: drivers/spi/spi-core.c:637:
+EXPORT_SYMBOL_GPL(spi_bus_populate);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#940: FILE: drivers/spi/spi-core.c:638:
+EXPORT_SYMBOL_GPL(spi_transfer);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#941: FILE: drivers/spi/spi-core.c:639:
+EXPORT_SYMBOL_GPL(spi_write);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#942: FILE: drivers/spi/spi-core.c:640:
+EXPORT_SYMBOL_GPL(spi_read);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#943: FILE: drivers/spi/spi-core.c:641:
+EXPORT_SYMBOL_GPL(spi_bus);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#944: FILE: drivers/spi/spi-core.c:642:
+EXPORT_SYMBOL_GPL(spi_bus_driver_init);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#945: FILE: drivers/spi/spi-core.c:643:
+EXPORT_SYMBOL_GPL(spi_bus_driver_cleanup);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#947: FILE: drivers/spi/spi-core.c:645:
+EXPORT_SYMBOL_GPL(spimsg_alloc);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#948: FILE: drivers/spi/spi-core.c:646:
+EXPORT_SYMBOL_GPL(spimsg_chain);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#949: FILE: drivers/spi/spi-core.c:647:
+EXPORT_SYMBOL_GPL(spimsg_free);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#950: FILE: drivers/spi/spi-core.c:648:
+EXPORT_SYMBOL_GPL(spimsg_put_buffer);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#951: FILE: drivers/spi/spi-core.c:649:
+EXPORT_SYMBOL_GPL(spimsg_get_flags);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#952: FILE: drivers/spi/spi-core.c:650:
+EXPORT_SYMBOL_GPL(spimsg_get_buffer);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#953: FILE: drivers/spi/spi-core.c:651:
+EXPORT_SYMBOL_GPL(spimsg_get_clock);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#954: FILE: drivers/spi/spi-core.c:652:
+EXPORT_SYMBOL_GPL(spimsg_set_clock);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#955: FILE: drivers/spi/spi-core.c:653:
+EXPORT_SYMBOL_GPL(spimsg_getnext);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#956: FILE: drivers/spi/spi-core.c:654:
+EXPORT_SYMBOL_GPL(spimsg_get_spidev);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#957: FILE: drivers/spi/spi-core.c:655:
+EXPORT_SYMBOL_GPL(spimsg_set_ctx);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#958: FILE: drivers/spi/spi-core.c:656:
+EXPORT_SYMBOL_GPL(spimsg_get_ctx);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#959: FILE: drivers/spi/spi-core.c:657:
+EXPORT_SYMBOL_GPL(spimsg_complete);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#966: FILE: drivers/spi/spi-core.h:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#967: FILE: drivers/spi/spi-core.h:2:
+ *  linux/drivers/spi/spi-core.h

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#992: FILE: drivers/spi/spi-core.h:27:
+	void (*status) (struct spi_msg * msg, int code);

WARNING:SPACING: Unnecessary space before function pointer arguments
#992: FILE: drivers/spi/spi-core.h:27:
+	void (*status) (struct spi_msg * msg, int code);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1003: FILE: drivers/spi/spi-dev.c:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#1004: FILE: drivers/spi/spi-dev.c:2:
+ *  drivers/spi/spi-dev.c

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#1026: FILE: drivers/spi/spi-dev.c:24:
+#include <asm/uaccess.h>

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1034: FILE: drivers/spi/spi-dev.c:32:
+			   loff_t * offset);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1036: FILE: drivers/spi/spi-dev.c:34:
+			    loff_t * offset);

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#1048: FILE: drivers/spi/spi-dev.c:46:
+	return class_device_create(spidev_class, NULL, MKDEV(SPI_MAJOR, minor), device, "spi%d", minor);

WARNING:CONST_STRUCT: struct file_operations should normally be const
#1060: FILE: drivers/spi/spi-dev.c:58:
+static struct file_operations spidev_fops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1077: FILE: drivers/spi/spi-dev.c:75:
+			   loff_t * offset)

CHECK:BRACES: braces {} should be used on all arms of this statement
#1083: FILE: drivers/spi/spi-dev.c:81:
+	if (!kbuf)
[...]
+	else {
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1085: FILE: drivers/spi/spi-dev.c:83:
+	else {

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1102: FILE: drivers/spi/spi-dev.c:100:
+			    loff_t * offset)

CHECK:BRACES: braces {} should be used on all arms of this statement
#1108: FILE: drivers/spi/spi-dev.c:106:
+	if (!kbuf)
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1110: FILE: drivers/spi/spi-dev.c:108:
+	else {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1158: FILE: drivers/spi/spi-dev.c:156:
+	if (status == 0) {
+		status = -ENODEV;
+	}

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1184: FILE: drivers/spi/spi-dev.c:182:
+	if ((res = register_chrdev(SPI_MAJOR, "spi", &spidev_fops)) != 0) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1184: FILE: drivers/spi/spi-dev.c:182:
+	if ((res = register_chrdev(SPI_MAJOR, "spi", &spidev_fops)) != 0) {
+		goto out;
+	}

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1190: FILE: drivers/spi/spi-dev.c:188:
+		printk(KERN_ERR "%s: error creating class\n", __FUNCTION__);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#1190: FILE: drivers/spi/spi-dev.c:188:
+		printk(KERN_ERR "%s: error creating class\n", __FUNCTION__);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1217: FILE: drivers/spi/spi-thread.c:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#1218: FILE: drivers/spi/spi-thread.c:2:
+ *  drivers/spi/spi-thread.c

WARNING:INCLUDE_LINUX: Use #include <linux/atomic.h> instead of <asm/atomic.h>
#1239: FILE: drivers/spi/spi-thread.c:23:
+#include <asm/atomic.h>

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1256: FILE: drivers/spi/spi-thread.c:40:
+void *__spi_start_async (struct device *dev)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1258: FILE: drivers/spi/spi-thread.c:42:
+	struct threaded_async_data *td = kmalloc (sizeof (struct threaded_async_data), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1258: FILE: drivers/spi/spi-thread.c:42:
+	struct threaded_async_data *td = kmalloc (sizeof (struct threaded_async_data), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*td)...) over kmalloc(sizeof (struct threaded_async_data)...)
#1258: FILE: drivers/spi/spi-thread.c:42:
+	struct threaded_async_data *td = kmalloc (sizeof (struct threaded_async_data), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1275: FILE: drivers/spi/spi-thread.c:59:
+void __spi_stop_async (struct device *dev, void *ctx)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1280: FILE: drivers/spi/spi-thread.c:64:
+		atomic_inc (&td->exiting);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1290: FILE: drivers/spi/spi-thread.c:74:
+ * ^IThread wakes up if there is signal to exit (bd->exiting is set)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1291: FILE: drivers/spi/spi-thread.c:75:
+ * ^Ior there are any messages in bus' queue.$

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1298: FILE: drivers/spi/spi-thread.c:82:
+	if (atomic_read(&td->exiting)) {
+		return 1;
+	}

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1324: FILE: drivers/spi/spi-thread.c:108:
+ * ^IThis function is started as separate thread to perform actual$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1325: FILE: drivers/spi/spi-thread.c:109:
+ * ^Itransfers on SPI bus$

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1335: FILE: drivers/spi/spi-thread.c:119:
+	while (!kthread_should_stop()) {
+

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1348: FILE: drivers/spi/spi-thread.c:132:
+			list_del (&cmsg->link);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1387: FILE: drivers/spi/spi-thread.c:171:
+ * ^IThis function queues the message to spi bus driver's queue.$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1403: FILE: drivers/spi/spi-thread.c:187:
+
+

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1409: FILE: drivers/spi/spi-thread.h:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#1410: FILE: drivers/spi/spi-thread.h:2:
+ *  linux/drivers/spi/spi-thread.h

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1422: FILE: drivers/spi/spi-thread.h:14:
+
+

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1423: FILE: drivers/spi/spi-thread.h:15:
+static inline void *spi_start_async (struct device *dev)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1426: FILE: drivers/spi/spi-thread.h:18:
+	extern void *__spi_start_async (struct device *dev);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1426: FILE: drivers/spi/spi-thread.h:18:
+	extern void *__spi_start_async (struct device *dev);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1433: FILE: drivers/spi/spi-thread.h:25:
+static inline void spi_stop_async (struct device *dev, void *t)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1436: FILE: drivers/spi/spi-thread.h:28:
+	extern void __spi_stop_async (struct device *dev, void *t);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1436: FILE: drivers/spi/spi-thread.h:28:
+	extern void __spi_stop_async (struct device *dev, void *t);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1437: FILE: drivers/spi/spi-thread.h:29:
+	__spi_stop_async (dev, t);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1441: FILE: drivers/spi/spi-thread.h:33:
+static inline int spi_queue (struct spi_msg *msg)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1444: FILE: drivers/spi/spi-thread.h:36:
+	extern int __spi_queue (struct spi_msg *msg);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1444: FILE: drivers/spi/spi-thread.h:36:
+	extern int __spi_queue (struct spi_msg *msg);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1456: FILE: include/linux/spi.h:1:
+/*

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#1481: FILE: include/linux/spi.h:26:
+	spinlock_t lock;

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1492: FILE: include/linux/spi.h:37:
+struct spi_bus_driver {
+

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1493: FILE: include/linux/spi.h:38:
+^Iint ^I(*xfer) (struct spi_msg * msg);$

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1493: FILE: include/linux/spi.h:38:
+	int 	(*xfer) (struct spi_msg * msg);

WARNING:SPACING: Unnecessary space before function pointer arguments
#1493: FILE: include/linux/spi.h:38:
+	int 	(*xfer) (struct spi_msg * msg);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1494: FILE: include/linux/spi.h:39:
+^Ivoid ^I(*set_clock) (struct device * bus_device, u32 clock_hz);$

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1494: FILE: include/linux/spi.h:39:
+	void 	(*set_clock) (struct device * bus_device, u32 clock_hz);

WARNING:SPACING: Unnecessary space before function pointer arguments
#1494: FILE: include/linux/spi.h:39:
+	void 	(*set_clock) (struct device * bus_device, u32 clock_hz);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1495: FILE: include/linux/spi.h:40:
+^Ivoid ^I(*reset) (struct device *bus_device, u32 context);$

WARNING:SPACING: Unnecessary space before function pointer arguments
#1495: FILE: include/linux/spi.h:40:
+	void 	(*reset) (struct device *bus_device, u32 context);

WARNING:SPACING: Unnecessary space before function pointer arguments
#1497: FILE: include/linux/spi.h:42:
+	int	(*queue) (struct spi_msg *msg);

ERROR:SPACING: space prohibited after that open parenthesis '('
#1498: FILE: include/linux/spi.h:43:
+	void   *(*start_async)( struct device *bus);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1499: FILE: include/linux/spi.h:44:
+^Ivoid ^I(*stop_async)( struct device *bus, void *async);$

ERROR:SPACING: space prohibited after that open parenthesis '('
#1499: FILE: include/linux/spi.h:44:
+	void 	(*stop_async)( struct device *bus, void *async);

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1521: FILE: include/linux/spi.h:66:
+struct spi_driver {
+

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1522: FILE: include/linux/spi.h:67:
+	int     (*probe)        (struct spi_device * dev);

WARNING:SPACING: Unnecessary space before function pointer arguments
#1522: FILE: include/linux/spi.h:67:
+	int     (*probe)        (struct spi_device * dev);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1523: FILE: include/linux/spi.h:68:
+	int     (*remove)       (struct spi_device * dev);

WARNING:SPACING: Unnecessary space before function pointer arguments
#1523: FILE: include/linux/spi.h:68:
+	int     (*remove)       (struct spi_device * dev);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1524: FILE: include/linux/spi.h:69:
+	void    (*shutdown)     (struct spi_device * dev);

WARNING:SPACING: Unnecessary space before function pointer arguments
#1524: FILE: include/linux/spi.h:69:
+	void    (*shutdown)     (struct spi_device * dev);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1525: FILE: include/linux/spi.h:70:
+	int	(*suspend)	(struct spi_device * dev, pm_message_t pm);

WARNING:SPACING: Unnecessary space before function pointer arguments
#1525: FILE: include/linux/spi.h:70:
+	int	(*suspend)	(struct spi_device * dev, pm_message_t pm);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1526: FILE: include/linux/spi.h:71:
+^Iint ^I(*resume)^I(struct spi_device * dev);$

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1526: FILE: include/linux/spi.h:71:
+	int 	(*resume)	(struct spi_device * dev);

WARNING:SPACING: Unnecessary space before function pointer arguments
#1526: FILE: include/linux/spi.h:71:
+	int 	(*resume)	(struct spi_device * dev);

WARNING:TYPO_SPELLING: 'begining' may be misspelled - perhaps 'beginning'?
#1539: FILE: include/linux/spi.h:84:
+#define SPI_M_CS	0x00000008	/**< CS active level at begining of frame  */
                 	          	                        ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1545: FILE: include/linux/spi.h:90:
+void spimsg_set_ctx (struct spi_msg *message, void *ctx);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1546: FILE: include/linux/spi.h:91:
+void *spimsg_get_ctx (struct spi_msg *message);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1547: FILE: include/linux/spi.h:92:
+int spimsg_complete (struct spi_msg *message, int code);

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#1548: FILE: include/linux/spi.h:93:
+void spimsg_set_clock (struct spi_msg* message, u32 clock);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1548: FILE: include/linux/spi.h:93:
+void spimsg_set_clock (struct spi_msg* message, u32 clock);

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#1549: FILE: include/linux/spi.h:94:
+u32 spimsg_get_clock (struct spi_msg* message);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1549: FILE: include/linux/spi.h:94:
+u32 spimsg_get_clock (struct spi_msg* message);

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#1550: FILE: include/linux/spi.h:95:
+struct spi_device *spimsg_get_spidev (struct spi_msg* message);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1550: FILE: include/linux/spi.h:95:
+struct spi_device *spimsg_get_spidev (struct spi_msg* message);

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#1551: FILE: include/linux/spi.h:96:
+u32 spimsg_get_flags (struct spi_msg* message);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1551: FILE: include/linux/spi.h:96:
+u32 spimsg_get_flags (struct spi_msg* message);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1552: FILE: include/linux/spi.h:97:
+u32 spimsg_get_buffer (struct spi_msg *message, void **buffer);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1553: FILE: include/linux/spi.h:98:
+void spimsg_put_buffer (struct spi_msg *message, void *buffer);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1555: FILE: include/linux/spi.h:100:
+struct spi_msg *spimsg_alloc(struct spi_device *device,
+			   u32 flags,

WARNING:SPACING: Unnecessary space before function pointer arguments
#1558: FILE: include/linux/spi.h:103:
+			   void (*status) (struct spi_msg *,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1561: FILE: include/linux/spi.h:106:
+struct spi_msg *spimsg_chain(struct spi_msg *msg,
+			   u32 flags,

WARNING:SPACING: Unnecessary space before function pointer arguments
#1564: FILE: include/linux/spi.h:109:
+			   void (*status) (struct spi_msg *,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1567: FILE: include/linux/spi.h:112:
+void spimsg_free (struct spi_msg *message);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1570: FILE: include/linux/spi.h:115:
+#if defined (CONFIG_SPI_CHARDEV)

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1571: FILE: include/linux/spi.h:116:
+extern struct class_device *spi_class_device_create(int minor, struct device *device);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1572: FILE: include/linux/spi.h:117:
+extern void spi_class_device_destroy(struct class_device *cdev);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1578: FILE: include/linux/spi.h:123:
+}
+static inline void  spi_class_device_destroy(struct class_device *cdev)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1593: FILE: include/linux/spi.h:138:
+#if defined (CONFIG_SPI_CHARDEV)

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1594: FILE: include/linux/spi.h:139:
+extern int __init spidev_init(void);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1595: FILE: include/linux/spi.h:140:
+extern void __exit spidev_cleanup(void);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1601: FILE: include/linux/spi.h:146:
+}
+static inline void spidev_cleanup(void)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1606: FILE: include/linux/spi.h:151:
+static inline int spi_bus_driver_register (struct spi_bus_driver *bus_driver)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1608: FILE: include/linux/spi.h:153:
+	return driver_register (&bus_driver->driver);

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#1614: FILE: include/linux/spi.h:159:
+struct spi_device* spi_device_add(struct device *parent, char *name, void *private);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1616: FILE: include/linux/spi.h:161:
+extern int spi_driver_add(struct spi_driver *drv);

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#1623: FILE: include/linux/spi.h:168:
+extern void spi_bus_reset(struct device* bus, u32 context);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1623: FILE: include/linux/spi.h:168:
+extern void spi_bus_reset(struct device* bus, u32 context);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1624: FILE: include/linux/spi.h:169:
+extern int spi_write(struct spi_device *dev, u32 flags, char *buf, size_t len);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1625: FILE: include/linux/spi.h:170:
+extern int spi_read(struct spi_device *dev, u32 flags, char *buf, size_t len);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1627: FILE: include/linux/spi.h:172:
+extern int spi_transfer(struct spi_msg *message,

WARNING:SPACING: Unnecessary space before function pointer arguments
#1628: FILE: include/linux/spi.h:173:
+			void (*status) (struct spi_msg *, int));

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#1630: FILE: include/linux/spi.h:175:
+	char* name;

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#1631: FILE: include/linux/spi.h:176:
+	void* params;

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1633: FILE: include/linux/spi.h:178:
+};
+extern int spi_bus_populate(struct device *parent,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1633: FILE: include/linux/spi.h:178:
+extern int spi_bus_populate(struct device *parent,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1634: FILE: include/linux/spi.h:179:
+extern int spi_bus_populate(struct device *parent,
+			     struct spi_device_desc *devices,

WARNING:SPACING: Unnecessary space before function pointer arguments
#1635: FILE: include/linux/spi.h:180:
+			     void (*assign) (struct device *parent,

ERROR:CODE_INDENT: code indent should use tabs where possible
#1636: FILE: include/linux/spi.h:181:
+^I^I^I^I             struct spi_device *,$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1636: FILE: include/linux/spi.h:181:
+			     void (*assign) (struct device *parent,
+				             struct spi_device *,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1639: FILE: include/linux/spi.h:184:
+static inline int spi_w8r8 (struct spi_device *dev, u8 wr)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1646: FILE: include/linux/spi.h:191:
+	msg = spimsg_alloc(dev,
+			SPI_M_WR | SPI_M_CS | SPI_M_DMAUNSAFE,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1653: FILE: include/linux/spi.h:198:
+	msg = spimsg_chain(msg,
+			SPI_M_RD | SPI_M_CSREL | SPI_M_DMAUNSAFE,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1668: FILE: include/linux/spi.h:213:
+static inline int spi_w8r16 (struct spi_device *dev, u8 wr)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1675: FILE: include/linux/spi.h:220:
+	msg = spimsg_alloc(dev,
+			SPI_M_WR | SPI_M_CS | SPI_M_DMAUNSAFE,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1682: FILE: include/linux/spi.h:227:
+	msg = spimsg_chain(msg,
+			SPI_M_RD | SPI_M_CSREL | SPI_M_DMAUNSAFE,

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1713: FILE: drivers/spi/spi-alloc.c:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#1714: FILE: drivers/spi/spi-alloc.c:2:
+ *  linux/drivers/spi/spi-alloc.c

WARNING:INCLUDE_LINUX: Use #include <linux/atomic.h> instead of <asm/atomic.h>
#1733: FILE: drivers/spi/spi-alloc.c:21:
+#include <asm/atomic.h>

CHECK:SPACING: No space is necessary after a cast
#1753: FILE: drivers/spi/spi-alloc.c:41:
+		msg = *(struct spi_msg **) spimsg_pool.cur;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1770: FILE: drivers/spi/spi-alloc.c:58:
+			printk(KERN_ERR "Trying to free entry not from the SPI pool\n");

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1771: FILE: drivers/spi/spi-alloc.c:59:
+			BUG();

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1788: FILE: drivers/spi/spi-alloc.c:76:
+	spimsg_pool.cur = spimsg_pool.vaddr =

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1792: FILE: drivers/spi/spi-alloc.c:80:
+		printk(KERN_ERR "Couldn't allocate large buffer for SPI\n");

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1799: FILE: drivers/spi/spi-alloc.c:87:
+		void **addr = spimsg_pool.vaddr + i*size;
 		                                   ^

WARNING:NEEDLESS_IF: kfree(NULL) is safe and this check is probably not required
#1812: FILE: drivers/spi/spi-alloc.c:100:
+	if (spimsg_pool.vaddr)
+		kfree(spimsg_pool.vaddr);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1819: FILE: drivers/spi/spi-alloc.h:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#1820: FILE: drivers/spi/spi-alloc.h:2:
+ *  linux/linux/drivers/spi/spi-alloc.h

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1837: FILE: drivers/spi/spi-alloc.h:19:
+	extern struct spi_msg *__spimsg_kzalloc(void);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1847: FILE: drivers/spi/spi-alloc.h:29:
+	extern void __spimsg_kfree (struct spi_msg *msg);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1847: FILE: drivers/spi/spi-alloc.h:29:
+	extern void __spimsg_kfree (struct spi_msg *msg);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1857: FILE: drivers/spi/spi-alloc.h:39:
+	extern int __spimsg_init(void);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1867: FILE: drivers/spi/spi-alloc.h:49:
+	extern void __spimsg_exit(void);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000125167.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 48 errors, 170 warnings, 54 checks, 1754 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000125167.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
