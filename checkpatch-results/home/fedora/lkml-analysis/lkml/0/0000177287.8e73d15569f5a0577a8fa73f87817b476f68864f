ERROR:MULTISTATEMENT_MACRO_USE_DO_WHILE: Macros with multiple statements should be enclosed in a do - while loop
#244: FILE: arch/ppc/kernel/head_booke.h:70:
+#define BOOKE_LOAD_EXC_LEVEL_STACK(level)		\
 	mfspr	r8,SPRN_PIR;				\
 	mulli	r8,r8,BOOKE_EXCEPTION_STACK_SIZE;	\
 	neg	r8,r8;					\
+	addis	r8,r8,level##_STACK_TOP@ha;		\
+	addi	r8,r8,level##_STACK_TOP@l

Macros with multiple statements should be enclosed in a
do - while block.  Same should also be the case for macros
starting with `if` to avoid logic defects::

  #define macrofun(a, b, c)                 \
    do {                                    \
            if (a == 5)                     \
                    do_this(b, c);          \
    } while (0)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#macros-enums-and-rtl

ERROR:SPACING: space required after that ',' (ctx:VxV)
#256: FILE: arch/ppc/kernel/head_booke.h:74:
+	addis	r8,r8,level##_STACK_TOP@ha;		\
 	     	  ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required after that ',' (ctx:VxV)
#256: FILE: arch/ppc/kernel/head_booke.h:74:
+	addis	r8,r8,level##_STACK_TOP@ha;		\
 	     	     ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#257: FILE: arch/ppc/kernel/head_booke.h:75:
+	addi	r8,r8,level##_STACK_TOP@l
 	    	  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#257: FILE: arch/ppc/kernel/head_booke.h:75:
+	addi	r8,r8,level##_STACK_TOP@l
 	    	     ^

ERROR:MULTISTATEMENT_MACRO_USE_DO_WHILE: Macros with multiple statements should be enclosed in a do - while loop
#265: FILE: arch/ppc/kernel/head_booke.h:77:
+#define BOOKE_LOAD_EXC_LEVEL_STACK(level)		\
+	lis	r8,level##_STACK_TOP@h;			\
+	ori	r8,r8,level##_STACK_TOP@l

ERROR:SPACING: space required after that ',' (ctx:VxV)
#266: FILE: arch/ppc/kernel/head_booke.h:78:
+	lis	r8,level##_STACK_TOP@h;			\
 	   	  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#267: FILE: arch/ppc/kernel/head_booke.h:79:
+	ori	r8,r8,level##_STACK_TOP@l
 	   	  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#267: FILE: arch/ppc/kernel/head_booke.h:79:
+	ori	r8,r8,level##_STACK_TOP@l
 	   	     ^

ERROR:MULTISTATEMENT_MACRO_USE_DO_WHILE: Macros with multiple statements should be enclosed in a do - while loop
#288: FILE: arch/ppc/kernel/head_booke.h:90:
+#define EXC_LEVEL_EXCEPTION_PROLOG(exc_level, exc_level_srr0, exc_level_srr1) \
+	mtspr	exc_level##_SPRG,r8;					     \
+	BOOKE_LOAD_EXC_LEVEL_STACK(exc_level);/* r8 points to the exc_level stack*/ \
 	stw	r10,GPR10-INT_FRAME_SIZE(r8);				     \
 	stw	r11,GPR11-INT_FRAME_SIZE(r8);				     \
 	mfcr	r10;			/* save CR in r10 for now	   */\
+	mfspr	r11,exc_level_srr1;	/* check whether user or kernel    */\
 	andi.	r11,r11,MSR_PR;						     \
 	mr	r11,r8;							     \
+	mfspr	r8,exc_level##_SPRG;					     \
 	beq	1f;							     \
 	/* COMING FROM USER MODE */					     \
 	mfspr	r11,SPRN_SPRG3;		/* if from user, start at top of   */\

ERROR:SPACING: space required after that ',' (ctx:VxV)
#289: FILE: arch/ppc/kernel/head_booke.h:91:
+	mtspr	exc_level##_SPRG,r8;					     \
 	     	                ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#295: FILE: arch/ppc/kernel/head_booke.h:96:
+	mfspr	r11,exc_level_srr1;	/* check whether user or kernel    */\
 	     	   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#299: FILE: arch/ppc/kernel/head_booke.h:99:
+	mfspr	r8,exc_level##_SPRG;					     \
 	     	  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#308: FILE: arch/ppc/kernel/head_booke.h:115:
+	mfspr	r12,exc_level_srr0;					     \
 	     	   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#311: FILE: arch/ppc/kernel/head_booke.h:117:
+	mfspr	r9,exc_level_srr1;					     \
 	     	  ^

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000177287.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 15 errors, 0 warnings, 0 checks, 326 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000177287.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
