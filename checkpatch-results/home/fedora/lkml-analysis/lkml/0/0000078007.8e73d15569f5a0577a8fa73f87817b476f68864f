CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#252: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1337:
+		pd->port_rcvhdrtail_kvaddr = dma_alloc_coherent(

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#255: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1340:
+		if (!pd->port_rcvhdrtail_kvaddr) {
+			ipath_dev_err(dd, "attempt to allocate 1 page "

WARNING:SPLIT_STRING: quoted string split across lines
#256: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1341:
+			ipath_dev_err(dd, "attempt to allocate 1 page "
+				      "for port %u rcvhdrqtailaddr failed\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:SPACING: No space is necessary after a cast
#279: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1359:
+			   (unsigned long long) phys_hdrqtail);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#281: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1361:
+	}
+	else

`else {` should follow the closing block `}` on the same line.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#323: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1477:
+	 * they don't block SMA and other MAD packets */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

ERROR:SPACING: space required before the open parenthesis '('
#324: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1478:
+	if(!linkcmd || linkcmd == INFINIPATH_IBCC_LINKCMD_INIT) {

ERROR:CODE_INDENT: code indent should use tabs where possible
#328: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1482:
+^I^I                    (unsigned)(dd->ipath_piobcnt2k +$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#328: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1482:
+		ipath_disarm_piobufs(dd, dd->ipath_lastport_piobuf,
+		                    (unsigned)(dd->ipath_piobcnt2k +

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#328: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1482:
+		                    (unsigned)(dd->ipath_piobcnt2k +

ERROR:SPACING: space required before the open parenthesis '('
#404: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1654:
+		if(pd->port_rcvhdrtail_kvaddr) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#406: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1656:
+			dma_free_coherent(&dd->pcidev->dev, PAGE_SIZE,
+					 (void *)pd->port_rcvhdrtail_kvaddr,

ERROR:SPACING: space required before the open parenthesis '('
#411: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1661:
+	if(pd->port_port && pd->port_rcvegrbuf) {

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#412: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1662:
+		unsigned e;

WARNING:SPLIT_STRING: quoted string split across lines
#419: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1669:
+			ipath_cdbg(VERBOSE, "egrbuf free(%p, %lu), "
+				   "chunk %u/%u\n", base,

CHECK:SPACING: No space is necessary after a cast
#420: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1670:
+				   (unsigned long) size,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#423: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1673:
+			dma_free_coherent(&dd->pcidev->dev, size,
+				base, pd->port_rcvegrbuf_phys[e]);

WARNING:LINE_SPACING: Missing a blank line after declarations
#461: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1824:
+		struct ipath_portdata *pd = dd->ipath_pd[port];
+		dd->ipath_pd[port] = NULL;

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#519: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:792:
 
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#615: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:861:
+	ipath_cdbg(VERBOSE, "Wrote port%d egrhead %x from tail regs\n",
+		pd->port_port, head32);

WARNING:TYPO_SPELLING: 'explictly' may be misspelled - perhaps 'explicitly'?
#623: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:870:
+	 * We explictly set the in-memory copy to 0 beforehand, so we don't
 	      ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#638: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:884:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#641: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:887:
+static int ipath_mmap_mem(struct vm_area_struct *vma,
+			     struct ipath_portdata *pd, unsigned len,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#641: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:887:
+			     struct ipath_portdata *pd, unsigned len,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#645: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:891:
+	unsigned pfn = (unsigned long)addr >> PAGE_SHIFT;

ERROR:CODE_INDENT: code indent should use tabs where possible
#650: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:896:
+^I^I         "FAIL on %s: len %lx > %x\n", what,$

ERROR:SPACING: space required before the open parenthesis '('
#656: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:902:
+	if(!write_ok) {

ERROR:SPACING: space required before the open parenthesis '('
#670: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:916:
+	if(ret)

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#674: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:920:
+			 write_ok?'w':'o', ret);
 			         ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#674: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:920:
+			 write_ok?'w':'o', ret);
 			             ^

WARNING:TYPO_SPELLING: 'mmaped' may be misspelled - perhaps 'mapped'?
#676: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:922:
+		ipath_cdbg(VERBOSE, "%s port%u mmaped %lx, %x bytes r%c\n",
 		                               ^^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#677: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:923:
+		ipath_cdbg(VERBOSE, "%s port%u mmaped %lx, %x bytes r%c\n",
+			what, pd->port_port, (unsigned long)addr, len,

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#678: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:924:
+			 write_ok?'w':'o');
 			         ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#678: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:924:
+			 write_ok?'w':'o');
 			             ^

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 24)
#864: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1083:
+	if(!pgaddr || pgaddr >= (1ULL<<40))  {
+			ipath_dev_err(dd, "Bad physical address %llx, start %lx, end %lx\n",

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#864: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1083:
+	if(!pgaddr || pgaddr >= (1ULL<<40))  {
 	                             ^

ERROR:SPACING: space required before the open parenthesis '('
#864: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1083:
+	if(!pgaddr || pgaddr >= (1ULL<<40))  {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#866: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1085:
+			ipath_dev_err(dd, "Bad physical address %llx, start %lx, end %lx\n",
+				(unsigned long long)pgaddr, vma->vm_start, vma->vm_end);

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#878: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1096:
+	if(vma->vm_start & (PAGE_SIZE-1)) {
 	                             ^

ERROR:SPACING: space required before the open parenthesis '('
#878: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1096:
+	if(vma->vm_start & (PAGE_SIZE-1)) {

CHECK:BRACES: braces {} should be used on all arms of this statement
#878: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1096:
+	if(vma->vm_start & (PAGE_SIZE-1)) {
[...]
+	else if (pgaddr == ureg)
[...]
 	else if (pgaddr == pd->port_piobufs)
[...]
 	else if (pgaddr == (u64) pd->port_rcvegr_phys)
[...]
-	else if (pgaddr == (u64) pd->port_rcvhdrq_phys)
[...]
+				     "rcvhdrq");
[...]
+				     pd->port_rcvhdrqtailaddr_phys,
[...]
+		ret = ipath_mmap_mem(vma, pd, PAGE_SIZE, 0,
[...]

ERROR:TRAILING_WHITESPACE: trailing whitespace
#879: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1097:
+^I^Iipath_dev_err(dd, $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#880: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1098:
+		ipath_dev_err(dd, 
+			"vm_start not aligned: %lx, end=%lx phys %lx\n",

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#884: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1102:
+	}
+	else if (pgaddr == ureg)

CHECK:SPACING: No space is necessary after a cast
#892: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1108:
+	else if (pgaddr == (u64) pd->port_rcvhdrq_phys) {

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#898: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1114:
+		unsigned total_size =

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#905: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1121:
+	}
+	else if (pgaddr == (u64)pd->port_rcvhdrqtailaddr_phys)

ERROR:CODE_INDENT: code indent should use tabs where possible
#914: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1129:
+^I^I^I      ^I     dd->ipath_pioavailregs_phys,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#914: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1129:
+^I^I^I      ^I     dd->ipath_pioavailregs_phys,$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#914: FILE: drivers/infiniband/hw/ipath/ipath_file_ops.c:1129:
+		ret = ipath_mmap_mem(vma, pd, PAGE_SIZE, 0,
+			      	     dd->ipath_pioavailregs_phys,

WARNING:LINE_SPACING: Missing a blank line after declarations
#1016: FILE: drivers/infiniband/hw/ipath/ipath_init_chip.c:819:
+		struct ipath_portdata *pd = dd->ipath_pd[0];
+		dd->ipath_pd[0] = NULL;

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#1024: FILE: drivers/infiniband/hw/ipath/ipath_init_chip.c:826:
+			(volatile __le64 *)pd->port_rcvhdrtail_kvaddr;

CHECK:SPACING: No space is necessary after a cast
#1088: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:127:
+			  "ACTIVE\n", (unsigned long long) errs);

WARNING:SPLIT_STRING: quoted string split across lines
#1088: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:127:
+		ipath_dbg("Ignoring packet errors %llx, because link not "
+			  "ACTIVE\n", (unsigned long long) errs);

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1105: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:176:
+	if ((lstate != IPATH_IBSTATE_ARM && lstate != IPATH_IBSTATE_ACTIVE)
+		&& (dd->ipath_flags & (IPATH_LINKARMED | IPATH_LINKACTIVE))) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1107: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:178:
+		dev_info(&dd->pcidev->dev, "Link state changed from %s to %s\n",
+				 (dd->ipath_flags & IPATH_LINKARMED) ? "ARM" : "ACTIVE",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1116: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:187:
+		ipath_disarm_piobufs(dd, dd->ipath_lastport_piobuf,
+							(unsigned)(dd->ipath_piobcnt2k +

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1116: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:187:
+							(unsigned)(dd->ipath_piobcnt2k +

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#1120: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:191:
+	}
+	else if (lstate == IPATH_IBSTATE_INIT || lstate == IPATH_IBSTATE_ARM ||

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1121: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:192:
+	else if (lstate == IPATH_IBSTATE_INIT || lstate == IPATH_IBSTATE_ARM ||
 	    lstate == IPATH_IBSTATE_ACTIVE) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1129: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:415:
+	else if ((errs & E_SUM_LINK_PKTERRS) &&
+	    !(dd->ipath_flags & IPATH_LINKACTIVE)) {

CHECK:SPACING: No space is necessary after a cast
#1138: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:424:
+			  "ACTIVE\n", (unsigned long long) errs);

WARNING:SPLIT_STRING: quoted string split across lines
#1138: FILE: drivers/infiniband/hw/ipath/ipath_intr.c:424:
+		ipath_dbg("Ignoring packet errors %llx, because link not "
+			  "ACTIVE\n", (unsigned long long) errs);

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#1154: FILE: drivers/infiniband/hw/ipath/ipath_kernel.h:64:
+	volatile __le64 *port_rcvhdrtail_kvaddr;

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ipath_devdata *' should also have an identifier name
#1195: FILE: drivers/infiniband/hw/ipath/ipath_kernel.h:574:
+void ipath_free_pddata(struct ipath_devdata *, struct ipath_portdata *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ipath_portdata *' should also have an identifier name
#1195: FILE: drivers/infiniband/hw/ipath/ipath_kernel.h:574:
+void ipath_free_pddata(struct ipath_devdata *, struct ipath_portdata *);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000078007.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 15 errors, 22 warnings, 29 checks, 1087 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000078007.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
