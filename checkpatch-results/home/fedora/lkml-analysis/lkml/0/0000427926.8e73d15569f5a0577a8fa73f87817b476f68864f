WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#14: 
Subject: [PATCH] tmpfs 5/9 shmem_free_block alloced 
                                            ^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#37: FILE: include/linux/shmem_fs.h:17:
+	unsigned long		alloced;    /* data pages allocated to file */
 	             		^^^^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#51: FILE: mm/shmem.c:74:
+	struct shmem_sb_info *sbinfo = SHMEM_SB(inode->i_sb);
+	spin_lock(&sbinfo->stat_lock);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#76: FILE: mm/shmem.c:89:
+ * But normally   info->alloced == inode->i_mapping->nrpages + info->swapped
                         ^^^^^^^

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#77: FILE: mm/shmem.c:90:
+ * So mm freed is info->alloced - (inode->i_mapping->nrpages + info->swapped)
                         ^^^^^^^

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#94: FILE: mm/shmem.c:99:
+	freed = info->alloced - info->swapped - inode->i_mapping->nrpages;
 	              ^^^^^^^

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#97: FILE: mm/shmem.c:102:
+		info->alloced -= freed;
 		      ^^^^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#97: FILE: mm/shmem.c:102:
+		struct shmem_sb_info *sbinfo = SHMEM_SB(inode->i_sb);
+		info->alloced -= freed;

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#101: FILE: mm/shmem.c:105:
+		inode->i_blocks -= freed*BLOCKS_PER_PAGE;
 		                        ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LONG_LINE: line length of 112 exceeds 100 columns
#165: FILE: mm/shmem.c:279:
+shmem_truncate_direct(struct shmem_inode_info *info, swp_entry_t ***dir, unsigned long start, unsigned long len)

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#180: FILE: mm/shmem.c:287:
+	for (ptr = *dir + start/ENTRIES_PER_PAGE; ptr < last; ptr++, off = 0) {
 	                       ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#186: FILE: mm/shmem.c:293:
+			freed_swp = shmem_free_swp(*ptr + off,
+						ENTRIES_PER_PAGE - off);

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#194: FILE: mm/shmem.c:299:
+			info->alloced++;
 			      ^^^^^^^

CHECK:SPACING: No space is necessary after a cast
#195: FILE: mm/shmem.c:300:
+			free_page((unsigned long) *ptr);

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#205: FILE: mm/shmem.c:306:
+		info->alloced++;
 		      ^^^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#222: FILE: mm/shmem.c:335:
+		freed = shmem_free_swp(info->i_direct + index,
+					SHMEM_NR_DIRECT - index);

ERROR:SPACING: spaces required around that '?' (ctx:VxW)
#233: FILE: mm/shmem.c:363:
+	return *base? shmem_truncate_direct(info, base, start, len): 0;
 	            ^

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#233: FILE: mm/shmem.c:363:
+	return *base? shmem_truncate_direct(info, base, start, len): 0;
 	                                                           ^

CHECK:SPACING: No space is necessary after a cast
#253: FILE: mm/shmem.c:375:
+		(void) shmem_truncate_indirect(info, index);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#264: FILE: mm/shmem.c:438:
+	BUG_ON(inode->i_blocks);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#296: FILE: mm/shmem.c:717:
+		info->alloced++;
 		      ^^^^^^^

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000427926.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 2 errors, 13 warnings, 6 checks, 259 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000427926.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
