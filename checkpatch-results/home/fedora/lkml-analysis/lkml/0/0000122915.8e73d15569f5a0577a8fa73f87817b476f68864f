WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#65: 
NOTE:  The version now in the "mm" tree had to change the "hotplug" callback

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#74: FILE: include/linux/spi/spi.h:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#88: FILE: include/linux/spi/spi.h:15:
+ * along with this program; if not, write to the Free Software$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#89: FILE: include/linux/spi/spi.h:16:
+ * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#111: FILE: include/linux/spi/spi.h:38:
+ * ^Ilike eight or 12 bits are common.  In-memory wordsizes are$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#115: FILE: include/linux/spi/spi.h:42:
+ * ^Iinterrupts from this device.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#118: FILE: include/linux/spi/spi.h:45:
+ * ^IFIFO initialization parameters; from board_info.controller_data$

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#136: FILE: include/linux/spi/spi.h:63:
+#define	SPI_MODE_0	(0|0)			/* (original MicroWire) */
        	          	  ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#137: FILE: include/linux/spi/spi.h:64:
+#define	SPI_MODE_1	(0|SPI_CPHA)
        	          	  ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#138: FILE: include/linux/spi/spi.h:65:
+#define	SPI_MODE_2	(SPI_CPOL|0)
        	          	         ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#139: FILE: include/linux/spi/spi.h:66:
+#define	SPI_MODE_3	(SPI_CPOL|SPI_CPHA)
        	          	         ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#185: FILE: include/linux/spi/spi.h:112:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#188: FILE: include/linux/spi/spi.h:115:
+
+

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#204: FILE: include/linux/spi/spi.h:131:
+extern int spi_register_driver(struct spi_driver *sdrv);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#213: FILE: include/linux/spi/spi.h:140:
+
+

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#219: FILE: include/linux/spi/spi.h:146:
+ * ^Igiven SPI controller.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#221: FILE: include/linux/spi/spi.h:148:
+ * ^ISPI slaves, and are numbered from zero to num_chipselects.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#222: FILE: include/linux/spi/spi.h:149:
+ * ^Ieach slave has a chipselect signal, but it's common that not$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#223: FILE: include/linux/spi/spi.h:150:
+ * ^Ievery chipselect is connected to a slave.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#225: FILE: include/linux/spi/spi.h:152:
+ * ^Idevice's SPI controller; protocol code may call this.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#279: FILE: include/linux/spi/spi.h:206:
+	int			(*transfer)(struct spi_device *spi,
+						struct spi_message *mesg);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#308: FILE: include/linux/spi/spi.h:235:
+
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#311: FILE: include/linux/spi/spi.h:238:
+spi_alloc_master(struct device *host, unsigned size);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#313: FILE: include/linux/spi/spi.h:240:
+extern int spi_register_master(struct spi_master *master);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#314: FILE: include/linux/spi/spi.h:241:
+extern void spi_unregister_master(struct spi_master *master);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#316: FILE: include/linux/spi/spi.h:243:
+extern struct spi_master *spi_busnum_to_master(u16 busnum);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#346: FILE: include/linux/spi/spi.h:273:
+ * ^I(optionally) changing the chipselect status, then starting$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#347: FILE: include/linux/spi/spi.h:274:
+ * ^Ithe next transfer or completing this spi_message.$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#385: FILE: include/linux/spi/spi.h:312:
+	unsigned	len;

WARNING:TYPO_SPELLING: 'segements' may be misspelled - perhaps 'segments'?
#396: FILE: include/linux/spi/spi.h:323:
+ * @transfers: the segements of the transaction
                    ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#416: FILE: include/linux/spi/spi.h:343:
+	unsigned		n_transfer;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#434: FILE: include/linux/spi/spi.h:361:
+^Ivoid ^I^I^IFASTCALL((*complete)(void *context));$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#436: FILE: include/linux/spi/spi.h:363:
+	unsigned		actual_length;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#451: FILE: include/linux/spi/spi.h:378:
+static inline struct spi_message *spi_message_alloc(unsigned ntrans, gfp_t flags)

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*m)...) over kzalloc(sizeof(struct spi_message)...)
#455: FILE: include/linux/spi/spi.h:382:
+	m = kzalloc(sizeof(struct spi_message)

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:LINE_SPACING: Please don't use multiple blank lines
#485: FILE: include/linux/spi/spi.h:412:
+
+

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#528: FILE: include/linux/spi/spi.h:455:
+extern int spi_sync(struct spi_device *spi, struct spi_message *message);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#581: FILE: include/linux/spi/spi.h:508:
+extern int spi_write_then_read(struct spi_device *spi,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#582: FILE: include/linux/spi/spi.h:509:
+extern int spi_write_then_read(struct spi_device *spi,
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#582: FILE: include/linux/spi/spi.h:509:
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#583: FILE: include/linux/spi/spi.h:510:
+		u8 *rxbuf, unsigned n_rx);

CHECK:SPACING: No space is necessary after a cast
#622: FILE: include/linux/spi/spi.h:549:
+	status = spi_write_then_read(spi, &cmd, 1, (u8 *) &result, 2);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#661: FILE: include/linux/spi/spi.h:588:
+
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#681: FILE: include/linux/spi/spi.h:608:
+spi_register_board_info(struct spi_board_info const *info, unsigned n);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#685: FILE: include/linux/spi/spi.h:612:
+spi_register_board_info(struct spi_board_info const *info, unsigned n)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#689: FILE: include/linux/spi/spi.h:616:
+
+

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#709: FILE: drivers/spi/spi.c:1:
+/*

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#725: FILE: drivers/spi/spi.c:17:
+ * along with this program; if not, write to the Free Software$

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#726: FILE: drivers/spi/spi.c:18:
+ * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#736: FILE: drivers/spi/spi.c:28:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#778: FILE: drivers/spi/spi.c:70:
+static int spi_hotplug(struct device *dev, char **envp, int num_envp,
+		char *buffer, int buffer_size)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#841: FILE: drivers/spi/spi.c:133:
+
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#886: FILE: drivers/spi/spi.c:178:
+	unsigned		n_board_info;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#893: FILE: drivers/spi/spi.c:185:
+
+

WARNING:SIZEOF_PARENTHESIS: sizeof *proxy should be sizeof(*proxy)
#912: FILE: drivers/spi/spi.c:204:
+	proxy = kzalloc(sizeof *proxy, GFP_KERNEL);

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#914: FILE: drivers/spi/spi.c:206:
+	if (!proxy) {
+		dev_err(dev, "can't alloc dev for cs%d\n",

WARNING:SIZEOF_PARENTHESIS: sizeof proxy->dev.bus_id should be sizeof(proxy->dev.bus_id)
#924: FILE: drivers/spi/spi.c:216:
+	snprintf(proxy->dev.bus_id, sizeof proxy->dev.bus_id,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#925: FILE: drivers/spi/spi.c:217:
+	snprintf(proxy->dev.bus_id, sizeof proxy->dev.bus_id,
+			"%s.%u", master->cdev.class_id,

CHECK:SPACING: No space is necessary after a cast
#929: FILE: drivers/spi/spi.c:221:
+	proxy->dev.platform_data = (void *) chip->platform_data;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#938: FILE: drivers/spi/spi.c:230:
+		dev_dbg(dev, "can't %s %s, status %d\n",
+				"setup", proxy->dev.bus_id, status);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#948: FILE: drivers/spi/spi.c:240:
+		dev_dbg(dev, "can't %s %s, status %d\n",
+				"add", proxy->dev.bus_id, status);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#976: FILE: drivers/spi/spi.c:268:
+spi_register_board_info(struct spi_board_info const *info, unsigned n)

WARNING:SIZEOF_PARENTHESIS: sizeof *info should be sizeof(*info)
#980: FILE: drivers/spi/spi.c:272:
+	bi = kmalloc(sizeof(*bi) + n * sizeof *info, GFP_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof *info should be sizeof(*info)
#984: FILE: drivers/spi/spi.c:276:
+	memcpy(bi->board_info, info, n * sizeof *info);

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#993: FILE: drivers/spi/spi.c:285:
+/* FIXME someone should add support for a __setup("spi", ...) that

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1006: FILE: drivers/spi/spi.c:298:
+		unsigned		n;

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1016: FILE: drivers/spi/spi.c:308:
+			if (chip->chip_select >= master->num_chipselect
+					&& master->num_chipselect) {

CHECK:SPACING: No space is necessary after a cast
#1022: FILE: drivers/spi/spi.c:314:
+			(void) spi_new_device(master, chip);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1044: FILE: drivers/spi/spi.c:336:
+
+

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1049: FILE: drivers/spi/spi.c:341:
+ * ^Imemory is in the class_data field of the returned class_device,$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1064: FILE: drivers/spi/spi.c:356:
+spi_alloc_master(struct device *dev, unsigned size)

WARNING:SIZEOF_PARENTHESIS: sizeof *master should be sizeof(*master)
#1071: FILE: drivers/spi/spi.c:363:
+	master = kzalloc(size + sizeof *master, SLAB_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof master->cdev.class_id should be sizeof(master->cdev.class_id)
#1123: FILE: drivers/spi/spi.c:415:
+	snprintf(master->cdev.class_id, sizeof master->cdev.class_id,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1124: FILE: drivers/spi/spi.c:416:
+	snprintf(master->cdev.class_id, sizeof master->cdev.class_id,
+		"spi%u", master->bus_num);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1129: FILE: drivers/spi/spi.c:421:
+	dev_dbg(dev, "registered master %s%s\n", master->cdev.class_id,
+			dynamic ? " (dynamic)" : "");

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1139: FILE: drivers/spi/spi.c:431:
+
+

CHECK:SPACING: No space is necessary after a cast
#1158: FILE: drivers/spi/spi.c:450:
+	(void) device_for_each_child(master->cdev.dev, NULL, __unregister);

WARNING:SIZEOF_PARENTHESIS: sizeof name should be sizeof(name)
#1179: FILE: drivers/spi/spi.c:471:
+		snprintf(name, sizeof name, "spi%u", bus_num);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1188: FILE: drivers/spi/spi.c:480:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1251: FILE: drivers/spi/spi.c:543:
+int spi_write_then_read(struct spi_device *spi,
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1251: FILE: drivers/spi/spi.c:543:
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1252: FILE: drivers/spi/spi.c:544:
+		u8 *rxbuf, unsigned n_rx)

CHECK:BRACES: braces {} should be used on all arms of this statement
#1269: FILE: drivers/spi/spi.c:561:
+	if (down_trylock(&lock)) {
[...]
+	} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1273: FILE: drivers/spi/spi.c:565:
+	} else

WARNING:SIZEOF_PARENTHESIS: sizeof x should be sizeof(x)
#1276: FILE: drivers/spi/spi.c:568:
+	memset(x, 0, sizeof x);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1377: FILE: drivers/spi/Kconfig:33:
+^I  $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:DEPRECATED_VARIABLE: Use of EXTRA_CFLAGS is deprecated, please use `ccflags-y instead.
#1476: FILE: drivers/spi/Makefile:6:
+EXTRA_CFLAGS += -DDEBUG

EXTRA_{A,C,CPP,LD}FLAGS are deprecated and should be replaced by the new
flags added via commit f77bf01425b1 ("kbuild: introduce ccflags-y,
asflags-y and ldflags-y").

The following conversion scheme maybe used::

  EXTRA_AFLAGS    ->  asflags-y
  EXTRA_CFLAGS    ->  ccflags-y
  EXTRA_CPPFLAGS  ->  cppflags-y
  EXTRA_LDFLAGS   ->  ldflags-y

See:

  1. https://lore.kernel.org/lkml/20070930191054.GA15876@uranus.ravnborg.org/
  2. https://lore.kernel.org/lkml/1313384834-24433-12-git-send-email-lacombar@gmail.com/
  3. https://www.kernel.org/doc/html/latest/kbuild/makefiles.html#compilation-flags

WARNING:REPEATED_WORD: Possible repeated word: 'use'
#1751: FILE: Documentation/spi/spi-summary:255:
+For those cases you might need to use use spi_busnum_to_master() to look

WARNING:TYPO_SPELLING: 'autmatically' may be misspelled - perhaps 'automatically'?
#1779: FILE: Documentation/spi/spi-summary:283:
+The driver core will autmatically attempt to bind this driver to any SPI
                      ^^^^^^^^^^^^

WARNING:REPEATED_WORD: Possible repeated word: 'of'
#1807: FILE: Documentation/spi/spi-summary:311:
+  - An spi_message is a sequence of of protocol operations, executed

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1867: FILE: Documentation/spi/spi-summary:371:
+    $

WARNING:TYPO_SPELLING: 'acess' may be misspelled - perhaps 'access'?
#1919: FILE: Documentation/spi/spi-summary:423:
+for low-frequency sensor acess might be fine using synchronous PIO.
                          ^^^^^

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000122915.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 6 errors, 45 warnings, 41 checks, 1845 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000122915.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
