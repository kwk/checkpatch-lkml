WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#70: 
  reverting to kmalloc if the pre-allocated DMA-safe buffer isn't available.

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#94: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:REPEATED_WORD: Possible repeated word: 'use'
#351: FILE: Documentation/spi/spi-summary:253:
+For those cases you might need to use use spi_busnum_to_master() to look

WARNING:TYPO_SPELLING: 'autmatically' may be misspelled - perhaps 'automatically'?
#376: FILE: Documentation/spi/spi-summary:278:
+The SPI core will autmatically attempt to bind this driver to any SPI
                   ^^^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:REPEATED_WORD: Possible repeated word: 'of'
#400: FILE: Documentation/spi/spi-summary:302:
+  - An spi_message is a sequence of of protocol operations, executed

WARNING:TYPO_SPELLING: 'acess' may be misspelled - perhaps 'access'?
#494: FILE: Documentation/spi/spi-summary:396:
+for low-frequency sensor acess might be fine using synchronous PIO.
                          ^^^^^

WARNING:DEPRECATED_VARIABLE: Use of EXTRA_CFLAGS is deprecated, please use `ccflags-y instead.
#646: FILE: drivers/spi/Makefile:6:
+EXTRA_CFLAGS += -DDEBUG

EXTRA_{A,C,CPP,LD}FLAGS are deprecated and should be replaced by the new
flags added via commit f77bf01425b1 ("kbuild: introduce ccflags-y,
asflags-y and ldflags-y").

The following conversion scheme maybe used::

  EXTRA_AFLAGS    ->  asflags-y
  EXTRA_CFLAGS    ->  ccflags-y
  EXTRA_CPPFLAGS  ->  cppflags-y
  EXTRA_LDFLAGS   ->  ldflags-y

See:

  1. https://lore.kernel.org/lkml/20070930191054.GA15876@uranus.ravnborg.org/
  2. https://lore.kernel.org/lkml/1313384834-24433-12-git-send-email-lacombar@gmail.com/
  3. https://www.kernel.org/doc/html/latest/kbuild/makefiles.html#compilation-flags

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#670: FILE: drivers/spi/spi.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#686: FILE: drivers/spi/spi.c:17:
+ * along with this program; if not, write to the Free Software$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#687: FILE: drivers/spi/spi.c:18:
+ * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#697: FILE: drivers/spi/spi.c:28:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#743: FILE: drivers/spi/spi.c:74:
+static int spi_uevent(struct device *dev, char **envp, int num_envp,
+		char *buffer, int buffer_size)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#817: FILE: drivers/spi/spi.c:148:
+	unsigned		n_board_info;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#824: FILE: drivers/spi/spi.c:155:
+
+

WARNING:SIZEOF_PARENTHESIS: sizeof *proxy should be sizeof(*proxy)
#843: FILE: drivers/spi/spi.c:174:
+	proxy = kzalloc(sizeof *proxy, GFP_KERNEL);

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#845: FILE: drivers/spi/spi.c:176:
+	if (!proxy) {
+		dev_err(dev, "can't alloc dev for cs%d\n",

WARNING:SIZEOF_PARENTHESIS: sizeof proxy->dev.bus_id should be sizeof(proxy->dev.bus_id)
#855: FILE: drivers/spi/spi.c:186:
+	snprintf(proxy->dev.bus_id, sizeof proxy->dev.bus_id,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#856: FILE: drivers/spi/spi.c:187:
+	snprintf(proxy->dev.bus_id, sizeof proxy->dev.bus_id,
+			"%s.%u", master->cdev.class_id,

CHECK:SPACING: No space is necessary after a cast
#860: FILE: drivers/spi/spi.c:191:
+	proxy->dev.platform_data = (void *) chip->platform_data;

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#869: FILE: drivers/spi/spi.c:200:
+		dev_dbg(dev, "can't %s %s, status %d\n",
+				"setup", proxy->dev.bus_id, status);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#879: FILE: drivers/spi/spi.c:210:
+		dev_dbg(dev, "can't %s %s, status %d\n",
+				"add", proxy->dev.bus_id, status);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#905: FILE: drivers/spi/spi.c:236:
+spi_register_board_info(struct spi_board_info const *info, unsigned n)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#909: FILE: drivers/spi/spi.c:240:
+	bi = kmalloc (sizeof (*bi) + n * sizeof (*info), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#909: FILE: drivers/spi/spi.c:240:
+	bi = kmalloc (sizeof (*bi) + n * sizeof (*info), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#909: FILE: drivers/spi/spi.c:240:
+	bi = kmalloc (sizeof (*bi) + n * sizeof (*info), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#913: FILE: drivers/spi/spi.c:244:
+	memcpy(bi->board_info, info, n * sizeof (*info));

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#922: FILE: drivers/spi/spi.c:253:
+/* FIXME someone should add support for a __setup("spi", ...) that

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#935: FILE: drivers/spi/spi.c:266:
+		unsigned		n;

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#945: FILE: drivers/spi/spi.c:276:
+			if (chip->chip_select >= master->num_chipselect
+					&& master->num_chipselect) {

CHECK:SPACING: No space is necessary after a cast
#951: FILE: drivers/spi/spi.c:282:
+			(void) spi_new_device(master, chip);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#975: FILE: drivers/spi/spi.c:306:
+
+

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#980: FILE: drivers/spi/spi.c:311:
+ * ^Imemory in the class_data field of the returned class_device$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#994: FILE: drivers/spi/spi.c:325:
+spi_alloc_master(struct device *dev, unsigned size)

WARNING:SIZEOF_PARENTHESIS: sizeof *master should be sizeof(*master)
#998: FILE: drivers/spi/spi.c:329:
+	master = kzalloc(size + sizeof *master, SLAB_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof master->cdev.class_id should be sizeof(master->cdev.class_id)
#1044: FILE: drivers/spi/spi.c:375:
+	snprintf(master->cdev.class_id, sizeof master->cdev.class_id,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1045: FILE: drivers/spi/spi.c:376:
+	snprintf(master->cdev.class_id, sizeof master->cdev.class_id,
+		"spi%u", master->bus_num);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1052: FILE: drivers/spi/spi.c:383:
+	dev_dbg(dev, "registered master %s%s\n", master->cdev.class_id,
+			dynamic ? " (dynamic)" : "");

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1062: FILE: drivers/spi/spi.c:393:
+
+

CHECK:SPACING: No space is necessary after a cast
#1082: FILE: drivers/spi/spi.c:413:
+	(void) device_for_each_child(master->cdev.dev, NULL, __unregister);

WARNING:SIZEOF_PARENTHESIS: sizeof name should be sizeof(name)
#1101: FILE: drivers/spi/spi.c:432:
+		snprintf(name, sizeof name, "spi%u", bus_num);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1110: FILE: drivers/spi/spi.c:441:
+
+

WARNING:REPEATED_WORD: Possible repeated word: 'use'
#1165: FILE: drivers/spi/spi.c:496:
+ * large transfers should use use spi_{async,sync}() calls with

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1169: FILE: drivers/spi/spi.c:500:
+int spi_write_then_read(struct spi_device *spi,
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1169: FILE: drivers/spi/spi.c:500:
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1170: FILE: drivers/spi/spi.c:501:
+		u8 *rxbuf, unsigned n_rx)

CHECK:BRACES: braces {} should be used on all arms of this statement
#1187: FILE: drivers/spi/spi.c:518:
+	if (down_trylock(&lock)) {
[...]
+	} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1191: FILE: drivers/spi/spi.c:522:
+	} else

WARNING:SIZEOF_PARENTHESIS: sizeof x should be sizeof(x)
#1194: FILE: drivers/spi/spi.c:525:
+	memset(x, 0, sizeof x);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1233: FILE: drivers/spi/spi.c:564:
+}
+/* board_info is normally registered in arch_initcall(),

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1244: FILE: include/linux/spi/spi.h:1:
+/*

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#1258: FILE: include/linux/spi/spi.h:15:
+ * along with this program; if not, write to the Free Software$

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#1259: FILE: include/linux/spi/spi.h:16:
+ * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1286: FILE: include/linux/spi/spi.h:43:
+ * ^Ilike eight or 12 bits are common.  In-memory wordsizes are$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1290: FILE: include/linux/spi/spi.h:47:
+ * ^Iinterrupts from this device.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1293: FILE: include/linux/spi/spi.h:50:
+ * ^Ias FIFO initialization parameters; from board_info.controller_data$

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1311: FILE: include/linux/spi/spi.h:68:
+#define	SPI_MODE_0	(0|0)
        	          	  ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1312: FILE: include/linux/spi/spi.h:69:
+#define	SPI_MODE_1	(0|SPI_CPHA)
        	          	  ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1313: FILE: include/linux/spi/spi.h:70:
+#define	SPI_MODE_2	(SPI_CPOL|0)
        	          	         ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1314: FILE: include/linux/spi/spi.h:71:
+#define	SPI_MODE_3	(SPI_CPOL|SPI_CPHA)
        	          	         ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1359: FILE: include/linux/spi/spi.h:116:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1362: FILE: include/linux/spi/spi.h:119:
+
+

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1367: FILE: include/linux/spi/spi.h:124:
+ * ^Igiven SPI controller.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1369: FILE: include/linux/spi/spi.h:126:
+ * ^ISPI slaves, and are numbered from zero to num_chipselects.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1370: FILE: include/linux/spi/spi.h:127:
+ * ^Ieach slave has a chipselect signal, but it's common that not$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1371: FILE: include/linux/spi/spi.h:128:
+ * ^Ievery chipselect is connected to a slave.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1373: FILE: include/linux/spi/spi.h:130:
+ * ^Idevice's SPI controller; protocol code may call this.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1427: FILE: include/linux/spi/spi.h:184:
+	int			(*transfer)(struct spi_device *spi,
+						struct spi_message *mesg);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1435: FILE: include/linux/spi/spi.h:192:
+spi_alloc_master(struct device *host, unsigned size);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1437: FILE: include/linux/spi/spi.h:194:
+extern int spi_register_master(struct spi_master *master);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1438: FILE: include/linux/spi/spi.h:195:
+extern void spi_unregister_master(struct spi_master *master);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1440: FILE: include/linux/spi/spi.h:197:
+extern struct spi_master *spi_busnum_to_master(u16 busnum);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1470: FILE: include/linux/spi/spi.h:227:
+ * ^I(optionally) changing the chipselect status, then starting$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1471: FILE: include/linux/spi/spi.h:228:
+ * ^Ithe next transfer or completing this spi_message.$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1503: FILE: include/linux/spi/spi.h:260:
+	unsigned	len;

WARNING:TYPO_SPELLING: 'segements' may be misspelled - perhaps 'segments'?
#1514: FILE: include/linux/spi/spi.h:271:
+ * @transfers: the segements of the transaction
                    ^^^^^^^^^

WARNING:TYPO_SPELLING: 'transferd' may be misspelled - perhaps 'transferred'?
#1521: FILE: include/linux/spi/spi.h:278:
+ * @actual_length: how many bytes were transferd
                                        ^^^^^^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1528: FILE: include/linux/spi/spi.h:285:
+	unsigned		n_transfer;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1546: FILE: include/linux/spi/spi.h:303:
+^Ivoid ^I^I^IFASTCALL((*complete)(void *context));$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1548: FILE: include/linux/spi/spi.h:305:
+	unsigned		actual_length;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1574: FILE: include/linux/spi/spi.h:331:
+
+

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1607: FILE: include/linux/spi/spi.h:364:
+extern int spi_sync(struct spi_device *spi, struct spi_message *message);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1661: FILE: include/linux/spi/spi.h:418:
+extern int spi_write_then_read(struct spi_device *spi,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1662: FILE: include/linux/spi/spi.h:419:
+extern int spi_write_then_read(struct spi_device *spi,
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1662: FILE: include/linux/spi/spi.h:419:
+		const u8 *txbuf, unsigned n_tx,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1663: FILE: include/linux/spi/spi.h:420:
+		u8 *rxbuf, unsigned n_rx);

CHECK:SPACING: No space is necessary after a cast
#1702: FILE: include/linux/spi/spi.h:459:
+	status = spi_write_then_read(spi, &cmd, 1, (u8 *) &result, 2);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1741: FILE: include/linux/spi/spi.h:498:
+
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1761: FILE: include/linux/spi/spi.h:518:
+spi_register_board_info(struct spi_board_info const *info, unsigned n);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1765: FILE: include/linux/spi/spi.h:522:
+spi_register_board_info(struct spi_board_info const *info, unsigned n)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1769: FILE: include/linux/spi/spi.h:526:
+
+

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000115376.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 4 errors, 49 warnings, 37 checks, 1648 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000115376.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
