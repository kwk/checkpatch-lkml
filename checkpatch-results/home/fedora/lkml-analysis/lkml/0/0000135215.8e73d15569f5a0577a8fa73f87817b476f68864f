CHECK:INVALID_UTF8: Invalid UTF-8, patch and commit message should be encoded in UTF-8
#31: 
keeping tracks of data pages written to the swap.  The structure itself is
                                                  ^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#148: FILE: kernel/power/swsusp.c:286:
+	unsigned n = 0;

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'alloc_swap_map', this function's name, in a string
#153: FILE: kernel/power/swsusp.c:291:
+	pr_debug("alloc_swap_map(): nr_pages = %d\n", nr_pages);

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#225: FILE: kernel/power/swsusp.c:349:
+		if ((error = write_page((unsigned long)swap_map, &entry)))

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#241: FILE: kernel/power/swsusp.c:364:
+	unsigned k;

ERROR:CODE_INDENT: code indent should use tabs where possible
#263: FILE: kernel/power/swsusp.c:386:
+                                        struct swap_map_page *map)$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#263: FILE: kernel/power/swsusp.c:386:
+                                        struct swap_map_page *map)$

ERROR:CODE_INDENT: code indent should use tabs where possible
#270: FILE: kernel/power/swsusp.c:393:
+                                      unsigned long addr)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#270: FILE: kernel/power/swsusp.c:393:
+                                      unsigned long addr)$

ERROR:CODE_INDENT: code indent should use tabs where possible
#291: FILE: kernel/power/swsusp.c:414:
+                           struct swap_map_handle *handle,$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#291: FILE: kernel/power/swsusp.c:414:
+                           struct swap_map_handle *handle,$

ERROR:CODE_INDENT: code indent should use tabs where possible
#292: FILE: kernel/power/swsusp.c:415:
+                           unsigned int nr_pages)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#292: FILE: kernel/power/swsusp.c:415:
+                           unsigned int nr_pages)$

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#298: FILE: kernel/power/swsusp.c:421:
+	printk("Saving image data pages (%u pages) ...     ", nr_pages);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#303: FILE: kernel/power/swsusp.c:426:
+	for_each_pbe (p, pblist) {

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#308: FILE: kernel/power/swsusp.c:431:
+			printk("\b\b\b\b%3d%%", nr_pages / m);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#313: FILE: kernel/power/swsusp.c:435:
+		printk("\b\b\b\bdone\n");

ERROR:CODE_INDENT: code indent should use tabs where possible
#355: FILE: kernel/power/swsusp.c:488:
+                                              struct pbe *pbe)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#355: FILE: kernel/power/swsusp.c:488:
+                                              struct pbe *pbe)$

ERROR:CODE_INDENT: code indent should use tabs where possible
#382: FILE: kernel/power/swsusp.c:508:
+                               struct swap_map_handle *handle)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#382: FILE: kernel/power/swsusp.c:508:
+                               struct swap_map_handle *handle)$

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#395: FILE: kernel/power/swsusp.c:515:
+	printk("Saving image metadata ... ");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#412: FILE: kernel/power/swsusp.c:529:
+		printk("done (%u pages saved)\n", n);

CHECK:CAMELCASE: Avoid CamelCase: <Free_image_entries>
#450: FILE: kernel/power/swsusp.c:577:
+		goto Free_image_entries;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <Free_map_entries>
#455: FILE: kernel/power/swsusp.c:582:
+		goto Free_map_entries;

CHECK:CAMELCASE: Avoid CamelCase: <Free_swap_map>
#464: FILE: kernel/power/swsusp.c:588:
+Free_swap_map:

ERROR:CODE_INDENT: code indent should use tabs where possible
#531: FILE: kernel/power/swsusp.c:807:
+                                      swp_entry_t start)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#531: FILE: kernel/power/swsusp.c:807:
+                                      swp_entry_t start)$

ERROR:CODE_INDENT: code indent should use tabs where possible
#607: FILE: kernel/power/swsusp.c:922:
+                           struct swap_map_handle *handle,$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#607: FILE: kernel/power/swsusp.c:922:
+                           struct swap_map_handle *handle,$

ERROR:CODE_INDENT: code indent should use tabs where possible
#608: FILE: kernel/power/swsusp.c:923:
+                           unsigned int nr_pages)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#608: FILE: kernel/power/swsusp.c:923:
+                           unsigned int nr_pages)$

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#634: FILE: kernel/power/swsusp.c:931:
+	printk("Loading image data pages (%u pages) ...     ", nr_pages);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#646: FILE: kernel/power/swsusp.c:943:
+			printk("\b\b\b\b%3d%%", nr_pages / m);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#651: FILE: kernel/power/swsusp.c:947:
+		printk("\b\b\b\bdone\n");

ERROR:CODE_INDENT: code indent should use tabs where possible
#663: FILE: kernel/power/swsusp.c:957:
+                                                struct pbe *pbe)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#663: FILE: kernel/power/swsusp.c:957:
+                                                struct pbe *pbe)$

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#701: FILE: kernel/power/swsusp.c:980:
+	printk("Loading image metadata ... ");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#718: FILE: kernel/power/swsusp.c:994:
+		printk("done (%u pages loaded)\n", n);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#839: FILE: kernel/power/power.h:67:
+extern unsigned int snapshot_nr_pages(void);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#840: FILE: kernel/power/power.h:68:
+extern struct pbe *snapshot_pblist(void);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#841: FILE: kernel/power/power.h:69:
+extern void snapshot_pblist_set(struct pbe *pblist);

ERROR:GLOBAL_INITIALISERS: do not initialise globals to NULL
#850: FILE: kernel/power/snapshot.c:36:
+struct pbe *pagedir_nosave = NULL;

Global variables should not be initialized explicitly to
0 (or NULL, false, etc.).  Your compiler (or rather your
loader, which is responsible for zeroing out the relevant
sections) automatically does it for you.

ERROR:GLOBAL_INITIALISERS: do not initialise globals to 0
#851: FILE: kernel/power/snapshot.c:37:
+unsigned int nr_copy_pages = 0;

ERROR:CODE_INDENT: code indent should use tabs where possible
#878: FILE: kernel/power/snapshot.c:337:
+        } else$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#878: FILE: kernel/power/snapshot.c:337:
+        } else$

CHECK:BRACES: Unbalanced braces around else statement
#878: FILE: kernel/power/snapshot.c:337:
+        } else

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:CODE_INDENT: code indent should use tabs where possible
#879: FILE: kernel/power/snapshot.c:338:
+        ^Icreate_pbe_list(pblist, nr_pages);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#879: FILE: kernel/power/snapshot.c:338:
+        ^Icreate_pbe_list(pblist, nr_pages);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#879: FILE: kernel/power/snapshot.c:338:
+        ^Icreate_pbe_list(pblist, nr_pages);$

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#928: FILE: kernel/power/disk.c:28:
+extern int swsusp_write(struct pbe *pblist, unsigned int nr_pages);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#931: FILE: kernel/power/disk.c:30:
+extern int swsusp_read(struct pbe **pblist_ptr);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#949: FILE: kernel/power/disk.c:250:
+	if ((error = swsusp_read(&pagedir_nosave))) {

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000135215.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 16 errors, 29 warnings, 8 checks, 856 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000135215.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
