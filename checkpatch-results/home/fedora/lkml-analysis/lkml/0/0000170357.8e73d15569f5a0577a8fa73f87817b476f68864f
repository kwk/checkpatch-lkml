WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#27: 
diff -ruNp 620-userui-header.patch-old/include/linux/netlink.h 620-userui-header.patch-new/include/linux/netlink.h

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#42: FILE: kernel/power/suspend2_core/ui.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:TRAILING_WHITESPACE: trailing whitespace
#81: FILE: kernel/power/suspend2_core/ui.c:40:
+ $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#81: FILE: kernel/power/suspend2_core/ui.c:40:
+ $

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#99: FILE: kernel/power/suspend2_core/ui.c:58:
+static int lastheader_message_len = 0;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#117: FILE: kernel/power/suspend2_core/ui.c:76:
+void s2_userui_message(unsigned long section, unsigned long level,

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#118: FILE: kernel/power/suspend2_core/ui.c:77:
+void s2_userui_message(unsigned long section, unsigned long level,
+		int normally_logged,

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#120: FILE: kernel/power/suspend2_core/ui.c:79:
+unsigned long userui_update_progress(unsigned long value, unsigned long maximum,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#121: FILE: kernel/power/suspend2_core/ui.c:80:
+unsigned long userui_update_progress(unsigned long value, unsigned long maximum,
+		const char *fmt, va_list args);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#122: FILE: kernel/power/suspend2_core/ui.c:81:
+void userui_prepare_console(void);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#123: FILE: kernel/power/suspend2_core/ui.c:82:
+void userui_cleanup_console(void);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#125: FILE: kernel/power/suspend2_core/ui.c:84:
+/* $

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#131: FILE: kernel/power/suspend2_core/ui.c:90:
+	while (next_free_userui_skb+1 < NUM_USERUI_SKBS) {
 	                           ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#132: FILE: kernel/power/suspend2_core/ui.c:91:
+		userui_skbs[next_free_userui_skb+1] =
 		                                ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#134: FILE: kernel/power/suspend2_core/ui.c:93:
+		if (userui_skbs[next_free_userui_skb+1])
 		                                    ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#141: FILE: kernel/power/suspend2_core/ui.c:100:
+/* $

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#145: FILE: kernel/power/suspend2_core/ui.c:104:
+static struct sk_buff * userui_get_skb(void)

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#148: FILE: kernel/power/suspend2_core/ui.c:107:
+	struct sk_buff *skb;
+	if (next_free_userui_skb == -1)

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:BRACES: braces {} should be used on all arms of this statement
#148: FILE: kernel/power/suspend2_core/ui.c:107:
+	if (next_free_userui_skb == -1)
[...]
+	else {
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#150: FILE: kernel/power/suspend2_core/ui.c:109:
+	else {

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#161: FILE: kernel/power/suspend2_core/ui.c:120:
+static void userui_notify_userspace(void* data)

WARNING:LINE_SPACING: Missing a blank line after declarations
#164: FILE: kernel/power/suspend2_core/ui.c:123:
+	struct task_struct *t;
+	read_lock(&tasklist_lock);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#165: FILE: kernel/power/suspend2_core/ui.c:124:
+	if ((t = find_task_by_pid(userui_pid)))

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#172: FILE: kernel/power/suspend2_core/ui.c:131:
+static void userui_send_message(int type, void* params, size_t len)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#180: FILE: kernel/power/suspend2_core/ui.c:139:
+		printk("suspend_userui: Can't allocate skb!\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#211: FILE: kernel/power/suspend2_core/ui.c:170:
+	struct task_struct *t;
+	userui_pid = pid;

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#214: FILE: kernel/power/suspend2_core/ui.c:173:
+	if ((t = find_task_by_pid(userui_pid)) == NULL) {

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#231: FILE: kernel/power/suspend2_core/ui.c:190:
+static int is_debugging = 0;

WARNING:LINE_SPACING: Missing a blank line after declarations
#245: FILE: kernel/power/suspend2_core/ui.c:204:
+	int ret = 0;
+	if (version != SUSPEND_USERUI_INTERFACE_VERSION) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#246: FILE: kernel/power/suspend2_core/ui.c:205:
+		printk("suspend_userui: Userspace process using invalid interface version\n");

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#272: FILE: kernel/power/suspend2_core/ui.c:231:
+	if (n < 1) n = 1;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#311: FILE: kernel/power/suspend2_core/ui.c:270:
+	data = (int*)NLMSG_DATA(nlh);

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#313: FILE: kernel/power/suspend2_core/ui.c:272:
+	switch (type) {
+		case USERUI_MSG_NOFREEZE_ME:
[...]
+		case USERUI_MSG_READY:
[...]
+		case USERUI_MSG_ABORT:
[...]
+		case USERUI_MSG_GET_STATE:
[...]
+		case USERUI_MSG_SET_STATE:
[...]
+		case USERUI_MSG_SET_PROGRESS_GRANULARITY:
[...]
+		case USERUI_MSG_SPACE:
[...]
+		case USERUI_MSG_GET_DEBUGGING:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#315: FILE: kernel/power/suspend2_core/ui.c:274:
+			if ((*errp = userui_nl_set_nofreeze(nlh->nlmsg_pid)))

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#323: FILE: kernel/power/suspend2_core/ui.c:282:
+			if ((*errp = userui_nl_ready(*data)))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#331: FILE: kernel/power/suspend2_core/ui.c:290:
+			userui_send_message(USERUI_MSG_GET_STATE, &suspend_action,
+					sizeof(suspend_action));

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#338: FILE: kernel/power/suspend2_core/ui.c:297:
+			if ((*errp = userui_nl_set_state(*data)))

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#346: FILE: kernel/power/suspend2_core/ui.c:305:
+			if ((*errp = userui_nl_set_progress_granularity(*data)))

CHECK:SPACING: No space is necessary after a cast
#368: FILE: kernel/power/suspend2_core/ui.c:327:
+		nlh = (struct nlmsghdr *) skb->data;

CHECK:BRACES: braces {} should be used on all arms of this statement
#375: FILE: kernel/power/suspend2_core/ui.c:334:
+		if (userui_user_rcv_msg(skb, nlh, &err) < 0) {
[...]
+		} else if (nlh->nlmsg_flags & NLM_F_ACK)
[...]

WARNING:LINE_SPACING: Missing a blank line after declarations
#391: FILE: kernel/power/suspend2_core/ui.c:350:
+		struct sk_buff *skb;
+		while ((skb = skb_dequeue(&sk->sk_receive_queue)) != NULL) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#411: FILE: kernel/power/suspend2_core/ui.c:370:
+		printk("suspend_userui: Failed to allocate netlink socket.\n");

WARNING:STATIC_CONST_CHAR_ARRAY: char * array declaration might be better as static const
#442: FILE: kernel/power/suspend2_core/ui.c:401:
+	static char *envp[] = {

WARNING:STATIC_CONST_CHAR_ARRAY: char * array declaration might be better as static const
#447: FILE: kernel/power/suspend2_core/ui.c:406:
+	static char *argv[] = { userui_program, NULL };

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#452: FILE: kernel/power/suspend2_core/ui.c:411:
+		printk("suspend_userui: Failed to launch userui program: Error %d\n", retval);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#457: FILE: kernel/power/suspend2_core/ui.c:416:
+static int wait_for_userui_contact(void) $

CHECK:SPACING: No space is necessary after a cast
#457: FILE: kernel/power/suspend2_core/ui.c:416:
+static int wait_for_userui_contact(void) 

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#466: FILE: kernel/power/suspend2_core/ui.c:425:
+		interruptible_sleep_on_timeout(&userui_wait_for_process, 2*HZ);
 		                                                          ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#487: FILE: kernel/power/suspend2_core/ui.c:446:
+		printk("suspend_userui: userui_program not configured. suspend_userui disabled.\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#501: FILE: kernel/power/suspend2_core/ui.c:460:
+		printk("suspend_userui: Failed to contact userui process. suspend_userui disabled.\n");

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#521: FILE: kernel/power/suspend2_core/ui.c:480:
+	if ((t = find_task_by_pid(userui_pid)))

CHECK:SPACING: No space is necessary after a cast
#537: FILE: kernel/power/suspend2_core/ui.c:496:
+	*((int *) buf) = progress_granularity;

CHECK:SPACING: No space is necessary after a cast
#548: FILE: kernel/power/suspend2_core/ui.c:507:
+	progress_granularity = *((int *) buf);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#550: FILE: kernel/power/suspend2_core/ui.c:509:
+^I$

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#555: FILE: kernel/power/suspend2_core/ui.c:514:
+	userui_program[sizeof(userui_program)-1] = '\0';
 	                                     ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#565: FILE: kernel/power/suspend2_core/ui.c:524:
+unsigned long userui_update_progress(unsigned long value, unsigned long maximum,
+		const char *fmt, va_list args)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '!maximum'
#576: FILE: kernel/power/suspend2_core/ui.c:535:
+	if ((!maximum) || (!progress_granularity))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '!progress_granularity'
#576: FILE: kernel/power/suspend2_core/ui.c:535:
+	if ((!maximum) || (!progress_granularity))

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#587: FILE: kernel/power/suspend2_core/ui.c:546:
+	 * of 65536 pixels or more?) */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

CHECK:SPACING: No space is necessary after a cast
#591: FILE: kernel/power/suspend2_core/ui.c:550:
+		this_step = (int) (temp_value * progress_granularity / temp_maximum);

WARNING:LINE_SPACING: Missing a blank line after declarations
#591: FILE: kernel/power/suspend2_core/ui.c:550:
+		unsigned long temp_value = value >> bitshift;
+		this_step = (int) (temp_value * progress_granularity / temp_maximum);

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#592: FILE: kernel/power/suspend2_core/ui.c:551:
+		next_update = (((this_step + 1) * temp_maximum / progress_granularity) + 1) << bitshift;

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

CHECK:SPACING: No space is necessary after a cast
#594: FILE: kernel/power/suspend2_core/ui.c:553:
+		this_step = (int) (value * progress_granularity / maximum);

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#608: FILE: kernel/power/suspend2_core/ui.c:567:
+		msg.text[sizeof(msg.text)-1] = '\0';
 		                         ^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#620: FILE: kernel/power/suspend2_core/ui.c:579:
+ * ^I^Iwithout normally logging what is printed. The point is to be$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#621: FILE: kernel/power/suspend2_core/ui.c:580:
+ * ^I^Iable to get debugging info on screen without filling the logs$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#622: FILE: kernel/power/suspend2_core/ui.c:581:
+ * ^I^Iwith "1/534. ^M 2/534^M. 3/534^M"$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#624: FILE: kernel/power/suspend2_core/ui.c:583:
+ * ^I^IIt may be called from an interrupt context - can't sleep!$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#627: FILE: kernel/power/suspend2_core/ui.c:586:
+ * ^I^Iint level: The level of verbosity of this message.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#628: FILE: kernel/power/suspend2_core/ui.c:587:
+ * ^I^Iint restartline: Whether to output a \r or \n with this line$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#629: FILE: kernel/power/suspend2_core/ui.c:588:
+ * ^I^I^I(\n if we're logging all output).$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#630: FILE: kernel/power/suspend2_core/ui.c:589:
+ * ^I^Iconst char *fmt, ...: Message to be displayed a la printk.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#633: FILE: kernel/power/suspend2_core/ui.c:592:
+void __suspend_message(unsigned long section, unsigned long level,
+		int normally_logged,

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'level > console_loglevel'
#640: FILE: kernel/power/suspend2_core/ui.c:599:
+	if ((level) && (level > console_loglevel))

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#656: FILE: kernel/power/suspend2_core/ui.c:615:
+		msg.text[sizeof(msg.text)-1] = '\0';
 		                         ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#686: FILE: kernel/power/suspend2_core/ui.c:645:
+^I$

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#690: FILE: kernel/power/suspend2_core/ui.c:649:
+	if ((fd = sys_open("/dev/console", O_RDONLY, 0)) < 0)

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#698: FILE: kernel/power/suspend2_core/ui.c:657:
+	t.c_lflag &= ~(ISIG|ICANON|ECHO);
 	                   ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#698: FILE: kernel/power/suspend2_core/ui.c:657:
+	t.c_lflag &= ~(ISIG|ICANON|ECHO);
 	                          ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#701: FILE: kernel/power/suspend2_core/ui.c:660:
+		t.c_cc[VTIME] = timeout*10;
 		                       ^

CHECK:BRACES: braces {} should be used on all arms of this statement
#712: FILE: kernel/power/suspend2_core/ui.c:671:
+		if (test_suspend_state(SUSPEND_SANITY_CHECK_PROMPT)) {
[...]
+		} else
[...]

CHECK:BRACES: braces {} should be used on all arms of this statement
#713: FILE: kernel/power/suspend2_core/ui.c:672:
+			if (key == 'c') {
[...]
+			} else if (key == ' ')
[...]

CHECK:BRACES: Unbalanced braces around else statement
#718: FILE: kernel/power/suspend2_core/ui.c:677:
+		} else

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#734: FILE: kernel/power/suspend2_core/ui.c:693:
+ * ^I^I(and we're displaying output), tell the user why and wait for$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#735: FILE: kernel/power/suspend2_core/ui.c:694:
+ * ^I^Ithem to acknowledge the message.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#737: FILE: kernel/power/suspend2_core/ui.c:696:
+ *^I ^Itelling the user why we're aborting.$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#748: FILE: kernel/power/suspend2_core/ui.c:707:
+^I^I^Iprinted_len = vsnprintf(local_printf_buf, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#749: FILE: kernel/power/suspend2_core/ui.c:708:
+			printed_len = vsnprintf(local_printf_buf, 
+					sizeof(local_printf_buf), fmt, args);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#753: FILE: kernel/power/suspend2_core/ui.c:712:
+				printed_len = sprintf(local_printf_buf + printed_len,
+					" (Press SPACE to continue)");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#756: FILE: kernel/power/suspend2_core/ui.c:715:
+^I^I^I/* $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#758: FILE: kernel/power/suspend2_core/ui.c:717:
+^I^I^I * released if being pressed $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#770: FILE: kernel/power/suspend2_core/ui.c:729:
+ * ^I^Ialong with the current action and perhaps also resetting the$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#771: FILE: kernel/power/suspend2_core/ui.c:730:
+ * ^I^Iprogress bar.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#773: FILE: kernel/power/suspend2_core/ui.c:732:
+ * ^I^Iis on.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#774: FILE: kernel/power/suspend2_core/ui.c:733:
+ * ^I^Iint clearbar: Whether to reset the progress bar.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#775: FILE: kernel/power/suspend2_core/ui.c:734:
+ * ^I^Iconst char *fmt, ...: The action to be displayed.$

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#793: FILE: kernel/power/suspend2_core/ui.c:752:
+		printk("%s\n", lastheader);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#800: FILE: kernel/power/suspend2_core/ui.c:759:
+ * ^I^Iconst char *fmt, ...: Message to be displayed in the middle$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#801: FILE: kernel/power/suspend2_core/ui.c:760:
+ * ^I^Iof the progress bar.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#802: FILE: kernel/power/suspend2_core/ui.c:761:
+ * ^I^INote that a NULL message does not mean that any previous$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#803: FILE: kernel/power/suspend2_core/ui.c:762:
+ * ^I^Imessage is erased! For that, you need suspend2_prepare_status with$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#804: FILE: kernel/power/suspend2_core/ui.c:763:
+ * ^I^Iclearbar on.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#806: FILE: kernel/power/suspend2_core/ui.c:765:
+ * ^I^IThis is to reduce unnecessary calls to update_status.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#809: FILE: kernel/power/suspend2_core/ui.c:768:
+unsigned long suspend2_update_status(unsigned long value, unsigned long maximum,
+		const char *fmt, ...)

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#835: FILE: kernel/power/suspend2_core/ui.c:794:
+	struct waiting_message * next;

ERROR:SPACING: space prohibited after that '*' (ctx:WxW)
#836: FILE: kernel/power/suspend2_core/ui.c:795:
+} * waiting_messages = NULL;
   ^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#841: FILE: kernel/power/suspend2_core/ui.c:800:
+ * ^I^Iand the key being processed in an interrupt handler.$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "waiting_messages"
#846: FILE: kernel/power/suspend2_core/ui.c:805:
+	int did_work = (waiting_messages != NULL);

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#849: FILE: kernel/power/suspend2_core/ui.c:808:
+		struct waiting_message * this_message = waiting_messages;

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#851: FILE: kernel/power/suspend2_core/ui.c:810:
+		switch(waiting_messages->message) {
+			case 5:
[...]
+			case 6:

ERROR:SPACING: space required before the open parenthesis '('
#851: FILE: kernel/power/suspend2_core/ui.c:810:
+		switch(waiting_messages->message) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#854: FILE: kernel/power/suspend2_core/ui.c:813:
+				suspend2_prepare_status(1, 1,
+					"--- ESCAPE PRESSED AGAIN :"

WARNING:SPLIT_STRING: quoted string split across lines
#855: FILE: kernel/power/suspend2_core/ui.c:814:
+					"--- ESCAPE PRESSED AGAIN :"
+					" TRYING HARDER TO ABORT ---");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#859: FILE: kernel/power/suspend2_core/ui.c:818:
+				suspend2_prepare_status(1, 1, "--- ESCAPE PRESSED :"
+						" ABORTING PROCESS ---");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#872: FILE: kernel/power/suspend2_core/ui.c:831:
+ * $

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#877: FILE: kernel/power/suspend2_core/ui.c:836:
+	struct waiting_message * new_message =

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#881: FILE: kernel/power/suspend2_core/ui.c:840:
+		printk("Argh. Unable to allocate memory for "

WARNING:SPLIT_STRING: quoted string split across lines
#882: FILE: kernel/power/suspend2_core/ui.c:841:
+		printk("Argh. Unable to allocate memory for "
+				"scheduling the display of a message.\n");

WARNING:RETURN_VOID: void function return statements are not generally useful
#891: FILE: kernel/power/suspend2_core/ui.c:850:
+	return;
+}

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#896: FILE: kernel/power/suspend2_core/ui.c:855:
+ * ^I^Ipressing escape. Note that on a second press, we try a little$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#897: FILE: kernel/power/suspend2_core/ui.c:856:
+ * ^I^Iharder, attempting to forcefully thaw processes. This shouldn't$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#898: FILE: kernel/power/suspend2_core/ui.c:857:
+ * ^I^Ibeen needed, and may result in an oops (if we've overwritten$

WARNING:TYPO_SPELLING: 'ocassion' may be misspelled - perhaps 'occasion'?
#899: FILE: kernel/power/suspend2_core/ui.c:858:
+ * 		memory), but has been useful on ocassion.
    		                                ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#899: FILE: kernel/power/suspend2_core/ui.c:858:
+ * ^I^Imemory), but has been useful on ocassion.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#901: FILE: kernel/power/suspend2_core/ui.c:860:
+ *  ^Iescape.$

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#905: FILE: kernel/power/suspend2_core/ui.c:864:
+	if (test_suspend_state(SUSPEND_NOW_RESUMING) || (TEST_RESULT_STATE(SUSPEND_ABORT_REQUESTED)))

ERROR:TRAILING_WHITESPACE: trailing whitespace
#920: FILE: kernel/power/suspend2_core/ui.c:879:
+ * $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#922: FILE: kernel/power/suspend2_core/ui.c:881:
+ * ^I^IWe normally only pause when @pause is set.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#924: FILE: kernel/power/suspend2_core/ui.c:883:
+ * ^I^Ichar * message: The message to display. Not parameterised$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#925: FILE: kernel/power/suspend2_core/ui.c:884:
+ * ^I^I because it's normally a constant.$

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#928: FILE: kernel/power/suspend2_core/ui.c:887:
+void check_shift_keys(int pause, char * message)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#932: FILE: kernel/power/suspend2_core/ui.c:891:
+^I$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#935: FILE: kernel/power/suspend2_core/ui.c:894:
+	while (last_key != 32 &&
+		userui_pid != -1 &&

ERROR:TRAILING_WHITESPACE: trailing whitespace
#936: FILE: kernel/power/suspend2_core/ui.c:895:
+^I^I((TEST_ACTION_STATE(SUSPEND_PAUSE) && pause) || $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#939: FILE: kernel/power/suspend2_core/ui.c:898:
+^I^I^Isuspend2_prepare_status(1, 0, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#940: FILE: kernel/power/suspend2_core/ui.c:899:
+			suspend2_prepare_status(1, 0, 
+			   "%s Press SPACE to continue.%s",

ERROR:TRAILING_WHITESPACE: trailing whitespace
#942: FILE: kernel/power/suspend2_core/ui.c:901:
+^I^I^I   (TEST_ACTION_STATE(SUSPEND_SINGLESTEP)) ? $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#955: FILE: kernel/power/suspend2_core/ui.c:914:
+extern asmlinkage long sys_ioctl(unsigned int fd, unsigned int cmd, $

WARNING:TYPO_SPELLING: 'occured' may be misspelled - perhaps 'occurred'?
#961: FILE: kernel/power/suspend2_core/ui.c:920:
+ * Returns:	Boolean: Whether an error occured. Errors aren't
            	                          ^^^^^^^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#962: FILE: kernel/power/suspend2_core/ui.c:921:
+ * ^I^Itreated as fatal, but a warning is printed.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#993: FILE: kernel/power/suspend2_core/ui.c:952:
+ * ^I^IThe user may press C to continue booting, perhaps$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#994: FILE: kernel/power/suspend2_core/ui.c:953:
+ * ^I^Iinvalidating the image,  or space to reboot. $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#994: FILE: kernel/power/suspend2_core/ui.c:953:
+ * ^I^Iinvalidating the image,  or space to reboot. $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#995: FILE: kernel/power/suspend2_core/ui.c:954:
+ * ^I^IThis works from either the serial console or normally $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#995: FILE: kernel/power/suspend2_core/ui.c:954:
+ * ^I^IThis works from either the serial console or normally $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#996: FILE: kernel/power/suspend2_core/ui.c:955:
+ * ^I^Iattached keyboard.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#998: FILE: kernel/power/suspend2_core/ui.c:957:
+ * ^I^INote that we come in here from init, while the kernel is$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#999: FILE: kernel/power/suspend2_core/ui.c:958:
+ * ^I^Ilocked. If we want to get events from the serial console,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1000: FILE: kernel/power/suspend2_core/ui.c:959:
+ * ^I^Iwe need to temporarily unlock the kernel.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1002: FILE: kernel/power/suspend2_core/ui.c:961:
+ * ^I^Isuspend_early_boot_message may also be called post-boot.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1003: FILE: kernel/power/suspend2_core/ui.c:962:
+ * ^I^IIn this case, it simply printks the message and returns.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1006: FILE: kernel/power/suspend2_core/ui.c:965:
+ * ^I^Iint^Idefault_answer. What to do when we timeout. This$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1007: FILE: kernel/power/suspend2_core/ui.c:966:
+ * ^I^I^Iwill normally be continue, but the user might$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1008: FILE: kernel/power/suspend2_core/ui.c:967:
+ * ^I^I^Iprovide command line options (__setup) to override$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1009: FILE: kernel/power/suspend2_core/ui.c:968:
+ * ^I^I^Iparticular cases.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1010: FILE: kernel/power/suspend2_core/ui.c:969:
+ * ^I^IChar *. Pointer to a string explaining why we're moaning.$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_emerg([subsystem]dev, ... then dev_emerg(dev, ... then pr_emerg(...  to printk(KERN_EMERG ...
#1013: FILE: kernel/power/suspend2_core/ui.c:972:
+#define say(message, a...) printk(KERN_EMERG message, ##a)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1024: FILE: kernel/power/suspend2_core/ui.c:983:
+^I^Iprinted_len = vsnprintf(local_printf_buf, $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1025: FILE: kernel/power/suspend2_core/ui.c:984:
+^I^I^I^Isizeof(local_printf_buf), $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1025: FILE: kernel/power/suspend2_core/ui.c:984:
+		printed_len = vsnprintf(local_printf_buf, 
+				sizeof(local_printf_buf), 

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1032: FILE: kernel/power/suspend2_core/ui.c:991:
+		printk(name_suspend "%s", local_printf_buf);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1038: FILE: kernel/power/suspend2_core/ui.c:997:
+	 * enable the keyboard handler by setting the running flag */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1059: FILE: kernel/power/suspend2_core/ui.c:1018:
+		say("Default action if you don't select one in %d seconds is: %s.\n",
+			message_timeout,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1071: FILE: kernel/power/suspend2_core/ui.c:1030:
+		say("Default action if you don't select one in %d seconds is: %s.\n",
+			message_timeout,

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1075: FILE: kernel/power/suspend2_core/ui.c:1034:
+^I$

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '!continue_req'
#1084: FILE: kernel/power/suspend2_core/ui.c:1043:
+	if ((warning_reason) && (!continue_req))

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1086: FILE: kernel/power/suspend2_core/ui.c:1045:
+^I$

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1094: FILE: kernel/power/suspend2_core/ui.c:1053:
+}
+#undef say

WARNING:TABSTOP: Statements should start on a tabstop
#1115: FILE: kernel/power/suspend2_core/ui.c:1074:
+		  }

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#1115: FILE: kernel/power/suspend2_core/ui.c:1074:
+
+		  }

WARNING:TABSTOP: Statements should start on a tabstop
#1116: FILE: kernel/power/suspend2_core/ui.c:1075:
+	  }

WARNING:TABSTOP: Statements should start on a tabstop
#1126: FILE: kernel/power/suspend2_core/ui.c:1085:
+		  }

WARNING:TABSTOP: Statements should start on a tabstop
#1127: FILE: kernel/power/suspend2_core/ui.c:1086:
+	  }

WARNING:TABSTOP: Statements should start on a tabstop
#1139: FILE: kernel/power/suspend2_core/ui.c:1098:
+		  }

WARNING:TABSTOP: Statements should start on a tabstop
#1140: FILE: kernel/power/suspend2_core/ui.c:1099:
+	  }

WARNING:TABSTOP: Statements should start on a tabstop
#1150: FILE: kernel/power/suspend2_core/ui.c:1109:
+		  }

WARNING:TABSTOP: Statements should start on a tabstop
#1151: FILE: kernel/power/suspend2_core/ui.c:1110:
+	  }

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1153: FILE: kernel/power/suspend2_core/ui.c:1112:
+^I  $

WARNING:TABSTOP: Statements should start on a tabstop
#1161: FILE: kernel/power/suspend2_core/ui.c:1120:
+		  }

WARNING:TABSTOP: Statements should start on a tabstop
#1162: FILE: kernel/power/suspend2_core/ui.c:1121:
+	  }

WARNING:TABSTOP: Statements should start on a tabstop
#1174: FILE: kernel/power/suspend2_core/ui.c:1133:
+	  }

WARNING:TABSTOP: Statements should start on a tabstop
#1185: FILE: kernel/power/suspend2_core/ui.c:1144:
+	  }

WARNING:TABSTOP: Statements should start on a tabstop
#1195: FILE: kernel/power/suspend2_core/ui.c:1154:
+	  }

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1217: FILE: kernel/power/suspend2_core/ui.c:1176:
+	if (!(result = suspend_register_plugin(&userui_ops)))

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#1218: FILE: kernel/power/suspend2_core/ui.c:1177:
+		for (i=0; i< numfiles; i++)
 		      ^

ERROR:SPACING: spaces required around that '<' (ctx:VxW)
#1218: FILE: kernel/power/suspend2_core/ui.c:1177:
+		for (i=0; i< numfiles; i++)
 		           ^

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1232: FILE: kernel/power/suspend2_core/ui.h:1:
+/*

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1236: FILE: kernel/power/suspend2_core/ui.h:5:
+extern int suspend2_prepare_console(void);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1237: FILE: kernel/power/suspend2_core/ui.h:6:
+extern void suspend2_cleanup_console(void);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1239: FILE: kernel/power/suspend2_core/ui.h:8:
+extern void check_shift_keys(int pause, char * message);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1239: FILE: kernel/power/suspend2_core/ui.h:8:
+extern void check_shift_keys(int pause, char * message);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1241: FILE: kernel/power/suspend2_core/ui.h:10:
+extern void suspend2_prepare_status(int printalways, int clearbar, const char *fmt, ...);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1242: FILE: kernel/power/suspend2_core/ui.h:11:
+extern void check_shift_keys(int pause, char * message);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1242: FILE: kernel/power/suspend2_core/ui.h:11:
+extern void check_shift_keys(int pause, char * message);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1243: FILE: kernel/power/suspend2_core/ui.h:12:
+extern unsigned long suspend2_update_status(unsigned long value, unsigned long maximum,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1244: FILE: kernel/power/suspend2_core/ui.h:13:
+extern unsigned long suspend2_update_status(unsigned long value, unsigned long maximum,
+		const char *fmt, ...);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1246: FILE: kernel/power/suspend2_core/ui.h:15:
+extern void request_abort_suspend(void);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1247: FILE: kernel/power/suspend2_core/ui.h:16:
+extern void abort_suspend(const char *fmt, ...);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1249: FILE: kernel/power/suspend2_core/ui.h:18:
+extern void suspend2_schedule_message (int message_number);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1249: FILE: kernel/power/suspend2_core/ui.h:18:
+extern void suspend2_schedule_message (int message_number);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1251: FILE: kernel/power/suspend2_core/ui.h:20:
+extern void userui_redraw(void);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1256: FILE: kernel/power/suspend2_core/userui.h:1:
+#ifndef _SUSPEND_USERUI_H_

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000170357.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 51 errors, 97 warnings, 54 checks, 1249 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000170357.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
