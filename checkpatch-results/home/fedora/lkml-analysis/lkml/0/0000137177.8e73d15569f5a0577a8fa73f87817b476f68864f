WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#33: 
> > +static int ecryptfs_writepage(struct page *page, struct writeback_control *wbc)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#83: FILE: fs/ecryptfs/mmap.c:326:
+static int $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#85: FILE: fs/ecryptfs/mmap.c:328:
+^I^I^I      int lower_iv_idx, struct file *lower_file, $

WARNING:CONST_STRUCT: struct address_space_operations should normally be const
#94: FILE: fs/ecryptfs/mmap.c:337:
+	struct address_space_operations *lower_a_ops;

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

ERROR:CODE_INDENT: code indent should use tabs where possible
#99: FILE: fs/ecryptfs/mmap.c:342:
+ ^Ilower_a_ops = lower_inode->i_mapping->a_ops;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#99: FILE: fs/ecryptfs/mmap.c:342:
+ ^Ilower_a_ops = lower_inode->i_mapping->a_ops;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#99: FILE: fs/ecryptfs/mmap.c:342:
+ ^Ilower_a_ops = lower_inode->i_mapping->a_ops;$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 24)
#105: FILE: fs/ecryptfs/mmap.c:348:
+	if (!records_page) {
+                        ecryptfs_printk(0, KERN_ERR, "records_page == NULL "

ERROR:CODE_INDENT: code indent should use tabs where possible
#106: FILE: fs/ecryptfs/mmap.c:349:
+                        ecryptfs_printk(0, KERN_ERR, "records_page == NULL "$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#106: FILE: fs/ecryptfs/mmap.c:349:
+                        ecryptfs_printk(0, KERN_ERR, "records_page == NULL "$

ERROR:CODE_INDENT: code indent should use tabs where possible
#107: FILE: fs/ecryptfs/mmap.c:350:
+                                        "after grab_cache_page at index [%lu]"$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#107: FILE: fs/ecryptfs/mmap.c:350:
+                                        "after grab_cache_page at index [%lu]"$

WARNING:SPLIT_STRING: quoted string split across lines
#107: FILE: fs/ecryptfs/mmap.c:350:
+                        ecryptfs_printk(0, KERN_ERR, "records_page == NULL "
+                                        "after grab_cache_page at index [%lu]"

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

ERROR:CODE_INDENT: code indent should use tabs where possible
#108: FILE: fs/ecryptfs/mmap.c:351:
+                                        "\n", records_page_index);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#108: FILE: fs/ecryptfs/mmap.c:351:
+                                        "\n", records_page_index);$

WARNING:SPLIT_STRING: quoted string split across lines
#108: FILE: fs/ecryptfs/mmap.c:351:
+                                        "after grab_cache_page at index [%lu]"
+                                        "\n", records_page_index);

ERROR:CODE_INDENT: code indent should use tabs where possible
#109: FILE: fs/ecryptfs/mmap.c:352:
+                        rc = -EIO;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#109: FILE: fs/ecryptfs/mmap.c:352:
+                        rc = -EIO;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#110: FILE: fs/ecryptfs/mmap.c:353:
+                        goto out;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#110: FILE: fs/ecryptfs/mmap.c:353:
+                        goto out;$

WARNING:SPLIT_STRING: quoted string split across lines
#127: FILE: fs/ecryptfs/mmap.c:370:
+			ecryptfs_printk(1, KERN_NOTICE, "No dentry for "
+					"lower_inode\n");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#130: FILE: fs/ecryptfs/mmap.c:373:
+^I^Ilower_dentry = list_entry(lower_inode->i_dentry.next, $

WARNING:SPLIT_STRING: quoted string split across lines
#149: FILE: fs/ecryptfs/mmap.c:392:
+		ecryptfs_printk(0, KERN_ERR, "Error in lower prepare_write() "
+				"call: rc = [%d]\n", rc);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#158: FILE: fs/ecryptfs/mmap.c:401:
+^Irc = lower_a_ops->commit_write(lower_file, records_page, lower_iv_idx, $

WARNING:SPLIT_STRING: quoted string split across lines
#162: FILE: fs/ecryptfs/mmap.c:405:
+		ecryptfs_printk(0, KERN_ERR, "Error in lower commit_write() "
+				"call: rc = [%d]\n", rc);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#165: FILE: fs/ecryptfs/mmap.c:408:
+	lower_inode->i_mtime = lower_inode->i_ctime = CURRENT_TIME;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:SPLIT_STRING: quoted string split across lines
#167: FILE: fs/ecryptfs/mmap.c:410:
+	ecryptfs_printk(1, KERN_NOTICE, "Unlocking page with index = "
+			"[%lu]\n", records_page->index);

WARNING:SPLIT_STRING: quoted string split across lines
#174: FILE: fs/ecryptfs/mmap.c:417:
+	ecryptfs_printk(1, KERN_NOTICE, "After committing IV write, "
+			"lower_inode->i_blocks = [%lu]\n",

ERROR:TRAILING_WHITESPACE: trailing whitespace
#175: FILE: fs/ecryptfs/mmap.c:418:
+^I^I^Ilower_inode->i_blocks);^I$

WARNING:LINE_SPACING: Missing a blank line after declarations
#189: FILE: fs/ecryptfs/mmap.c:432:
+	int rc = 0;
+	ecryptfs_printk(1, KERN_NOTICE, "Calling do_encrypt_page()\n");

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BRACES: braces {} are not necessary for single statement blocks
#191: FILE: fs/ecryptfs/mmap.c:434:
+	if (unlikely(ecryptfs_verbosity > 0)) {
+		ecryptfs_dump_hex(iv, crypt_stats->iv_bytes);
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SPLIT_STRING: quoted string split across lines
#195: FILE: fs/ecryptfs/mmap.c:438:
+	ecryptfs_printk(1, KERN_NOTICE, "First 8 bytes before "
+			"encryption:\n");

WARNING:BRACES: braces {} are not necessary for single statement blocks
#196: FILE: fs/ecryptfs/mmap.c:439:
+	if (ecryptfs_verbosity > 0) {
+		ecryptfs_dump_hex((char *)page_address(page), 8);
+	}

WARNING:STRING_FRAGMENTS: Consecutive strings are generally better as a single string
#202: FILE: fs/ecryptfs/mmap.c:445:
+	ecryptfs_printk(1, KERN_NOTICE, "First 8 bytes after " "encryption:\n");

WARNING:BRACES: braces {} are not necessary for single statement blocks
#203: FILE: fs/ecryptfs/mmap.c:446:
+	if (ecryptfs_verbosity > 0) {
+		ecryptfs_dump_hex((char *)page_address(lower_page), 8);
+	}

WARNING:REPEATED_WORD: Possible repeated word: 'page'
#212: FILE: fs/ecryptfs/mmap.c:455:
+ * @param page Page that is locked before this call is made

CHECK:BRACES: braces {} should be used on all arms of this statement
#288: FILE: fs/ecryptfs/mmap.c:492:
+	if (crypt_stats->encrypted) {
[...]
+	} else
[...]

WARNING:SPLIT_STRING: quoted string split across lines
#299: FILE: fs/ecryptfs/mmap.c:503:
+			ecryptfs_printk(0, KERN_ERR, "Error rotating "
+					"IV; write failure. Assuming "

WARNING:SPLIT_STRING: quoted string split across lines
#300: FILE: fs/ecryptfs/mmap.c:504:
+					"IV; write failure. Assuming "
+					"IV page corruption; writing "

WARNING:SPLIT_STRING: quoted string split across lines
#301: FILE: fs/ecryptfs/mmap.c:505:
+					"IV page corruption; writing "
+					"0's to associated data extent"

WARNING:SPLIT_STRING: quoted string split across lines
#302: FILE: fs/ecryptfs/mmap.c:506:
+					"0's to associated data extent"
+					".\n");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#313: FILE: fs/ecryptfs/mmap.c:517:
+^I^I^I^I^I"page (upper index [%llu])\n", $

WARNING:SPLIT_STRING: quoted string split across lines
#313: FILE: fs/ecryptfs/mmap.c:517:
+			ecryptfs_printk(0, KERN_WARNING, "Error encrypting "
+					"page (upper index [%llu])\n", 

CHECK:BRACES: Unbalanced braces around else statement
#315: FILE: fs/ecryptfs/mmap.c:519:
+	} else

ERROR:TRAILING_WHITESPACE: trailing whitespace
#373: FILE: fs/ecryptfs/mmap.c:755:
+^Irecord_byte_offset = (RECORD_IDX(crypt_stats, page->index) $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#456: FILE: fs/ecryptfs/mmap.c:987:
+^I^I/* TODO: HMAC: Include HMAC bytes in the record size */^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#457: FILE: fs/ecryptfs/mmap.c:988:
+^I^Irecord_byte_offset = (RECORD_IDX(crypt_stats, page->index) $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#459: FILE: fs/ecryptfs/mmap.c:990:
+^I^Irc = ecryptfs_read_rotate_write_iv(iv, inode, $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#460: FILE: fs/ecryptfs/mmap.c:991:
+^I^I^I^I^I^I   record_byte_offset, $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#508: FILE: fs/ecryptfs/mmap.c:1003:
+^I^I^I^I^I"page (upper index [%llu])\n", $

WARNING:SPLIT_STRING: quoted string split across lines
#508: FILE: fs/ecryptfs/mmap.c:1003:
 			ecryptfs_printk(0, KERN_WARNING, "Error encrypting "
+					"page (upper index [%llu])\n", 

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000137177.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 18 errors, 30 warnings, 3 checks, 448 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000137177.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
