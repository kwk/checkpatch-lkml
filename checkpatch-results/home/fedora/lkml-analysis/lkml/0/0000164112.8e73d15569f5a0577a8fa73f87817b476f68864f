WARNING:COMMIT_MESSAGE: Missing commit description - Add an appropriate one

The patch is missing a commit description.  A brief
description of the changes made by the patch should be added.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#describe-your-changes

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#131: FILE: drivers/net/tokenring/madgemc.c:148:
+static int __devinit madgemc_probe(struct device *device)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#169: FILE: drivers/net/tokenring/madgemc.c:158:
+		printk("%s", version);

ERROR:SPACING: space required before the open parenthesis '('
#171: FILE: drivers/net/tokenring/madgemc.c:160:
+	if(mca_device_claimed(mdev))

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#177: FILE: drivers/net/tokenring/madgemc.c:166:
+		printk("madgemc: unable to allocate dev space\n");

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*card)...) over kmalloc(sizeof(struct card_info)...)
#186: FILE: drivers/net/tokenring/madgemc.c:175:
+	card = kmalloc(sizeof(struct card_info), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#187: FILE: drivers/net/tokenring/madgemc.c:176:
+	if (card==NULL) {
 	        ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!card"
#187: FILE: drivers/net/tokenring/madgemc.c:176:
+	if (card==NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#188: FILE: drivers/net/tokenring/madgemc.c:177:
+		printk("madgemc: unable to allocate card struct\n");

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#188: FILE: drivers/net/tokenring/madgemc.c:177:
+	if (card==NULL) {
+		printk("madgemc: unable to allocate card struct\n");

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#196: FILE: drivers/net/tokenring/madgemc.c:183:
+	/*
+	 * Parse configuration information.  This all comes

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#217: FILE: drivers/net/tokenring/madgemc.c:189:
+	/*
+	 * Base address

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#220: FILE: drivers/net/tokenring/madgemc.c:192:
+		((mdev->pos[2] & MC16_POS2_ADDR2)?0x0400:0) +
 		                                 ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#220: FILE: drivers/net/tokenring/madgemc.c:192:
+		((mdev->pos[2] & MC16_POS2_ADDR2)?0x0400:0) +
 		                                        ^

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#221: FILE: drivers/net/tokenring/madgemc.c:193:
+		((mdev->pos[0] & MC16_POS0_ADDR1)?0x1000:0) +
 		                                 ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#221: FILE: drivers/net/tokenring/madgemc.c:193:
+		((mdev->pos[0] & MC16_POS0_ADDR1)?0x1000:0) +
 		                                        ^

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#222: FILE: drivers/net/tokenring/madgemc.c:194:
+		((mdev->pos[3] & MC16_POS3_ADDR3)?0x2000:0);
 		                                 ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#222: FILE: drivers/net/tokenring/madgemc.c:194:
+		((mdev->pos[3] & MC16_POS3_ADDR3)?0x2000:0);
 		                                        ^

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#243: FILE: drivers/net/tokenring/madgemc.c:197:
+	/*
+	 * Interrupt line

ERROR:SPACING: space required before the open parenthesis '('
#245: FILE: drivers/net/tokenring/madgemc.c:199:
+	switch(mdev->pos[0] >> 6) { /* upper two bits */

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#258: FILE: drivers/net/tokenring/madgemc.c:207:
+		printk("%s: invalid IRQ\n", dev->name);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#270: FILE: drivers/net/tokenring/madgemc.c:213:
+	if (!request_region(dev->base_addr, MADGEMC_IO_EXTENT,
+			   "madgemc")) {

WARNING:LONG_LINE: line length of 151 exceeds 100 columns
#271: FILE: drivers/net/tokenring/madgemc.c:214:
+		printk(KERN_INFO "madgemc: unable to setup Smart MC in slot %d because of I/O base conflict at 0x%04lx\n", mdev->slot, dev->base_addr);

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#271: FILE: drivers/net/tokenring/madgemc.c:214:
+		printk(KERN_INFO "madgemc: unable to setup Smart MC in slot %d because of I/O base conflict at 0x%04lx\n", mdev->slot, dev->base_addr);

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#279: FILE: drivers/net/tokenring/madgemc.c:222:
+	/*
+	 * Arbitration Level

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#284: FILE: drivers/net/tokenring/madgemc.c:227:
+	/*
+	 * Burst mode and Fairness

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#290: FILE: drivers/net/tokenring/madgemc.c:233:
+	/*
+	 * Ring Speed

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#292: FILE: drivers/net/tokenring/madgemc.c:235:
+	if ((mdev->pos[1] >> 2)&0x1)
 	                       ^

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#300: FILE: drivers/net/tokenring/madgemc.c:243:
+	/*
+	 * Cable type

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#302: FILE: drivers/net/tokenring/madgemc.c:245:
+	if ((mdev->pos[1] >> 6)&0x1)
 	                       ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#307: FILE: drivers/net/tokenring/madgemc.c:250:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#309: FILE: drivers/net/tokenring/madgemc.c:252:
+	/*
+	 * ROM Info. This requires us to actually twiddle

WARNING:LONG_LINE: line length of 122 exceeds 100 columns
#357: FILE: drivers/net/tokenring/madgemc.c:259:
+		printk(KERN_INFO "%s: Madge MC ROM read failed (unknown manufacturer ID %02x)\n", dev->name, card->manid);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#357: FILE: drivers/net/tokenring/madgemc.c:259:
+		printk(KERN_INFO "%s: Madge MC ROM read failed (unknown manufacturer ID %02x)\n", dev->name, card->manid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'card->cardtype != 0x08'
#365: FILE: drivers/net/tokenring/madgemc.c:263:
+	if ((card->cardtype != 0x08) && (card->cardtype != 0x0d)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'card->cardtype != 0x0d'
#365: FILE: drivers/net/tokenring/madgemc.c:263:
+	if ((card->cardtype != 0x08) && (card->cardtype != 0x0d)) {

WARNING:LONG_LINE: line length of 117 exceeds 100 columns
#366: FILE: drivers/net/tokenring/madgemc.c:264:
+		printk(KERN_INFO "%s: Madge MC ROM read failed (unknown card ID %02x)\n", dev->name, card->cardtype);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#366: FILE: drivers/net/tokenring/madgemc.c:264:
+		printk(KERN_INFO "%s: Madge MC ROM read failed (unknown card ID %02x)\n", dev->name, card->cardtype);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'card->cardtype == 0x08'
#383: FILE: drivers/net/tokenring/madgemc.c:270:
+	if ((card->cardtype == 0x08) && (card->cardrev <= 0x01))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'card->cardrev <= 0x01'
#383: FILE: drivers/net/tokenring/madgemc.c:270:
+	if ((card->cardtype == 0x08) && (card->cardrev <= 0x01))

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#388: FILE: drivers/net/tokenring/madgemc.c:275:
+	printk("%s: %s Rev %d at 0x%04lx IRQ %d\n",

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#390: FILE: drivers/net/tokenring/madgemc.c:277:
+	       (card->cardtype == 0x08)?MADGEMC16_CARDNAME:
 	                               ^

ERROR:SPACING: spaces required around that ':' (ctx:VxE)
#390: FILE: drivers/net/tokenring/madgemc.c:277:
+	       (card->cardtype == 0x08)?MADGEMC16_CARDNAME:
 	                                                  ^

WARNING:LONG_LINE: line length of 105 exceeds 100 columns
#402: FILE: drivers/net/tokenring/madgemc.c:282:
+		printk("%s:     Warning: MC32 support is experimental and highly untested\n", dev->name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#402: FILE: drivers/net/tokenring/madgemc.c:282:
+		printk("%s:     Warning: MC32 support is experimental and highly untested\n", dev->name);

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#404: FILE: drivers/net/tokenring/madgemc.c:284:
+	if (card->ringspeed==2) { /* Unknown */
 	                   ^

WARNING:LONG_LINE: line length of 127 exceeds 100 columns
#405: FILE: drivers/net/tokenring/madgemc.c:285:
+		printk("%s:     Warning: Ring speed not set in POS -- Please run the reference disk and set it!\n", dev->name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#405: FILE: drivers/net/tokenring/madgemc.c:285:
+		printk("%s:     Warning: Ring speed not set in POS -- Please run the reference disk and set it!\n", dev->name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#410: FILE: drivers/net/tokenring/madgemc.c:289:
+	printk("%s:     RAM Size: %dKB\n", dev->name, card->ramsize);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#417: FILE: drivers/net/tokenring/madgemc.c:291:
+	printk("%s:     Ring Speed: %dMb/sec on %s\n", dev->name,

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#418: FILE: drivers/net/tokenring/madgemc.c:292:
+	       (card->ringspeed)?16:4,
 	                        ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#418: FILE: drivers/net/tokenring/madgemc.c:292:
+	       (card->ringspeed)?16:4,
 	                           ^

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#419: FILE: drivers/net/tokenring/madgemc.c:293:
+	       card->cabletype?"STP/DB9":"UTP/RJ-45");
 	                      ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#419: FILE: drivers/net/tokenring/madgemc.c:293:
+	       card->cabletype?"STP/DB9":"UTP/RJ-45");
 	                                ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#420: FILE: drivers/net/tokenring/madgemc.c:294:
+	printk("%s:     Arbitration Level: %d\n", dev->name,

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#425: FILE: drivers/net/tokenring/madgemc.c:297:
+	printk("%s:     Burst Mode: ", dev->name);

ERROR:SPACING: space required before the open parenthesis '('
#426: FILE: drivers/net/tokenring/madgemc.c:298:
+	switch(card->burstmode) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#449: FILE: drivers/net/tokenring/madgemc.c:304:
+	printk(" (%s)\n", (card->fairness)?"Unfair":"Fair");

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#449: FILE: drivers/net/tokenring/madgemc.c:304:
+	printk(" (%s)\n", (card->fairness)?"Unfair":"Fair");
 	                                  ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#449: FILE: drivers/net/tokenring/madgemc.c:304:
+	printk(" (%s)\n", (card->fairness)?"Unfair":"Fair");
 	                                           ^

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#462: FILE: drivers/net/tokenring/madgemc.c:308:
+	/*
+	 * Enable SIF before we assign the interrupt handler,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#469: FILE: drivers/net/tokenring/madgemc.c:315:
+	if (request_irq(dev->irq, madgemc_interrupt, SA_SHIRQ,
+		       "madgemc", dev)) {

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#478: FILE: drivers/net/tokenring/madgemc.c:324:
+	mca_device_set_name(mdev, (card->cardtype == 0x08)?MADGEMC16_CARDNAME:MADGEMC32_CARDNAME);
 	                                                  ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#478: FILE: drivers/net/tokenring/madgemc.c:324:
+	mca_device_set_name(mdev, (card->cardtype == 0x08)?MADGEMC16_CARDNAME:MADGEMC32_CARDNAME);
 	                                                                     ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#481: FILE: drivers/net/tokenring/madgemc.c:327:
+	printk("%s:     Ring Station Address: ", dev->name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#482: FILE: drivers/net/tokenring/madgemc.c:328:
+	printk("%2.2x", dev->dev_addr[0]);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#484: FILE: drivers/net/tokenring/madgemc.c:330:
+		printk(":%2.2x", dev->dev_addr[i]);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#485: FILE: drivers/net/tokenring/madgemc.c:331:
+	printk("\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#488: FILE: drivers/net/tokenring/madgemc.c:334:
+		printk("%s: unable to get memory for dev->priv.\n",

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#496: FILE: drivers/net/tokenring/madgemc.c:342:
+	/*
+	 * The MC16 is physically a 32bit card.  However, Madge

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#506: FILE: drivers/net/tokenring/madgemc.c:352:
+	tp->DataRate = (card->ringspeed)?SPEED_16:SPEED_4;
 	                                ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#506: FILE: drivers/net/tokenring/madgemc.c:352:
+	tp->DataRate = (card->ringspeed)?SPEED_16:SPEED_4;
 	                                         ^

CHECK:CAMELCASE: Avoid CamelCase: <DataRate>
#506: FILE: drivers/net/tokenring/madgemc.c:352:
+	tp->DataRate = (card->ringspeed)?SPEED_16:SPEED_4;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <ProductID>
#508: FILE: drivers/net/tokenring/madgemc.c:354:
+	memcpy(tp->ProductID, "Madge MCA 16/4    ", PROD_ID_SIZE + 1);

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#576: FILE: drivers/net/tokenring/madgemc.c:370:
+	release_region(dev->base_addr-MADGEMC_SIF_OFFSET,
 	                             ^

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#637: FILE: drivers/net/tokenring/madgemc.c:732:
+static int __devexit madgemc_remove(struct device *device)

ERROR:CODE_INDENT: code indent should use tabs where possible
#655: FILE: drivers/net/tokenring/madgemc.c:736:
+        struct card_info *card;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#655: FILE: drivers/net/tokenring/madgemc.c:736:
+        struct card_info *card;$

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#658: FILE: drivers/net/tokenring/madgemc.c:739:
+		BUG();

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#666: FILE: drivers/net/tokenring/madgemc.c:747:
+	release_region(dev->base_addr-MADGEMC_SIF_OFFSET, MADGEMC_IO_EXTENT);
 	                             ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#690: FILE: drivers/net/tokenring/madgemc.c:771:
+static int __init madgemc_init (void)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#692: FILE: drivers/net/tokenring/madgemc.c:773:
+	return mca_register_driver (&madgemc_driver);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#695: FILE: drivers/net/tokenring/madgemc.c:776:
+static void __exit madgemc_exit (void)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#697: FILE: drivers/net/tokenring/madgemc.c:778:
+	mca_unregister_driver (&madgemc_driver);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000164112.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 7 errors, 45 warnings, 32 checks, 692 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000164112.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
