WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#39: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#70: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:32:
+ * $Id: mthca_cq.c 1349 2004-12-16 21:09:43Z roland $

Since linux moved to git, the CVS markers are no longer used.
So, CVS style keywords ($Id$, $Revision$, $Log$) should not be
added.

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __packed over __attribute__((packed))
#105: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:67:
+} __attribute__((packed));

ERROR:SPACING: space prohibited after that open parenthesis '('
#107: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:69:
+#define MTHCA_CQ_STATUS_OK          ( 0 << 28)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space prohibited after that open parenthesis '('
#108: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:70:
+#define MTHCA_CQ_STATUS_OVERFLOW    ( 9 << 28)

ERROR:SPACING: space prohibited after that open parenthesis '('
#110: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:72:
+#define MTHCA_CQ_FLAG_TR            ( 1 << 18)

CHECK:BIT_MACRO: Prefer using the BIT macro
#110: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:72:
+#define MTHCA_CQ_FLAG_TR            ( 1 << 18)

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

ERROR:SPACING: space prohibited after that open parenthesis '('
#111: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:73:
+#define MTHCA_CQ_FLAG_OI            ( 1 << 17)

CHECK:BIT_MACRO: Prefer using the BIT macro
#111: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:73:
+#define MTHCA_CQ_FLAG_OI            ( 1 << 17)

ERROR:SPACING: space prohibited after that open parenthesis '('
#112: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:74:
+#define MTHCA_CQ_STATE_DISARMED     ( 0 <<  8)

ERROR:SPACING: space prohibited after that open parenthesis '('
#113: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:75:
+#define MTHCA_CQ_STATE_ARMED        ( 1 <<  8)

CHECK:BIT_MACRO: Prefer using the BIT macro
#113: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:75:
+#define MTHCA_CQ_STATE_ARMED        ( 1 <<  8)

ERROR:SPACING: space prohibited after that open parenthesis '('
#114: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:76:
+#define MTHCA_CQ_STATE_ARMED_SOL    ( 4 <<  8)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#122: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:84:
+^ISYNDROME_LOCAL_LENGTH_ERR ^I = 0x01,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#123: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:85:
+^ISYNDROME_LOCAL_QP_OP_ERR  ^I = 0x02,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#124: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:86:
+^ISYNDROME_LOCAL_EEC_OP_ERR ^I = 0x03,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#125: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:87:
+^ISYNDROME_LOCAL_PROT_ERR   ^I = 0x04,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#126: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:88:
+^ISYNDROME_WR_FLUSH_ERR     ^I = 0x05,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#127: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:89:
+^ISYNDROME_MW_BIND_ERR      ^I = 0x06,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#128: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:90:
+^ISYNDROME_BAD_RESP_ERR     ^I = 0x10,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#129: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:91:
+^ISYNDROME_LOCAL_ACCESS_ERR ^I = 0x11,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#130: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:92:
+^ISYNDROME_REMOTE_INVAL_REQ_ERR ^I = 0x12,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#131: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:93:
+^ISYNDROME_REMOTE_ACCESS_ERR ^I = 0x13,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#132: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:94:
+^ISYNDROME_REMOTE_OP_ERR     ^I = 0x14,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#133: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:95:
+^ISYNDROME_RETRY_EXC_ERR ^I^I = 0x15,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#134: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:96:
+^ISYNDROME_RNR_RETRY_EXC_ERR ^I = 0x16,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#135: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:97:
+^ISYNDROME_LOCAL_RDD_VIOL_ERR ^I = 0x20,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#137: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:99:
+^ISYNDROME_REMOTE_ABORTED_ERR ^I = 0x22,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#138: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:100:
+^ISYNDROME_INVAL_EECN_ERR ^I = 0x23,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#139: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:101:
+^ISYNDROME_INVAL_EEC_STATE_ERR ^I = 0x24$

CHECK:BIT_MACRO: Prefer using the BIT macro
#171: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:133:
+#define MTHCA_CQ_ENTRY_OWNER_HW      (1 << 7)

CHECK:BIT_MACRO: Prefer using the BIT macro
#173: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:135:
+#define MTHCA_CQ_DB_INC_CI       (1 << 24)

WARNING:MEMORY_BARRIER: memory barrier without comment
#290: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:252:
+		wmb();

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#317: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:279:
+			printk(KERN_DEBUG "  [%2x] %08x\n",

CHECK:SPACING: No space is necessary after a cast
#318: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:280:
+			       j * 4, be32_to_cpu(((u32 *) cqe)[j]));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#411: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:373:
+		printk(KERN_DEBUG "  [%2x] %08x\n",

CHECK:SPACING: No space is necessary after a cast
#412: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:374:
+		       j * 4, be32_to_cpu(((u32 *) cqe)[j]));

WARNING:MEMORY_BARRIER: memory barrier without comment
#432: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:394:
+	rmb();

CHECK:BRACES: braces {} should be used on all arms of this statement
#444: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:406:
+	if ((cqe->opcode & MTHCA_ERROR_CQE_OPCODE_MASK) ==
[...]
+	} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#448: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:410:
+	} else

CHECK:SPACING: No space is necessary after a cast
#502: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:464:
+				       (struct mthca_err_cqe *) cqe,

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#529: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:491:
+^I^Ientry->slid ^I   = be16_to_cpu(cqe->rlid);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#530: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:492:
+^I^Ientry->sl   ^I   = be16_to_cpu(cqe->sl_g_mlpath) >> 12;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#531: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:493:
+^I^Ientry->src_qp ^I   = be32_to_cpu(cqe->rqpn) & 0xffffff;$

WARNING:MEMORY_BARRIER: memory barrier without comment
#577: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:539:
+		wmb();

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#618: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:580:
+	mailbox = kmalloc(sizeof (struct mthca_cq_context) + MTHCA_CMD_MAILBOX_EXTRA,

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*mailbox)...) over kmalloc(sizeof (struct mthca_cq_context)...)
#618: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:580:
+	mailbox = kmalloc(sizeof (struct mthca_cq_context) + MTHCA_CMD_MAILBOX_EXTRA,

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:SIZEOF_PARENTHESIS: sizeof *dma_list should be sizeof(*dma_list)
#647: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:609:
+		dma_list = kmalloc(npages * sizeof *dma_list, GFP_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof *dma_list should be sizeof(*dma_list)
#661: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:623:
+		dma_list = kmalloc(npages * sizeof *dma_list, GFP_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof *cq->queue.page_list should be sizeof(*cq->queue.page_list)
#665: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:627:
+		cq->queue.page_list = kmalloc(npages * sizeof *cq->queue.page_list,

WARNING:SIZEOF_PARENTHESIS: sizeof *cq_context should be sizeof(*cq_context)
#706: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:668:
+	memset(cq_context, 0, sizeof *cq_context);

CHECK:BRACES: Unbalanced braces around else statement
#759: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:721:
+	else {

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#786: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:748:
+	mailbox = kmalloc(sizeof (struct mthca_cq_context) + MTHCA_CMD_MAILBOX_EXTRA,

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*mailbox)...) over kmalloc(sizeof (struct mthca_cq_context)...)
#786: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:748:
+	mailbox = kmalloc(sizeof (struct mthca_cq_context) + MTHCA_CMD_MAILBOX_EXTRA,

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#789: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:751:
+	if (!mailbox) {
+		mthca_warn(dev, "No memory for mailbox to free CQ.\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#804: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:766:
+		printk(KERN_ERR "context for CQN %x\n", cq->cqn);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#806: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:768:
+			printk(KERN_ERR "[%2x] %08x\n", j * 4, be32_to_cpu(ctx[j]));

CHECK:BRACES: Unbalanced braces around else statement
#825: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:787:
+	else {

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#844: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:806:
+int __devinit mthca_init_cq_table(struct mthca_dev *dev)

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#865: FILE: drivers/infiniband/hw/mthca/mthca_cq.c:827:
+void __devexit mthca_cleanup_cq_table(struct mthca_dev *dev)

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#873: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1:
+/*

WARNING:CVS_KEYWORD: CVS style keyword markers, these will _not_ be updated
#904: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:32:
+ * $Id: mthca_qp.c 1355 2004-12-17 15:23:43Z roland $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#935: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:63:
+^IMTHCA_QP_ST_RC ^I= 0x0,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#936: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:64:
+^IMTHCA_QP_ST_UC ^I= 0x1,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#937: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:65:
+^IMTHCA_QP_ST_RD ^I= 0x2,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#938: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:66:
+^IMTHCA_QP_ST_UD ^I= 0x3,$

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __packed over __attribute__((packed))
#976: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:104:
+} __attribute__((packed));

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __packed over __attribute__((packed))
#1008: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:136:
+} __attribute__((packed));

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __packed over __attribute__((packed))
#1015: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:143:
+} __attribute__((packed));

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1108: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:236:
+	u32 flags;		/* [17] VL15 [16] SLR [14:12] static rate
+				   [11:8] SL [3] C [2] E */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1108: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:236:
+				   [11:8] SL [3] C [2] E */

WARNING:SIZEOF_PARENTHESIS: sizeof param should be sizeof(param)
#1390: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:518:
+	memset(&param, 0, sizeof param);

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#1424: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:552:
+			return -EINVAL;
+		else

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 15)
#1432: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:560:
+	if (attr_mask & IB_QP_STATE) {
+               if (attr->qp_state < 0 || attr->qp_state > IB_QPS_ERR)

CHECK:BRACES: braces {} should be used on all arms of this statement
#1432: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:560:
+	if (attr_mask & IB_QP_STATE) {
[...]
+	} else
[...]

ERROR:CODE_INDENT: code indent should use tabs where possible
#1433: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:561:
+               if (attr->qp_state < 0 || attr->qp_state > IB_QPS_ERR)$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1433: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:561:
+               if (attr->qp_state < 0 || attr->qp_state > IB_QPS_ERR)$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (15, 24)
#1433: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:561:
+               if (attr->qp_state < 0 || attr->qp_state > IB_QPS_ERR)
+			return -EINVAL;

CHECK:BRACES: Unbalanced braces around else statement
#1436: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:564:
+	} else

WARNING:SPLIT_STRING: quoted string split across lines
#1441: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:569:
+		mthca_dbg(dev, "Illegal QP transition "
+			  "%d->%d\n", cur_state, new_state);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#1450: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:578:
+		mthca_dbg(dev, "QP transition "
+			  "%d->%d missing req attr 0x%08x\n",

WARNING:SPLIT_STRING: quoted string split across lines
#1458: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:586:
+		mthca_dbg(dev, "QP transition (transport %d) "
+			  "%d->%d has extra attr 0x%08x\n",

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1466: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:594:
+	mailbox = kmalloc(sizeof (*qp_param) + MTHCA_CMD_MAILBOX_EXTRA, GFP_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof *qp_param should be sizeof(*qp_param)
#1471: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:599:
+	memset(qp_param, 0, sizeof *qp_param);

CHECK:BRACES: braces {} should be used on all arms of this statement
#1476: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:604:
+	if (!(attr_mask & IB_QP_PATH_MIG_STATE))
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1478: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:606:
+	else {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1502: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:630:
+	if (attr_mask & IB_QP_DEST_QPN) {
+		qp_context->remote_qpn = cpu_to_be32(attr->dest_qp_num);
+	}

CHECK:BRACES: Unbalanced braces around else statement
#1509: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:637:
+	else {

WARNING:TYPO_SPELLING: 'WQs' may be misspelled - perhaps 'Was'?
#1558: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:686:
+	/* leave wqe_base as 0 (we always create an MR based at 0 for WQs) */
 	                                                              ^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1651: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:779:
+	size = sizeof (struct mthca_next_seg) +

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1652: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:780:
+		qp->rq.max_gs * sizeof (struct mthca_data_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1658: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:786:
+	size = sizeof (struct mthca_next_seg) +

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1659: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:787:
+		qp->sq.max_gs * sizeof (struct mthca_data_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1661: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:789:
+		size += 2 * sizeof (struct mthca_data_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1663: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:791:
+		size += sizeof (struct mthca_ud_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1665: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:793:
+		size += sizeof (struct mthca_bind_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1676: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:804:
+	qp->wrid = kmalloc((qp->rq.max + qp->sq.max) * sizeof (u64),

WARNING:SIZEOF_PARENTHESIS: sizeof *dma_list should be sizeof(*dma_list)
#1703: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:831:
+		dma_list = kmalloc(npages * sizeof *dma_list, GFP_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof *dma_list should be sizeof(*dma_list)
#1717: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:845:
+		dma_list = kmalloc(npages * sizeof *dma_list, GFP_KERNEL);

WARNING:SIZEOF_PARENTHESIS: sizeof *qp->queue.page_list should be sizeof(*qp->queue.page_list)
#1722: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:850:
+					      sizeof *qp->queue.page_list,

CHECK:BRACES: Unbalanced braces around else statement
#1756: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:884:
+	} else

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#1764: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:892:
+
+		}

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1784: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:912:
+^Iqp->state    ^I = IB_QPS_RESET;$

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#1812: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:940:
+	case IB_QPT_RC: qp->transport = RC; break;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#1813: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:941:
+	case IB_QPT_UC: qp->transport = UC; break;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#1814: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:942:
+	case IB_QPT_UD: qp->transport = UD; break;

CHECK:BRACES: braces {} should be used on all arms of this statement
#1934: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1062:
+	if (is_sqp(dev, qp)) {
[...]
+	else
[...]

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#1941: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1069:
+	}
+	else

`else {` should follow the closing block `}` on the same line.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:SPACING: No space is necessary after a cast
#2060: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1188:
+		((struct mthca_next_seg *) wqe)->nda_op = 0;

CHECK:SPACING: No space is necessary after a cast
#2061: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1189:
+		((struct mthca_next_seg *) wqe)->ee_nds = 0;

CHECK:SPACING: No space is necessary after a cast
#2062: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1190:
+		((struct mthca_next_seg *) wqe)->flags =

CHECK:SPACING: No space is necessary after a cast
#2070: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1198:
+			((struct mthca_next_seg *) wqe)->flags = wr->imm_data;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2072: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1200:
+		wqe += sizeof (struct mthca_next_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2073: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1201:
+		size = sizeof (struct mthca_next_seg) / 16;

CHECK:SPACING: No space is necessary after a cast
#2080: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1208:
+				((struct mthca_raddr_seg *) wqe)->raddr =

CHECK:SPACING: No space is necessary after a cast
#2082: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1210:
+				((struct mthca_raddr_seg *) wqe)->rkey =

CHECK:SPACING: No space is necessary after a cast
#2084: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1212:
+				((struct mthca_raddr_seg *) wqe)->reserved = 0;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2086: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1214:
+				wqe += sizeof (struct mthca_raddr_seg);

CHECK:SPACING: No space is necessary after a cast
#2089: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1217:
+					((struct mthca_atomic_seg *) wqe)->swap_add =

CHECK:SPACING: No space is necessary after a cast
#2091: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1219:
+					((struct mthca_atomic_seg *) wqe)->compare =

CHECK:SPACING: No space is necessary after a cast
#2094: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1222:
+					((struct mthca_atomic_seg *) wqe)->swap_add =

CHECK:SPACING: No space is necessary after a cast
#2096: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1224:
+					((struct mthca_atomic_seg *) wqe)->compare = 0;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2099: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1227:
+				wqe += sizeof (struct mthca_atomic_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2100: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1228:
+				size += sizeof (struct mthca_raddr_seg) / 16 +

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2101: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1229:
+					sizeof (struct mthca_atomic_seg);

CHECK:SPACING: No space is necessary after a cast
#2107: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1235:
+				((struct mthca_raddr_seg *) wqe)->raddr =

CHECK:SPACING: No space is necessary after a cast
#2109: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1237:
+				((struct mthca_raddr_seg *) wqe)->rkey =

CHECK:SPACING: No space is necessary after a cast
#2111: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1239:
+				((struct mthca_raddr_seg *) wqe)->reserved = 0;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2112: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1240:
+				wqe += sizeof (struct mthca_raddr_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2113: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1241:
+				size += sizeof (struct mthca_raddr_seg) / 16;

CHECK:SPACING: No space is necessary after a cast
#2122: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1250:
+			((struct mthca_ud_seg *) wqe)->lkey =

CHECK:SPACING: No space is necessary after a cast
#2124: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1252:
+			((struct mthca_ud_seg *) wqe)->av_addr =

CHECK:SPACING: No space is necessary after a cast
#2126: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1254:
+			((struct mthca_ud_seg *) wqe)->dqpn =

CHECK:SPACING: No space is necessary after a cast
#2128: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1256:
+			((struct mthca_ud_seg *) wqe)->qkey =

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2131: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1259:
+			wqe += sizeof (struct mthca_ud_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2132: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1260:
+			size += sizeof (struct mthca_ud_seg) / 16;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2137: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1265:
+					       wqe - sizeof (struct mthca_next_seg),

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2143: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1271:
+			wqe += sizeof (struct mthca_data_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2144: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1272:
+			size += sizeof (struct mthca_data_seg) / 16;

CHECK:SPACING: No space is necessary after a cast
#2156: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1284:
+			((struct mthca_data_seg *) wqe)->byte_count =

CHECK:SPACING: No space is necessary after a cast
#2158: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1286:
+			((struct mthca_data_seg *) wqe)->lkey =

CHECK:SPACING: No space is necessary after a cast
#2160: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1288:
+			((struct mthca_data_seg *) wqe)->addr =

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2162: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1290:
+			wqe += sizeof (struct mthca_data_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2163: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1291:
+			size += sizeof (struct mthca_data_seg) / 16;

CHECK:SPACING: No space is necessary after a cast
#2168: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1296:
+			((struct mthca_data_seg *) wqe)->byte_count =

CHECK:SPACING: No space is necessary after a cast
#2170: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1298:
+			((u32 *) wqe)[1] = 0;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2171: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1299:
+			wqe += sizeof (struct mthca_data_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2172: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1300:
+			size += sizeof (struct mthca_data_seg) / 16;

CHECK:SPACING: No space is necessary after a cast
#2185: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1313:
+			((struct mthca_next_seg *) prev_wqe)->nda_op =

WARNING:MEMORY_BARRIER: memory barrier without comment
#2189: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1317:
+			smp_wmb();

CHECK:SPACING: No space is necessary after a cast
#2190: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1318:
+			((struct mthca_next_seg *) prev_wqe)->ee_nds =

WARNING:MEMORY_BARRIER: memory barrier without comment
#2212: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1340:
+		wmb();

CHECK:SPACING: No space is necessary after a cast
#2259: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1387:
+		((struct mthca_next_seg *) wqe)->nda_op = 0;

CHECK:SPACING: No space is necessary after a cast
#2260: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1388:
+		((struct mthca_next_seg *) wqe)->ee_nds =

CHECK:SPACING: No space is necessary after a cast
#2262: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1390:
+		((struct mthca_next_seg *) wqe)->flags =

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2266: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1394:
+		wqe += sizeof (struct mthca_next_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2267: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1395:
+		size = sizeof (struct mthca_next_seg) / 16;

CHECK:SPACING: No space is necessary after a cast
#2276: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1404:
+			((struct mthca_data_seg *) wqe)->byte_count =

CHECK:SPACING: No space is necessary after a cast
#2278: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1406:
+			((struct mthca_data_seg *) wqe)->lkey =

CHECK:SPACING: No space is necessary after a cast
#2280: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1408:
+			((struct mthca_data_seg *) wqe)->addr =

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2282: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1410:
+			wqe += sizeof (struct mthca_data_seg);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2283: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1411:
+			size += sizeof (struct mthca_data_seg) / 16;

CHECK:SPACING: No space is necessary after a cast
#2289: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1417:
+			((struct mthca_next_seg *) prev_wqe)->nda_op =

WARNING:MEMORY_BARRIER: memory barrier without comment
#2291: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1419:
+			smp_wmb();

CHECK:SPACING: No space is necessary after a cast
#2292: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1420:
+			((struct mthca_next_seg *) prev_wqe)->ee_nds =

WARNING:MEMORY_BARRIER: memory barrier without comment
#2311: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1439:
+		wmb();

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#2345: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1473:
+int __devinit mthca_init_qp_table(struct mthca_dev *dev)

WARNING:SPLIT_STRING: quoted string split across lines
#2381: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1509:
+			mthca_warn(dev, "CONF_SPECIAL_QP returned "
+				   "status %02x, aborting.\n",

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#2399: FILE: drivers/infiniband/hw/mthca/mthca_qp.c:1527:
+void __devexit mthca_cleanup_qp_table(struct mthca_dev *dev)

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000221940.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 12 errors, 102 warnings, 55 checks, 2367 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000221940.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
