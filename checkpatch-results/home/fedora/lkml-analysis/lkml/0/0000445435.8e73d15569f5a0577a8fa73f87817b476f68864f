CHECK:CAMELCASE: Avoid CamelCase: <Scsi_Host>
#90: FILE: drivers/scsi/atp870u.c:83:
+	struct Scsi_Host *host;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

WARNING:BRACES: braces {} are not necessary for single statement blocks
#148: FILE: drivers/scsi/atp870u.c:120:
+				if ((inb(tmpcip) & 0x08) == 0) {
 					goto stop_dma;
 				}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:BRACES: braces {} are not necessary for single statement blocks
#153: FILE: drivers/scsi/atp870u.c:123:
+				if ((inb(tmpcip) & 0x01) == 0) {
 					goto stop_dma;
 				}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#178: FILE: drivers/scsi/atp870u.c:150:
+			if (dev->last_cmd == 0xff) {
+				dev->last_cmd = target_id;
+			}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#190: FILE: drivers/scsi/atp870u.c:157:
+			if ((dev->last_cmd & 0xf0) != 0x40) {
+				dev->last_cmd = 0xff;
 			}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#206: FILE: drivers/scsi/atp870u.c:166:
+				while ((inb(tmport) & 0x01) != 0x01) {
+					outb(0x01, tmport);
 				}

WARNING:LONG_LINE: line length of 109 exceeds 100 columns
#218: FILE: drivers/scsi/atp870u.c:173:
+			if (((dev->quhdu != dev->quendu) || (dev->last_cmd != 0xff)) && (dev->in_snd == 0)) {

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->quhdu != dev->quendu'
#218: FILE: drivers/scsi/atp870u.c:173:
+			if (((dev->quhdu != dev->quendu) || (dev->last_cmd != 0xff)) && (dev->in_snd == 0)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->last_cmd != 0xff'
#218: FILE: drivers/scsi/atp870u.c:173:
+			if (((dev->quhdu != dev->quendu) || (dev->last_cmd != 0xff)) && (dev->in_snd == 0)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->in_snd == 0'
#218: FILE: drivers/scsi/atp870u.c:173:
+			if (((dev->quhdu != dev->quendu) || (dev->last_cmd != 0xff)) && (dev->in_snd == 0)) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#218: FILE: drivers/scsi/atp870u.c:173:
+			if (((dev->quhdu != dev->quendu) || (dev->last_cmd != 0xff)) && (dev->in_snd == 0)) {
+				send_s870(host);
 			}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#246: FILE: drivers/scsi/atp870u.c:190:
+			if ((dev->last_cmd & 0xf0) != 0x40) {
+				dev->last_cmd = 0xff;
 			}

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'i == 0x80'
#257: FILE: drivers/scsi/atp870u.c:209:
+		if ((i == 0x80) || (i == 0x8f)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'i == 0x8f'
#257: FILE: drivers/scsi/atp870u.c:209:
+		if ((i == 0x80) || (i == 0x8f)) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#296: FILE: drivers/scsi/atp870u.c:247:
+			if (dev->last_cmd != 0xff) {
+				dev->last_cmd |= 0x40;
 			}

WARNING:LONG_LINE: line length of 155 exceeds 100 columns
#344: FILE: drivers/scsi/atp870u.c:285:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x08'
#344: FILE: drivers/scsi/atp870u.c:285:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x28'
#344: FILE: drivers/scsi/atp870u.c:285:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x0a'
#344: FILE: drivers/scsi/atp870u.c:285:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x2a'
#344: FILE: drivers/scsi/atp870u.c:285:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#344: FILE: drivers/scsi/atp870u.c:285:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {
[...]
+				} else {
[...]

CHECK:SPACING: No space is necessary after a cast
#345: FILE: drivers/scsi/atp870u.c:286:
+					outb((unsigned char) ((inb(tmport) & 0xf3) | 0x08), tmport);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: No space is necessary after a cast
#347: FILE: drivers/scsi/atp870u.c:288:
+					outb((unsigned char) (inb(tmport) & 0xf3), tmport);

WARNING:LONG_LINE: line length of 155 exceeds 100 columns
#351: FILE: drivers/scsi/atp870u.c:292:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x08'
#351: FILE: drivers/scsi/atp870u.c:292:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x28'
#351: FILE: drivers/scsi/atp870u.c:292:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x0a'
#351: FILE: drivers/scsi/atp870u.c:292:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x2a'
#351: FILE: drivers/scsi/atp870u.c:292:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#351: FILE: drivers/scsi/atp870u.c:292:
+				if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {
[...]
+				} else {
[...]

CHECK:SPACING: No space is necessary after a cast
#352: FILE: drivers/scsi/atp870u.c:293:
+					outb((unsigned char) ((inb(tmport) & 0x3f) | 0xc0), tmport);

CHECK:SPACING: No space is necessary after a cast
#354: FILE: drivers/scsi/atp870u.c:295:
+					outb((unsigned char) (inb(tmport) & 0x3f), tmport);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#373: FILE: drivers/scsi/atp870u.c:310:
+			while ((inb(tmport) & 0x01) != j) {
+				outb(j, tmport);
 			}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#411: FILE: drivers/scsi/atp870u.c:372:
+			if ((dev->last_cmd & 0xf0) != 0x40) {
+				dev->last_cmd = 0xff;
 			}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#424: FILE: drivers/scsi/atp870u.c:380:
+			if ((dev->last_cmd & 0xf0) != 0x40) {
+				dev->last_cmd = 0xff;
 			}

ERROR:TRAILING_WHITESPACE: trailing whitespace
#437: FILE: drivers/scsi/atp870u.c:391:
+^I^I^I $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required before the open parenthesis '('
#438: FILE: drivers/scsi/atp870u.c:392:
+			if(workrequ->use_sg)

WARNING:LONG_LINE: line length of 164 exceeds 100 columns
#439: FILE: drivers/scsi/atp870u.c:393:
+				pci_unmap_sg(dev->pdev, (struct scatterlist *)workrequ->buffer, workrequ->use_sg, scsi_to_pci_dma_dir(workrequ->sc_data_direction));

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#440: FILE: drivers/scsi/atp870u.c:394:
+			else if(workrequ->request_bufflen && workrequ->sc_data_direction != SCSI_DATA_NONE)

ERROR:SPACING: space required before the open parenthesis '('
#440: FILE: drivers/scsi/atp870u.c:394:
+			else if(workrequ->request_bufflen && workrequ->sc_data_direction != SCSI_DATA_NONE)

WARNING:LONG_LINE: line length of 163 exceeds 100 columns
#441: FILE: drivers/scsi/atp870u.c:395:
+				pci_unmap_single(dev->pdev, workrequ->SCp.dma_handle, workrequ->request_bufflen, scsi_to_pci_dma_dir(workrequ->sc_data_direction));

CHECK:CAMELCASE: Avoid CamelCase: <SCp>
#441: FILE: drivers/scsi/atp870u.c:395:
+				pci_unmap_single(dev->pdev, workrequ->SCp.dma_handle, workrequ->request_bufflen, scsi_to_pci_dma_dir(workrequ->sc_data_direction));

WARNING:BRACES: braces {} are not necessary for single statement blocks
#464: FILE: drivers/scsi/atp870u.c:411:
+				while ((inb(tmport) & 0x01) != 0x01) {
+					outb(0x01, tmport);
 				}

WARNING:LONG_LINE: line length of 109 exceeds 100 columns
#476: FILE: drivers/scsi/atp870u.c:418:
+			if (((dev->last_cmd != 0xff) || (dev->quhdu != dev->quendu)) && (dev->in_snd == 0)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->last_cmd != 0xff'
#476: FILE: drivers/scsi/atp870u.c:418:
+			if (((dev->last_cmd != 0xff) || (dev->quhdu != dev->quendu)) && (dev->in_snd == 0)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->quhdu != dev->quendu'
#476: FILE: drivers/scsi/atp870u.c:418:
+			if (((dev->last_cmd != 0xff) || (dev->quhdu != dev->quendu)) && (dev->in_snd == 0)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->in_snd == 0'
#476: FILE: drivers/scsi/atp870u.c:418:
+			if (((dev->last_cmd != 0xff) || (dev->quhdu != dev->quendu)) && (dev->in_snd == 0)) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#476: FILE: drivers/scsi/atp870u.c:418:
+			if (((dev->last_cmd != 0xff) || (dev->quhdu != dev->quendu)) && (dev->in_snd == 0)) {
+				send_s870(host);
 			}

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#506: FILE: drivers/scsi/atp870u.c:489:
+static int atp870u_queuecommand(Scsi_Cmnd * req_p, void (*done) (Scsi_Cmnd *))

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:CAMELCASE: Avoid CamelCase: <Scsi_Cmnd>
#506: FILE: drivers/scsi/atp870u.c:489:
+static int atp870u_queuecommand(Scsi_Cmnd * req_p, void (*done) (Scsi_Cmnd *))

ERROR:TRAILING_WHITESPACE: trailing whitespace
#532: FILE: drivers/scsi/atp870u.c:505:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#612: FILE: drivers/scsi/atp870u.c:574:
+^I$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "workrequ"
#625: FILE: drivers/scsi/atp870u.c:583:
+		if (workrequ != NULL) {	/* check NULL pointer */

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->last_cmd != 0xff'
#645: FILE: drivers/scsi/atp870u.c:593:
+	if ((dev->last_cmd != 0xff) && (dev->working != 0)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->working != 0'
#645: FILE: drivers/scsi/atp870u.c:593:
+	if ((dev->last_cmd != 0xff) && (dev->working != 0)) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#686: FILE: drivers/scsi/atp870u.c:654:
+	while ((inb(tmport) & 0x01) != j) {
+		outb(j, tmport);
 	}

CHECK:BRACES: braces {} should be used on all arms of this statement
#711: FILE: drivers/scsi/atp870u.c:680:
+	if (workrequ->use_sg) {
[...]
 				panic("Foooooooood fight!");
[...]
-	} else {
[...]

WARNING:LONG_LINE: line length of 124 exceeds 100 columns
#718: FILE: drivers/scsi/atp870u.c:683:
+		sg_count = pci_map_sg(dev->pdev, sgpnt, workrequ->use_sg, scsi_to_pci_dma_dir(workrequ->sc_data_direction));

WARNING:BRACES: braces {} are not necessary for single statement blocks
#720: FILE: drivers/scsi/atp870u.c:685:
+			if (sgpnt[i].length == 0 || workrequ->use_sg > ATP870U_SCATTER) {
 				panic("Foooooooood fight!");
 			}

ERROR:SPACING: space required before the open parenthesis '('
#726: FILE: drivers/scsi/atp870u.c:690:
+	} else if(workrequ->request_bufflen && workrequ->sc_data_direction != PCI_DMA_NONE) {

WARNING:LONG_LINE: line length of 172 exceeds 100 columns
#727: FILE: drivers/scsi/atp870u.c:691:
+		workrequ->SCp.dma_handle = pci_map_single(dev->pdev, workrequ->request_buffer, workrequ->request_bufflen, scsi_to_pci_dma_dir(workrequ->sc_data_direction));

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#730: FILE: drivers/scsi/atp870u.c:694:
+	else l = 0;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#730: FILE: drivers/scsi/atp870u.c:694:
 	}
+	else l = 0;

`else {` should follow the closing block `}` on the same line.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#753: FILE: drivers/scsi/atp870u.c:713:
+	if (workrequ->sc_data_direction == SCSI_DATA_WRITE) {
[...]
 	} else {
[...]

CHECK:SPACING: No space is necessary after a cast
#759: FILE: drivers/scsi/atp870u.c:718:
+	outb((unsigned char) (inb(tmport) | 0x80), tmport);

CHECK:SPACING: No space is necessary after a cast
#794: FILE: drivers/scsi/atp870u.c:749:
+				(u16) (((u16 *) (prd))[i + 3]) = 0x0000;

CHECK:SPACING: No space is necessary after a cast
#795: FILE: drivers/scsi/atp870u.c:750:
+				(u16) (((u16 *) (prd))[i + 2]) = 0x0000;

CHECK:SPACING: No space is necessary after a cast
#796: FILE: drivers/scsi/atp870u.c:751:
+				(u32) (((u32 *) (prd))[i >> 1]) = cpu_to_le32(bttl);

CHECK:SPACING: No space is necessary after a cast
#801: FILE: drivers/scsi/atp870u.c:756:
+			(u32) (((u32 *) (prd))[i >> 1]) = cpu_to_le32(bttl);

CHECK:SPACING: No space is necessary after a cast
#802: FILE: drivers/scsi/atp870u.c:757:
+			(u16) (((u16 *) (prd))[i + 2]) = cpu_to_le16(l);

CHECK:SPACING: No space is necessary after a cast
#803: FILE: drivers/scsi/atp870u.c:758:
+			(u16) (((u16 *) (prd))[i + 3]) = 0;

CHECK:SPACING: No space is necessary after a cast
#807: FILE: drivers/scsi/atp870u.c:761:
+		(u16) (((u16 *) (prd))[i - 1]) = cpu_to_le16(0x8000);

CHECK:SPACING: No space is necessary after a cast
#821: FILE: drivers/scsi/atp870u.c:770:
+			(u16) (((u16 *) (prd))[i + 3]) = 0x0000;

CHECK:SPACING: No space is necessary after a cast
#822: FILE: drivers/scsi/atp870u.c:771:
+			(u16) (((u16 *) (prd))[i + 2]) = 0x0000;

CHECK:SPACING: No space is necessary after a cast
#823: FILE: drivers/scsi/atp870u.c:772:
+			(u32) (((u32 *) (prd))[i >> 1]) = cpu_to_le32(bttl);

CHECK:SPACING: No space is necessary after a cast
#831: FILE: drivers/scsi/atp870u.c:777:
+		(u16) (((u16 *) (prd))[i + 3]) = cpu_to_le16(0x8000);

CHECK:SPACING: No space is necessary after a cast
#832: FILE: drivers/scsi/atp870u.c:778:
+		(u16) (((u16 *) (prd))[i + 2]) = cpu_to_le16(l);

CHECK:SPACING: No space is necessary after a cast
#833: FILE: drivers/scsi/atp870u.c:779:
+		(u32) (((u32 *) (prd))[i >> 1]) = cpu_to_le32(bttl);

WARNING:LONG_LINE: line length of 139 exceeds 100 columns
#872: FILE: drivers/scsi/atp870u.c:791:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x08'
#872: FILE: drivers/scsi/atp870u.c:791:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x28'
#872: FILE: drivers/scsi/atp870u.c:791:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x0a'
#872: FILE: drivers/scsi/atp870u.c:791:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x2a'
#872: FILE: drivers/scsi/atp870u.c:791:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#872: FILE: drivers/scsi/atp870u.c:791:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {
[...]
+		} else {
[...]

WARNING:LONG_LINE: line length of 139 exceeds 100 columns
#879: FILE: drivers/scsi/atp870u.c:798:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x08'
#879: FILE: drivers/scsi/atp870u.c:798:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x28'
#879: FILE: drivers/scsi/atp870u.c:798:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x0a'
#879: FILE: drivers/scsi/atp870u.c:798:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->ata_cdbu[0] == 0x2a'
#879: FILE: drivers/scsi/atp870u.c:798:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#879: FILE: drivers/scsi/atp870u.c:798:
+		if ((dev->ata_cdbu[0] == 0x08) || (dev->ata_cdbu[0] == 0x28) || (dev->ata_cdbu[0] == 0x0a) || (dev->ata_cdbu[0] == 0x2a)) {
[...]
+		} else {
[...]

CHECK:SPACING: No space is necessary after a cast
#880: FILE: drivers/scsi/atp870u.c:799:
+			outb((unsigned char) ((inb(tmport) & 0x3f) | 0xc0), tmport);

CHECK:SPACING: No space is necessary after a cast
#882: FILE: drivers/scsi/atp870u.c:801:
+			outb((unsigned char) (inb(tmport) & 0x3f), tmport);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#922: FILE: drivers/scsi/atp870u.c:837:
+static int atp870u_command(Scsi_Cmnd * SCpnt)

CHECK:CAMELCASE: Avoid CamelCase: <SCpnt>
#922: FILE: drivers/scsi/atp870u.c:837:
+static int atp870u_command(Scsi_Cmnd * SCpnt)

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#928: FILE: drivers/scsi/atp870u.c:843:
 	while (!SCpnt->SCp.Status)
+	{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:TYPO_SPELLING: 'recommanded' may be misspelled - perhaps 'recommended'?
#1015: FILE: drivers/scsi/atp870u.c:996:
+	udelay(0xffff);		/* recommanded SCAM selection response time */
 	               		   ^^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#1025: FILE: drivers/scsi/atp870u.c:1005:
+	udelay(100);

usleep_range() should be preferred over udelay(). The proper way of
using usleep_range() is mentioned in the kernel docs.

See: https://www.kernel.org/doc/html/latest/timers/timers-howto.html#delays-information-on-the-various-kernel-delay-sleep-mechanisms

WARNING:TYPO_SPELLING: 'upto' may be misspelled - perhaps 'up to'?
#1052: FILE: drivers/scsi/atp870u.c:1081:
+	if ((j & 0x20) != 0) {	/* bit5=1:ID upto 7      */
 	                      	             ^^^^

WARNING:LONG_LINE: line length of 141 exceeds 100 columns
#1136: FILE: drivers/scsi/atp870u.c:1437:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->id[i].devtypeu == 0x00'
#1136: FILE: drivers/scsi/atp870u.c:1437:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->id[i].devtypeu == 0x07'
#1136: FILE: drivers/scsi/atp870u.c:1437:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->id[i].devtypeu == 0x05'
#1136: FILE: drivers/scsi/atp870u.c:1437:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1136: FILE: drivers/scsi/atp870u.c:1437:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {
 			goto set_sync;
 		}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1191: FILE: drivers/scsi/atp870u.c:1778:
+		if (lvdmode == 0) {
+			goto chg_wide;
 		}

WARNING:LONG_LINE: line length of 141 exceeds 100 columns
#1226: FILE: drivers/scsi/atp870u.c:2067:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->id[i].devtypeu == 0x00'
#1226: FILE: drivers/scsi/atp870u.c:2067:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->id[i].devtypeu == 0x07'
#1226: FILE: drivers/scsi/atp870u.c:2067:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->id[i].devtypeu == 0x05'
#1226: FILE: drivers/scsi/atp870u.c:2067:
+		if ((dev->id[i].devtypeu == 0x00) || (dev->id[i].devtypeu == 0x07) || ((dev->id[i].devtypeu == 0x05) && ((n & 0x10) != 0))) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1232: FILE: drivers/scsi/atp870u.c:2070:
+			if ((dev->async & m) != 0) {
+				goto set_sync;
 			}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1280: FILE: drivers/scsi/atp870u.c:2274:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1302: FILE: drivers/scsi/atp870u.c:2296:
+	for (k = 0; k < qcnt; k++) {
+		dev->querequ[k] = 0;
+	}

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1309: FILE: drivers/scsi/atp870u.c:2303:
+}^I^I^I$

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1313: FILE: drivers/scsi/atp870u.c:2306:
+static int atp870u_detect(Scsi_Host_Template * tpnt)

CHECK:CAMELCASE: Avoid CamelCase: <Scsi_Host_Template>
#1313: FILE: drivers/scsi/atp870u.c:2306:
+static int atp870u_detect(Scsi_Host_Template * tpnt)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1338: FILE: drivers/scsi/atp870u.c:2324:
+		printk(KERN_INFO "   NO PCI SUPPORT.\n");

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#1381: FILE: drivers/scsi/atp870u.c:2330:
+	while (devid[h] != 0)
+	{

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1384: FILE: drivers/scsi/atp870u.c:2333:
+^I^I$

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#1385: FILE: drivers/scsi/atp870u.c:2334:
+		while((dev = pci_find_device(0x1191, devid[h], dev))!=NULL)
+		{

ERROR:SPACING: spaces required around that '!=' (ctx:VxV)
#1385: FILE: drivers/scsi/atp870u.c:2334:
+		while((dev = pci_find_device(0x1191, devid[h], dev))!=NULL)
 		                                                    ^

ERROR:SPACING: space required before the open parenthesis '('
#1385: FILE: drivers/scsi/atp870u.c:2334:
+		while((dev = pci_find_device(0x1191, devid[h], dev))!=NULL)

ERROR:SPACING: space required before the open parenthesis '('
#1387: FILE: drivers/scsi/atp870u.c:2336:
+			if(pci_enable_device(dev))

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#1394: FILE: drivers/scsi/atp870u.c:2339:
+			if(pci_set_dma_mask(dev, 0xFFFFFFFFUL))
+			{

ERROR:SPACING: space required before the open parenthesis '('
#1394: FILE: drivers/scsi/atp870u.c:2339:
+			if(pci_set_dma_mask(dev, 0xFFFFFFFFUL))

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1396: FILE: drivers/scsi/atp870u.c:2341:
+				printk(KERN_ERR "atp870u: 32bit DMA mask required but not available.\n");

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1404: FILE: drivers/scsi/atp870u.c:2349:
+				if (chip_ver[card] < 2) {
+					continue;
+				}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1408: FILE: drivers/scsi/atp870u.c:2353:
+			if (devid[h] == 0x8010 || devid[h] == 0x8081 || devid[h] == 0x8050) {
+				chip_ver[card] = 0x04;
+			}

WARNING:LINE_SPACING: Missing a blank line after declarations
#1438: FILE: drivers/scsi/atp870u.c:2364:
+		struct atp_unit tmp, *dev;
+		if (pdev[h] == NULL) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1438: FILE: drivers/scsi/atp870u.c:2364:
+		if (pdev[h] == NULL) {
 			return count;
 		}

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pdev[h]"
#1438: FILE: drivers/scsi/atp870u.c:2364:
+		if (pdev[h] == NULL) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1527: FILE: drivers/scsi/atp870u.c:2377:
+			if (check_region(base_io, 0x40) != 0) {
+				return 0;
+			}

WARNING:LONG_LINE: line length of 135 exceeds 100 columns
#1530: FILE: drivers/scsi/atp870u.c:2380:
+			printk(KERN_INFO "   ACARD AEC-671X PCI Ultra/W SCSI-3 Host Adapter: %d    IO:%x, IRQ:%d.\n", h, base_io, irq);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1530: FILE: drivers/scsi/atp870u.c:2380:
+			printk(KERN_INFO "   ACARD AEC-671X PCI Ultra/W SCSI-3 Host Adapter: %d    IO:%x, IRQ:%d.\n", h, base_io, irq);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1531: FILE: drivers/scsi/atp870u.c:2381:
+^I^I^I$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!shpnt"
#1550: FILE: drivers/scsi/atp870u.c:2400:
+			if (shpnt == NULL)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1560: FILE: drivers/scsi/atp870u.c:2410:
+				printk(KERN_ERR "Unable to allocate IRQ for Acard controller.\n");

WARNING:LONG_LINE_COMMENT: line length of 112 exceeds 100 columns
#1586: FILE: drivers/scsi/atp870u.c:2414:
+			if (chip_ver[h] > 0x07) {	/* check if atp876 chip   *//* then enable terminator */

A comment starts before but extends beyond the maximum line length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#1603: FILE: drivers/scsi/atp870u.c:2431:
+			while ((inb(tmport) & 0x80) == 0);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1621: FILE: drivers/scsi/atp870u.c:2449:
+			if (check_region(base_io, 0x60) != 0) {
+				return 0;
+			}

WARNING:LONG_LINE: line length of 132 exceeds 100 columns
#1627: FILE: drivers/scsi/atp870u.c:2455:
+			printk(KERN_INFO "   ACARD AEC-67160 PCI Ultra3 LVD Host Adapter: %d    IO:%x, IRQ:%d.\n", h, base_io, irq);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1627: FILE: drivers/scsi/atp870u.c:2455:
+			printk(KERN_INFO "   ACARD AEC-67160 PCI Ultra3 LVD Host Adapter: %d    IO:%x, IRQ:%d.\n", h, base_io, irq);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1679: FILE: drivers/scsi/atp870u.c:2471:
+			if (n >= 0x4000) {
+				goto flash_ok;
+			}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1685: FILE: drivers/scsi/atp870u.c:2477:
+			if (inb(base_io + 0x30) == 0xff) {
+				goto flash_ok;
+			}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1785: FILE: drivers/scsi/atp870u.c:2514:
+					if (tmp.sp[k] == 0) {
+						tmp.async |= n;
+					}

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!shpnt"
#1794: FILE: drivers/scsi/atp870u.c:2523:
+			if (shpnt == NULL)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1796: FILE: drivers/scsi/atp870u.c:2525:
+^I^I^I^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1799: FILE: drivers/scsi/atp870u.c:2528:
+^I^I^I$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1804: FILE: drivers/scsi/atp870u.c:2533:
+				printk(KERN_ERR "Unable to allocate IRQ for Acard controller.\n");

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#1825: FILE: drivers/scsi/atp870u.c:2554:
+			while ((inb(tmport) & 0x80) == 0);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1841: FILE: drivers/scsi/atp870u.c:2570:
+^I^I$

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#1856: FILE: drivers/scsi/atp870u.c:2578:
+		if (dev_id[h] == 0x8081) {
[...]
+		} else {
[...]

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#1870: FILE: drivers/scsi/atp870u.c:2585:
+		if (dev_id[h] == 0x8081) {
[...]
+		} else {
[...]

WARNING:LONG_LINE_COMMENT: line length of 111 exceeds 100 columns
#1871: FILE: drivers/scsi/atp870u.c:2586:
+			request_region(base_io, 0x60, "atp870u");	/* Register the IO ports that we use */

WARNING:LONG_LINE_COMMENT: line length of 111 exceeds 100 columns
#1873: FILE: drivers/scsi/atp870u.c:2588:
+			request_region(base_io, 0x40, "atp870u");	/* Register the IO ports that we use */

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1919: FILE: drivers/scsi/atp870u.c:2627:
+	printk(" r3a=%2x \n", inb(tmport));

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#1919: FILE: drivers/scsi/atp870u.c:2627:
+	printk(" r3a=%2x \n", inb(tmport));

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1948: FILE: drivers/scsi/atp870u.c:2629:
+	printk(" r3b=%2x \n", inb(tmport));

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#1948: FILE: drivers/scsi/atp870u.c:2629:
+	printk(" r3b=%2x \n", inb(tmport));

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "dev->id[j].curr_req"
#1950: FILE: drivers/scsi/atp870u.c:2631:
+		if (dev->id[j].curr_req != NULL) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1952: FILE: drivers/scsi/atp870u.c:2633:
+			printk("\n que cdb= ");

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1953: FILE: drivers/scsi/atp870u.c:2634:
+			for (k = 0; k < workrequ->cmd_len; k++) {
+				printk(" %2x ", workrequ->cmnd[k]);
+			}

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1954: FILE: drivers/scsi/atp870u.c:2635:
+				printk(" %2x ", workrequ->cmnd[k]);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1956: FILE: drivers/scsi/atp870u.c:2637:
+			printk(" last_lenu= %lx ", dev->id[j].last_lenu);

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#1986: FILE: drivers/scsi/atp870u.c:2655:
+	return -ENOSYS;		/* Currently this is a no-op */

ENOSYS means that a nonexistent system call was called.
Earlier, it was wrongly used for things like invalid operations on
otherwise valid syscalls.  This should be avoided in new code.

See: https://lore.kernel.org/lkml/5eb299021dec23c1a48fa7d9f2c8b794e967766d.1408730669.git.luto@amacapital.net/

WARNING:TYPO_SPELLING: 'inout' may be misspelled - perhaps 'input'?
#1992: FILE: drivers/scsi/atp870u.c:2659:
+int atp870u_proc_info(char *buffer, char **start, off_t offset, int length, int hostno, int inout)
                                                                                             ^^^^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#2019: FILE: drivers/scsi/atp870u.c:2716:
+static int atp870u_biosparam(Scsi_Disk * disk, kdev_t dev, int *ip)

CHECK:CAMELCASE: Avoid CamelCase: <Scsi_Disk>
#2019: FILE: drivers/scsi/atp870u.c:2716:
+static int atp870u_biosparam(Scsi_Disk * disk, kdev_t dev, int *ip)

WARNING:LINE_SPACING: Missing a blank line after declarations
#2047: FILE: drivers/scsi/atp870u.c:2741:
+	int k;
+	free_irq(pshost->irq, pshost);

CHECK:CAMELCASE: Avoid CamelCase: <Disk>
#2076: FILE: drivers/scsi/atp870u.h:25:
+static int atp870u_biosparam(Disk *, kdev_t, int *);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2091: FILE: drivers/scsi/atp870u.h:51:
+^Ieh_abort_handler: atp870u_abort, ^I^I^I\$

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#2091: FILE: drivers/scsi/atp870u.h:51:
+	eh_abort_handler: atp870u_abort, 			\
 	                ^

WARNING:INDENTED_LABEL: labels should not be indented
#2091: FILE: drivers/scsi/atp870u.h:51:
+	eh_abort_handler: atp870u_abort, 			\

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000445435.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 29 errors, 74 warnings, 67 checks, 2004 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000445435.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
