WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#60: 
 - A time-critical section now runs with IRQs blocked, rather than being split

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#89: FILE: drivers/usb/host/ohci-hcd.c:141:
+static void ohci_dump (struct ohci_hcd *ohci, int verbose);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#90: FILE: drivers/usb/host/ohci-hcd.c:142:
+static int ohci_init (struct ohci_hcd *ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#91: FILE: drivers/usb/host/ohci-hcd.c:143:
+static int ohci_restart (struct ohci_hcd *ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#92: FILE: drivers/usb/host/ohci-hcd.c:144:
+static void ohci_stop (struct usb_hcd *hcd);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#101: FILE: drivers/usb/host/ohci-hcd.c:405:
+static void ohci_usb_reset (struct ohci_hcd *ohci)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#103: FILE: drivers/usb/host/ohci-hcd.c:407:
+	ohci->hc_control = ohci_readl (&ohci->regs->control);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#105: FILE: drivers/usb/host/ohci-hcd.c:409:
+	writel (ohci->hc_control, &ohci->regs->control);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#116: FILE: drivers/usb/host/ohci-hcd.c:418:
+static int ohci_init (struct ohci_hcd *ohci)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#138: FILE: drivers/usb/host/ohci-hcd.c:423:
+	disable (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#152: FILE: drivers/usb/host/ohci-hcd.c:447:
+		ohci_usb_reset (ohci);

CHECK:SPACING: No space is necessary after a cast
#159: FILE: drivers/usb/host/ohci-hcd.c:454:
+	(void) ohci_readl (&ohci->regs->control);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#159: FILE: drivers/usb/host/ohci-hcd.c:454:
+	(void) ohci_readl (&ohci->regs->control);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#164: FILE: drivers/usb/host/ohci-hcd.c:459:
+	ohci->hcca = dma_alloc_coherent (ohci->hcd.self.controller,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#165: FILE: drivers/usb/host/ohci-hcd.c:460:
+	ohci->hcca = dma_alloc_coherent (ohci->hcd.self.controller,
+			sizeof *ohci->hcca, &ohci->hcca_dma, 0);

WARNING:SIZEOF_PARENTHESIS: sizeof *ohci->hcca should be sizeof(*ohci->hcca)
#165: FILE: drivers/usb/host/ohci-hcd.c:460:
+			sizeof *ohci->hcca, &ohci->hcca_dma, 0);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#169: FILE: drivers/usb/host/ohci-hcd.c:464:
+	if ((ret = ohci_mem_init (ohci)) < 0)

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#169: FILE: drivers/usb/host/ohci-hcd.c:464:
+	if ((ret = ohci_mem_init (ohci)) < 0)

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#170: FILE: drivers/usb/host/ohci-hcd.c:465:
+		ohci_stop (&ohci->hcd);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#174: FILE: drivers/usb/host/ohci-hcd.c:469:
+
+}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#180: FILE: drivers/usb/host/ohci-hcd.c:475:
+ * enable interrupts $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#183: FILE: drivers/usb/host/ohci-hcd.c:478:
+static int ohci_run (struct ohci_hcd *ohci)

ERROR:CODE_INDENT: code indent should use tabs where possible
#185: FILE: drivers/usb/host/ohci-hcd.c:480:
+  ^Iu32^I^I^Imask, temp;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#185: FILE: drivers/usb/host/ohci-hcd.c:480:
+  ^Iu32^I^I^Imask, temp;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#185: FILE: drivers/usb/host/ohci-hcd.c:480:
+  ^Iu32^I^I^Imask, temp;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#186: FILE: drivers/usb/host/ohci-hcd.c:481:
+  ^Istruct usb_device^I*udev;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#186: FILE: drivers/usb/host/ohci-hcd.c:481:
+  ^Istruct usb_device^I*udev;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#186: FILE: drivers/usb/host/ohci-hcd.c:481:
+  ^Istruct usb_device^I*udev;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#187: FILE: drivers/usb/host/ohci-hcd.c:482:
+  ^Istruct usb_bus^I^I*bus;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#187: FILE: drivers/usb/host/ohci-hcd.c:482:
+  ^Istruct usb_bus^I^I*bus;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#187: FILE: drivers/usb/host/ohci-hcd.c:482:
+  ^Istruct usb_bus^I^I*bus;$

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#190: FILE: drivers/usb/host/ohci-hcd.c:485:
+	disable (ohci);

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#194: FILE: drivers/usb/host/ohci-hcd.c:489:
+	if (first) {
+

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#195: FILE: drivers/usb/host/ohci-hcd.c:490:
+		temp = ohci_readl (&ohci->regs->fminterval);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#198: FILE: drivers/usb/host/ohci-hcd.c:493:
+			ohci_dbg (ohci, "fminterval delta %d\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#199: FILE: drivers/usb/host/ohci-hcd.c:494:
+			ohci_dbg (ohci, "fminterval delta %d\n",
+				ohci->fminterval - FI);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#200: FILE: drivers/usb/host/ohci-hcd.c:495:
+		ohci->fminterval |= FSMP (ohci->fminterval) << 16;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#210: FILE: drivers/usb/host/ohci-hcd.c:543:
+	memset (ohci->hcca, 0, sizeof (struct ohci_hcca));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#210: FILE: drivers/usb/host/ohci-hcd.c:543:
+	memset (ohci->hcca, 0, sizeof (struct ohci_hcca));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#213: FILE: drivers/usb/host/ohci-hcd.c:546:
+	spin_lock_irq (&ohci->lock);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#220: FILE: drivers/usb/host/ohci-hcd.c:553:
+			spin_unlock_irq (&ohci->lock);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#250: FILE: drivers/usb/host/ohci-hcd.c:572:
+	writel (ohci->fminterval, &ohci->regs->fminterval);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#258: FILE: drivers/usb/host/ohci-hcd.c:582:
+	periodic_reinit (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#266: FILE: drivers/usb/host/ohci-hcd.c:589:
+		spin_unlock_irq (&ohci->lock);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#267: FILE: drivers/usb/host/ohci-hcd.c:590:
+		ohci_err (ohci, "init err (%08x %04x)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#268: FILE: drivers/usb/host/ohci-hcd.c:591:
+		ohci_err (ohci, "init err (%08x %04x)\n",
+			ohci_readl (&ohci->regs->fminterval),

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#268: FILE: drivers/usb/host/ohci-hcd.c:591:
+			ohci_readl (&ohci->regs->fminterval),

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#269: FILE: drivers/usb/host/ohci-hcd.c:592:
+			ohci_readl (&ohci->regs->periodicstart));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#279: FILE: drivers/usb/host/ohci-hcd.c:611:
+	temp = roothub_a (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#303: FILE: drivers/usb/host/ohci-hcd.c:629:
+	writel (temp, &ohci->regs->roothub.a);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#309: FILE: drivers/usb/host/ohci-hcd.c:635:
+	spin_unlock_irq (&ohci->lock);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#318: FILE: drivers/usb/host/ohci-hcd.c:642:
+	ohci_dump (ohci, 1);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#320: FILE: drivers/usb/host/ohci-hcd.c:644:
+	udev = hcd_to_bus (&ohci->hcd)->root_hub;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#323: FILE: drivers/usb/host/ohci-hcd.c:647:
+		usb_set_device_state (udev, USB_STATE_CONFIGURED);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#340: FILE: drivers/usb/host/ohci-hcd.c:671:
+	create_debug_files (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#350: FILE: drivers/usb/host/ohci-hcd.c:708:
+		ohci_usb_reset (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#363: FILE: drivers/usb/host/ohci-hcd.c:763:
+	ohci_usb_reset (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#364: FILE: drivers/usb/host/ohci-hcd.c:764:
+	writel (OHCI_INTR_MIE, &ohci->regs->intrdisable);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#373: FILE: drivers/usb/host/ohci-hcd.c:783:
+static int ohci_restart (struct ohci_hcd *ohci)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#382: FILE: drivers/usb/host/ohci-hcd.c:840:
+	if ((temp = ohci_run (ohci)) < 0) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#382: FILE: drivers/usb/host/ohci-hcd.c:840:
+	if ((temp = ohci_run (ohci)) < 0) {

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#464: FILE: drivers/usb/host/ohci-hub.c:127:
+	usb_set_device_state (root, USB_STATE_SUSPENDED);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#484: FILE: drivers/usb/host/ohci-hub.c:158:
+		ohci_dbg (ohci, "BIOS/SMM active, control %03x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#485: FILE: drivers/usb/host/ohci-hub.c:159:
+		ohci_dbg (ohci, "BIOS/SMM active, control %03x\n",
+				ohci->hc_control);

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#487: FILE: drivers/usb/host/ohci-hub.c:161:
+	} else switch (ohci->hc_control & OHCI_CTRL_HCFS) {

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

CHECK:SPACING: No space is necessary after a cast
#498: FILE: drivers/usb/host/ohci-hub.c:184:
+		(void) ohci_init (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#498: FILE: drivers/usb/host/ohci-hub.c:184:
+		(void) ohci_init (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#499: FILE: drivers/usb/host/ohci-hub.c:185:
+		return ohci_restart (ohci);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#508: FILE: drivers/usb/host/ohci-hub.c:243:
+	usb_set_device_state (root, USB_STATE_CONFIGURED);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#532: FILE: drivers/usb/host/ohci-lh7a404.c:232:
+	if ((ret = ohci_init(ohci)) < 0)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#543: FILE: drivers/usb/host/ohci-lh7a404.c:235:
+	if ((ret = ohci_run (ohci)) < 0) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#543: FILE: drivers/usb/host/ohci-lh7a404.c:235:
+	if ((ret = ohci_run (ohci)) < 0) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#573: FILE: drivers/usb/host/ohci-omap.c:431:
+	if ((ret = ohci_init(ohci)) < 0)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#588: FILE: drivers/usb/host/ohci-omap.c:438:
+	if ((ret = ohci_run (ohci)) < 0) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#588: FILE: drivers/usb/host/ohci-omap.c:438:
+	if ((ret = ohci_run (ohci)) < 0) {

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#615: FILE: drivers/usb/host/ohci-pci.c:38:
+	return ohci_init (ohci);

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#618: FILE: drivers/usb/host/ohci-pci.c:41:
 static int __devinit

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#653: FILE: drivers/usb/host/ohci-pci.c:103:
+	if ((ret = ohci_run (ohci)) < 0) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#653: FILE: drivers/usb/host/ohci-pci.c:103:
+	if ((ret = ohci_run (ohci)) < 0) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#682: FILE: drivers/usb/host/ohci-sa1111.c:275:
+	if ((ret = ohci_init(ohci)) < 0)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#693: FILE: drivers/usb/host/ohci-sa1111.c:278:
+	if ((ret = ohci_run (ohci)) < 0) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#693: FILE: drivers/usb/host/ohci-sa1111.c:278:
+	if ((ret = ohci_run (ohci)) < 0) {

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#723: FILE: drivers/usb/host/ohci.h:408:
+#define^IFSMP(fi) ^I^I(0x7fff & ((6 * ((fi) - 210)) / 7))$

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'hc' - possible side-effects?
#754: FILE: drivers/usb/host/ohci.h:465:
+#define read_roothub(hc, register, mask) ({ \
+	u32 temp = ohci_readl (&hc->regs->roothub.register); \
+	if (temp == -1) \
+		disable (hc); \
+	else if (hc->flags & OHCI_QUIRK_AMD756) \
+		while (temp & mask) \
+			temp = ohci_readl (&hc->regs->roothub.register); \
+	temp; })

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'hc' may be better as '(hc)' to avoid precedence issues
#754: FILE: drivers/usb/host/ohci.h:465:
+#define read_roothub(hc, register, mask) ({ \
+	u32 temp = ohci_readl (&hc->regs->roothub.register); \
+	if (temp == -1) \
+		disable (hc); \
+	else if (hc->flags & OHCI_QUIRK_AMD756) \
+		while (temp & mask) \
+			temp = ohci_readl (&hc->regs->roothub.register); \
+	temp; })

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'register' - possible side-effects?
#754: FILE: drivers/usb/host/ohci.h:465:
+#define read_roothub(hc, register, mask) ({ \
+	u32 temp = ohci_readl (&hc->regs->roothub.register); \
+	if (temp == -1) \
+		disable (hc); \
+	else if (hc->flags & OHCI_QUIRK_AMD756) \
+		while (temp & mask) \
+			temp = ohci_readl (&hc->regs->roothub.register); \
+	temp; })

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'mask' may be better as '(mask)' to avoid precedence issues
#754: FILE: drivers/usb/host/ohci.h:465:
+#define read_roothub(hc, register, mask) ({ \
+	u32 temp = ohci_readl (&hc->regs->roothub.register); \
+	if (temp == -1) \
+		disable (hc); \
+	else if (hc->flags & OHCI_QUIRK_AMD756) \
+		while (temp & mask) \
+			temp = ohci_readl (&hc->regs->roothub.register); \
+	temp; })

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#755: FILE: drivers/usb/host/ohci.h:466:
+	u32 temp = ohci_readl (&hc->regs->roothub.register); \

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#757: FILE: drivers/usb/host/ohci.h:468:
+		disable (hc); \

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#760: FILE: drivers/usb/host/ohci.h:471:
+			temp = ohci_readl (&hc->regs->roothub.register); \

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#763: FILE: drivers/usb/host/ohci.h:474:
+static u32 roothub_a (struct ohci_hcd *hc)

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#763: FILE: drivers/usb/host/ohci.h:474:
+static u32 roothub_a (struct ohci_hcd *hc)
+	{ return read_roothub (hc, a, 0xfc0fe000); }

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#764: FILE: drivers/usb/host/ohci.h:475:
+	{ return read_roothub (hc, a, 0xfc0fe000); }

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#765: FILE: drivers/usb/host/ohci.h:476:
+static inline u32 roothub_b (struct ohci_hcd *hc)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#766: FILE: drivers/usb/host/ohci.h:477:
+	{ return ohci_readl (&hc->regs->roothub.b); }

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#767: FILE: drivers/usb/host/ohci.h:478:
+static inline u32 roothub_status (struct ohci_hcd *hc)

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#768: FILE: drivers/usb/host/ohci.h:479:
+	{ return ohci_readl (&hc->regs->roothub.status); }

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#769: FILE: drivers/usb/host/ohci.h:480:
+static u32 roothub_portstatus (struct ohci_hcd *hc, int i)

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#769: FILE: drivers/usb/host/ohci.h:480:
+static u32 roothub_portstatus (struct ohci_hcd *hc, int i)
+	{ return read_roothub (hc, portstatus [i], 0xffe0fce0); }

ERROR:BRACKET_SPACE: space prohibited before open square bracket '['
#770: FILE: drivers/usb/host/ohci.h:481:
+	{ return read_roothub (hc, portstatus [i], 0xffe0fce0); }

Whitespace before opening bracket '[' is prohibited.
There are some exceptions:

1. With a type on the left::

    int [] a;

2. At the beginning of a line for slice initialisers::

    [0...10] = 5,

3. Inside a curly brace::

    = { [0...10] = 5 }

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#770: FILE: drivers/usb/host/ohci.h:481:
+	{ return read_roothub (hc, portstatus [i], 0xffe0fce0); }

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000250208.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 17 errors, 72 warnings, 12 checks, 637 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000250208.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
