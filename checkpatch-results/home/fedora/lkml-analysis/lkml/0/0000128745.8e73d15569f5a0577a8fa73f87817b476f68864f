WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#40: FILE: drivers/leds/Kconfig:4:
+config NEW_LEDS
+	bool "LED Support"
+	help
+	  Say Y to enable Linux LED support.  This is not related to standard
+	  keyboard LEDs which are controlled via the input system.
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#46: FILE: drivers/leds/Kconfig:10:
+config LEDS_CLASS
+	tristate "LED Class Support"
+	depends NEW_LEDS
+	help
+	  This option enables the led sysfs class in /sys/class/leds.  You'll
+	  need this to do anything useful with LEDs.  If unsure, say N.
+
+endmenu
+

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#69: FILE: include/linux/leds.h:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:BIT_MACRO: Prefer using the BIT macro
#90: FILE: include/linux/leds.h:22:
+#define LED_SUSPENDED       (1 << 0)

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#93: FILE: include/linux/leds.h:25:
+	 * Values are between 0-100 */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#155: FILE: drivers/leds/leds.h:1:
+/*

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#175: FILE: drivers/leds/led_class.c:1:
+/*

WARNING:CONSIDER_KSTRTO: simple_strtoul is obsolete, use kstrtoul instead
#226: FILE: drivers/leds/led_class.c:52:
+	unsigned long state = simple_strtoul(buf, &after, 10);

The simple_strtol(), simple_strtoll(), simple_strtoul(), and
simple_strtoull() functions explicitly ignore overflows, which
may lead to unexpected results in callers.  The respective kstrtol(),
kstrtoll(), kstrtoul(), and kstrtoull() functions tend to be the
correct replacements.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#simple-strtol-simple-strtoll-simple-strtoul-simple-strtoull

WARNING:LINE_SPACING: Missing a blank line after declarations
#227: FILE: drivers/leds/led_class.c:53:
+	unsigned long state = simple_strtoul(buf, &after, 10);
+	if (after - buf > 0) {

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#265: FILE: drivers/leds/led_class.c:91:
+
+

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#275: FILE: drivers/leds/led_class.c:101:
+	led_dev->class_dev = kzalloc (sizeof (struct class_device), GFP_KERNEL);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#275: FILE: drivers/leds/led_class.c:101:
+	led_dev->class_dev = kzalloc (sizeof (struct class_device), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*led_dev->class_dev)...) over kzalloc(sizeof (struct class_device)...)
#275: FILE: drivers/leds/led_class.c:101:
+	led_dev->class_dev = kzalloc (sizeof (struct class_device), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#276: FILE: drivers/leds/led_class.c:102:
+	if (unlikely (!led_dev->class_dev))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around '!led_dev->class_dev'
#276: FILE: drivers/leds/led_class.c:102:
+	if (unlikely (!led_dev->class_dev))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#288: FILE: drivers/leds/led_class.c:114:
+	rc = class_device_register (led_dev->class_dev);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#289: FILE: drivers/leds/led_class.c:115:
+	if (unlikely (rc)) {

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#290: FILE: drivers/leds/led_class.c:116:
+		kfree (led_dev->class_dev);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#302: FILE: drivers/leds/led_class.c:128:
+	printk(KERN_INFO "Registered led device: %s\n", led_dev->class_dev->class_id);

WARNING:TYPO_SPELLING: 'unreigister' may be misspelled - perhaps 'unregister'?
#309: FILE: drivers/leds/led_class.c:135:
+ * @led_dev: the led device to unreigister
                                ^^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#315: FILE: drivers/leds/led_class.c:141:
+	class_device_remove_file (led_dev->class_dev, &class_device_attr_brightness);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#324: FILE: drivers/leds/led_class.c:150:
+EXPORT_SYMBOL(leds_device_suspend);

EXPORT_SYMBOL should immediately follow the symbol to be exported.

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#325: FILE: drivers/leds/led_class.c:151:
+EXPORT_SYMBOL(leds_device_resume);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#326: FILE: drivers/leds/led_class.c:152:
+EXPORT_SYMBOL(leds_device_register);

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#327: FILE: drivers/leds/led_class.c:153:
+EXPORT_SYMBOL(leds_device_unregister);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#351: FILE: drivers/leds/led_core.c:1:
+/*

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#374: FILE: drivers/leds/led_core.c:24:
+EXPORT_SYMBOL_GPL(leds_list);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000128745.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 0 errors, 23 warnings, 4 checks, 298 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000128745.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
