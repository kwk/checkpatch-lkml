WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#44: 
--- 25/drivers/block/genhd.c~per-cpu-disk-stats	2003-02-24 23:44:09.000000000 -0800

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#51: FILE: drivers/block/genhd.c:321:
 }
+static ssize_t disk_stats_read(struct gendisk * disk, char *page)

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#51: FILE: drivers/block/genhd.c:321:
+static ssize_t disk_stats_read(struct gendisk * disk, char *page)

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#70: FILE: drivers/block/genhd.c:332:
+^I^Idisk_stat_read(disk, writes), $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#74: FILE: drivers/block/genhd.c:336:
+^I^Idisk_stat_read(disk, in_flight), $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#139: FILE: drivers/block/ll_rw_blk.c:1511:
+^Idisk_stat_add(disk, time_in_queue, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#140: FILE: drivers/block/ll_rw_blk.c:1512:
+	disk_stat_add(disk, time_in_queue, 
+			disk_stat_read(disk, in_flight) * (now - disk->stamp));

ERROR:TRAILING_WHITESPACE: trailing whitespace
#189: FILE: drivers/md/md.c:2806:
+^I^Icurr_events = disk_stat_read(disk, read_sectors) + $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#190: FILE: drivers/md/md.c:2807:
+^I^I^I^Idisk_stat_read(disk, write_sectors) - $

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#221: FILE: include/linux/genhd.h:74:
+	unsigned read_sectors, write_sectors;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#222: FILE: include/linux/genhd.h:75:
+	unsigned reads, writes;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#223: FILE: include/linux/genhd.h:76:
+	unsigned read_merges, write_merges;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#224: FILE: include/linux/genhd.h:77:
+	unsigned read_ticks, write_ticks;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#225: FILE: include/linux/genhd.h:78:
+	unsigned io_ticks;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#227: FILE: include/linux/genhd.h:80:
+	unsigned time_in_queue;

ERROR:TRAILING_WHITESPACE: trailing whitespace
#229: FILE: include/linux/genhd.h:82:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#252: FILE: include/linux/genhd.h:115:
+/* $

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#259: FILE: include/linux/genhd.h:122:
+#define disk_stat_add(gendiskp, field, addnd) ^I\$

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'gendiskp' may be better as '(gendiskp)' to avoid precedence issues
#259: FILE: include/linux/genhd.h:122:
+#define disk_stat_add(gendiskp, field, addnd) 	\
+	(per_cpu_ptr(gendiskp->dkstats, smp_processor_id())->field += addnd)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'field' may be better as '(field)' to avoid precedence issues
#259: FILE: include/linux/genhd.h:122:
+#define disk_stat_add(gendiskp, field, addnd) 	\
+	(per_cpu_ptr(gendiskp->dkstats, smp_processor_id())->field += addnd)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'gendiskp' may be better as '(gendiskp)' to avoid precedence issues
#261: FILE: include/linux/genhd.h:124:
+#define disk_stat_read(gendiskp, field)					\
+({									\
+	typeof(gendiskp->dkstats->field) res = 0;			\
+	int i;								\
+	for (i=0; i < NR_CPUS; i++) {					\
+		if (!cpu_possible(i))					\
+			continue;					\
+		res += per_cpu_ptr(gendiskp->dkstats, i)->field;	\
+	}								\
+	res;								\
+})

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'field' - possible side-effects?
#261: FILE: include/linux/genhd.h:124:
+#define disk_stat_read(gendiskp, field)					\
+({									\
+	typeof(gendiskp->dkstats->field) res = 0;			\
+	int i;								\
+	for (i=0; i < NR_CPUS; i++) {					\
+		if (!cpu_possible(i))					\
+			continue;					\
+		res += per_cpu_ptr(gendiskp->dkstats, i)->field;	\
+	}								\
+	res;								\
+})

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'field' may be better as '(field)' to avoid precedence issues
#261: FILE: include/linux/genhd.h:124:
+#define disk_stat_read(gendiskp, field)					\
+({									\
+	typeof(gendiskp->dkstats->field) res = 0;			\
+	int i;								\
+	for (i=0; i < NR_CPUS; i++) {					\
+		if (!cpu_possible(i))					\
+			continue;					\
+		res += per_cpu_ptr(gendiskp->dkstats, i)->field;	\
+	}								\
+	res;								\
+})

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#265: FILE: include/linux/genhd.h:128:
+	for (i=0; i < NR_CPUS; i++) {					\
 	      ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:NR_CPUS: usage of NR_CPUS is often wrong - consider using cpu_possible(), num_possible_cpus(), for_each_possible_cpu(), etc
#265: FILE: include/linux/genhd.h:128:
+	for (i=0; i < NR_CPUS; i++) {					\

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#273: FILE: include/linux/genhd.h:136:
+static inline void disk_stat_set_all(struct gendisk *gendiskp, int value)	{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#275: FILE: include/linux/genhd.h:138:
+	int i;
+	for (i=0; i < NR_CPUS; i++) {

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#275: FILE: include/linux/genhd.h:138:
+	for (i=0; i < NR_CPUS; i++) {
 	      ^

WARNING:NR_CPUS: usage of NR_CPUS is often wrong - consider using cpu_possible(), num_possible_cpus(), for_each_possible_cpu(), etc
#275: FILE: include/linux/genhd.h:138:
+	for (i=0; i < NR_CPUS; i++) {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#277: FILE: include/linux/genhd.h:140:
+^I^I^Imemset(per_cpu_ptr(gendiskp->dkstats, i), value,^I$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#278: FILE: include/linux/genhd.h:141:
+			memset(per_cpu_ptr(gendiskp->dkstats, i), value,	
+					sizeof (struct disk_stats));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#278: FILE: include/linux/genhd.h:141:
+					sizeof (struct disk_stats));

ERROR:TRAILING_WHITESPACE: trailing whitespace
#281: FILE: include/linux/genhd.h:144:
+}^I^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#282: FILE: include/linux/genhd.h:145:
+^I^I^I^I$

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'gendiskp' may be better as '(gendiskp)' to avoid precedence issues
#284: FILE: include/linux/genhd.h:147:
+#define disk_stat_add(gendiskp, field, addnd) (gendiskp->dkstats.field += addnd)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'field' may be better as '(field)' to avoid precedence issues
#284: FILE: include/linux/genhd.h:147:
+#define disk_stat_add(gendiskp, field, addnd) (gendiskp->dkstats.field += addnd)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'gendiskp' may be better as '(gendiskp)' to avoid precedence issues
#285: FILE: include/linux/genhd.h:148:
+#define disk_stat_read(gendiskp, field)	(gendiskp->dkstats.field)

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#287: FILE: include/linux/genhd.h:150:
+static inline void disk_stat_set_all(struct gendisk *gendiskp, int value)	{

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#288: FILE: include/linux/genhd.h:151:
+	memset(&gendiskp->dkstats, value, sizeof (struct disk_stats));

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'subnd' may be better as '(subnd)' to avoid precedence issues
#294: FILE: include/linux/genhd.h:157:
+#define disk_stat_sub(gendiskp, field, subnd) \
+		disk_stat_add(gendiskp, field, -subnd)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#297: FILE: include/linux/genhd.h:160:
+
+

ERROR:SPACING: exactly one space required after that #ifdef
#299: FILE: include/linux/genhd.h:162:
+#ifdef  CONFIG_SMP

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#302: FILE: include/linux/genhd.h:165:
+	disk->dkstats = kmalloc_percpu(sizeof (struct disk_stats), GFP_KERNEL);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000390600.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 16 errors, 14 warnings, 13 checks, 256 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000390600.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
