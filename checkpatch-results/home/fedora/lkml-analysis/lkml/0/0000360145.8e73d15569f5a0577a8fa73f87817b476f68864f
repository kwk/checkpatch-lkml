WARNING:TYPO_SPELLING: 'consistancy' may be misspelled - perhaps 'consistency'?
#35: 
consistancy and better diagnostic support. This second patch is a lead 
^^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#51: 
diff -urN linux-2.5.72-p1.5/drivers/block/nbd.c linux-2.5.72-p2.5/drivers/block/nbd.c

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#78: FILE: drivers/block/nbd.c:109:
+static int sock_xmit(struct socket *sock, int send, void *buf, int size,
+		int msg_flags)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#95: FILE: drivers/block/nbd.c:150:
+			printk(KERN_WARNING "nbd (pid %d: %s) got signal %d\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#96: FILE: drivers/block/nbd.c:151:
+			printk(KERN_WARNING "nbd (pid %d: %s) got signal %d\n",
 				current->pid, current->comm, 

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#105: FILE: drivers/block/nbd.c:160:
+			printk(KERN_ERR "nbd: %s - sock=%p at buf=%p, size=%d returned %d.\n",

ERROR:SPACING: spaces required around that '?' (ctx:VxW)
#106: FILE: drivers/block/nbd.c:161:
+			       send? "send": "receive", sock, buf, size, result);
 			           ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#106: FILE: drivers/block/nbd.c:161:
+			       send? "send": "receive", sock, buf, size, result);
 			                   ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#116: FILE: drivers/block/nbd.c:184:
+	result = sock_xmit(sock, 1, kaddr + bvec->bv_offset, bvec->bv_len,
 			flags);

CHECK:SPACING: No space is necessary after a cast
#136: FILE: drivers/block/nbd.c:200:
+	request.from = cpu_to_be64((u64) req->sector << 9);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#144: FILE: drivers/block/nbd.c:207:
+		printk(KERN_ERR "%s: Attempted sendmsg to closed socket\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#145: FILE: drivers/block/nbd.c:208:
+		printk(KERN_ERR "%s: Attempted sendmsg to closed socket\n",
+				lo->disk->disk_name);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#153: FILE: drivers/block/nbd.c:213:
+	result = sock_xmit(sock, 1, &request, sizeof(request),
+			(nbd_cmd(req) == NBD_CMD_WRITE)? MSG_MORE: 0);

ERROR:SPACING: spaces required around that '?' (ctx:VxW)
#153: FILE: drivers/block/nbd.c:213:
+			(nbd_cmd(req) == NBD_CMD_WRITE)? MSG_MORE: 0);
 			                               ^

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#153: FILE: drivers/block/nbd.c:213:
+			(nbd_cmd(req) == NBD_CMD_WRITE)? MSG_MORE: 0);
 			                                         ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#155: FILE: drivers/block/nbd.c:215:
+		printk(KERN_ERR "%s: Sendmsg failed for control (result %d)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#156: FILE: drivers/block/nbd.c:216:
+		printk(KERN_ERR "%s: Sendmsg failed for control (result %d)\n",
+				lo->disk->disk_name, result);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#169: FILE: drivers/block/nbd.c:235:
+					printk(KERN_ERR "%s: Send data failed (result %d)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#170: FILE: drivers/block/nbd.c:236:
+					printk(KERN_ERR "%s: Send data failed (result %d)\n",
+							lo->disk->disk_name,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#183: FILE: drivers/block/nbd.c:277:
+	result = sock_xmit(sock, 0, kaddr + bvec->bv_offset, bvec->bv_len,
 			MSG_WAITALL);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#189: FILE: drivers/block/nbd.c:282:
+/* NULL returned = something went wrong, inform userspace */ $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#204: FILE: drivers/block/nbd.c:294:
+		printk(KERN_ERR "%s: Recv control failed (result %d)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#205: FILE: drivers/block/nbd.c:295:
+		printk(KERN_ERR "%s: Recv control failed (result %d)\n",
+				lo->disk->disk_name, result);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req"
#212: FILE: drivers/block/nbd.c:300:
+	if (req == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#213: FILE: drivers/block/nbd.c:301:
+		printk(KERN_ERR "%s: Unexpected reply (result %d)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#214: FILE: drivers/block/nbd.c:302:
+		printk(KERN_ERR "%s: Unexpected reply (result %d)\n",
+				lo->disk->disk_name, result);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#225: FILE: drivers/block/nbd.c:309:
+		printk(KERN_ERR "%s: Not enough magic (result %d)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#226: FILE: drivers/block/nbd.c:310:
+		printk(KERN_ERR "%s: Not enough magic (result %d)\n",
+				lo->disk->disk_name, result);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#231: FILE: drivers/block/nbd.c:315:
+		printk(KERN_ERR "%s: Other side returned error (result %d)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#232: FILE: drivers/block/nbd.c:316:
+		printk(KERN_ERR "%s: Other side returned error (result %d)\n",
+				lo->disk->disk_name, result);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#246: FILE: drivers/block/nbd.c:330:
+					printk(KERN_ERR "%s: Recv data failed (result %d)\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#247: FILE: drivers/block/nbd.c:331:
+					printk(KERN_ERR "%s: Recv data failed (result %d)\n",
+							lo->disk->disk_name,

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#276: FILE: drivers/block/nbd.c:347:
+	BUG_ON(lo->magic != LO_MAGIC);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_alert([subsystem]dev, ... then dev_alert(dev, ... then pr_alert(...  to printk(KERN_ALERT ...
#281: FILE: drivers/block/nbd.c:350:
+	printk(KERN_ALERT "%s: req should never be null\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#282: FILE: drivers/block/nbd.c:351:
+	printk(KERN_ALERT "%s: req should never be null\n",
+			lo->disk->disk_name);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#317: FILE: drivers/block/nbd.c:396:
+		BUG_ON(lo->magic != LO_MAGIC);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#319: FILE: drivers/block/nbd.c:398:
+			printk(KERN_ERR "%s: Request when not-ready\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#320: FILE: drivers/block/nbd.c:399:
+			printk(KERN_ERR "%s: Request when not-ready\n",
+					lo->disk->disk_name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#329: FILE: drivers/block/nbd.c:406:
+				printk(KERN_ERR "%s: Write on read-only\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#330: FILE: drivers/block/nbd.c:407:
+				printk(KERN_ERR "%s: Write on read-only\n",
+						lo->disk->disk_name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#346: FILE: drivers/block/nbd.c:420:
+			printk(KERN_ERR "%s: failed between accept and semaphore, file lost\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#347: FILE: drivers/block/nbd.c:421:
+			printk(KERN_ERR "%s: failed between accept and semaphore, file lost\n",
+					lo->disk->disk_name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#356: FILE: drivers/block/nbd.c:434:
+			printk(KERN_ERR "%s: nbd_send_req failed\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#357: FILE: drivers/block/nbd.c:435:
+			printk(KERN_ERR "%s: nbd_send_req failed\n",
+					lo->disk->disk_name);

WARNING:LINE_SPACING: Missing a blank line after declarations
#376: FILE: drivers/block/nbd.c:459:
+	struct nbd_device *lo = inode->i_bdev->bd_disk->private_data;
+	lo->refcnt++;

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#383: FILE: drivers/block/nbd.c:466:
+	struct nbd_device *lo = inode->i_bdev->bd_disk->private_data;
+	if (lo->refcnt <= 0)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_alert([subsystem]dev, ... then dev_alert(dev, ... then pr_alert(...  to printk(KERN_ALERT ...
#384: FILE: drivers/block/nbd.c:467:
+		printk(KERN_ALERT "%s: %s: refcount(%d) <= 0\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#385: FILE: drivers/block/nbd.c:468:
+		printk(KERN_ALERT "%s: %s: refcount(%d) <= 0\n",
+				lo->disk->disk_name, __FUNCTION__, lo->refcnt);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#385: FILE: drivers/block/nbd.c:468:
+				lo->disk->disk_name, __FUNCTION__, lo->refcnt);

ERROR:CODE_INDENT: code indent should use tabs where possible
#399: FILE: drivers/block/nbd.c:487:
+^I        printk(KERN_INFO "%s: NBD_DISCONNECT\n", lo->disk->disk_name);$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#399: FILE: drivers/block/nbd.c:487:
+	        printk(KERN_INFO "%s: NBD_DISCONNECT\n", lo->disk->disk_name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#408: FILE: drivers/block/nbd.c:500:
+			printk(KERN_ERR "%s: Some requests are in progress -> can not turn off.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#409: FILE: drivers/block/nbd.c:501:
+			printk(KERN_ERR "%s: Some requests are in progress -> can not turn off.\n",
+					lo->disk->disk_name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#418: FILE: drivers/block/nbd.c:563:
+		printk(KERN_WARNING "%s: shutting down socket\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#419: FILE: drivers/block/nbd.c:564:
+		printk(KERN_WARNING "%s: shutting down socket\n",
+				lo->disk->disk_name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#428: FILE: drivers/block/nbd.c:573:
+		printk(KERN_WARNING "%s: queue cleared\n", lo->disk->disk_name);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000360145.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 6 errors, 27 warnings, 23 checks, 373 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000360145.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
