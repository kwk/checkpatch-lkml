WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#54: 
diff -rupN linux-2.6.8-rc2-mm2b/Documentation/sched-stats.txt linux-2.6.8-rc2-mm2b-ss/Documentation/sched-stats.txt

ERROR:TRAILING_WHITESPACE: trailing whitespace
#250: FILE: arch/ppc/Kconfig:1383:
+^I  $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#288: FILE: arch/x86_64/Kconfig:471:
+^Idefault y $

ERROR:SPACING: space required after that ',' (ctx:VxV)
#308: FILE: fs/proc/array.c:361:
+	res = sprintf(buffer,"%d (%s) %c %d %d %d %d %d %lu %lu \
 	                    ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LINE_CONTINUATIONS: Avoid line continuations in quoted strings
#308: FILE: fs/proc/array.c:361:
+	res = sprintf(buffer,"%d (%s) %c %d %d %d %d %d %lu %lu \

WARNING:CONST_STRUCT: struct file_operations should normally be const
#342: FILE: fs/proc/proc_misc.c:286:
+extern struct file_operations proc_schedstat_operations;

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#367: FILE: include/linux/sched.h:101:
+extern void cpu_sched_info(struct sched_info *, int);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct sched_info *' should also have an identifier name
#367: FILE: include/linux/sched.h:101:
+extern void cpu_sched_info(struct sched_info *, int);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'int' should also have an identifier name
#367: FILE: include/linux/sched.h:101:
+extern void cpu_sched_info(struct sched_info *, int);

ERROR:MULTISTATEMENT_MACRO_USE_DO_WHILE: Macros with multiple statements should be enclosed in a do - while loop
#368: FILE: include/linux/sched.h:102:
+#define schedstat_inc(rq, field)	rq->field++;

Macros with multiple statements should be enclosed in a
do - while block.  Same should also be the case for macros
starting with `if` to avoid logic defects::

  #define macrofun(a, b, c)                 \
    do {                                    \
            if (a == 5)                     \
                    do_this(b, c);          \
    } while (0)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#macros-enums-and-rtl

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'rq' may be better as '(rq)' to avoid precedence issues
#368: FILE: include/linux/sched.h:102:
+#define schedstat_inc(rq, field)	rq->field++;

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'field' may be better as '(field)' to avoid precedence issues
#368: FILE: include/linux/sched.h:102:
+#define schedstat_inc(rq, field)	rq->field++;

WARNING:TRAILING_SEMICOLON: macros should not use a trailing semicolon
#368: FILE: include/linux/sched.h:102:
+#define schedstat_inc(rq, field)	rq->field++;

Macro definition should not end with a semicolon. The macro
invocation style should be consistent with function calls.
This can prevent any unexpected code paths::

  #define MAC do_something;

If this macro is used within a if else statement, like::

  if (some_condition)
          MAC;

  else
          do_something;

Then there would be a compilation error, because when the macro is
expanded there are two trailing semicolons, so the else branch gets
orphaned.

See: https://lore.kernel.org/lkml/1399671106.2912.21.camel@joe-AO725/

ERROR:MULTISTATEMENT_MACRO_USE_DO_WHILE: Macros with multiple statements should be enclosed in a do - while loop
#369: FILE: include/linux/sched.h:103:
+#define schedstat_add(rq, field, amt)	rq->field += amt;

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'rq' may be better as '(rq)' to avoid precedence issues
#369: FILE: include/linux/sched.h:103:
+#define schedstat_add(rq, field, amt)	rq->field += amt;

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'field' may be better as '(field)' to avoid precedence issues
#369: FILE: include/linux/sched.h:103:
+#define schedstat_add(rq, field, amt)	rq->field += amt;

WARNING:TRAILING_SEMICOLON: macros should not use a trailing semicolon
#369: FILE: include/linux/sched.h:103:
+#define schedstat_add(rq, field, amt)	rq->field += amt;

WARNING:DO_WHILE_MACRO_WITH_TRAILING_SEMICOLON: do {} while (0) macros should not be semicolon terminated
#371: FILE: include/linux/sched.h:105:
+#define schedstat_inc(rq, field)	do { } while (0);

do {} while(0) macros should not have a trailing semicolon.

WARNING:DO_WHILE_MACRO_WITH_TRAILING_SEMICOLON: do {} while (0) macros should not be semicolon terminated
#372: FILE: include/linux/sched.h:106:
+#define schedstat_add(rq, field, amt)	do { } while (0);

ERROR:OPEN_BRACE: open brace '{' following enum go on the same line
#413: FILE: include/linux/sched.h:631:
+enum idle_type
+{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#541: FILE: kernel/sched.c:341:
+	for_each_online_cpu (cpu) {

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#542: FILE: kernel/sched.c:342:
+	for_each_online_cpu (cpu) {
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#549: FILE: kernel/sched.c:349:
+^I^Iseq_printf(seq, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#550: FILE: kernel/sched.c:350:
+		seq_printf(seq, 
+		    "cpu%d %lu %lu %lu %lu %lu %lu %lu %lu %lu %lu %lu %lu "

WARNING:SPLIT_STRING: quoted string split across lines
#551: FILE: kernel/sched.c:351:
+		    "cpu%d %lu %lu %lu %lu %lu %lu %lu %lu %lu %lu %lu %lu "
+		    "%lu %lu %lu %lu %lu %lu %lu %lu %lu %lu",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 20)
#563: FILE: kernel/sched.c:363:
+		for (itype = IDLE; itype < MAX_IDLE_TYPES; itype++)
+		    seq_printf(seq, " %lu %lu", rq->pt_gained[itype],

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#565: FILE: kernel/sched.c:365:
+		    seq_printf(seq, " %lu %lu", rq->pt_gained[itype],
+			rq->pt_lost[itype]);

WARNING:PREFER_SEQ_PUTS: Prefer seq_puts to seq_printf
#567: FILE: kernel/sched.c:367:
+		seq_printf(seq, "\n");

WARNING:NR_CPUS: usage of NR_CPUS is often wrong - consider using cpu_possible(), num_possible_cpus(), for_each_possible_cpu(), etc
#573: FILE: kernel/sched.c:373:
+			cpumask_scnprintf(mask_str, NR_CPUS, sd->span);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#577: FILE: kernel/sched.c:377:
+				seq_printf(seq, " %lu %lu %lu %lu %lu",
+				    sd->lb_cnt[itype],

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#584: FILE: kernel/sched.c:384:
+			seq_printf(seq, " %lu %lu %lu %lu\n",
+			    sd->sbe_pushed, sd->sbe_attempts,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#593: FILE: kernel/sched.c:393:
+	unsigned size = PAGE_SIZE * (1 + num_online_cpus() / 32);

CHECK:BRACES: braces {} should be used on all arms of this statement
#601: FILE: kernel/sched.c:401:
+	if (!res) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#605: FILE: kernel/sched.c:405:
+	} else

WARNING:CONST_STRUCT: struct file_operations should normally be const
#610: FILE: kernel/sched.c:410:
+struct file_operations proc_schedstat_operations = {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#666: FILE: kernel/sched.c:478:
+^I$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#766: FILE: kernel/sched.c:1036:
+		if ((sd->flags & SD_WAKE_AFFINE) &&
+				!task_hot(p, rq->timestamp_last_tick, sd)) {

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#779: FILE: kernel/sched.c:1046:
+				imbalance*this_load <= 100*load) {
 				         ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#779: FILE: kernel/sched.c:1046:
+				imbalance*this_load <= 100*load) {
 				                          ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#876: FILE: kernel/sched.c:1904:
+  $

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#876: FILE: kernel/sched.c:1904:
+  $

ERROR:CODE_INDENT: code indent should use tabs where possible
#877: FILE: kernel/sched.c:1905:
+  ^Igroup = find_busiest_group(sd, this_cpu, &imbalance, idle);$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#877: FILE: kernel/sched.c:1905:
+  ^Igroup = find_busiest_group(sd, this_cpu, &imbalance, idle);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#877: FILE: kernel/sched.c:1905:
+  ^Igroup = find_busiest_group(sd, this_cpu, &imbalance, idle);$

ERROR:CODE_INDENT: code indent should use tabs where possible
#880: FILE: kernel/sched.c:1908:
+  ^I^Igoto out_balanced;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#880: FILE: kernel/sched.c:1908:
+  ^I^Igoto out_balanced;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#880: FILE: kernel/sched.c:1908:
+  ^I^Igoto out_balanced;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#888: FILE: kernel/sched.c:1914:
+  ^I^Igoto out_balanced;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#888: FILE: kernel/sched.c:1914:
+  ^I^Igoto out_balanced;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#888: FILE: kernel/sched.c:1914:
+  ^I^Igoto out_balanced;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#898: FILE: kernel/sched.c:1927:
+ ^Ischedstat_add(sd, lb_imbalance[idle], imbalance);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#898: FILE: kernel/sched.c:1927:
+ ^Ischedstat_add(sd, lb_imbalance[idle], imbalance);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#898: FILE: kernel/sched.c:1927:
+ ^Ischedstat_add(sd, lb_imbalance[idle], imbalance);$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 12)
#937: FILE: kernel/sched.c:2020:
+	if (!nr_moved)
+	    schedstat_inc(sd, lb_failed[NEWLY_IDLE]);

CHECK:BRACES: Unbalanced braces around else statement
#984: FILE: kernel/sched.c:2523:
+	} else

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1018: FILE: kernel/sched.c:3293:
+		if (!rq->expired->nr_active) {
+			schedstat_inc(rq, yld_both_empty);
+		}

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1033: FILE: kernel/sched.c:3886:
+		BUG_ON(rq->nr_running != 0);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000263449.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 13 errors, 28 warnings, 16 checks, 921 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000263449.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
