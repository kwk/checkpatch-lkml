WARNING:TYPO_SPELLING: 'uptodate' may be misspelled - perhaps 'up-to-date'?
#49: 
 fs/ocfs2/uptodate.c                 |   12 -
          ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'uptodate' may be misspelled - perhaps 'up-to-date'?
#50: 
 fs/ocfs2/uptodate.h                 |    2 
          ^^^^^^^^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#168: FILE: fs/ocfs2/dlm/dlmdomain.c:576:
+^I * to be put in someone's domain map. $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#170: FILE: fs/ocfs2/dlm/dlmdomain.c:578:
+	 * times (ie. during recovery). */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:SPLIT_STRING: quoted string split across lines
#182: FILE: fs/ocfs2/dlm/dlmdomain.c:594:
+			mlog(ML_NOTICE, "node %u trying to join, but recovery "
+			     "is ongoing.\n", bit);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#186: FILE: fs/ocfs2/dlm/dlmdomain.c:598:
+			mlog(ML_NOTICE, "node %u trying to join, but it "
+			     "still needs recovery.\n", bit);

WARNING:SPLIT_STRING: quoted string split across lines
#190: FILE: fs/ocfs2/dlm/dlmdomain.c:602:
+			mlog(ML_NOTICE, "node %u trying to join, but it "
+			     "is still in the domain! needs recovery?\n",

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#217: FILE: fs/ocfs2/dlm/dlmmaster.c:1055:
+			 * then restart the mastery. */

ERROR:TRAILING_WHITESPACE: trailing whitespace
#226: FILE: fs/ocfs2/dlm/dlmmaster.c:2001:
+^I^I^I/* avoid hang during shutdown when migrating lockres $

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#227: FILE: fs/ocfs2/dlm/dlmmaster.c:2002:
+			 * to a node which also goes down */

WARNING:SPLIT_STRING: quoted string split across lines
#230: FILE: fs/ocfs2/dlm/dlmmaster.c:2005:
+				mlog(0, "%s:%.*s: expected migration target %u "
+				     "is no longer up.  restarting.\n",

WARNING:LINE_SPACING: Missing a blank line after declarations
#258: FILE: fs/ocfs2/dlm/dlmrecovery.c:264:
+	int ready;
+	spin_lock(&dlm->spinlock);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#265: FILE: fs/ocfs2/dlm/dlmrecovery.c:271:
+ * could be dead or just not joined */

WARNING:LINE_SPACING: Missing a blank line after declarations
#269: FILE: fs/ocfs2/dlm/dlmrecovery.c:275:
+	int dead;
+	spin_lock(&dlm->spinlock);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#295: FILE: fs/ocfs2/dlm/dlmrecovery.c:372:
+		 * or recovery completes entirely. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#308: FILE: fs/ocfs2/dlm/dlmrecovery.c:401:
+		 * to get handled on remaining nodes */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#334: FILE: fs/ocfs2/dlm/dlmrecovery.c:523:
+					 * the node is really seen as dead. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#337: FILE: fs/ocfs2/dlm/dlmrecovery.c:526:
+							   dlm_is_node_dead(dlm,
+								ndata->node_num),

WARNING:SPLIT_STRING: quoted string split across lines
#340: FILE: fs/ocfs2/dlm/dlmrecovery.c:529:
+					mlog(0, "waited 1 sec for %u, "
+					     "dead? %s\n", ndata->node_num,

WARNING:SPLIT_STRING: quoted string split across lines
#356: FILE: fs/ocfs2/dlm/dlmrecovery.c:731:
+		mlog(ML_ERROR, "%s: bad reco state: reco(dead=%u, master=%u), "
+		     "request(dead=%u, master=%u)\n",

CHECK:CAMELCASE: Avoid CamelCase: <MLFu64>
#360: FILE: fs/ocfs2/dlm/dlmrecovery.c:735:
+		     "entry[0]={c=%"MLFu64",l=%u,f=%u,t=%d,ct=%d,hb=%d,n=%u}\n",

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

WARNING:SPLIT_STRING: quoted string split across lines
#360: FILE: fs/ocfs2/dlm/dlmrecovery.c:735:
+		mlog(ML_ERROR, "%s: name=%.*s master=%u locks=%u/%u flags=%u "
+		     "entry[0]={c=%"MLFu64",l=%u,f=%u,t=%d,ct=%d,hb=%d,n=%u}\n",

CHECK:CONCATENATED_STRING: Concatenated strings should use spaces between elements
#360: FILE: fs/ocfs2/dlm/dlmrecovery.c:735:
+		     "entry[0]={c=%"MLFu64",l=%u,f=%u,t=%d,ct=%d,hb=%d,n=%u}\n",

Concatenated elements should have a space in between.
Example::

  printk(KERN_INFO"bar");

should be::

  printk(KERN_INFO "bar");

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#366: FILE: fs/ocfs2/dlm/dlmrecovery.c:741:
+		BUG();

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#379: FILE: fs/ocfs2/dlm/dlmrecovery.c:819:
 		switch (ndata->state) {
[...]
+			case DLM_RECO_NODE_DATA_DONE:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#391: FILE: fs/ocfs2/dlm/dlmrecovery.c:830:
+			 * the line of recovery */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#406: FILE: fs/ocfs2/dlm/dlmrecovery.c:871:
+		 * otherwise hangs can occur during later recovery */

WARNING:SPLIT_STRING: quoted string split across lines
#414: FILE: fs/ocfs2/dlm/dlmrecovery.c:878:
+					mlog(0, "AHA! there was "
+					     "a $RECOVERY lock for dead "

ERROR:TRAILING_WHITESPACE: trailing whitespace
#415: FILE: fs/ocfs2/dlm/dlmrecovery.c:879:
+^I^I^I^I^I     "node %u (%s)!\n", $

WARNING:SPLIT_STRING: quoted string split across lines
#415: FILE: fs/ocfs2/dlm/dlmrecovery.c:879:
+					     "a $RECOVERY lock for dead "
+					     "node %u (%s)!\n", 

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#435: FILE: fs/ocfs2/dlm/dlmrecovery.c:1264:
+			mlog(0, "dlm_lockres_master_requery ret=%d\n",
 				  ret);

ERROR:CODE_INDENT: code indent should use tabs where possible
#450: FILE: fs/ocfs2/dlm/dlmrecovery.c:1865:
+ ^I^I^I/* always prune any $RECOVERY entries for dead nodes,$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#450: FILE: fs/ocfs2/dlm/dlmrecovery.c:1865:
+ ^I^I^I/* always prune any $RECOVERY entries for dead nodes,$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#450: FILE: fs/ocfs2/dlm/dlmrecovery.c:1865:
+ ^I^I^I/* always prune any $RECOVERY entries for dead nodes,$

ERROR:CODE_INDENT: code indent should use tabs where possible
#451: FILE: fs/ocfs2/dlm/dlmrecovery.c:1866:
+ ^I^I^I * otherwise hangs can occur during later recovery */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#451: FILE: fs/ocfs2/dlm/dlmrecovery.c:1866:
+ ^I^I^I * otherwise hangs can occur during later recovery */$

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#451: FILE: fs/ocfs2/dlm/dlmrecovery.c:1866:
+ 			 * otherwise hangs can occur during later recovery */

WARNING:SPLIT_STRING: quoted string split across lines
#459: FILE: fs/ocfs2/dlm/dlmrecovery.c:1873:
+						mlog(0, "AHA! there was "
+						     "a $RECOVERY lock for dead "

WARNING:SPLIT_STRING: quoted string split across lines
#460: FILE: fs/ocfs2/dlm/dlmrecovery.c:1874:
+						     "a $RECOVERY lock for dead "
+						     "node %u (%s)!\n",

ERROR:TRAILING_WHITESPACE: trailing whitespace
#470: FILE: fs/ocfs2/dlm/dlmrecovery.c:1883:
+^I^I^I}^I^I^I$

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#485: FILE: fs/ocfs2/dlm/dlmrecovery.c:1971:
+	 * new nodes are not interesting in mastery until joined. */

ERROR:TRAILING_WHITESPACE: trailing whitespace
#501: FILE: fs/ocfs2/dlm/dlmrecovery.c:2001:
+ * or b) dlm->reco.new_master gets set to some nodenum $

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#505: FILE: fs/ocfs2/dlm/dlmrecovery.c:2005:
+ * be detected in dlm_do_recovery */

ERROR:TRAILING_WHITESPACE: trailing whitespace
#514: FILE: fs/ocfs2/dlm/dlmrecovery.c:2014:
+again:^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#530: FILE: fs/ocfs2/dlm/dlmrecovery.c:2026:
+^I^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#531: FILE: fs/ocfs2/dlm/dlmrecovery.c:2027:
+^I^I/* got the EX lock.  check to see if another node $

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#532: FILE: fs/ocfs2/dlm/dlmrecovery.c:2028:
+		 * just became the reco master */

WARNING:SPLIT_STRING: quoted string split across lines
#535: FILE: fs/ocfs2/dlm/dlmrecovery.c:2031:
+			mlog(0, "%s: got reco EX lock, but %u will "
+			     "do the recovery\n", dlm->name,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#540: FILE: fs/ocfs2/dlm/dlmrecovery.c:2036:
+			status = dlm_send_begin_reco_message(dlm,
+				      dlm->reco.dead_node);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#542: FILE: fs/ocfs2/dlm/dlmrecovery.c:2038:
+			BUG_ON(status);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#578: FILE: fs/ocfs2/dlm/dlmrecovery.c:2066:
+^I^I * reco.new_master != O2NM_INVALID_NODE_NUM $

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#579: FILE: fs/ocfs2/dlm/dlmrecovery.c:2067:
+		 * for at most one second */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#581: FILE: fs/ocfs2/dlm/dlmrecovery.c:2069:
+		wait_event_timeout(dlm->dlm_reco_thread_wq,
+					 dlm_reco_master_ready(dlm),

WARNING:SPLIT_STRING: quoted string split across lines
#597: FILE: fs/ocfs2/dlm/dlmrecovery.c:2085:
+		mlog(ML_ERROR, "%s: got %s from dlmlock($RECOVERY), "
+		     "lksb.status=%s\n", dlm->name, dlm_errname(ret),

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#607: FILE: fs/ocfs2/dlm/dlmrecovery.c:2095:
+		BUG();

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#626: FILE: fs/ocfs2/dlm/dlmrecovery.c:2145:
+			 * so just keep going */

WARNING:SPLIT_STRING: quoted string split across lines
#628: FILE: fs/ocfs2/dlm/dlmrecovery.c:2147:
+			mlog(0, "%s: node %u was down when sending "
+			     "begin reco msg (%d)\n", dlm->name, nodenum, ret);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#633: FILE: fs/ocfs2/dlm/dlmrecovery.c:2152:
+^I^I^I/* this is now a serious problem, possibly ENOMEM $

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#634: FILE: fs/ocfs2/dlm/dlmrecovery.c:2153:
+			 * in the network stack.  must retry */

ERROR:TRAILING_WHITESPACE: trailing whitespace
#643: FILE: fs/ocfs2/dlm/dlmrecovery.c:2165:
+^I^I^I/* sleep for a bit in hopes that we can avoid $

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#644: FILE: fs/ocfs2/dlm/dlmrecovery.c:2166:
+			 * another ENOMEM */

WARNING:SPLIT_STRING: quoted string split across lines
#658: FILE: fs/ocfs2/dlm/dlmrecovery.c:2193:
+			mlog(0, "%s: new_master %u died, changing "
+			     "to %u\n", dlm->name, dlm->reco.new_master,

WARNING:SPLIT_STRING: quoted string split across lines
#662: FILE: fs/ocfs2/dlm/dlmrecovery.c:2197:
+			mlog(0, "%s: new_master %u NOT DEAD, changing "
+			     "to %u\n", dlm->name, dlm->reco.new_master,

ERROR:TRAILING_WHITESPACE: trailing whitespace
#671: FILE: fs/ocfs2/dlm/dlmrecovery.c:2204:
+^I^I     "node %u changing it to %u\n", dlm->name, $

WARNING:SPLIT_STRING: quoted string split across lines
#671: FILE: fs/ocfs2/dlm/dlmrecovery.c:2204:
+		mlog(ML_NOTICE, "%s: dead_node previously set to %u, "
+		     "node %u changing it to %u\n", dlm->name, 

WARNING:SPLIT_STRING: quoted string split across lines
#684: FILE: fs/ocfs2/dlm/dlmrecovery.c:2216:
+			mlog(0, "%u not in domain/live_nodes map "
+			     "so setting it in reco map manually\n",

ERROR:TRAILING_WHITESPACE: trailing whitespace
#698: FILE: fs/ocfs2/dlm/dlmunlock.c:191:
+^I^I} else if (status == DLM_RECOVERING || $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#699: FILE: fs/ocfs2/dlm/dlmunlock.c:192:
+^I^I^I   status == DLM_MIGRATING || $

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#703: FILE: fs/ocfs2/dlm/dlmunlock.c:196:
+			 * any list manipulation. */

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#707: FILE: fs/ocfs2/dlm/dlmunlock.c:200:
+			     status==DLM_RECOVERING?"recovering":
 			           ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#707: FILE: fs/ocfs2/dlm/dlmunlock.c:200:
+			     status==DLM_RECOVERING?"recovering":
 			                           ^

ERROR:SPACING: spaces required around that ':' (ctx:VxE)
#707: FILE: fs/ocfs2/dlm/dlmunlock.c:200:
+			     status==DLM_RECOVERING?"recovering":
 			                                        ^

ERROR:SPACING: spaces required around that '==' (ctx:VxV)
#708: FILE: fs/ocfs2/dlm/dlmunlock.c:201:
+			     (status==DLM_MIGRATING?"migrating":
 			            ^

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#708: FILE: fs/ocfs2/dlm/dlmunlock.c:201:
+			     (status==DLM_MIGRATING?"migrating":
 			                           ^

ERROR:SPACING: spaces required around that ':' (ctx:VxE)
#708: FILE: fs/ocfs2/dlm/dlmunlock.c:201:
+			     (status==DLM_MIGRATING?"migrating":
 			                                       ^

CHECK:CONCATENATED_STRING: Concatenated strings should use spaces between elements
#751: FILE: fs/ocfs2/inode.c:907:
+			"Clear inode of %"MLFu64", io_mutex is locked\n",

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#767: FILE: fs/ocfs2/inode.h:49:
+	struct mutex			ip_io_mutex;

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#854: FILE: fs/ocfs2/ocfs2.h:237:
+	struct mutex recovery_lock;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#910: FILE: fs/ocfs2/uptodate.c:421:
+	 * ip_io_mutex */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#919: FILE: fs/ocfs2/uptodate.c:443:
+ * allocated, but this is careful to take ip_io_mutex anyway. */

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000113382.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 21 errors, 48 warnings, 11 checks, 760 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000113382.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
