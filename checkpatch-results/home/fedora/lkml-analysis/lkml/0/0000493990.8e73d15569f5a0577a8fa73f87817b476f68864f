ERROR:INITIALISED_STATIC: do not initialise statics to 0
#56: FILE: drivers/sound/i810_audio.c:108:
+static unsigned int clocking=0;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#56: FILE: drivers/sound/i810_audio.c:108:
+static unsigned int clocking=0;
                             ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#170: FILE: drivers/sound/i810_audio.c:700:
+		outb((1<<4) | (1<<2) | 1, state->card->iobase + PI_CR);
 		       ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#170: FILE: drivers/sound/i810_audio.c:700:
+		outb((1<<4) | (1<<2) | 1, state->card->iobase + PI_CR);
 		                ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#204: FILE: drivers/sound/i810_audio.c:746:
+		outb((1<<4) | (1<<2) | 1, state->card->iobase + PO_CR);
 		       ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#204: FILE: drivers/sound/i810_audio.c:746:
+		outb((1<<4) | (1<<2) | 1, state->card->iobase + PO_CR);
 		                ^

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#207: FILE: drivers/sound/i810_audio.c:749:
 }
+static void start_dac(struct i810_state *state)

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required before the open parenthesis '('
#223: FILE: drivers/sound/i810_audio.c:777:
+	if(dmabuf->rawbuf && (PAGE_SIZE << dmabuf->buforder) == size)

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#291: FILE: drivers/sound/i810_audio.c:956:
+		outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 		              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#291: FILE: drivers/sound/i810_audio.c:956:
+		outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 		                       ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#291: FILE: drivers/sound/i810_audio.c:956:
+		outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 		                          ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#291: FILE: drivers/sound/i810_audio.c:956:
+		outb((inb(port+OFF_CIV)+1)&31, port+OFF_LVI);
 		                                   ^

ERROR:SPACING: space required before the open parenthesis '('
#292: FILE: drivers/sound/i810_audio.c:957:
+		if(rec) {

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#292: FILE: drivers/sound/i810_audio.c:957:
+		if(rec) {
[...]
+		} else {
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#297: FILE: drivers/sound/i810_audio.c:962:
+		while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;
 		                                 ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#297: FILE: drivers/sound/i810_audio.c:962:
+		while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;
 		                                          ^

WARNING:SPACING: space prohibited before semicolon
#297: FILE: drivers/sound/i810_audio.c:962:
+		while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space prohibited after that open parenthesis '('
#297: FILE: drivers/sound/i810_audio.c:962:
+		while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space prohibited before that close parenthesis ')'
#297: FILE: drivers/sound/i810_audio.c:962:
+		while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:SPACING: space required before the open parenthesis '('
#297: FILE: drivers/sound/i810_audio.c:962:
+		while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#297: FILE: drivers/sound/i810_audio.c:962:
+		while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:WHILE_AFTER_BRACE: while should follow close brace '}'
#297: FILE: drivers/sound/i810_audio.c:962:
+		}
+		while( !(inb(port + OFF_CR) & ((1<<4) | (1<<2))) ) ;

while should follow the closing bracket on the same line::

  do {
          ...
  } while(something);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#305: FILE: drivers/sound/i810_audio.c:969:
+	if (dmabuf->count > dmabuf->fragsize && inb(port+OFF_CIV) == x)
 	                                                ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#306: FILE: drivers/sound/i810_audio.c:970:
+		printk(KERN_DEBUG "i810_audio: update_lvi - CIV == LVI\n");

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#308: FILE: drivers/sound/i810_audio.c:972:
+	outb(x, port+OFF_LVI);
 	            ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#318: FILE: drivers/sound/i810_audio.c:1000:
+		printk("ADC HWP %d,%d,%d\n", hwptr, dmabuf->hwptr, diff);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#329: FILE: drivers/sound/i810_audio.c:1025:
+		printk("DAC HWP %d,%d,%d\n", hwptr, dmabuf->hwptr, diff);

ERROR:SPACING: space required before the open parenthesis '('
#352: FILE: drivers/sound/i810_audio.c:1064:
+	if(free < 0)

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#354: FILE: drivers/sound/i810_audio.c:1066:
+	return(free);

return is not a function and as such doesn't need parentheses::

  return (bar);

can simply be::

  return bar;

ERROR:SPACING: space required before the open parenthesis '('
#370: FILE: drivers/sound/i810_audio.c:1082:
+	if(avail < 0)

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#372: FILE: drivers/sound/i810_audio.c:1084:
+	return(avail);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#386: FILE: drivers/sound/i810_audio.c:1112:
+^I^I/* $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required before the open parenthesis '('
#429: FILE: drivers/sound/i810_audio.c:1158:
+		if(dmabuf->enable & DAC_RUNNING) {

CHECK:BRACES: braces {} should be used on all arms of this statement
#429: FILE: drivers/sound/i810_audio.c:1158:
+		if(dmabuf->enable & DAC_RUNNING) {
[...]
-		else if(dmabuf->enable & ADC_RUNNING)
[...]
 			c=dmabuf->read_channel;
[...]

ERROR:SPACING: space required before the open parenthesis '('
#432: FILE: drivers/sound/i810_audio.c:1160:
+		} else if(dmabuf->enable & ADC_RUNNING) {

CHECK:BRACES: Unbalanced braces around else statement
#435: FILE: drivers/sound/i810_audio.c:1162:
+		} else	/* This can occur going from R/W to close */

ERROR:SPACING: space required before the open parenthesis '('
#580: FILE: drivers/sound/i810_audio.c:1439:
+		if(cnt > (dmabuf->dmasize - swptr))

ERROR:TRAILING_WHITESPACE: trailing whitespace
#630: FILE: drivers/sound/i810_audio.c:1535:
+^I^Iif (i810_get_available_read_data(state) >= $

WARNING:UNSPECIFIED_INT: Prefer 'signed int' to bare use of 'signed'
#631: FILE: drivers/sound/i810_audio.c:1536:
+		    (signed)dmabuf->userfragsize)

WARNING:UNSPECIFIED_INT: Prefer 'signed int' to bare use of 'signed'
#645: FILE: drivers/sound/i810_audio.c:1542:
+		    (signed)dmabuf->userfragsize)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "c"
#703: FILE: drivers/sound/i810_audio.c:1634:
+		if (c != NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#704: FILE: drivers/sound/i810_audio.c:1635:
+			outb(2, state->card->iobase+c->port+OFF_CR);   /* reset DMA machine */
 			                           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#704: FILE: drivers/sound/i810_audio.c:1635:
+			outb(2, state->card->iobase+c->port+OFF_CR);   /* reset DMA machine */
 			                                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#705: FILE: drivers/sound/i810_audio.c:1636:
+			outl(virt_to_bus(&c->sg[0]), state->card->iobase+c->port+OFF_BDBAR);
 			                                                ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#705: FILE: drivers/sound/i810_audio.c:1636:
+			outl(virt_to_bus(&c->sg[0]), state->card->iobase+c->port+OFF_BDBAR);
 			                                                        ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#706: FILE: drivers/sound/i810_audio.c:1637:
+			outb(0, state->card->iobase+c->port+OFF_CIV);
 			                           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#706: FILE: drivers/sound/i810_audio.c:1637:
+			outb(0, state->card->iobase+c->port+OFF_CIV);
 			                                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#707: FILE: drivers/sound/i810_audio.c:1638:
+			outb(0, state->card->iobase+c->port+OFF_LVI);
 			                           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#707: FILE: drivers/sound/i810_audio.c:1638:
+			outb(0, state->card->iobase+c->port+OFF_LVI);
 			                                   ^

ERROR:SPACING: space required before the open parenthesis '('
#796: FILE: drivers/sound/i810_audio.c:1865:
+		if(dmabuf->ossmaxfrags > 256)

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 20)
#809: FILE: drivers/sound/i810_audio.c:1871:
+		while (val < 8192) {
+		    val <<= 1;

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 20)
#813: FILE: drivers/sound/i810_audio.c:1875:
+		while (val > 65536) {
+		    val >>= 1;

ERROR:CODE_INDENT: code indent should use tabs where possible
#829: FILE: drivers/sound/i810_audio.c:1897:
+ ^I^I^Iabinfo.bytes = dmabuf->dmasize;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#829: FILE: drivers/sound/i810_audio.c:1897:
+ ^I^I^Iabinfo.bytes = dmabuf->dmasize;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#829: FILE: drivers/sound/i810_audio.c:1897:
+ ^I^I^Iabinfo.bytes = dmabuf->dmasize;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#830: FILE: drivers/sound/i810_audio.c:1898:
+  ^I^Ielse$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#830: FILE: drivers/sound/i810_audio.c:1898:
+  ^I^Ielse$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#830: FILE: drivers/sound/i810_audio.c:1898:
+  ^I^Ielse$

ERROR:CODE_INDENT: code indent should use tabs where possible
#831: FILE: drivers/sound/i810_audio.c:1899:
+ ^I^I^Iabinfo.bytes = i810_get_free_write_space(state);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#831: FILE: drivers/sound/i810_audio.c:1899:
+ ^I^I^Iabinfo.bytes = i810_get_free_write_space(state);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#831: FILE: drivers/sound/i810_audio.c:1899:
+ ^I^I^Iabinfo.bytes = i810_get_free_write_space(state);$

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#851: FILE: drivers/sound/i810_audio.c:1917:
+		cinfo.blocks = val/dmabuf->userfragsize;
 		                  ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#887: FILE: drivers/sound/i810_audio.c:1955:
+		cinfo.blocks = val/dmabuf->userfragsize;
 		                  ^

ERROR:SPACING: space required before the open parenthesis '('
#916: FILE: drivers/sound/i810_audio.c:2003:
+		if(val & PCM_ENABLE_OUTPUT && !(dmabuf->enable & DAC_RUNNING)) {

CHECK:BRACES: Unbalanced braces around else statement
#936: FILE: drivers/sound/i810_audio.c:2021:
+			} else

ERROR:SPACING: space required before the open parenthesis '('
#940: FILE: drivers/sound/i810_audio.c:2024:
+		if(val & PCM_ENABLE_INPUT && !(dmabuf->enable & ADC_RUNNING)) {

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#970: FILE: drivers/sound/i810_audio.c:2247:
+			schedule_timeout(HZ/20);
 			                   ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "card"
#1007: FILE: drivers/sound/i810_audio.c:2396:
+	for (card = devs; card != NULL; card = card->next) {

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#1010: FILE: drivers/sound/i810_audio.c:2399:
+			schedule_timeout(HZ/20);
 			                   ^

ERROR:SPACING: space required before the open parenthesis '('
#1035: FILE: drivers/sound/i810_audio.c:2810:
+	if(clocking == 0) {

ERROR:CODE_INDENT: code indent should use tabs where possible
#1045: FILE: drivers/sound/i810_audio.c:2830:
+ ^Icard->initializing = 0;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1045: FILE: drivers/sound/i810_audio.c:2830:
+ ^Icard->initializing = 0;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1045: FILE: drivers/sound/i810_audio.c:2830:
+ ^Icard->initializing = 0;$

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000493990.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 26 errors, 17 warnings, 30 checks, 962 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000493990.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
