WARNING:COMMIT_MESSAGE: Missing commit description - Add an appropriate one

The patch is missing a commit description.  A brief
description of the changes made by the patch should be added.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#describe-your-changes

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#31: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#109: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:79:
+uint64_t ipath_dummy_val_for_testing;

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#118: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:88:
+#define IPATH_SMA_HDRSZ (8+12+8)	/* LRH+BTH+DETH */
                           ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#118: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:88:
+#define IPATH_SMA_HDRSZ (8+12+8)	/* LRH+BTH+DETH */
                              ^

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#122: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:92:
+	uint32_t len;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#124: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:94:
+	uint32_t unit;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#125: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:95:
+	uint8_t *buf;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#128: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:98:
+static unsigned ipath_sma_first; /* oldest sma packet index */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#129: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:99:
+static unsigned ipath_sma_next;	/* next sma packet index to use */

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#137: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:107:
+#define SMA_MAX_PKTSZ (IPATH_SMA_HDRSZ+256)	/* max len of an SMA packet */
                                       ^

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#139: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:109:
+static uint8_t ipath_sma_data_bufs[IPATH_NUM_SMAPKTS + 1][SMA_MAX_PKTSZ];

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#140: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:110:
+static uint8_t *ipath_sma_data_spare;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#153: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:123:
+static inline uint64_t ipath_kget_sreg(const ipath_type stype,
+					   ipath_sreg regno)

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#155: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:125:
+	uint64_t val;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#156: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:126:
+	uint64_t *sbase;

CHECK:SPACING: No space is necessary after a cast
#158: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:128:
+	sbase = (uint64_t *) (devdata[stype].ipath_sregbase

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#181: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:151:
+static void ipath_disarm_piobufs(const ipath_type, unsigned, unsigned);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#181: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:151:
+static void ipath_disarm_piobufs(const ipath_type, unsigned, unsigned);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#189: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:159:
+int ipath_bringup_serdes(const ipath_type);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'const ipath_type' should also have an identifier name
#189: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:159:
+int ipath_bringup_serdes(const ipath_type);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#195: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:165:
+void ipath_free_pddata(struct ipath_devdata *, uint32_t, int);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ipath_devdata *' should also have an identifier name
#195: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:165:
+void ipath_free_pddata(struct ipath_devdata *, uint32_t, int);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'uint32_t' should also have an identifier name
#195: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:165:
+void ipath_free_pddata(struct ipath_devdata *, uint32_t, int);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'int' should also have an identifier name
#195: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:165:
+void ipath_free_pddata(struct ipath_devdata *, uint32_t, int);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#196: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:166:
+static void ipath_clear_tids(const ipath_type, unsigned);

ERROR:GLOBAL_INITIALISERS: do not initialise globals to 0
#218: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:188:
+int ipath_diags_enabled = 0;

Global variables should not be initialized explicitly to
0 (or NULL, false, etc.).  Your compiler (or rather your
loader, which is responsible for zeroing out the relevant
sections) automatically does it for you.

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#224: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:194:
+void ipath_chip_cleanup(struct ipath_devdata * dd)

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#238: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:208:
+static volatile uint64_t ipath_port0_rcvhdrtail[512]

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#238: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:208:
+static volatile uint64_t ipath_port0_rcvhdrtail[512]

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#239: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:209:
+    __attribute__ ((aligned(4096)));$

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __aligned(4096) over __attribute__((aligned(4096)))
#239: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:209:
+    __attribute__ ((aligned(4096)));

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#275: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:245:
+int ipath_diags_ioctl(struct file *, unsigned, unsigned long);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#275: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:245:
+int ipath_diags_ioctl(struct file *, unsigned, unsigned long);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct file *' should also have an identifier name
#275: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:245:
+int ipath_diags_ioctl(struct file *, unsigned, unsigned long);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'unsigned' should also have an identifier name
#275: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:245:
+int ipath_diags_ioctl(struct file *, unsigned, unsigned long);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'unsigned long' should also have an identifier name
#275: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:245:
+int ipath_diags_ioctl(struct file *, unsigned, unsigned long);

WARNING:STATIC_CONST_CHAR_ARRAY: static const char * array should probably be static const char * const
#280: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:250:
+static const char *ipath_ibcstatus_str[] = {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around dd->ipath_statusp
#317: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:287:
+	return snprintf(buf, PAGE_SIZE, "%llx\n", *(dd->ipath_statusp));

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

WARNING:STATIC_CONST_CHAR_ARRAY: static const char * array should probably be static const char * const
#320: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:290:
+static const char *ipath_status_str[] = {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#335: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:305:
+static ssize_t show_status_str(struct device *dev,
+			   struct device_attribute *attr,

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#340: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:310:
+	uint64_t s;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around dd->ipath_statusp
#348: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:318:
+	s = *(dd->ipath_statusp);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#369: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:339:
+static ssize_t show_lid(struct device *dev,
+			   struct device_attribute *attr,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#381: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:351:
+static ssize_t show_mlid(struct device *dev,
+			   struct device_attribute *attr,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#393: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:363:
+static ssize_t show_guid(struct device *dev,
+			   struct device_attribute *attr,

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#397: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:367:
+	uint8_t *guid;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around dd->ipath_guid
#402: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:372:
+	guid = (uint8_t *)&(dd->ipath_guid);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#410: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:380:
+static ssize_t show_nguid(struct device *dev,
+			   struct device_attribute *attr,

WARNING:SIZEOF_PARENTHESIS: sizeof dd->ipath_serial should be sizeof(dd->ipath_serial)
#430: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:400:
+	buf[sizeof dd->ipath_serial] = '\0';

WARNING:SIZEOF_PARENTHESIS: sizeof dd->ipath_serial should be sizeof(dd->ipath_serial)
#431: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:401:
+	memcpy(buf, dd->ipath_serial, sizeof dd->ipath_serial);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#437: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:407:
+static ssize_t show_unit(struct device *dev,
+			   struct device_attribute *attr,

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#449: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:419:
+static DRIVER_ATTR(version, S_IRUGO, show_version, NULL);

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'show_status' to 'status_show'
#450: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:420:
+static DEVICE_ATTR(status, S_IRUGO, show_status, NULL);

The function names used in DEVICE_ATTR is unusual.
Typically, the store and show functions are used with <attr>_store and
<attr>_show, where <attr> is a named attribute variable of the device.

Consider the following examples::

  static DEVICE_ATTR(type, 0444, type_show, NULL);
  static DEVICE_ATTR(power, 0644, power_show, power_store);

The function names should preferably follow the above pattern.

See: https://www.kernel.org/doc/html/latest/driver-api/driver-model/device.html#attributes

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#450: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:420:
+static DEVICE_ATTR(status, S_IRUGO, show_status, NULL);

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'show_status_str' to 'status_str_show'
#451: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:421:
+static DEVICE_ATTR(status_str, S_IRUGO, show_status_str, NULL);

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#451: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:421:
+static DEVICE_ATTR(status_str, S_IRUGO, show_status_str, NULL);

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'show_lid' to 'lid_show'
#452: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:422:
+static DEVICE_ATTR(lid, S_IRUGO, show_lid, NULL);

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#452: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:422:
+static DEVICE_ATTR(lid, S_IRUGO, show_lid, NULL);

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'show_mlid' to 'mlid_show'
#453: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:423:
+static DEVICE_ATTR(mlid, S_IRUGO, show_mlid, NULL);

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#453: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:423:
+static DEVICE_ATTR(mlid, S_IRUGO, show_mlid, NULL);

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'show_guid' to 'guid_show'
#454: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:424:
+static DEVICE_ATTR(guid, S_IRUGO, show_guid, NULL);

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#454: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:424:
+static DEVICE_ATTR(guid, S_IRUGO, show_guid, NULL);

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'show_nguid' to 'nguid_show'
#455: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:425:
+static DEVICE_ATTR(nguid, S_IRUGO, show_nguid, NULL);

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#455: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:425:
+static DEVICE_ATTR(nguid, S_IRUGO, show_nguid, NULL);

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'show_serial' to 'serial_show'
#456: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:426:
+static DEVICE_ATTR(serial, S_IRUGO, show_serial, NULL);

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#456: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:426:
+static DEVICE_ATTR(serial, S_IRUGO, show_serial, NULL);

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'show_unit' to 'unit_show'
#457: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:427:
+static DEVICE_ATTR(unit, S_IRUGO, show_unit, NULL);

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#457: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:427:
+static DEVICE_ATTR(unit, S_IRUGO, show_unit, NULL);

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#471: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:441:
+	uint32_t val;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#472: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:442:
+	uint64_t val64, t0, t1;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#474: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:444:
+	static uint64_t one_sec_in_cycles;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#475: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:445:
+	extern uint32_t _ipath_pico_per_cycle;

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#475: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:445:
+	extern uint32_t _ipath_pico_per_cycle;

CHECK:BRACES: braces {} should be used on all arms of this statement
#497: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:467:
+	if (creg == cr_wordsendcnt) {
[...]
+	} else if (creg == cr_wordrcvcnt) {
[...]
+	} else if (creg == cr_pktsendcnt) {
[...]
+	} else if (creg == cr_pktrcvcnt) {
[...]
+	} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#521: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:491:
+	} else

CHECK:SPACING: No space is necessary after a cast
#522: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:492:
+		val64 = (uint64_t) val;

WARNING:TYPO_SPELLING: 'meaningfull' may be misspelled - perhaps 'meaningful'?
#531: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:501:
+ * someday, and so function name when printed by _IPATH_INFO is meaningfull
                                                                 ^^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#536: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:506:
+	static uint64_t last_tot_hdrqfull;

WARNING:SIZEOF_PARENTHESIS: sizeof buf should be sizeof(buf)
#543: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:513:
+		blen = snprintf(buf, sizeof buf, "port 0 hdrqfull %u",

WARNING:SIZEOF_PARENTHESIS: sizeof buf should be sizeof(buf)
#550: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:520:
+		    snprintf(buf + blen, sizeof buf - blen, "%srcvegrfull %llu",

WARNING:SIZEOF_PARENTHESIS: sizeof buf should be sizeof(buf)
#566: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:536:
+		    snprintf(buf + blen, sizeof buf - blen,

WARNING:LONG_LINE: line length of 103 exceeds 100 columns
#577: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:547:
+				*dd->ipath_hdrqtailptr, dd->ipath_port0head,ipath_stats.sps_port0pkts);

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#577: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:547:
+			_IPATH_PDBG("missing rcv interrupts? port0 hd=%llx tl=%x; port0pkts %llx\n",
+				*dd->ipath_hdrqtailptr, dd->ipath_port0head,ipath_stats.sps_port0pkts);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#577: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:547:
+				*dd->ipath_hdrqtailptr, dd->ipath_port0head,ipath_stats.sps_port0pkts);
 				                                           ^

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#591: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:561:
+	uint32_t val;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#593: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:563:
+	static unsigned cnt;

CHECK:SPACING: No space is necessary after a cast
#605: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:575:
+	ipath_snap_cntr((ipath_type) t, cr_wordsendcnt);

CHECK:SPACING: No space is necessary after a cast
#606: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:576:
+	ipath_snap_cntr((ipath_type) t, cr_wordrcvcnt);

CHECK:SPACING: No space is necessary after a cast
#607: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:577:
+	ipath_snap_cntr((ipath_type) t, cr_pktsendcnt);

CHECK:SPACING: No space is necessary after a cast
#608: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:578:
+	ipath_snap_cntr((ipath_type) t, cr_pktrcvcnt);

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#626: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:596:
+	if ((devdata[t].ipath_maskederrs & ~devdata[t].ipath_ignorederrs)
+	    && get_cycles() > devdata[t].ipath_unmasktime) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#628: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:598:
+		char ebuf[256];
+		ipath_decode_err(ebuf, sizeof ebuf,

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SIZEOF_PARENTHESIS: sizeof ebuf should be sizeof(ebuf)
#628: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:598:
+		ipath_decode_err(ebuf, sizeof ebuf,

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'devdata[t].ipath_ignorederrs'
#630: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:600:
+				 (devdata[t].ipath_maskederrs & ~devdata[t].
+				  ipath_ignorederrs));

A single dereferencing identifier spanned on multiple lines like::

  struct_identifier->member[index].
  member = <foo>;

is generally hard to follow. It can easily lead to typos and so makes
the code vulnerable to bugs.

If fixing the multiple line dereferencing leads to an 80 column
violation, then either rewrite the code in a more simple way or if the
starting part of the dereferencing identifier is the same and used at
multiple places then store it in a temporary variable, and use that
temporary variable only at all the places. For example, if there are
two dereferencing identifiers::

  member1->member2->member3.foo1;
  member1->member2->member3.foo2;

then store the member1->member2->member3 part in a temporary variable.
It not only helps to avoid the 80 column violation but also reduces
the program size by removing the unnecessary dereferences.

But if none of the above methods work then ignore the 80 column
violation because it is much easier to read a dereferencing identifier
on a single line.

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'devdata[t].ipath_ignorederrs'
#632: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:602:
+		if ((devdata[t].ipath_maskederrs & ~devdata[t].
+		     ipath_ignorederrs)

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#653: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:623:
+		uint64_t ibc;

WARNING:LINE_SPACING: Missing a blank line after declarations
#654: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:624:
+		uint64_t ibc;
+		_IPATH_VDBG("linkinitcmd SLEEP, move to POLL\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#682: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:652:
+			_IPATH_SMADBG("No SMA bufs avail %u seconds; cancelling pending sends\n",
+				dd->ipath_nosma_secs);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#684: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:654:
+			ipath_disarm_piobufs(t, dd->ipath_lastport_piobuf,
+				dd->ipath_piobcnt - dd->ipath_lastport_piobuf);

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#687: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:657:
+		}
+		else

`else {` should follow the closing block `}` on the same line.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#689: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:659:
+			_IPATH_SMADBG("No SMA bufs avail %u tries, after %u seconds\n",
+				dd->ipath_nosma_bufs, dd->ipath_nosma_secs);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#696: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:666:
+
+

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#697: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:667:
+static void __devexit infinipath_remove_one(struct pci_dev *);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#721: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:691:
+#if defined (pgprot_writecombine) && defined(_PAGE_MA_WC)

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#732: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:702:
+	uint64_t intconfig;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#733: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:703:
+	uint8_t rev;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev >= 1'
#745: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:715:
+	if ((!infinipath_cfgunits && (dev >= 1)) ||
+	    (infinipath_cfgunits && (dev >= infinipath_cfgunits)) ||
+	    (dev >= infinipath_max)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev >= infinipath_cfgunits'
#745: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:715:
+	if ((!infinipath_cfgunits && (dev >= 1)) ||
+	    (infinipath_cfgunits && (dev >= infinipath_cfgunits)) ||
+	    (dev >= infinipath_max)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev >= infinipath_max'
#745: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:715:
+	if ((!infinipath_cfgunits && (dev >= 1)) ||
+	    (infinipath_cfgunits && (dev >= infinipath_cfgunits)) ||
+	    (dev >= infinipath_max)) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#756: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:726:
+	if ((ret = pci_enable_device(pdev))) {

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#756: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:726:
+	if ((ret = pci_enable_device(pdev))) {
+		_IPATH_DBG("pci_enable unit %u failed: %x\n", dev, ret);
+	}

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#760: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:730:
+	if ((ret = pci_request_regions(pdev, MODNAME)))

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#764: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:734:
+	if ((ret = pci_set_dma_mask(pdev, DMA_64BIT_MASK)) != 0)

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#789: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:759:
+	if ((ret = pci_read_config_byte(pdev, PCI_REVISION_ID, &rev))) {

CHECK:BRACES: braces {} should be used on all arms of this statement
#789: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:759:
+	if ((ret = pci_read_config_byte(pdev, PCI_REVISION_ID, &rev))) {
[...]
+	} else
[...]

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#794: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:764:
+		return ret;	/* shouldn't ever happen */
+	} else

CHECK:BRACES: Unbalanced braces around else statement
#794: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:764:
+	} else

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#798: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:768:
+#if defined (pgprot_writecombine) && defined(_PAGE_MA_WC)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#799: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:769:
+	printk("Remapping pages WC\n");

CHECK:SPACING: No space is necessary after a cast
#800: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:770:
+	remap_area_pages((unsigned long) devdata[dev].ipath_kregbase +

CHECK:SPACING: No space is necessary after a cast
#813: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:783:
+		((void __iomem *) devdata[dev].ipath_kregbase + len);

CHECK:SPACING: No space is necessary after a cast
#816: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:786:
+	devdata[dev].ipath_kregvirt = (uint64_t __iomem *) phys_to_virt(addr);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around devdata[dev]
#825: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:795:
+	pci_set_drvdata(pdev, &(devdata[dev]));

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#837: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:807:
+	if ((ret = request_irq(pdev->irq, ipath_intr,

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#857: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:827:
+		uint64_t pioaddr, piolen;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#858: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:828:
+		unsigned bits;

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 40)
#872: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:842:
+		for (bits = 0; !(piolen & (1ULL << bits)); bits++)
+			/* do nothing */;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#886: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:856:
+			uint64_t atmp;

WARNING:LINE_SPACING: Missing a blank line after declarations
#887: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:857:
+			uint64_t atmp;
+			_IPATH_DBG

WARNING:LINE_SPACING: Missing a blank line after declarations
#907: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:877:
+			int cookie;
+			_IPATH_VDBG

CHECK:SPACING: No space is necessary after a cast
#920: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:890:
+				devdata[dev].ipath_mtrr = (uint32_t) cookie;

CHECK:BRACES: Unbalanced braces around else statement
#941: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:911:
+		} else

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#948: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:918:
+	device_create_file(&(pdev->dev), &dev_attr_status);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#949: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:919:
+	device_create_file(&(pdev->dev), &dev_attr_status_str);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#950: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:920:
+	device_create_file(&(pdev->dev), &dev_attr_lid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#951: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:921:
+	device_create_file(&(pdev->dev), &dev_attr_mlid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#952: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:922:
+	device_create_file(&(pdev->dev), &dev_attr_guid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#953: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:923:
+	device_create_file(&(pdev->dev), &dev_attr_nguid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#954: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:924:
+	device_create_file(&(pdev->dev), &dev_attr_serial);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#955: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:925:
+	device_create_file(&(pdev->dev), &dev_attr_unit);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#965: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:935:
+		* just want to carry status through to this point */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#965: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:935:
+	if (ret == -EPERM) /* disabled device, don't want module load error;
+		* just want to carry status through to this point */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#971: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:941:
+
+

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#984: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:954:
+static int ipath_setup_htconfig(struct pci_dev *pdev, uint64_t * iaddr,

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#987: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:957:
+	uint8_t cap_type;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#988: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:958:
+	uint32_t int_handler_addr_lower;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#989: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:959:
+	uint32_t int_handler_addr_upper;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#990: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:960:
+	uint64_t ihandler = 0;

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1001: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:971:
+	if (!(pos = pci_find_capability(pdev, HT_CAPABILITY_ID))) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1003: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:973:
+		_IPATH_UNIT_ERROR(t,
+		    "Couldn't find HyperTransport capability; no interrupts\n");

ERROR:CODE_INDENT: code indent should use tabs where possible
#1007: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:977:
+^I    ^I/* the HT capability type byte is 3 bytes after the$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1007: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:977:
+^I    ^I/* the HT capability type byte is 3 bytes after the$

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1010: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:980:
+		if (pci_read_config_byte(pdev, pos+3, &cap_type)) {
 		                                  ^

WARNING:REPEATED_WORD: Possible repeated word: 'for'
#1022: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:992:
+			 * it's fatal anyway.  Also need to not check for
+			 * for upper byte errors if we are in 8 bit mode,

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#1026: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:996:
+			uint8_t linkwidth = 0, linkerr, link_a_b_off, link_off;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u16' over 'uint16_t'
#1027: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:997:
+			uint16_t linkctrl = 0;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1051: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1021:
+					_IPATH_UNIT_ERROR(t,
+					  "Couldn't read HT link control%d register\n",

WARNING:LONG_LINE_STRING: line length of 101 exceeds 100 columns
#1077: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1047:
+					    ("Couldn't read linkerror%d of HT slave/primary block\n",

A string starts before but extends beyond the maximum line length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:LONG_LINE_STRING: line length of 111 exceeds 100 columns
#1095: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1065:
+						    ("Couldn't reread linkerror%d of HT slave/primary block\n",

WARNING:LONG_LINE_STRING: line length of 102 exceeds 100 columns
#1099: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1069:
+						    ("HT linkerror%d bits 0x%x couldn't be cleared\n",

CHECK:BRACES: Unbalanced braces around else statement
#1113: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1083:
+			else {

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#1114: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1084:
+				uint32_t width;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1115: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1085:
+				uint32_t width;
+				switch (linkwidth & 7) {

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#1133: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1103:
+				((struct ipath_devdata *) pci_get_drvdata(pdev))->ipath_htwidth = width;

CHECK:SPACING: No space is necessary after a cast
#1133: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1103:
+				((struct ipath_devdata *) pci_get_drvdata(pdev))->ipath_htwidth = width;

WARNING:LONG_LINE: line length of 131 exceeds 100 columns
#1142: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1112:
+						((struct ipath_devdata *) pci_get_drvdata(pdev))->ipath_flags |= IPATH_8BIT_IN_HT0;

CHECK:SPACING: No space is necessary after a cast
#1142: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1112:
+						((struct ipath_devdata *) pci_get_drvdata(pdev))->ipath_flags |= IPATH_8BIT_IN_HT0;

CHECK:BRACES: Unbalanced braces around else statement
#1156: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1126:
+			else {

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#1157: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1127:
+				uint32_t speed;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1158: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1128:
+				uint32_t speed;
+				switch (linkwidth & 0xf) {

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#1186: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1156:
+				((struct ipath_devdata *) pci_get_drvdata(pdev))->ipath_htspeed = speed;

CHECK:SPACING: No space is necessary after a cast
#1186: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1156:
+				((struct ipath_devdata *) pci_get_drvdata(pdev))->ipath_htspeed = speed;

ERROR:CODE_INDENT: code indent should use tabs where possible
#1189: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1159:
+^I^I    ^I/* use indirection register to get the intr handler */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1189: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1159:
+^I^I    ^I/* use indirection register to get the intr handler */$

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#1190: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1160:
+			uint32_t intvec;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1191: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1161:
+			uint32_t intvec;
+			pci_write_config_byte(pdev, pos + HT_INTR_REG_INDEX,

CHECK:SPACING: No space is necessary after a cast
#1201: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1171:
+			ihandler = (uint64_t) int_handler_addr_lower |

CHECK:SPACING: No space is necessary after a cast
#1202: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1172:
+				((uint64_t) int_handler_addr_upper << 32);

WARNING:REPEATED_WORD: Possible repeated word: 'the'
#1206: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1176:
+			 * the the actual vector, either from the PCI

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#1245: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1215:
+	} while ((pos=pci_find_next_capability(pdev, pos, HT_CAPABILITY_ID)));
 	             ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1249: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1219:
+		_IPATH_UNIT_ERROR(t,
+			"Couldn't find interrupt handler in config space\n");

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#1266: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1236:
+	uint64_t guid;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#1268: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1238:
+	uint8_t csum, *bguid;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#1271: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1241:
+		uint8_t oguid;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1272: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1242:
+		uint8_t oguid;
+		devdata[t].ipath_guid = devdata[0].ipath_guid;

CHECK:SPACING: No space is necessary after a cast
#1273: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1243:
+		bguid = (uint8_t *) & devdata[t].ipath_guid;

ERROR:SPACING: space prohibited after that '&' (ctx:WxW)
#1273: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1243:
+		bguid = (uint8_t *) & devdata[t].ipath_guid;
 		                    ^

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1300: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1270:
+	if (!(buf = vmalloc(len))) {

CHECK:SPACING: No space is necessary after a cast
#1319: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1289:
+	if (*(uint64_t *) ifp->if_guid == 0ULL

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1320: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1290:
+	if (*(uint64_t *) ifp->if_guid == 0ULL
+	    || *(uint64_t *) ifp->if_guid == -1LL) {

CHECK:SPACING: No space is necessary after a cast
#1320: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1290:
+	    || *(uint64_t *) ifp->if_guid == -1LL) {

CHECK:SPACING: No space is necessary after a cast
#1322: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1292:
+				  *(uint64_t *) ifp->if_guid);

CHECK:SPACING: No space is necessary after a cast
#1327: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1297:
+	if (*(uint64_t *) ifp->if_guid == 0x100007511000000ULL)

WARNING:TYPO_SPELLING: 'probabaly' may be misspelled - perhaps 'probably'?
#1329: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1299:
+		    ("Warning, GUID %llx is default, probabaly not correct!\n",
 		                                     ^^^^^^^^^

CHECK:SPACING: No space is necessary after a cast
#1330: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1300:
+		     *(uint64_t *) ifp->if_guid);

CHECK:BRACES: braces {} should be used on all arms of this statement
#1333: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1303:
+	if (!bguid[0] && !bguid[1] && !bguid[2]) {
[...]
+	else
[...]

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1336: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1306:
+		 * it and shifted are 0.. */

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1339: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1309:
+		bguid[3] = bguid[4] = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#1343: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1313:
+	}
+	else

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#1355: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1325:
+static void __devexit infinipath_remove_one(struct pci_dev *pdev)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#1361: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1331:
+		device_remove_file(&(pdev->dev), &dev_attr_status);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#1362: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1332:
+		device_remove_file(&(pdev->dev), &dev_attr_status_str);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#1363: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1333:
+		device_remove_file(&(pdev->dev), &dev_attr_lid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#1364: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1334:
+		device_remove_file(&(pdev->dev), &dev_attr_mlid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#1365: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1335:
+		device_remove_file(&(pdev->dev), &dev_attr_guid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#1366: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1336:
+		device_remove_file(&(pdev->dev), &dev_attr_nguid);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#1367: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1337:
+		device_remove_file(&(pdev->dev), &dev_attr_serial);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pdev->dev
#1368: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1338:
+		device_remove_file(&(pdev->dev), &dev_attr_unit);

CHECK:SPACING: No space is necessary after a cast
#1373: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1343:
+		     (uint32_t) (dd - devdata));

CHECK:SPACING: No space is necessary after a cast
#1377: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1347:
+			iounmap((volatile void __iomem *) dd->ipath_kregbase);

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#1377: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1347:
+			iounmap((volatile void __iomem *) dd->ipath_kregbase);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#1388: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1358:
+int ipath_close(struct inode *, struct file *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct inode *' should also have an identifier name
#1388: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1358:
+int ipath_close(struct inode *, struct file *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct file *' should also have an identifier name
#1388: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1358:
+int ipath_close(struct inode *, struct file *);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#1390: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1360:
+long ipath_ioctl(struct file *, unsigned int, unsigned long);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct file *' should also have an identifier name
#1390: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1360:
+long ipath_ioctl(struct file *, unsigned int, unsigned long);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'unsigned int' should also have an identifier name
#1390: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1360:
+long ipath_ioctl(struct file *, unsigned int, unsigned long);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'unsigned long' should also have an identifier name
#1390: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1360:
+long ipath_ioctl(struct file *, unsigned int, unsigned long);

WARNING:CONST_STRUCT: struct file_operations should normally be const
#1394: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1364:
+static struct file_operations ipath_fops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

ERROR:SPACING: spaces required around that '=' (ctx:VxO)
#1420: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1390:
+	int ret = 0, minor, i, prefunit=-1, devmax;
 	                               ^

ERROR:SPACING: space required before that '-' (ctx:OxV)
#1420: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1390:
+	int ret = 0, minor, i, prefunit=-1, devmax;
 	                                ^

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1446: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1416:
+#ifdef IPATH_DIAG
+		&& minor != IPATH_DIAG

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1448: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1418:
+#endif
+		&& minor != IPATH_CTRL

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1449: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1419:
+		&& minor != IPATH_CTRL
+		&& !cpus_empty(current->cpus_allowed)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1450: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1420:
+		&& !cpus_empty(current->cpus_allowed)
+		&& !cpus_full(current->cpus_allowed)) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#1452: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1422:
+		int ncpus = num_online_cpus(), curcpu = -1;
+		for (i=0; i<ncpus; i++)

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#1452: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1422:
+		for (i=0; i<ncpus; i++)
 		      ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#1452: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1422:
+		for (i=0; i<ncpus; i++)
 		           ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1455: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1425:
+				_IPATH_PRDBG("%s[%u] affinity set for cpu %d\n",
+					current->comm, current->pid, i);

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1461: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1431:
+				if ((devdata[ndev].ipath_flags & IPATH_PRESENT)
+				    && devdata[ndev].ipath_kregbase)

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#1464: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1434:
+				prefunit = curcpu/(ncpus/npresent);
 				                 ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#1464: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1434:
+				prefunit = curcpu/(ncpus/npresent);
 				                        ^

WARNING:SPLIT_STRING: quoted string split across lines
#1466: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1436:
+				_IPATH_DBG("%s[%u] %d chips, %d cpus, "
+					   "%d cpus/chip, select unit %d\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#1468: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1438:
+					   npresent, ncpus, ncpus/npresent,
 					                         ^

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#1494: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1464:
+	}
+	else if (minor) {

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1514: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1484:
+	npresent = maxofallports = 0;

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'devdata[ndev].ipath_flags'
#1521: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1491:
+		if ((devdata[ndev].
+		     ipath_flags & (IPATH_LINKDOWN | IPATH_LINKUNK))) {

ERROR:SPACING: spaces required around that '!=' (ctx:VxO)
#1542: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1512:
+	devmax = prefunit!=-1 ? prefunit+1 : infinipath_max;
 	                 ^

ERROR:SPACING: space required before that '-' (ctx:OxV)
#1542: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1512:
+	devmax = prefunit!=-1 ? prefunit+1 : infinipath_max;
 	                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1542: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1512:
+	devmax = prefunit!=-1 ? prefunit+1 : infinipath_max;
 	                                ^

ERROR:SPACING: spaces required around that '!=' (ctx:VxO)
#1545: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1515:
+		for (ndev = prefunit!=-1?prefunit:0; ndev < devmax; ndev++) {
 		                    ^

ERROR:SPACING: space required before that '-' (ctx:OxV)
#1545: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1515:
+		for (ndev = prefunit!=-1?prefunit:0; ndev < devmax; ndev++) {
 		                      ^

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#1545: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1515:
+		for (ndev = prefunit!=-1?prefunit:0; ndev < devmax; ndev++) {
 		                        ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#1545: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1515:
+		for (ndev = prefunit!=-1?prefunit:0; ndev < devmax; ndev++) {
 		                                 ^

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1548: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1518:
+			    !devdata[ndev].ipath_kregbase
+			    || !devdata[ndev].ipath_lid

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1549: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1519:
+			    || !devdata[ndev].ipath_lid
+			    || (devdata[ndev].

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'devdata[ndev].ipath_flags'
#1550: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1520:
+			    || (devdata[ndev].
+				ipath_flags & (IPATH_LINKDOWN | IPATH_LINKUNK)))

WARNING:LINE_SPACING: Missing a blank line after declarations
#1556: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1526:
+				void *p, *ptmp;
+				p = kmalloc(sizeof(struct ipath_portdata),

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*p)...) over kmalloc(sizeof(struct ipath_portdata)...)
#1556: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1526:
+				p = kmalloc(sizeof(struct ipath_portdata),

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:SPACING: space preferred before that '+' (ctx:ExE)
#1569: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1539:
+					    +
 					    ^

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'devdata[ndev].ipath_pd[i]->port_wait'
#1587: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1557:
+				init_waitqueue_head(&devdata[ndev].ipath_pd[i]->
+						    port_wait);

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'devdata[ndev].ipath_pd[i]->port_comm'
#1601: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1571:
+					sizeof(devdata[ndev].ipath_pd[i]->
+					       port_comm));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1616: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1586:
+				_IPATH_PRDBG("%s[%u] no ports on prefunit %d, clear and re-check\n",
+					current->comm, current->pid, prefunit);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1665: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1635:
+
+

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1690: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1660:
+		if ((devdata[s].ipath_flags & IPATH_PRESENT)
+		    && devdata[s].ipath_kregbase) {

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1706: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1676:
+static void ipath_clear_tids(const ipath_type t, unsigned port)

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#1708: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1678:
+	uint64_t __iomem *tidbase;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#1711: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1681:
+	uint64_t tidval;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1712: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1682:
+	uint64_t tidval;
+	dd = &devdata[t];

CHECK:SPACING: No space is necessary after a cast
#1733: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1703:
+	tidbase = (uint64_t __iomem *) ((char __iomem *)(dd->ipath_kregbase) +

WARNING:YIELD: Using yield() is generally wrong. See yield() kernel-doc (sched/core.c)
#1741: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1711:
+	yield();		/* don't hog the cpu */

WARNING:YIELD: Using yield() is generally wrong. See yield() kernel-doc (sched/core.c)
#1751: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1721:
+	yield();		/* don't hog the cpu */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1786: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1756:
+		unsigned port;

CHECK:SPACING: No space is necessary after a cast
#1789: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1759:
+		pd = (struct ipath_portdata *) fp->private_data;

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1809: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1779:
+		if (pd->port_rcvwait_to || pd->port_piowait_to
+		    || pd->port_rcvnowait || pd->port_pionowait) {

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1815: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1785:
+			pd->port_rcvwait_to = pd->port_piowait_to =

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1816: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1786:
+			    pd->port_rcvnowait = pd->port_pionowait = 0;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1841: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1811:
+				int i = dd->ipath_pbufsport * (port - 1);
+				ipath_disarm_piobufs(t, i, dd->ipath_pbufsport);

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#1865: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1835:
+						if (dd->ipath_pageshadow[i]) {

Indentation with 6 or more tabs usually indicate overly indented
code.

It is suggested to refactor excessive indentation of
if/else/for/do/while/switch statements.

See: https://lore.kernel.org/lkml/1328311239.21255.24.camel@joe2Laptop/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1867: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1837:
+							ipath_putpages(1,
+								      &dd->

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'dd->ipath_pageshadow'
#1868: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1838:
+								      &dd->
+								      ipath_pageshadow

CHECK:ASSIGNMENT_CONTINUATIONS: Assignment operator '=' should be on the previous line
#1871: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1841:
+							dd->ipath_pageshadow[i]
+							    = NULL;

Assignment operators should not be written at the start of a
line but should follow the operand at the previous line.

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'ipath_stats.sps_pageunlocks'
#1874: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1844:
+							ipath_stats.
+							    sps_pageunlocks++;

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1882: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1852:
+					if (ipath_stats.sps_pagelocks
+					    || ipath_stats.sps_pageunlocks)

WARNING:SPLIT_STRING: quoted string split across lines
#1885: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1855:
+						    ("%llu pages locked, %llu unlocked with"
+						     " ipath_m{un}lock\n",

WARNING:MULTILINE_DEREFERENCE: Avoid multiple line dereference - prefer 'ipath_stats.sps_pageunlocks'
#1888: FILE: drivers/infiniband/hw/ipath/ipath_driver.c:1858:
+						     ipath_stats.
+						     sps_pageunlocks);

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000121933.commit.8e73d15569f5a0577a8fa73f87817b476f68864f total: 26 errors, 110 warnings, 141 checks, 1879 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.EfiDkiSq0Q//home/fedora/lkml-analysis/lkml/0/patch.offset.0000121933.commit.8e73d15569f5a0577a8fa73f87817b476f68864f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
