WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#32: 
plane 1 has two AOIs (area of interest), can be accessed by /dev/fb1 and /dev/fb2

WARNING:TYPO_SPELLING: 'horizonal' may be misspelled - perhaps 'horizontal'?
#41: 
AOIs have horizonal order, i.e. AOI0 should be always on top of AOI1
          ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'swtich' may be misspelled - perhaps 'switch'?
#66: 
monitor ports to swtich to. MPC5121ADS doesn't have additional monitor port. So switching
                 ^^^^^^

WARNING:TYPO_SPELLING: 'properities' may be misspelled - perhaps 'properties'?
#117: FILE: Documentation/powerpc/booting-without-of.txt:2842:
+    Required properities:
              ^^^^^^^^^^^

WARNING:TYPO_SPELLING: 'lenght' may be misspelled - perhaps 'length'?
#119: FILE: Documentation/powerpc/booting-without-of.txt:2844:
+    - reg : should contain the address and the lenght of the FPPGA register
                                                ^^^^^^

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#168: FILE: drivers/video/Kconfig:1782:
+config FB_FSL_DIU
+	tristate "Freescale DIU framebuffer support"
+	depends on FB && FSL_SOC
+	select FB_CFB_FILLRECT
+	select FB_CFB_COPYAREA
+	select FB_CFB_IMAGEBLIT
+	select PPC_LIB_RHEAP
+	---help---
+	  Framebuffer driver for the Freescale SoC DIU
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#194: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#199: FILE: drivers/video/fsl-diu-fb.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:HOTPLUG_SECTION: Using __devinitdata is unnecessary
#243: FILE: drivers/video/fsl-diu-fb.c:45:
+static struct fb_videomode __devinitdata fsl_diu_default_mode = {

WARNING:MISPLACED_INIT: __devinitdata should be placed after fsl_diu_default_mode
#243: FILE: drivers/video/fsl-diu-fb.c:45:
+static struct fb_videomode __devinitdata fsl_diu_default_mode = {

It is possible to use section markers on variables in a way
which gcc doesn't understand (or at least not the way the
developer intended)::

  static struct __initdata samsung_pll_clock exynos4_plls[nr_plls] = {

does not put exynos4_plls in the .initdata section. The __initdata
marker can be virtually anywhere on the line, except right after
"struct". The preferred location is before the "=" sign if there is
one, or before the trailing ";" otherwise.

See: https://lore.kernel.org/lkml/1377655732.3619.19.camel@joe-AO722/

WARNING:HOTPLUG_SECTION: Using __devinitdata is unnecessary
#258: FILE: drivers/video/fsl-diu-fb.c:60:
+static struct fb_videomode __devinitdata fsl_diu_mode_db[] = {

WARNING:MISPLACED_INIT: __devinitdata should be placed after fsl_diu_mode_db[]
#258: FILE: drivers/video/fsl-diu-fb.c:60:
+static struct fb_videomode __devinitdata fsl_diu_mode_db[] = {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#420: FILE: drivers/video/fsl-diu-fb.c:222:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TYPO_SPELLING: 'furture' may be misspelled - perhaps 'future'?
#484: FILE: drivers/video/fsl-diu-fb.c:286:
+ *	rheap and make the furture large allocation fail.
   	                   ^^^^^^^

CHECK:SPACING: No space is necessary after a cast
#496: FILE: drivers/video/fsl-diu-fb.c:298:
+		pr_debug("virt %p, phys=%llx\n", virt, (uint64_t) *phys);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#500: FILE: drivers/video/fsl-diu-fb.c:302:
+		printk(KERN_INFO "%s: no diu_mem."

WARNING:SPLIT_STRING: quoted string split across lines
#501: FILE: drivers/video/fsl-diu-fb.c:303:
+		printk(KERN_INFO "%s: no diu_mem."
+			" To reserve more memory, put 'diufb=15M' "

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#502: FILE: drivers/video/fsl-diu-fb.c:304:
+			" To reserve more memory, put 'diufb=15M' "
+			"in the command line\n", __func__);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'p >= diu_ops.diu_mem'
#524: FILE: drivers/video/fsl-diu-fb.c:326:
+	if ((p >= diu_ops.diu_mem) &&
+	    (p < (diu_ops.diu_mem + diu_ops.diu_size))) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:SPACING: No space is necessary after a cast
#527: FILE: drivers/video/fsl-diu-fb.c:329:
+		rh_free(&diu_ops.diu_rh_info, (unsigned long) p);

CHECK:BRACES: braces {} should be used on all arms of this statement
#543: FILE: drivers/video/fsl-diu-fb.c:345:
+	if (mfbi->type != MFB_TYPE_OFF) {
[...]
+	} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#591: FILE: drivers/video/fsl-diu-fb.c:393:
+	} else

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#608: FILE: drivers/video/fsl-diu-fb.c:410:
+			out_be32(&hw->desc[0],
+				machine_data->dummy_ad->paddr);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#617: FILE: drivers/video/fsl-diu-fb.c:419:
+			out_be32(&hw->desc[1],
+				machine_data->dummy_ad->paddr);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#627: FILE: drivers/video/fsl-diu-fb.c:429:
+			out_be32(&hw->desc[2],
+				machine_data->dummy_ad->paddr);

CHECK:BRACES: Unbalanced braces around else statement
#637: FILE: drivers/video/fsl-diu-fb.c:439:
+		} else			/* AOI1 is the first in the chain */

CHECK:BRACES: Unbalanced braces around else statement
#648: FILE: drivers/video/fsl-diu-fb.c:450:
+		} else		/* AOI1 is the first in the chain */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#685: FILE: drivers/video/fsl-diu-fb.c:487:
+static void adjust_aoi_size_position(struct fb_var_screeninfo *var,
+				struct fb_info *info)

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#705: FILE: drivers/video/fsl-diu-fb.c:507:
+		lower_aoi_mfbi = machine_data->fsl_diu_info[index+1]->par;
 		                                                 ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#723: FILE: drivers/video/fsl-diu-fb.c:525:
+		upper_aoi_mfbi = machine_data->fsl_diu_info[index-1]->par;
 		                                                 ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#725: FILE: drivers/video/fsl-diu-fb.c:527:
+				machine_data->fsl_diu_info[index-1]->var.yres;
 				                                ^

CHECK:BRACES: braces {} should be used on all arms of this statement
#734: FILE: drivers/video/fsl-diu-fb.c:536:
+		if (upper_aoi_is_open) {
[...]
+		} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#739: FILE: drivers/video/fsl-diu-fb.c:541:
+		} else

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#748: FILE: drivers/video/fsl-diu-fb.c:550:
+}
+/*

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#756: FILE: drivers/video/fsl-diu-fb.c:558:
+static int fsl_diu_check_var(struct fb_var_screeninfo *var,
+				struct fb_info *info)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'var->bits_per_pixel != 32'
#780: FILE: drivers/video/fsl-diu-fb.c:582:
+	if ((var->bits_per_pixel != 32) && (var->bits_per_pixel != 24) &&
+	    (var->bits_per_pixel != 16))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'var->bits_per_pixel != 24'
#780: FILE: drivers/video/fsl-diu-fb.c:582:
+	if ((var->bits_per_pixel != 32) && (var->bits_per_pixel != 24) &&
+	    (var->bits_per_pixel != 16))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'var->bits_per_pixel != 16'
#780: FILE: drivers/video/fsl-diu-fb.c:582:
+	if ((var->bits_per_pixel != 32) && (var->bits_per_pixel != 24) &&
+	    (var->bits_per_pixel != 16))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'var->pixclock < MIN_PIX_CLK'
#842: FILE: drivers/video/fsl-diu-fb.c:644:
+	if ((var->pixclock < MIN_PIX_CLK) || (var->pixclock > MAX_PIX_CLK)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'var->pixclock > MAX_PIX_CLK'
#842: FILE: drivers/video/fsl-diu-fb.c:644:
+	if ((var->pixclock < MIN_PIX_CLK) || (var->pixclock > MAX_PIX_CLK)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#850: FILE: drivers/video/fsl-diu-fb.c:652:
+		pr_debug("pixclock set for 60Hz refresh = %u ps\n",
+			var->pixclock);

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 11)
#903: FILE: drivers/video/fsl-diu-fb.c:705:
+	for (i = 0; i <= 2; i++)
+	   for (j = 0; j <= 255; j++)

WARNING:TABSTOP: Statements should start on a tabstop
#904: FILE: drivers/video/fsl-diu-fb.c:706:
+	   for (j = 0; j <= 255; j++)

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (11, 14)
#904: FILE: drivers/video/fsl-diu-fb.c:706:
+	   for (j = 0; j <= 255; j++)
+	      *gamma_table_base++ = j;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#917: FILE: drivers/video/fsl-diu-fb.c:719:
+^Iout_be32(&hw->bgnd, 0x007F7F7F); ^I/* BGND */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#918: FILE: drivers/video/fsl-diu-fb.c:720:
+^Iout_be32(&hw->bgnd_wb, 0); ^I^I/* BGND_WB */$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#972: FILE: drivers/video/fsl-diu-fb.c:774:
+		printk(KERN_ERR "Unable to allocate fb memory\n");

CHECK:SPACING: No space is necessary after a cast
#975: FILE: drivers/video/fsl-diu-fb.c:777:
+	info->fix.smem_start = (unsigned long) phys;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#979: FILE: drivers/video/fsl-diu-fb.c:781:
+	pr_debug("Allocated fb @ paddr=0x%08lx, size=%d.\n",
+				info->fix.smem_start,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1025: FILE: drivers/video/fsl-diu-fb.c:827:
+			printk(KERN_ERR "Unable to allocate fb memory 1\n");

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1037: FILE: drivers/video/fsl-diu-fb.c:839:
+^Iad->aoi_size ^I= cpu_to_le32((var->yres << 16) | var->xres);$

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#1057: FILE: drivers/video/fsl-diu-fb.c:859:
+	return ((val<<width) + 0x7FFF - val)>>16;
 	            ^

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#1057: FILE: drivers/video/fsl-diu-fb.c:859:
+	return ((val<<width) + 0x7FFF - val)>>16;
 	                                    ^

WARNING:TYPO_SPELLING: 'psuedo' may be misspelled - perhaps 'pseudo'?
#1065: FILE: drivers/video/fsl-diu-fb.c:867:
+ * supported. Here a psuedo palette is created which we store the value in
                      ^^^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1069: FILE: drivers/video/fsl-diu-fb.c:871:
+static int fsl_diu_setcolreg(unsigned regno, unsigned red, unsigned green,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1069: FILE: drivers/video/fsl-diu-fb.c:871:
+static int fsl_diu_setcolreg(unsigned regno, unsigned red, unsigned green,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1069: FILE: drivers/video/fsl-diu-fb.c:871:
+static int fsl_diu_setcolreg(unsigned regno, unsigned red, unsigned green,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1070: FILE: drivers/video/fsl-diu-fb.c:872:
+static int fsl_diu_setcolreg(unsigned regno, unsigned red, unsigned green,
+			   unsigned blue, unsigned transp, struct fb_info *info)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1070: FILE: drivers/video/fsl-diu-fb.c:872:
+			   unsigned blue, unsigned transp, struct fb_info *info)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1070: FILE: drivers/video/fsl-diu-fb.c:872:
+			   unsigned blue, unsigned transp, struct fb_info *info)

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1079: FILE: drivers/video/fsl-diu-fb.c:881:
+		red = green = blue = (19595 * red + 38470 * green +

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1119: FILE: drivers/video/fsl-diu-fb.c:921:
+static int fsl_diu_pan_display(struct fb_var_screeninfo *var,
+			     struct fb_info *info)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'info->var.xoffset == var->xoffset'
#1121: FILE: drivers/video/fsl-diu-fb.c:923:
+	if ((info->var.xoffset == var->xoffset) &&
+	    (info->var.yoffset == var->yoffset))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'info->var.yoffset == var->yoffset'
#1121: FILE: drivers/video/fsl-diu-fb.c:923:
+	if ((info->var.xoffset == var->xoffset) &&
+	    (info->var.yoffset == var->yoffset))

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1126: FILE: drivers/video/fsl-diu-fb.c:928:
+	if (var->xoffset < 0 || var->yoffset < 0
+	    || var->xoffset + info->var.xres > info->var.xres_virtual

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1127: FILE: drivers/video/fsl-diu-fb.c:929:
+	    || var->xoffset + info->var.xres > info->var.xres_virtual
+	    || var->yoffset + info->var.yres > info->var.yres_virtual)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1173: FILE: drivers/video/fsl-diu-fb.c:975:
+static int fsl_diu_ioctl(struct fb_info *info, unsigned int cmd,
+		       unsigned long arg)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1204: FILE: drivers/video/fsl-diu-fb.c:1006:
+		pr_debug("set AOI display offset of index %d to (%d,%d)\n",
+				 mfbi->index, aoi_d.x_aoi_d, aoi_d.y_aoi_d);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1214: FILE: drivers/video/fsl-diu-fb.c:1016:
+		pr_debug("get AOI display offset of index %d (%d,%d)\n",
+				mfbi->index, aoi_d.x_aoi_d, aoi_d.y_aoi_d);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1237: FILE: drivers/video/fsl-diu-fb.c:1039:
+		if (ck.enable &&
+		   (ck.red_max < ck.red_min ||

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1277: FILE: drivers/video/fsl-diu-fb.c:1079:
+		printk(KERN_ERR "Unknown ioctl command (0x%08X)\n", cmd);

CHECK:BRACES: braces {} should be used on all arms of this statement
#1297: FILE: drivers/video/fsl-diu-fb.c:1099:
+		if (res < 0)
[...]
+		else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1299: FILE: drivers/video/fsl-diu-fb.c:1101:
+		else {

WARNING:CONST_STRUCT: struct fb_ops should normally be const
#1329: FILE: drivers/video/fsl-diu-fb.c:1131:
+static struct fb_ops fsl_diu_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1374: FILE: drivers/video/fsl-diu-fb.c:1176:
+	rc = fb_find_mode(&info->var, info, aoi_mode, fsl_diu_mode_db,
+	     ARRAY_SIZE(fsl_diu_mode_db), &fsl_diu_default_mode, default_bpp);

WARNING:SPLIT_STRING: quoted string split across lines
#1382: FILE: drivers/video/fsl-diu-fb.c:1184:
+		pr_debug("using mode specified in @mode "
+			"with ignored refresh rate\n");

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#1394: FILE: drivers/video/fsl-diu-fb.c:1196:
+		return -EINVAL;
+		break;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1409: FILE: drivers/video/fsl-diu-fb.c:1211:
+		printk(KERN_ERR "fb_check_var failed");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1415: FILE: drivers/video/fsl-diu-fb.c:1217:
+		printk(KERN_ERR "fb_set_par failed");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1421: FILE: drivers/video/fsl-diu-fb.c:1223:
+		printk(KERN_ERR "register_framebuffer failed");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1428: FILE: drivers/video/fsl-diu-fb.c:1230:
+	printk(KERN_INFO "fb%d: %s fb device registered successfully.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1429: FILE: drivers/video/fsl-diu-fb.c:1231:
+	printk(KERN_INFO "fb%d: %s fb device registered successfully.\n",
+		 info->node, info->fix.id);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1465: FILE: drivers/video/fsl-diu-fb.c:1267:
+			unsigned int i;
+			for (i = 0; i < coherence_data_size;

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1467: FILE: drivers/video/fsl-diu-fb.c:1269:
+				__asm__ __volatile__ (

CHECK:BRACES: braces {} should be used on all arms of this statement
#1489: FILE: drivers/video/fsl-diu-fb.c:1291:
+	if (ret)
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1491: FILE: drivers/video/fsl-diu-fb.c:1293:
+	else {

CHECK:SPACING: No space is necessary after a cast
#1558: FILE: drivers/video/fsl-diu-fb.c:1360:
+	buf->paddr = (__u32) paddr;

CHECK:BRACES: braces {} should be used on all arms of this statement
#1562: FILE: drivers/video/fsl-diu-fb.c:1364:
+	if (offset) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1565: FILE: drivers/video/fsl-diu-fb.c:1367:
+	} else

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1573: FILE: drivers/video/fsl-diu-fb.c:1375:
+	dma_free_coherent(0, size + bytes_align,
+				buf->vaddr, (buf->paddr - buf->offset));

WARNING:RETURN_VOID: void function return statements are not generally useful
#1575: FILE: drivers/video/fsl-diu-fb.c:1377:
+	return;
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1578: FILE: drivers/video/fsl-diu-fb.c:1380:
+static ssize_t store_monitor(struct device *device,
+	struct device_attribute *attr, const char *buf, size_t count)

WARNING:CONSIDER_KSTRTO: strict_strtoul is obsolete, use kstrtoul instead
#1585: FILE: drivers/video/fsl-diu-fb.c:1387:
+	if (strict_strtoul(buf, 10, &val))

The simple_strtol(), simple_strtoll(), simple_strtoul(), and
simple_strtoull() functions explicitly ignore overflows, which
may lead to unexpected results in callers.  The respective kstrtol(),
kstrtoll(), kstrtoul(), and kstrtoull() functions tend to be the
correct replacements.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#simple-strtol-simple-strtoll-simple-strtoul-simple-strtoull

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1594: FILE: drivers/video/fsl-diu-fb.c:1396:
+		 * unlikely to fail. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1605: FILE: drivers/video/fsl-diu-fb.c:1407:
+static ssize_t show_monitor(struct device *device,
+	struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1613: FILE: drivers/video/fsl-diu-fb.c:1415:
+static int fsl_diu_probe(struct of_device *ofdev,
+	const struct of_device_id *match)

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*machine_data)...) over kzalloc(sizeof(struct fsl_diu_data)...)
#1622: FILE: drivers/video/fsl-diu-fb.c:1424:
+	machine_data = kzalloc(sizeof(struct fsl_diu_data), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1729: FILE: drivers/video/fsl-diu-fb.c:1531:
+	machine_data->dev_attr.attr.mode = S_IRUGO|S_IWUSR;
 	                                          ^

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO|S_IWUSR' are not preferred. Consider using octal permissions '0644'.
#1729: FILE: drivers/video/fsl-diu-fb.c:1531:
+	machine_data->dev_attr.attr.mode = S_IRUGO|S_IWUSR;

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1733: FILE: drivers/video/fsl-diu-fb.c:1535:
+	error = device_create_file(machine_data->fsl_diu_info[0]->dev,
+				  &machine_data->dev_attr);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1766: FILE: drivers/video/fsl-diu-fb.c:1568:
+
+

CHECK:BRACES: braces {} should be used on all arms of this statement
#1806: FILE: drivers/video/fsl-diu-fb.c:1608:
+		if (!strncmp(opt, "monitor=", 8)) {
[...]
+		} else if (!strncmp(opt, "bpp=", 4)) {
[...]
+		} else
[...]

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'val <= 2'
#1807: FILE: drivers/video/fsl-diu-fb.c:1609:
+			if (!strict_strtoul(opt + 8, 10, &val) && (val <= 2))

WARNING:CONSIDER_KSTRTO: strict_strtoul is obsolete, use kstrtoul instead
#1807: FILE: drivers/video/fsl-diu-fb.c:1609:
+			if (!strict_strtoul(opt + 8, 10, &val) && (val <= 2))

WARNING:CONSIDER_KSTRTO: strict_strtoul is obsolete, use kstrtoul instead
#1810: FILE: drivers/video/fsl-diu-fb.c:1612:
+			if (!strict_strtoul(opt + 4, 10, &val))

CHECK:BRACES: Unbalanced braces around else statement
#1812: FILE: drivers/video/fsl-diu-fb.c:1614:
+		} else

WARNING:CONST_STRUCT: struct of_device_id should normally be const
#1820: FILE: drivers/video/fsl-diu-fb.c:1622:
+static struct of_device_id fsl_diu_match[] = {

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1829: FILE: drivers/video/fsl-diu-fb.c:1631:
+^I.owner  ^I= THIS_MODULE,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1830: FILE: drivers/video/fsl-diu-fb.c:1632:
+^I.name   ^I= "fsl_diu",$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1832: FILE: drivers/video/fsl-diu-fb.c:1634:
+^I.probe  ^I= fsl_diu_probe,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1833: FILE: drivers/video/fsl-diu-fb.c:1635:
+^I.remove ^I= fsl_diu_remove,$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1855: FILE: drivers/video/fsl-diu-fb.c:1657:
+	printk(KERN_INFO "Freescale DIU driver\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1860: FILE: drivers/video/fsl-diu-fb.c:1662:
+		printk(KERN_ERR "Err: can't find device node 'cpu'\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!prop"
#1865: FILE: drivers/video/fsl-diu-fb.c:1667:
+	if (prop == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1869: FILE: drivers/video/fsl-diu-fb.c:1671:
+	/* Freescale PLRU requires 13/8 times the cache size to do a proper
+	   displacement flush

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!prop"
#1875: FILE: drivers/video/fsl-diu-fb.c:1677:
+	if (prop == NULL)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1886: FILE: drivers/video/fsl-diu-fb.c:1688:
+		printk(KERN_ERR

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1913: FILE: drivers/video/fsl-diu-fb.c:1715:
+MODULE_PARM_DESC(mode,
+	"Specify resolution as \"<xres>x<yres>[-<bpp>][@<refresh>]\" ");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1918: FILE: drivers/video/fsl-diu-fb.c:1720:
+MODULE_PARM_DESC(monitor,
+	"Specify the monitor port (0, 1 or 2) if supported by the platform");

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1926: FILE: drivers/video/fsl-diu-fb.h:1:
+/*

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1951: FILE: drivers/video/fsl-diu-fb.h:26:
+#define MEM_ALLOC_THRESHOLD (1024*768*4+32)
                                  ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1951: FILE: drivers/video/fsl-diu-fb.h:26:
+#define MEM_ALLOC_THRESHOLD (1024*768*4+32)
                                      ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1951: FILE: drivers/video/fsl-diu-fb.h:26:
+#define MEM_ALLOC_THRESHOLD (1024*768*4+32)
                                        ^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2003: FILE: drivers/video/fsl-diu-fb.h:78:
+/* ^I__u16 comp; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2004: FILE: drivers/video/fsl-diu-fb.h:79:
+/* ^I__u16 pixel_s:2; */$

WARNING:TYPO_SPELLING: 'pallete' may be misspelled - perhaps 'palette'?
#2005: FILE: drivers/video/fsl-diu-fb.h:80:
+/* 	__u16 pallete:1; */
    	      ^^^^^^^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2005: FILE: drivers/video/fsl-diu-fb.h:80:
+/* ^I__u16 pallete:1; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2006: FILE: drivers/video/fsl-diu-fb.h:81:
+/* ^I__u16 red_c:2; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2007: FILE: drivers/video/fsl-diu-fb.h:82:
+/* ^I__u16 green_c:2; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2008: FILE: drivers/video/fsl-diu-fb.h:83:
+/* ^I__u16 blue_c:2; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2009: FILE: drivers/video/fsl-diu-fb.h:84:
+/* ^I__u16 alpha_c:3; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2010: FILE: drivers/video/fsl-diu-fb.h:85:
+/* ^I__u16 byte_f:1; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2011: FILE: drivers/video/fsl-diu-fb.h:86:
+/* ^I__u16 res0:3; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2019: FILE: drivers/video/fsl-diu-fb.h:94:
+/* ^I__u32 delta_xs:11; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2020: FILE: drivers/video/fsl-diu-fb.h:95:
+/* ^I__u32 res1:1; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2021: FILE: drivers/video/fsl-diu-fb.h:96:
+/* ^I__u32 delta_ys:11; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2022: FILE: drivers/video/fsl-diu-fb.h:97:
+/* ^I__u32 res2:1; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2023: FILE: drivers/video/fsl-diu-fb.h:98:
+/* ^I__u32 g_alpha:8; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2027: FILE: drivers/video/fsl-diu-fb.h:102:
+/* ^I__u32 delta_xi:11; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2028: FILE: drivers/video/fsl-diu-fb.h:103:
+/* ^I__u32 res3:5; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2029: FILE: drivers/video/fsl-diu-fb.h:104:
+/* ^I__u32 delta_yi:11; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2030: FILE: drivers/video/fsl-diu-fb.h:105:
+/* ^I__u32 res4:3; */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2031: FILE: drivers/video/fsl-diu-fb.h:106:
+/* ^I__u32 flip:2; */$

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2036: FILE: drivers/video/fsl-diu-fb.h:111:
+	/*__u32 offset_xi:11;
+	__u32 res5:5;

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2044: FILE: drivers/video/fsl-diu-fb.h:119:
+	/*__u32 offset_xd:11;
+	__u32 res7:5;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2046: FILE: drivers/video/fsl-diu-fb.h:121:
+	__u32 res8:5; */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2049: FILE: drivers/video/fsl-diu-fb.h:124:
+
+

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2061: FILE: drivers/video/fsl-diu-fb.h:136:
+/* ^I__u32 res10:8; */$

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __packed over __attribute__((packed))
#2068: FILE: drivers/video/fsl-diu-fb.h:143:
+} __attribute__ ((packed));

WARNING:TYPO_SPELLING: 'pallete' may be misspelled - perhaps 'palette'?
#2074: FILE: drivers/video/fsl-diu-fb.h:149:
+	__be32 pallete;
 	       ^^^^^^^

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __packed over __attribute__((packed))
#2092: FILE: drivers/video/fsl-diu-fb.h:167:
+} __attribute__ ((packed));

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#2096: FILE: drivers/video/fsl-diu-fb.h:171:
+	spinlock_t reg_lock;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2104: FILE: drivers/video/fsl-diu-fb.h:179:
+^I__u32 ^I   offset;$

WARNING:TYPO_SPELLING: 'pallete' may be misspelled - perhaps 'palette'?
#2110: FILE: drivers/video/fsl-diu-fb.h:185:
+	struct diu_addr pallete;
 	                ^^^^^^^

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000301146.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 84 warnings, 70 checks, 2030 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000301146.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
