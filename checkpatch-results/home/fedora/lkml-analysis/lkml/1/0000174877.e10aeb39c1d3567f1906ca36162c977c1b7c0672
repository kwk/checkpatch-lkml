CHECK:LINE_SPACING: Please don't use multiple blank lines
#870: FILE: arch/x86/xen/mmu.c:120:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#900: FILE: arch/x86/xen/mmu.c:150:
+
+

WARNING:NR_CPUS: usage of NR_CPUS is often wrong - consider using cpu_possible(), num_possible_cpus(), for_each_possible_cpu(), etc
#973: FILE: arch/x86/xen/mmu.c:1254:
+		DECLARE_BITMAP(mask, NR_CPUS);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#977: FILE: arch/x86/xen/mmu.c:1258:
+	BUG_ON(cpumask_empty(cpus));

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#978: FILE: arch/x86/xen/mmu.c:1259:
+	BUG_ON(!mm);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1038: FILE: arch/x86/xen/mmu.c:1319:
+		/* Update xen_current_cr3 once the batch has actually
+		   been submitted. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1038: FILE: arch/x86/xen/mmu.c:1319:
+		   been submitted. */

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1045: FILE: arch/x86/xen/mmu.c:1326:
+	BUG_ON(preemptible());

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1050: FILE: arch/x86/xen/mmu.c:1331:
+	/* Update while interrupts are disabled, so its atomic with
+	   respect to ipis */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1050: FILE: arch/x86/xen/mmu.c:1331:
+	   respect to ipis */

WARNING:LINE_SPACING: Missing a blank line after declarations
#1058: FILE: arch/x86/xen/mmu.c:1339:
+		pgd_t *user_pgd = xen_get_user_pgd(__va(cr3));
+		if (user_pgd)

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1073: FILE: arch/x86/xen/mmu.c:1354:
+	BUG_ON(PagePinned(virt_to_page(pgd)));

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1080: FILE: arch/x86/xen/mmu.c:1361:
+		BUG_ON(page->private != 0);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "user_pgd"
#1087: FILE: arch/x86/xen/mmu.c:1368:
+		if (user_pgd != NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1093: FILE: arch/x86/xen/mmu.c:1374:
+		BUG_ON(PagePinned(virt_to_page(xen_get_user_pgd(pgd))));

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1110: FILE: arch/x86/xen/mmu.c:1391:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1112: FILE: arch/x86/xen/mmu.c:1393:
+/* Early in boot, while setting up the initial pagetable, assume
+   everything is pinned. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1112: FILE: arch/x86/xen/mmu.c:1393:
+   everything is pinned. */

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1116: FILE: arch/x86/xen/mmu.c:1397:
+	BUG_ON(mem_map);	/* should only be used early */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1122: FILE: arch/x86/xen/mmu.c:1403:
+/* Early release_pte assumes that all pts are pinned, since there's
+   only init_mm and anything attached to that is pinned. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1122: FILE: arch/x86/xen/mmu.c:1403:
+   only init_mm and anything attached to that is pinned. */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1128: FILE: arch/x86/xen/mmu.c:1409:
+static void pin_pagetable_pfn(unsigned cmd, unsigned long pfn)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1131: FILE: arch/x86/xen/mmu.c:1412:
+	struct mmuext_op op;
+	op.cmd = cmd;

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1134: FILE: arch/x86/xen/mmu.c:1415:
+		BUG();

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1138: FILE: arch/x86/xen/mmu.c:1419:
+/* This needs to make sure the new pte page is pinned iff its being
+   attached to a pinned pagetable. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1138: FILE: arch/x86/xen/mmu.c:1419:
+   attached to a pinned pagetable. */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1139: FILE: arch/x86/xen/mmu.c:1420:
+static void xen_alloc_ptpage(struct mm_struct *mm, unsigned long pfn, unsigned level)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1153: FILE: arch/x86/xen/mmu.c:1434:
+			/* make sure there are no stray mappings of
+			   this page */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1153: FILE: arch/x86/xen/mmu.c:1434:
+			   this page */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1170: FILE: arch/x86/xen/mmu.c:1451:
+static void xen_release_ptpage(unsigned long pfn, unsigned level)

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1255: FILE: arch/x86/xen/mmu.c:1536:
+		BUG();

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1260: FILE: arch/x86/xen/mmu.c:1541:
+	unsigned pmdidx, pteidx;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1261: FILE: arch/x86/xen/mmu.c:1542:
+	unsigned ident_pte;

CHECK:BRACES: braces {} should be used on all arms of this statement
#1270: FILE: arch/x86/xen/mmu.c:1551:
+		if (pmd_present(pmd[pmdidx]))
[...]
+		else {
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1272: FILE: arch/x86/xen/mmu.c:1553:
+		else {

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1311: FILE: arch/x86/xen/mmu.c:1592:
+	/* All levels are converted the same way, so just treat them
+	   as ptes. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1311: FILE: arch/x86/xen/mmu.c:1592:
+	   as ptes. */

WARNING:TYPO_SPELLING: 'inital' may be misspelled - perhaps 'initial'?
#1317: FILE: arch/x86/xen/mmu.c:1598:
+ * Set up the inital kernel pagetable.
               ^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1397: FILE: arch/x86/xen/mmu.c:1678:
+	init_pg_tables_end = __pa(pgd) + xen_start_info->nr_pt_frames*PAGE_SIZE;
 	                                                             ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1398: FILE: arch/x86/xen/mmu.c:1679:
+	max_pfn_mapped = PFN_DOWN(init_pg_tables_end + 512*1024);
 	                                                  ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1407: FILE: arch/x86/xen/mmu.c:1688:
+	set_pgd(&swapper_pg_dir[KERNEL_PGD_BOUNDARY],
+			__pgd(__pa(level2_kernel_pgt) | _PAGE_PRESENT));

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1423: FILE: arch/x86/xen/mmu.c:1704:
+static void xen_set_fixmap(unsigned idx, unsigned long phys, pgprot_t prot)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1458: FILE: arch/x86/xen/mmu.c:1739:
+	/* Replicate changes to map the vsyscall page into the user
+	   pagetable vsyscall mapping. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1458: FILE: arch/x86/xen/mmu.c:1739:
+	   pagetable vsyscall mapping. */

WARNING:LINE_SPACING: Missing a blank line after declarations
#1461: FILE: arch/x86/xen/mmu.c:1742:
+		unsigned long vaddr = __fix_to_virt(idx);
+		set_pte_vaddr_pud(level3_user_vsyscall, vaddr, pte);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1476: FILE: arch/x86/xen/mmu.c:1757:
+	/* This will work as long as patching hasn't happened yet
+	   (which it hasn't) */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1476: FILE: arch/x86/xen/mmu.c:1757:
+	   (which it hasn't) */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1492: FILE: arch/x86/xen/mmu.c:1773:
+
+

ERROR:INIT_ATTRIBUTE: Use of const init definition must use __initconst
#1493: FILE: arch/x86/xen/mmu.c:1774:
+const struct pv_mmu_ops xen_mmu_ops __initdata = {

Const init definitions should use __initconst instead of
__initdata.

Similarly init definitions without const require a separate
use of const.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1573: FILE: arch/x86/xen/mmu.c:1854:
+
+

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000174877.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 1 errors, 38 warnings, 11 checks, 1542 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000174877.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
