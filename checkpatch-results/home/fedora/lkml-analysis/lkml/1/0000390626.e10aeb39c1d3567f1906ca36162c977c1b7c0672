WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#96: 
Statically increasing the ports of each device is not a real option due to too

WARNING:TYPO_SPELLING: 'alloced' may be misspelled - perhaps 'allocated'?
#128: FILE: drivers/pnp/manager.c:17:
+/* Defines the amount of struct resources that will get (re-)alloced
                                                              ^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#130: FILE: drivers/pnp/manager.c:19:
+ * if the resource table runs out of allocated ports
+*/

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

CHECK:LINE_SPACING: Please don't use multiple blank lines
#135: FILE: drivers/pnp/manager.c:24:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#137: FILE: drivers/pnp/manager.c:26:
+static void pnp_init_port (struct pnp_resource_table *res, int idx)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#147: FILE: drivers/pnp/manager.c:36:
+int pnp_port_alloc (struct pnp_resource_table *res)

WARNING:LINE_SPACING: Missing a blank line after declarations
#150: FILE: drivers/pnp/manager.c:39:
+	int ret = 0, i;
+	if (res->allocated_ports == 0) {

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*res->port_resource)...) over kmalloc(sizeof(struct resource)...)
#151: FILE: drivers/pnp/manager.c:40:
+		res->port_resource = kmalloc(sizeof(struct resource)

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:KREALLOC_ARG_REUSE: Reusing the krealloc arg is almost always a bug
#159: FILE: drivers/pnp/manager.c:48:
+		res->port_resource = krealloc(res->port_resource,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#160: FILE: drivers/pnp/manager.c:49:
+		res->port_resource = krealloc(res->port_resource,
+					    (sizeof(struct resource)

CHECK:SPACING: space preferred before that '+' (ctx:ExE)
#162: FILE: drivers/pnp/manager.c:51:
+					    +
 					    ^

ERROR:SPACING: space required before the open brace '{'
#166: FILE: drivers/pnp/manager.c:55:
+		if (!res->port_resource){

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#170: FILE: drivers/pnp/manager.c:59:
+		pnp_dbg ("New ports reallocated, we now have: %d",

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#178: FILE: drivers/pnp/manager.c:67:
+		pnp_init_port (res, i);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#180: FILE: drivers/pnp/manager.c:69:
+
+

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#183: FILE: drivers/pnp/manager.c:72:
+	pnp_dbg ("%s: Allocated ports: %s\n", __FUNCTION__,

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#183: FILE: drivers/pnp/manager.c:72:
+	pnp_dbg ("%s: Allocated ports: %s\n", __FUNCTION__,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#184: FILE: drivers/pnp/manager.c:73:
+	pnp_dbg ("%s: Allocated ports: %s\n", __FUNCTION__,
+		ret ? "FAILED" : "SUCCESS");

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#203: FILE: drivers/pnp/manager.c:87:
+		pnp_dbg ("%s: Try to allocate ports\n", __FUNCTION__);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#203: FILE: drivers/pnp/manager.c:87:
+		pnp_dbg ("%s: Try to allocate ports\n", __FUNCTION__);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#206: FILE: drivers/pnp/manager.c:90:
+			pnp_err ("%s: Cannot allocate port", __FUNCTION__);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#206: FILE: drivers/pnp/manager.c:90:
+			pnp_err ("%s: Cannot allocate port", __FUNCTION__);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#211: FILE: drivers/pnp/manager.c:95:
+			pnp_err ("Bug in %s", __FUNCTION__);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#211: FILE: drivers/pnp/manager.c:95:
+			pnp_err ("Bug in %s", __FUNCTION__);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#218: FILE: drivers/pnp/manager.c:101:
+	if (!(pnp_port_flags(dev,idx) & IORESOURCE_AUTO))
 	                        ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#224: FILE: drivers/pnp/manager.c:104:
+	start = &pnp_port_start(dev,idx);
 	                           ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#225: FILE: drivers/pnp/manager.c:105:
+	end = &pnp_port_end(dev,idx);
 	                       ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#226: FILE: drivers/pnp/manager.c:106:
+	flags = &pnp_port_flags(dev,idx);
 	                           ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#310: FILE: drivers/pnp/manager.c:453:
+		for (i = 0; pnp_port_res_pointer(dev,i); i++) {
 		                                    ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#333: FILE: include/linux/pnp.h:29:
+#define pnp_port_res_pointer(dev,bar)	((dev->res.allocated_ports > bar) \
                                 ^

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'dev' - possible side-effects?
#333: FILE: include/linux/pnp.h:29:
+#define pnp_port_res_pointer(dev,bar)	((dev->res.allocated_ports > bar) \
+	? (dev->res.port_resource + bar) : NULL)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'dev' may be better as '(dev)' to avoid precedence issues
#333: FILE: include/linux/pnp.h:29:
+#define pnp_port_res_pointer(dev,bar)	((dev->res.allocated_ports > bar) \
+	? (dev->res.port_resource + bar) : NULL)

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'bar' - possible side-effects?
#333: FILE: include/linux/pnp.h:29:
+#define pnp_port_res_pointer(dev,bar)	((dev->res.allocated_ports > bar) \
+	? (dev->res.port_resource + bar) : NULL)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'bar' may be better as '(bar)' to avoid precedence issues
#333: FILE: include/linux/pnp.h:29:
+#define pnp_port_res_pointer(dev,bar)	((dev->res.allocated_ports > bar) \
+	? (dev->res.port_resource + bar) : NULL)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#335: FILE: include/linux/pnp.h:31:
+#define pnp_port_start(dev,bar)		((dev->res.port_resource + bar)->start)
                           ^

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'dev' may be better as '(dev)' to avoid precedence issues
#335: FILE: include/linux/pnp.h:31:
+#define pnp_port_start(dev,bar)		((dev->res.port_resource + bar)->start)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'bar' may be better as '(bar)' to avoid precedence issues
#335: FILE: include/linux/pnp.h:31:
+#define pnp_port_start(dev,bar)		((dev->res.port_resource + bar)->start)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#336: FILE: include/linux/pnp.h:32:
+#define pnp_port_end(dev,bar)		((dev->res.port_resource + bar)->end)
                         ^

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'dev' may be better as '(dev)' to avoid precedence issues
#336: FILE: include/linux/pnp.h:32:
+#define pnp_port_end(dev,bar)		((dev->res.port_resource + bar)->end)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'bar' may be better as '(bar)' to avoid precedence issues
#336: FILE: include/linux/pnp.h:32:
+#define pnp_port_end(dev,bar)		((dev->res.port_resource + bar)->end)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#337: FILE: include/linux/pnp.h:33:
+#define pnp_port_flags(dev,bar)		((dev->res.port_resource + bar)->flags)
                           ^

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'dev' may be better as '(dev)' to avoid precedence issues
#337: FILE: include/linux/pnp.h:33:
+#define pnp_port_flags(dev,bar)		((dev->res.port_resource + bar)->flags)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'bar' may be better as '(bar)' to avoid precedence issues
#337: FILE: include/linux/pnp.h:33:
+#define pnp_port_flags(dev,bar)		((dev->res.port_resource + bar)->flags)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#339: FILE: include/linux/pnp.h:35:
+	(pnp_port_res_pointer((dev),(bar)) ? \
 	                           ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#377: FILE: include/linux/pnp.h:469:
+extern void pnp_dump_ports (struct pnp_dev *dev);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#377: FILE: include/linux/pnp.h:469:
+extern void pnp_dump_ports (struct pnp_dev *dev);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#380: FILE: include/linux/pnp.h:472:
+static inline void pnp_dump_ports (struct pnp_dev *dev) { }

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#393: FILE: drivers/pnp/interface.c:32:
+void pnp_dump_ports (struct pnp_dev *dev) {

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#393: FILE: drivers/pnp/interface.c:32:
+void pnp_dump_ports (struct pnp_dev *dev) {

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#394: FILE: drivers/pnp/interface.c:33:
+void pnp_dump_ports (struct pnp_dev *dev) {
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#396: FILE: drivers/pnp/interface.c:35:
+	int i;
+	pnp_dbg ("Resource table dump:");

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#396: FILE: drivers/pnp/interface.c:35:
+	pnp_dbg ("Resource table dump:");

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#397: FILE: drivers/pnp/interface.c:36:
+	pnp_dbg ("Alloctad ports: %d", dev->res.allocated_ports);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#399: FILE: drivers/pnp/interface.c:38:
+	for (i = 0; pnp_port_res_pointer(dev,i); i++) {
 	                                    ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#400: FILE: drivers/pnp/interface.c:39:
+		pnp_dbg ("Port %d: start: 0x%llx - end: 0x%llx - flags: %lu",

ERROR:SPACING: space required after that ',' (ctx:VxV)
#401: FILE: drivers/pnp/interface.c:40:
+			 i, pnp_port_start(dev,i), pnp_port_end(dev,i),
 			                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#401: FILE: drivers/pnp/interface.c:40:
+			 i, pnp_port_start(dev,i), pnp_port_end(dev,i),
 			                                           ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#402: FILE: drivers/pnp/interface.c:41:
+			 pnp_port_flags(dev,i));
 			                   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#415: FILE: drivers/pnp/interface.c:282:
+	for (i = 0; pnp_port_res_pointer(dev,i); i++) {
 	                                    ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#439: FILE: drivers/pnp/interface.c:404:
+						pnp_err ("%s: Cannot allocate"

WARNING:SPLIT_STRING: quoted string split across lines
#440: FILE: drivers/pnp/interface.c:405:
+						pnp_err ("%s: Cannot allocate"
+							 " port", __FUNCTION__);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#440: FILE: drivers/pnp/interface.c:405:
+							 " port", __FUNCTION__);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#445: FILE: drivers/pnp/interface.c:410:
+				pnp_port_start(dev,nport) =
 				                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#454: FILE: drivers/pnp/interface.c:418:
+					pnp_port_end(dev,nport) =
 					                ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#461: FILE: drivers/pnp/interface.c:421:
+					pnp_port_end(dev,nport) =
 					                ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#462: FILE: drivers/pnp/interface.c:422:
+						pnp_port_start(dev,nport);
 						                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#463: FILE: drivers/pnp/interface.c:423:
+				pnp_port_flags(dev,nport) = IORESOURCE_IO;
 				                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#466: FILE: drivers/pnp/interface.c:425:
+				if (!pnp_port_res_pointer(dev,nport))
 				                             ^

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#498: FILE: drivers/pnp/quirks.c:169:
+	 * pnp_init_resource_table which effectively does the same
+	*/

ERROR:SPACING: space required after that ',' (ctx:VxV)
#513: FILE: drivers/pnp/quirks.c:196:
+	fir = *pnp_port_res_pointer(dev,0);
 	                               ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#514: FILE: drivers/pnp/quirks.c:197:
+	sir = *pnp_port_res_pointer(dev,1);
 	                               ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#524: FILE: drivers/pnp/quirks.c:207:
+	*pnp_port_res_pointer(dev,0) = sir;
 	                         ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#525: FILE: drivers/pnp/quirks.c:208:
+	*pnp_port_res_pointer(dev,1) = fir;
 	                         ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#538: FILE: drivers/pnp/system.c:58:
+	for (i = 0; pnp_port_res_pointer(dev,i); i++) {
 	                                    ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#616: FILE: drivers/pnp/pnpbios/rsparser.c:107:
+			pnp_err ("%s: Cannot allocate port", __FUNCTION__);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#616: FILE: drivers/pnp/pnpbios/rsparser.c:107:
+			pnp_err ("%s: Cannot allocate port", __FUNCTION__);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#622: FILE: drivers/pnp/pnpbios/rsparser.c:113:
+			pnp_err ("Bug in %s", __FUNCTION__);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#622: FILE: drivers/pnp/pnpbios/rsparser.c:113:
+			pnp_err ("Bug in %s", __FUNCTION__);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#662: FILE: drivers/pnp/pnpacpi/rsparser.c:180:
+	pnp_err ("%s: We want port %d - We have: %d free ports", __FUNCTION__, i,

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#662: FILE: drivers/pnp/pnpacpi/rsparser.c:180:
+	pnp_err ("%s: We want port %d - We have: %d free ports", __FUNCTION__, i,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#668: FILE: drivers/pnp/pnpacpi/rsparser.c:186:
+			pnp_err ("%s: Cannot allocate port", __FUNCTION__);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#668: FILE: drivers/pnp/pnpacpi/rsparser.c:186:
+			pnp_err ("%s: Cannot allocate port", __FUNCTION__);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#676: FILE: drivers/pnp/pnpacpi/rsparser.c:192:
+			pnp_err ("Bug in %s - i: %d - allocated_ports: %d", __FUNCTION__,

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#676: FILE: drivers/pnp/pnpacpi/rsparser.c:192:
+			pnp_err ("Bug in %s - i: %d - allocated_ports: %d", __FUNCTION__,

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000390626.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 28 errors, 38 warnings, 18 checks, 523 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000390626.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
