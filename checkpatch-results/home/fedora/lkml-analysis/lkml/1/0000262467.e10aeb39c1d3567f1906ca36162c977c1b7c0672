WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#55: FILE: drivers/media/video/Kconfig:900:
+config USB_S2255
+	tristate "USB Sensoray 2255 video capture device"
+	depends on VIDEO_V4L2
+	select VIDEOBUF_VMALLOC
+	default n
+	help
+	  Say Y here if you want support for the Sensoray 2255 USB device.
+	  This driver can be compiled as a module, called s2255drv.
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#80: FILE: drivers/media/video/s2255drv.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#119: FILE: drivers/media/video/s2255drv.c:40:
+ * along with this program; if not, write to the Free Software$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#120: FILE: drivers/media/video/s2255drv.c:41:
+ * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#136: FILE: drivers/media/video/s2255drv.c:57:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#149: FILE: drivers/media/video/s2255drv.c:70:
+#define S2255_LOAD_TIMEOUT      (5000+S2255_DSP_BOOTTIME)
                                      ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#153: FILE: drivers/media/video/s2255drv.c:74:
+#define MAX_PIPE_USBBLOCK	(40*1024)
                          	   ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#154: FILE: drivers/media/video/s2255drv.c:75:
+#define DEFAULT_PIPE_USBBLOCK	(16*1024)
                              	   ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#159: FILE: drivers/media/video/s2255drv.c:80:
+#define SYS_FRAMES_MAXSIZE	(720*288*2*2 + 4096)
                           	    ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#159: FILE: drivers/media/video/s2255drv.c:80:
+#define SYS_FRAMES_MAXSIZE	(720*288*2*2 + 4096)
                           	        ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#159: FILE: drivers/media/video/s2255drv.c:80:
+#define SYS_FRAMES_MAXSIZE	(720*288*2*2 + 4096)
                           	          ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#176: FILE: drivers/media/video/s2255drv.c:97:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#197: FILE: drivers/media/video/s2255drv.c:118:
+ *-------------------------------------------------------*/

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

CHECK:LINE_SPACING: Please don't use multiple blank lines
#233: FILE: drivers/media/video/s2255drv.c:154:
+
+

CHECK:CAMELCASE: Avoid CamelCase: <ulState>
#237: FILE: drivers/media/video/s2255drv.c:158:
+	unsigned long ulState;	/* ulState ==0 unused, 1 being filled, 2 full */

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <dwFrames>
#244: FILE: drivers/media/video/s2255drv.c:165:
+	unsigned long dwFrames;			/* number of frames in buffer */

WARNING:ONE_SEMICOLON: Statements terminations use 1 semicolon
#282: FILE: drivers/media/video/s2255drv.c:203:
+	u32 transfer_flags;;

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#299: FILE: drivers/media/video/s2255drv.c:220:
+	struct mutex		lock;

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#300: FILE: drivers/media/video/s2255drv.c:221:
+	struct mutex		open_lock;

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#326: FILE: drivers/media/video/s2255drv.c:247:
+	spinlock_t              slock;

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#328: FILE: drivers/media/video/s2255drv.c:249:
+};
+#define to_s2255_dev(d) container_of(d, struct s2255_dev, kref)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#353: FILE: drivers/media/video/s2255drv.c:274:
+	/* mode below is the desired mode.
+	   mode in s2255_dev is the current mode that was last set */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#353: FILE: drivers/media/video/s2255drv.c:274:
+	   mode in s2255_dev is the current mode that was last set */

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#397: FILE: drivers/media/video/s2255drv.c:318:
+			printk(KERN_DEBUG "s2255: " fmt, ##arg);	\

CHECK:LINE_SPACING: Please don't use multiple blank lines
#401: FILE: drivers/media/video/s2255drv.c:322:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#404: FILE: drivers/media/video/s2255drv.c:325:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#425: FILE: drivers/media/video/s2255drv.c:346:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#518: FILE: drivers/media/video/s2255drv.c:439:
+
+

CHECK:CAMELCASE: Avoid CamelCase: <pCb>
#526: FILE: drivers/media/video/s2255drv.c:447:
+	unsigned char *pCb;

CHECK:CAMELCASE: Avoid CamelCase: <pCr>
#527: FILE: drivers/media/video/s2255drv.c:448:
+	unsigned char *pCr;

WARNING:LINE_SPACING: Missing a blank line after declarations
#530: FILE: drivers/media/video/s2255drv.c:451:
+	unsigned int i;
+	pY = (unsigned char *)in;

WARNING:RETURN_VOID: void function return statements are not generally useful
#540: FILE: drivers/media/video/s2255drv.c:461:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#542: FILE: drivers/media/video/s2255drv.c:463:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#548: FILE: drivers/media/video/s2255drv.c:469:
+	struct s2255_fw *data = (struct s2255_fw *)user_data;
+	dprintk(100, "s2255 timer\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#550: FILE: drivers/media/video/s2255drv.c:471:
+		printk(KERN_ERR "s2255: can't submit urb\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#560: FILE: drivers/media/video/s2255drv.c:481:
+/* called when DSP is up and running.  DSP is guaranteed to
+   be running after S2255_DSP_BOOTTIME */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#560: FILE: drivers/media/video/s2255drv.c:481:
+   be running after S2255_DSP_BOOTTIME */

WARNING:LINE_SPACING: Missing a blank line after declarations
#564: FILE: drivers/media/video/s2255drv.c:485:
+	struct s2255_fw *data = (struct s2255_fw *)user_data;
+	dprintk(1, "dsp running\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#567: FILE: drivers/media/video/s2255drv.c:488:
+	printk(KERN_INFO "s2255: firmware loaded successfully\n");

WARNING:RETURN_VOID: void function return statements are not generally useful
#569: FILE: drivers/media/video/s2255drv.c:490:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#571: FILE: drivers/media/video/s2255drv.c:492:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#573: FILE: drivers/media/video/s2255drv.c:494:
+/* this loads the firmware asynchronously.
+   Originally this was done synchroously in probe.

WARNING:LINE_SPACING: Missing a blank line after declarations
#583: FILE: drivers/media/video/s2255drv.c:504:
+	int len;
+	dprintk(100, "udev %p urb %p", udev, urb);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!data->fw_urb"
#589: FILE: drivers/media/video/s2255drv.c:510:
+	if (data->fw_urb == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#595: FILE: drivers/media/video/s2255drv.c:516:
+	/* all USB transfers must be done with continuous kernel memory.
+	   can't allocate more than 128k in current linux kernel, so

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#605: FILE: drivers/media/video/s2255drv.c:526:
+		dprintk(100, "completed len %d, loaded %d \n", len,

CHECK:SPACING: No space is necessary after a cast
#609: FILE: drivers/media/video/s2255drv.c:530:
+		       (char *) data->fw->data + data->fw_loaded, len);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#633: FILE: drivers/media/video/s2255drv.c:554:
+
+}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#641: FILE: drivers/media/video/s2255drv.c:562:
+	int rc = 0;
+	dprintk(2, "wakeup: %p channel: %d\n", &dma_q, chn);

WARNING:WAITQUEUE_ACTIVE: waitqueue_active without comment
#652: FILE: drivers/media/video/s2255drv.c:573:
+	if (!waitqueue_active(&buf->vb.done)) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#669: FILE: drivers/media/video/s2255drv.c:590:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#683: FILE: drivers/media/video/s2255drv.c:604:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#685: FILE: drivers/media/video/s2255drv.c:606:
+
+

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#728: FILE: drivers/media/video/s2255drv.c:649:
+			printk(KERN_DEBUG "s2255: unknown format?\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#735: FILE: drivers/media/video/s2255drv.c:656:
+		printk(KERN_ERR "s2255: =======no frame\n");

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#738: FILE: drivers/media/video/s2255drv.c:659:
+
+	}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#749: FILE: drivers/media/video/s2255drv.c:670:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#751: FILE: drivers/media/video/s2255drv.c:672:
+/* ------------------------------------------------------------------
+   Videobuf operations

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#752: FILE: drivers/media/video/s2255drv.c:673:
+   ------------------------------------------------------------------*/

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#761: FILE: drivers/media/video/s2255drv.c:682:
+	if (0 == *count)

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:TRACING_LOGGING: Unnecessary ftrace-like logging - prefer using ftrace
#772: FILE: drivers/media/video/s2255drv.c:693:
+	dprintk(4, "%s\n", __func__);

WARNING:LINE_SPACING: Missing a blank line after declarations
#785: FILE: drivers/media/video/s2255drv.c:706:
+	int rc;
+	dprintk(4, "%s, field=%d\n", __func__, field);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fh->fmt"
#786: FILE: drivers/media/video/s2255drv.c:707:
+	if (fh->fmt == NULL)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fh->width < norm_minw(fh->dev->vdev[fh->channel])'
#789: FILE: drivers/media/video/s2255drv.c:710:
+	if ((fh->width < norm_minw(fh->dev->vdev[fh->channel])) ||
+	    (fh->width > norm_maxw(fh->dev->vdev[fh->channel])) ||
+	    (fh->height < norm_minh(fh->dev->vdev[fh->channel])) ||
+	    (fh->height > norm_maxh(fh->dev->vdev[fh->channel]))) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fh->width > norm_maxw(fh->dev->vdev[fh->channel])'
#789: FILE: drivers/media/video/s2255drv.c:710:
+	if ((fh->width < norm_minw(fh->dev->vdev[fh->channel])) ||
+	    (fh->width > norm_maxw(fh->dev->vdev[fh->channel])) ||
+	    (fh->height < norm_minh(fh->dev->vdev[fh->channel])) ||
+	    (fh->height > norm_maxh(fh->dev->vdev[fh->channel]))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fh->height < norm_minh(fh->dev->vdev[fh->channel])'
#789: FILE: drivers/media/video/s2255drv.c:710:
+	if ((fh->width < norm_minw(fh->dev->vdev[fh->channel])) ||
+	    (fh->width > norm_maxw(fh->dev->vdev[fh->channel])) ||
+	    (fh->height < norm_minh(fh->dev->vdev[fh->channel])) ||
+	    (fh->height > norm_maxh(fh->dev->vdev[fh->channel]))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fh->height > norm_maxh(fh->dev->vdev[fh->channel])'
#789: FILE: drivers/media/video/s2255drv.c:710:
+	if ((fh->width < norm_minw(fh->dev->vdev[fh->channel])) ||
+	    (fh->width > norm_maxw(fh->dev->vdev[fh->channel])) ||
+	    (fh->height < norm_minh(fh->dev->vdev[fh->channel])) ||
+	    (fh->height > norm_maxh(fh->dev->vdev[fh->channel]))) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#799: FILE: drivers/media/video/s2255drv.c:720:
+	if (0 != buf->vb.baddr && buf->vb.bsize < buf->vb.size) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#809: FILE: drivers/media/video/s2255drv.c:730:
+
+

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#810: FILE: drivers/media/video/s2255drv.c:731:
+	if (VIDEOBUF_NEEDS_INIT == buf->vb.state) {

WARNING:TRACING_LOGGING: Unnecessary ftrace-like logging - prefer using ftrace
#830: FILE: drivers/media/video/s2255drv.c:751:
+	dprintk(1, "%s\n", __func__);

WARNING:LINE_SPACING: Missing a blank line after declarations
#841: FILE: drivers/media/video/s2255drv.c:762:
+	struct s2255_fh *fh = vq->priv_data;
+	dprintk(4, "%s %d\n", __func__, fh->channel);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#852: FILE: drivers/media/video/s2255drv.c:773:
+
+

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#871: FILE: drivers/media/video/s2255drv.c:792:
+	return (dev->resources[fh->channel]);

return is not a function and as such doesn't need parentheses::

  return (bar);

can simply be::

  return bar;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#880: FILE: drivers/media/video/s2255drv.c:801:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#886: FILE: drivers/media/video/s2255drv.c:807:
+	struct s2255_dev *dev = fh->dev;
+	strlcpy(cap->driver, "s2255", sizeof(cap->driver));

WARNING:STRLCPY: Prefer strscpy over strlcpy - see: https://lore.kernel.org/r/CAHk-=wgfRnXz0W3D37d01q3JFkr_i_uTL=V6A6G1oUZcprmknw@mail.gmail.com/
#886: FILE: drivers/media/video/s2255drv.c:807:
+	strlcpy(cap->driver, "s2255", sizeof(cap->driver));

WARNING:STRLCPY: Prefer strscpy over strlcpy - see: https://lore.kernel.org/r/CAHk-=wgfRnXz0W3D37d01q3JFkr_i_uTL=V6A6G1oUZcprmknw@mail.gmail.com/
#887: FILE: drivers/media/video/s2255drv.c:808:
+	strlcpy(cap->card, "s2255", sizeof(cap->card));

WARNING:STRLCPY: Prefer strscpy over strlcpy - see: https://lore.kernel.org/r/CAHk-=wgfRnXz0W3D37d01q3JFkr_i_uTL=V6A6G1oUZcprmknw@mail.gmail.com/
#888: FILE: drivers/media/video/s2255drv.c:809:
+	strlcpy(cap->bus_info, dev_name(&dev->udev->dev), sizeof(cap->bus_info));

WARNING:LINE_SPACING: Missing a blank line after declarations
#898: FILE: drivers/media/video/s2255drv.c:819:
+	int index = 0;
+	if (f)

WARNING:STRLCPY: Prefer strscpy over strlcpy - see: https://lore.kernel.org/r/CAHk-=wgfRnXz0W3D37d01q3JFkr_i_uTL=V6A6G1oUZcprmknw@mail.gmail.com/
#905: FILE: drivers/media/video/s2255drv.c:826:
+	strlcpy(f->description, formats[index].name, sizeof(f->description));

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#922: FILE: drivers/media/video/s2255drv.c:843:
+	return (0);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt"
#940: FILE: drivers/media/video/s2255drv.c:861:
+	if (fmt == NULL)

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#947: FILE: drivers/media/video/s2255drv.c:868:
+	dprintk(4, "try format %d \n", is_ntsc);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#973: FILE: drivers/media/video/s2255drv.c:894:
+
+		}

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#1023: FILE: drivers/media/video/s2255drv.c:944:
+	dprintk(50, "width %d height %d field %d \n", f->fmt.pix.width,

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt"
#1047: FILE: drivers/media/video/s2255drv.c:968:
+	if (fmt == NULL)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1105: FILE: drivers/media/video/s2255drv.c:1026:
+	struct s2255_fh *fh = priv;
+	rc = videobuf_reqbufs(&fh->vb_vidq, p);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1113: FILE: drivers/media/video/s2255drv.c:1034:
+	struct s2255_fh *fh = priv;
+	rc = videobuf_querybuf(&fh->vb_vidq, p);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1121: FILE: drivers/media/video/s2255drv.c:1042:
+	struct s2255_fh *fh = priv;
+	rc = videobuf_qbuf(&fh->vb_vidq, p);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1129: FILE: drivers/media/video/s2255drv.c:1050:
+	struct s2255_fh *fh = priv;
+	rc = videobuf_dqbuf(&fh->vb_vidq, p, file->f_flags & O_NONBLOCK);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1149: FILE: drivers/media/video/s2255drv.c:1070:
+	long retval = -1;
+	if (udev) {

CHECK:CAMELCASE: Avoid CamelCase: <linesPerFrame>
#1158: FILE: drivers/media/video/s2255drv.c:1079:
+	int linesPerFrame = LINE_SZ_DEF;

CHECK:CAMELCASE: Avoid CamelCase: <pixelsPerLine>
#1159: FILE: drivers/media/video/s2255drv.c:1080:
+	int pixelsPerLine = NUM_LINES_DEF;

CHECK:CAMELCASE: Avoid CamelCase: <outImageSize>
#1160: FILE: drivers/media/video/s2255drv.c:1081:
+	u32 outImageSize;

CHECK:CAMELCASE: Avoid CamelCase: <usbInSize>
#1161: FILE: drivers/media/video/s2255drv.c:1082:
+	u32 usbInSize;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!mode"
#1164: FILE: drivers/media/video/s2255drv.c:1085:
+	if (mode == NULL)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1209: FILE: drivers/media/video/s2255drv.c:1130:
+	/* total bytes to send including prefix and 4K padding;
+	   must be a multiple of USB_READ_SIZE */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1209: FILE: drivers/media/video/s2255drv.c:1130:
+	   must be a multiple of USB_READ_SIZE */

WARNING:LINE_SPACING: Missing a blank line after declarations
#1221: FILE: drivers/media/video/s2255drv.c:1142:
+	struct device *dev = &sdev->udev->dev;
+	dev_info(dev, "------------------------------------------------\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!buffer"
#1261: FILE: drivers/media/video/s2255drv.c:1182:
+	if (buffer == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#1262: FILE: drivers/media/video/s2255drv.c:1183:
+	if (buffer == NULL) {
+		dev_err(&dev->udev->dev, "out of mem\n");

CHECK:SPACING: No space is necessary after a cast
#1268: FILE: drivers/media/video/s2255drv.c:1189:
+	buffer[1] = (u32) chn_rev;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1296: FILE: drivers/media/video/s2255drv.c:1217:
+	int j;
+	dprintk(4, "%s\n", __func__);

WARNING:TRACING_LOGGING: Unnecessary ftrace-like logging - prefer using ftrace
#1296: FILE: drivers/media/video/s2255drv.c:1217:
+	dprintk(4, "%s\n", __func__);

WARNING:TYPO_SPELLING: 'everytime' may be misspelled - perhaps 'every time'?
#1311: FILE: drivers/media/video/s2255drv.c:1232:
+	/* send a set mode command everytime with restart.
 	                           ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1312: FILE: drivers/media/video/s2255drv.c:1233:
+	/* send a set mode command everytime with restart.
+	   in case we switch resolutions or other parameters */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1312: FILE: drivers/media/video/s2255drv.c:1233:
+	   in case we switch resolutions or other parameters */

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1354: FILE: drivers/media/video/s2255drv.c:1275:
+		printk(KERN_ERR "invalid fh type0\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1358: FILE: drivers/media/video/s2255drv.c:1279:
+		printk(KERN_ERR "invalid type i\n");

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'vidioc_s_std', this function's name, in a string
#1389: FILE: drivers/media/video/s2255drv.c:1310:
+		dprintk(4, "vidioc_s_std NTSC\n");

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'vidioc_s_std', this function's name, in a string
#1392: FILE: drivers/media/video/s2255drv.c:1313:
+		dprintk(4, "vidioc_s_std PAL\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1403: FILE: drivers/media/video/s2255drv.c:1324:
+/* Sensoray 2255 is a multiple channel capture device.
+   It does not have a "crossbar" of inputs.

WARNING:STRLCPY: Prefer strscpy over strlcpy - see: https://lore.kernel.org/r/CAHk-=wgfRnXz0W3D37d01q3JFkr_i_uTL=V6A6G1oUZcprmknw@mail.gmail.com/
#1417: FILE: drivers/media/video/s2255drv.c:1338:
+	strlcpy(inp->name, "Camera", sizeof(inp->name));

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1418: FILE: drivers/media/video/s2255drv.c:1339:
+	return (0);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1426: FILE: drivers/media/video/s2255drv.c:1347:
+}
+static int vidioc_s_input(struct file *file, void *priv, unsigned int i)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around s2255_qctrl[i]
#1441: FILE: drivers/media/video/s2255drv.c:1362:
+			memcpy(qc, &(s2255_qctrl[i]), sizeof(*qc));

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1442: FILE: drivers/media/video/s2255drv.c:1363:
+			return (0);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1457: FILE: drivers/media/video/s2255drv.c:1378:
+			return (0);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1471: FILE: drivers/media/video/s2255drv.c:1392:
+	struct s2255_mode *mode;
+	mode = &fh->mode;

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'vidioc_s_ctrl', this function's name, in a string
#1472: FILE: drivers/media/video/s2255drv.c:1393:
+	dprintk(4, "vidioc_s_ctrl\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1497: FILE: drivers/media/video/s2255drv.c:1418:
+			/* set mode here.  Note: stream does not need restarted.
+			   some V4L programs restart stream unnecessarily

WARNING:LINE_SPACING: Missing a blank line after declarations
#1516: FILE: drivers/media/video/s2255drv.c:1437:
+	int cur_channel = -1;
+	dprintk(1, "s2255: open called (minor=%d)\n", minor);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'NULL == dev'
#1529: FILE: drivers/media/video/s2255drv.c:1450:
+	if ((NULL == dev) || (cur_channel == -1)) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1529: FILE: drivers/media/video/s2255drv.c:1450:
+	if ((NULL == dev) || (cur_channel == -1)) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1540: FILE: drivers/media/video/s2255drv.c:1461:
+		printk(KERN_INFO "s2255drv: too many open handles!\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1553: FILE: drivers/media/video/s2255drv.c:1474:
+			printk(KERN_INFO "2255 FW load failed after 2 tries\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1559: FILE: drivers/media/video/s2255drv.c:1480:
+		/* give S2255_LOAD_TIMEOUT time for firmware to load in case
+		   driver loaded and then device immediately opened */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1559: FILE: drivers/media/video/s2255drv.c:1480:
+		   driver loaded and then device immediately opened */

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1560: FILE: drivers/media/video/s2255drv.c:1481:
+		printk(KERN_INFO "%s waiting for firmware load\n", __func__);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1567: FILE: drivers/media/video/s2255drv.c:1488:
+			printk(KERN_INFO "2255 firmware not loaded"

WARNING:SPLIT_STRING: quoted string split across lines
#1568: FILE: drivers/media/video/s2255drv.c:1489:
+			printk(KERN_INFO "2255 firmware not loaded"
+			       "try again\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:MISSING_SPACE: break quoted strings at a space character
#1568: FILE: drivers/media/video/s2255drv.c:1489:
+			printk(KERN_INFO "2255 firmware not loaded"
+			       "try again\n");

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1576: FILE: drivers/media/video/s2255drv.c:1497:
+	if (NULL == fh) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1614: FILE: drivers/media/video/s2255drv.c:1535:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#1620: FILE: drivers/media/video/s2255drv.c:1541:
+	int rc;
+	dprintk(100, "%s\n", __func__);

WARNING:TRACING_LOGGING: Unnecessary ftrace-like logging - prefer using ftrace
#1620: FILE: drivers/media/video/s2255drv.c:1541:
+	dprintk(100, "%s\n", __func__);

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1622: FILE: drivers/media/video/s2255drv.c:1543:
+	if (V4L2_BUF_TYPE_VIDEO_CAPTURE != fh->type)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1632: FILE: drivers/media/video/s2255drv.c:1553:
+	struct s2255_dev *dev = to_s2255_dev(kref);
+	if (!dev) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1633: FILE: drivers/media/video/s2255drv.c:1554:
+		printk(KERN_ERR "s2255drv: kref problem\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1640: FILE: drivers/media/video/s2255drv.c:1561:
+	/* device unregistered so no longer possible to open. open_mutex
+	   can be unlocked */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1640: FILE: drivers/media/video/s2255drv.c:1561:
+	   can be unlocked */

WARNING:TRACING_LOGGING: Unnecessary ftrace-like logging - prefer using ftrace
#1674: FILE: drivers/media/video/s2255drv.c:1595:
+	dprintk(1, "%s", __func__);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1683: FILE: drivers/media/video/s2255drv.c:1604:
+	int minor = iminor(inode);
+	if (!dev)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1796: FILE: drivers/media/video/s2255drv.c:1717:
+	printk(KERN_INFO "Sensoray 2255 V4L driver\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#1844: FILE: drivers/media/video/s2255drv.c:1765:
+	struct s2255_bufferi *buf;
+	dprintk(100, "buffer to user\n");

CHECK:SPACING: No space is necessary after a cast
#1863: FILE: drivers/media/video/s2255drv.c:1784:
+		if (*(s32 *) pipe_info->transfer_buffer != FRAME_MARKER) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#1865: FILE: drivers/media/video/s2255drv.c:1786:
+			u32 jj;
+			if (dbgsync == 0) {

WARNING:SPLIT_STRING: quoted string split across lines
#1867: FILE: drivers/media/video/s2255drv.c:1788:
+				dprintk(3, "not synched, discarding all packets"
+					"until marker\n");

WARNING:MISSING_SPACE: break quoted strings at a space character
#1867: FILE: drivers/media/video/s2255drv.c:1788:
+				dprintk(3, "not synched, discarding all packets"
+					"until marker\n");

CHECK:SPACING: No space is necessary after a cast
#1874: FILE: drivers/media/video/s2255drv.c:1795:
+				if (*(s32 *) pdata == FRAME_MARKER) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#1876: FILE: drivers/media/video/s2255drv.c:1797:
+					int cc;
+					dprintk(3,

WARNING:SPLIT_STRING: quoted string split across lines
#1878: FILE: drivers/media/video/s2255drv.c:1799:
+						"found frame marker at offset:"
+						" %d [%x %x]\n", jj, pdata[0],

CHECK:SPACING: No space is necessary after a cast
#1882: FILE: drivers/media/video/s2255drv.c:1803:
+					cc = *(u32 *) (pdata + sizeof(u32));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1884: FILE: drivers/media/video/s2255drv.c:1805:
+						printk(KERN_ERR

WARNING:LINE_SPACING: Missing a blank line after declarations
#1900: FILE: drivers/media/video/s2255drv.c:1821:
+			int cc;
+			dbgsync = 0;

CHECK:SPACING: No space is necessary after a cast
#1902: FILE: drivers/media/video/s2255drv.c:1823:
+			pword = (u32 *) pipe_info->transfer_buffer;

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1906: FILE: drivers/media/video/s2255drv.c:1827:
+				printk("invalid channel found. "

WARNING:SPLIT_STRING: quoted string split across lines
#1907: FILE: drivers/media/video/s2255drv.c:1828:
+				printk("invalid channel found. "
+					"throwing out data!\n");

WARNING:SPLIT_STRING: quoted string split across lines
#1914: FILE: drivers/media/video/s2255drv.c:1835:
+				dprintk(1, "[%d][%d]unexpected payload: %d"
+					"required: %lu \n", cc, dev->cc,

WARNING:MISSING_SPACE: break quoted strings at a space character
#1914: FILE: drivers/media/video/s2255drv.c:1835:
+				dprintk(1, "[%d][%d]unexpected payload: %d"
+					"required: %lu \n", cc, dev->cc,

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#1914: FILE: drivers/media/video/s2255drv.c:1835:
+					"required: %lu \n", cc, dev->cc,

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#1921: FILE: drivers/media/video/s2255drv.c:1842:
+
+		}

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1924: FILE: drivers/media/video/s2255drv.c:1845:
+	/* search done.  now find out if should be acquiring
+	   on this channel */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1924: FILE: drivers/media/video/s2255drv.c:1845:
+	   on this channel */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!frm->lpvbits"
#1951: FILE: drivers/media/video/s2255drv.c:1872:
+	if (frm->lpvbits == NULL) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1963: FILE: drivers/media/video/s2255drv.c:1884:
+			printk("invalid copy size, overflow!\n");

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#1981: FILE: drivers/media/video/s2255drv.c:1902:
+	dprintk(50, "cur_size size %lu size %lu \n", cur_size, size);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1985: FILE: drivers/media/video/s2255drv.c:1906:
+		u32 cc = dev->cc;
+		frm->ulState = 2;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->cur_frame[cc] == SYS_FRAMES'
#1991: FILE: drivers/media/video/s2255drv.c:1912:
+		if ((dev->cur_frame[cc] == SYS_FRAMES) ||
+		    (dev->cur_frame[cc] == dev->buffer[cc].dwFrames))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->cur_frame[cc] == dev->buffer[cc].dwFrames'
#1991: FILE: drivers/media/video/s2255drv.c:1912:
+		if ((dev->cur_frame[cc] == SYS_FRAMES) ||
+		    (dev->cur_frame[cc] == dev->buffer[cc].dwFrames))

WARNING:USE_NEGATIVE_ERRNO: return of an errno should typically be negative (ie: return -EAGAIN)
#2003: FILE: drivers/media/video/s2255drv.c:1924:
+		return EAGAIN;

WARNING:LINE_SPACING: Missing a blank line after declarations
#2013: FILE: drivers/media/video/s2255drv.c:1934:
+	int res;
+	dprintk(50, "callback read video \n");

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2013: FILE: drivers/media/video/s2255drv.c:1934:
+	dprintk(50, "callback read video \n");

WARNING:RETURN_VOID: void function return statements are not generally useful
#2027: FILE: drivers/media/video/s2255drv.c:1948:
+	return;
+}

CHECK:CAMELCASE: Avoid CamelCase: <Request>
#2029: FILE: drivers/media/video/s2255drv.c:1950:
+static long s2255_vendor_req(struct s2255_dev *dev, unsigned char Request,

CHECK:CAMELCASE: Avoid CamelCase: <Index>
#2030: FILE: drivers/media/video/s2255drv.c:1951:
+			     u16 Index, u16 Value, void *TransferBuffer,

CHECK:CAMELCASE: Avoid CamelCase: <Value>
#2030: FILE: drivers/media/video/s2255drv.c:1951:
+			     u16 Index, u16 Value, void *TransferBuffer,

CHECK:CAMELCASE: Avoid CamelCase: <TransferBuffer>
#2030: FILE: drivers/media/video/s2255drv.c:1951:
+			     u16 Index, u16 Value, void *TransferBuffer,

CHECK:CAMELCASE: Avoid CamelCase: <TransferBufferLength>
#2031: FILE: drivers/media/video/s2255drv.c:1952:
+			     s32 TransferBufferLength, int bOut)

CHECK:CAMELCASE: Avoid CamelCase: <bOut>
#2031: FILE: drivers/media/video/s2255drv.c:1952:
+			     s32 TransferBufferLength, int bOut)

WARNING:LINE_SPACING: Missing a blank line after declarations
#2034: FILE: drivers/media/video/s2255drv.c:1955:
+	int r;
+	if (!bOut) {

CHECK:CAMELCASE: Avoid CamelCase: <transBuffer>
#2059: FILE: drivers/media/video/s2255drv.c:1980:
+	unsigned char transBuffer[64];

WARNING:LINE_SPACING: Missing a blank line after declarations
#2060: FILE: drivers/media/video/s2255drv.c:1981:
+	unsigned char transBuffer[64];
+	ret = s2255_vendor_req(dev, S2255_VR_FW, 0, 0, transBuffer, 2,

WARNING:LINE_SPACING: Missing a blank line after declarations
#2077: FILE: drivers/media/video/s2255drv.c:1998:
+	unsigned long reqsize;
+	dprintk(1, "create sys buffers\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev->buffer[chn].frame[i].lpvbits"
#2097: FILE: drivers/media/video/s2255drv.c:2018:
+		if (dev->buffer[chn].frame[i].lpvbits == NULL) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#2098: FILE: drivers/media/video/s2255drv.c:2019:
+			printk(KERN_INFO "out of memory.  using less frames\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2119: FILE: drivers/media/video/s2255drv.c:2040:
+	unsigned long i;
+	dprintk(1, "release sys buffers\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2136: FILE: drivers/media/video/s2255drv.c:2057:
+	int fw_ver;
+	dprintk(4, "board init: %p", dev);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pipe->transfer_buffer"
#2150: FILE: drivers/media/video/s2255drv.c:2071:
+		if (pipe->transfer_buffer == NULL) {

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#2155: FILE: drivers/media/video/s2255drv.c:2076:
+
+	}

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#2160: FILE: drivers/media/video/s2255drv.c:2081:
+	printk(KERN_INFO "2255 usb firmware version %d \n", fw_ver);

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2160: FILE: drivers/media/video/s2255drv.c:2081:
+	printk(KERN_INFO "2255 usb firmware version %d \n", fw_ver);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2200: FILE: drivers/media/video/s2255drv.c:2121:
+		struct s2255_pipeinfo *pipe = &dev->pipes[i];
+		kfree(pipe->transfer_buffer);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pipe_info"
#2215: FILE: drivers/media/video/s2255drv.c:2136:
+	if (pipe_info == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev"
#2221: FILE: drivers/media/video/s2255drv.c:2142:
+	if (dev == NULL) {

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'read_pipe_completion', this function's name, in a string
#2227: FILE: drivers/media/video/s2255drv.c:2148:
+		dprintk(2, "read_pipe_completion: err\n");

WARNING:RETURN_VOID: void function return statements are not generally useful
#2256: FILE: drivers/media/video/s2255drv.c:2177:
+	return;
+}

WARNING:LINE_SPACING: Missing a blank line after declarations
#2264: FILE: drivers/media/video/s2255drv.c:2185:
+	struct s2255_pipeinfo *pipe_info = dev->pipes;
+	pipe = usb_rcvbulkpipe(dev->udev, dev->read_endpoint);

CHECK:SPACING: No space is necessary after a cast
#2269: FILE: drivers/media/video/s2255drv.c:2190:
+		pipe_info->buf_index = (u32) i;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2288: FILE: drivers/media/video/s2255drv.c:2209:
+			printk(KERN_ERR "s2255: start read pipe failed\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2303: FILE: drivers/media/video/s2255drv.c:2224:
+	int j;
+	if (chn >= MAX_CHANNELS) {

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2309: FILE: drivers/media/video/s2255drv.c:2230:
+	dprintk(1, "S2255: start acquire %lu \n", chn);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!buffer"
#2312: FILE: drivers/media/video/s2255drv.c:2233:
+	if (buffer == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2313: FILE: drivers/media/video/s2255drv.c:2234:
+	if (buffer == NULL) {
+		dev_err(&dev->udev->dev, "out of mem\n");

CHECK:SPACING: No space is necessary after a cast
#2326: FILE: drivers/media/video/s2255drv.c:2247:
+	*(u32 *) buffer = IN_DATA_TOKEN;

CHECK:SPACING: No space is necessary after a cast
#2327: FILE: drivers/media/video/s2255drv.c:2248:
+	*((u32 *) buffer + 1) = (u32) chn_rev;

CHECK:SPACING: No space is necessary after a cast
#2328: FILE: drivers/media/video/s2255drv.c:2249:
+	*((u32 *) buffer + 2) = (u32) CMD_START;

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2333: FILE: drivers/media/video/s2255drv.c:2254:
+	dprintk(2, "start acquire exit[%lu] %d \n", chn, res);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!buffer"
#2351: FILE: drivers/media/video/s2255drv.c:2272:
+	if (buffer == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2352: FILE: drivers/media/video/s2255drv.c:2273:
+	if (buffer == NULL) {
+		dev_err(&dev->udev->dev, "out of mem\n");

CHECK:SPACING: No space is necessary after a cast
#2358: FILE: drivers/media/video/s2255drv.c:2279:
+	*(u32 *) buffer = IN_DATA_TOKEN;

CHECK:SPACING: No space is necessary after a cast
#2359: FILE: drivers/media/video/s2255drv.c:2280:
+	*((u32 *) buffer + 1) = (u32) chn_rev;

CHECK:SPACING: No space is necessary after a cast
#2360: FILE: drivers/media/video/s2255drv.c:2281:
+	*((u32 *) buffer + 2) = CMD_STOP;

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2366: FILE: drivers/media/video/s2255drv.c:2287:
+	dprintk(4, "stop acquire: releasing states \n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev"
#2378: FILE: drivers/media/video/s2255drv.c:2299:
+	if (dev == NULL) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#2385: FILE: drivers/media/video/s2255drv.c:2306:
+		struct s2255_pipeinfo *pipe_info = &dev->pipes[j];
+		if (pipe_info) {

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#2391: FILE: drivers/media/video/s2255drv.c:2312:
+
+		}

WARNING:LINE_SPACING: Missing a blank line after declarations
#2396: FILE: drivers/media/video/s2255drv.c:2317:
+		struct s2255_pipeinfo *pipe_info = &dev->pipes[j];
+		if (pipe_info->stream_urb) {

WARNING:RETURN_VOID: void function return statements are not generally useful
#2405: FILE: drivers/media/video/s2255drv.c:2326:
+	return;
+}

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*dev)...) over kzalloc(sizeof(struct s2255_dev)...)
#2435: FILE: drivers/media/video/s2255drv.c:2356:
+	dev = kzalloc(sizeof(struct s2255_dev), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev"
#2436: FILE: drivers/media/video/s2255drv.c:2357:
+	if (dev == NULL) {

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*dev->fw_data)...) over kzalloc(sizeof(struct s2255_fw)...)
#2441: FILE: drivers/media/video/s2255drv.c:2362:
+	dev->fw_data = kzalloc(sizeof(struct s2255_fw), GFP_KERNEL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev->udev"
#2450: FILE: drivers/media/video/s2255drv.c:2371:
+	if (dev->udev == NULL) {

CHECK:CAMELCASE: Avoid CamelCase: <bNumEndpoints>
#2461: FILE: drivers/media/video/s2255drv.c:2382:
+	dprintk(1, "num endpoints %d\n", iface_desc->desc.bNumEndpoints);

CHECK:CAMELCASE: Avoid CamelCase: <bEndpointAddress>
#2466: FILE: drivers/media/video/s2255drv.c:2387:
+			dev->read_endpoint = endpoint->bEndpointAddress;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2486: FILE: drivers/media/video/s2255drv.c:2407:
+
+

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2495: FILE: drivers/media/video/s2255drv.c:2416:
+	if (!dev->fw_data->pfw_data) {
+		dev_err(&interface->dev, "out of memory!\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2501: FILE: drivers/media/video/s2255drv.c:2422:
+		printk(KERN_ERR "sensoray 2255 failed to get firmware\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2524: FILE: drivers/media/video/s2255drv.c:2445:
+	struct s2255_dev *dev = NULL;
+	dprintk(1, "s2255: disconnect interface %p\n", interface);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000262467.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 7 errors, 132 warnings, 91 checks, 2508 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000262467.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
