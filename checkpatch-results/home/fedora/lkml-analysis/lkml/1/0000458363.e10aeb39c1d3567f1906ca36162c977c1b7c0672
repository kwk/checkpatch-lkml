ERROR:SPACING: space required after that ',' (ctx:VxV)
#77: FILE: arch/i386/kernel/asm-offsets.c:129:
+	OFFSET(LGUEST_PAGES_guest_gdt_desc, lguest_pages,state.guest_gdt_desc);
 	                                                ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required after that ',' (ctx:VxV)
#78: FILE: arch/i386/kernel/asm-offsets.c:130:
+	OFFSET(LGUEST_PAGES_guest_idt_desc, lguest_pages,state.guest_idt_desc);
 	                                                ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#113: FILE: arch/i386/lguest/core.c:28:
+#define SHARED_HYPERVISOR_PAGES DIV_ROUND_UP(sizeof(hypervisor_blob),PAGE_SIZE)
                                                                     ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#119: FILE: arch/i386/lguest/core.c:32:
+static struct page *hype_page[SHARED_HYPERVISOR_PAGES+2*NR_CPUS];
                                                      ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#119: FILE: arch/i386/lguest/core.c:32:
+static struct page *hype_page[SHARED_HYPERVISOR_PAGES+2*NR_CPUS];
                                                        ^

CHECK:UNCOMMENTED_DEFINITION: DEFINE_MUTEX definition without comment
#126: FILE: arch/i386/lguest/core.c:39:
+DEFINE_MUTEX(lguest_lock);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#151: FILE: arch/i386/lguest/core.c:61:
+		  (HYPE_ADDR + SHARED_HYPERVISOR_PAGES*PAGE_SIZE))[cpu]);
 		                                      ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#167: FILE: arch/i386/lguest/core.c:100:
+		state->guest_idt_desc.size = sizeof(state->guest_idt)-1;
 		                                                     ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#169: FILE: arch/i386/lguest/core.c:102:
+		state->guest_gdt_desc.size = sizeof(state->guest_gdt)-1;
 		                                                     ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#177: FILE: arch/i386/lguest/core.c:110:
+^I^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#431: FILE: arch/i386/lguest/hypervisor.S:1:
+/* This code sits at 0xFFC00000 to do the low-level guest<->host switch.

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#646: FILE: arch/i386/lguest/interrupts_and_traps.c:99:
+	idt = &lg->idt[FIRST_EXTERNAL_VECTOR+irq];
 	                                    ^

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#707: FILE: arch/i386/lguest/interrupts_and_traps.c:157:
+	/* We intercept page fault (demand shadow paging & cr2 saving)
+	   protection fault (in/out emulation) and device not

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#708: FILE: arch/i386/lguest/interrupts_and_traps.c:158:
+	   available (TS handling), and hypercall */

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#723: FILE: arch/i386/lguest/interrupts_and_traps.c:173:
+		trap->a = trap->b = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#825: FILE: arch/i386/lguest/interrupts_and_traps.c:180:
+	trap->a = ((__KERNEL_CS|GUEST_DPL)<<16) | (lo&0x0000FFFF);
 	                       ^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#825: FILE: arch/i386/lguest/interrupts_and_traps.c:180:
+	trap->a = ((__KERNEL_CS|GUEST_DPL)<<16) | (lo&0x0000FFFF);
 	                                  ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#825: FILE: arch/i386/lguest/interrupts_and_traps.c:180:
+	trap->a = ((__KERNEL_CS|GUEST_DPL)<<16) | (lo&0x0000FFFF);
 	                                             ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#826: FILE: arch/i386/lguest/interrupts_and_traps.c:181:
+	trap->b = (hi&0xFFFFEF00);
 	             ^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#829: FILE: arch/i386/lguest/interrupts_and_traps.c:184:
+	 * theory, it could overlap two pages, in practice it's aligned. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#843: FILE: arch/i386/lguest/interrupts_and_traps.c:198:
+ * clear shadow mappings. */

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#883: FILE: arch/i386/lguest/interrupts_and_traps.c:238:
+	idt->a = (LGUEST_CS<<16) | (def&0x0000FFFF);
 	                   ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#883: FILE: arch/i386/lguest/interrupts_and_traps.c:238:
+	idt->a = (LGUEST_CS<<16) | (def&0x0000FFFF);
 	                               ^

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#884: FILE: arch/i386/lguest/interrupts_and_traps.c:239:
+	idt->b = (def&0xFFFF0000) | flags;
 	             ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#887: FILE: arch/i386/lguest/interrupts_and_traps.c:242:
+void setup_default_idt_entries(struct lguest_ro_state *state, $

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#902: FILE: arch/i386/lguest/interrupts_and_traps.c:257:
+	 * traps might be different. */

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#938: FILE: arch/i386/lguest/lg.h:67:
+struct x86_tss
+{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:SPACING: space required after that ',' (ctx:VxV)
#939: FILE: arch/i386/lguest/lg.h:68:
+	unsigned short	back_link,__blh;
 	              	         ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#941: FILE: arch/i386/lguest/lg.h:70:
+	unsigned short	ss0,__ss0pad;
 	              	   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#943: FILE: arch/i386/lguest/lg.h:72:
+	unsigned short	ss1,__ss1pad;
 	              	   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#945: FILE: arch/i386/lguest/lg.h:74:
+	unsigned short	ss2,__ss2pad;
 	              	   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#949: FILE: arch/i386/lguest/lg.h:78:
+	unsigned long	eax,ecx,edx,ebx;
 	             	   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#949: FILE: arch/i386/lguest/lg.h:78:
+	unsigned long	eax,ecx,edx,ebx;
 	             	       ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#949: FILE: arch/i386/lguest/lg.h:78:
+	unsigned long	eax,ecx,edx,ebx;
 	             	           ^

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#966: FILE: arch/i386/lguest/lg.h:95:
+struct lguest_ro_state
+{

CHECK:CAMELCASE: Avoid CamelCase: <Xgt_desc_struct>
#969: FILE: arch/i386/lguest/lg.h:98:
+	struct Xgt_desc_struct host_idt_desc;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#983: FILE: arch/i386/lguest/lg.h:112:
+struct lguest_pages
+{

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __aligned(PAGE_SIZE) over __attribute__((aligned(PAGE_SIZE)))
#990: FILE: arch/i386/lguest/lg.h:119:
+} __attribute__((aligned(PAGE_SIZE)));

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1032: FILE: arch/i386/lguest/lg.h:164:
+	struct desc_struct idt[FIRST_EXTERNAL_VECTOR+LGUEST_IRQS];
 	                                            ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1059: FILE: arch/i386/lguest/lg.h:192:
+void setup_default_idt_entries(struct lguest_ro_state *state, $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1343: FILE: arch/i386/lguest/page_tables.c:351:
+^I^Ipte[i] = ((page_to_pfn(hype_page[i]) << PAGE_SHIFT) $

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1344: FILE: arch/i386/lguest/page_tables.c:352:
+			    | _PAGE_PRESENT|_PAGE_ACCESSED);
 			                   ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1348: FILE: arch/i386/lguest/page_tables.c:356:
+	i = pages + cpu*2;
 	               ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1352: FILE: arch/i386/lguest/page_tables.c:360:
+		  | _PAGE_PRESENT|_PAGE_ACCESSED|_PAGE_RW);
 		                 ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1352: FILE: arch/i386/lguest/page_tables.c:360:
+		  | _PAGE_PRESENT|_PAGE_ACCESSED|_PAGE_RW);
 		                                ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1353: FILE: arch/i386/lguest/page_tables.c:361:
+	pte[i+1] = ((page_to_pfn(hype_page[i+1]) << PAGE_SHIFT)
 	     ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1353: FILE: arch/i386/lguest/page_tables.c:361:
+	pte[i+1] = ((page_to_pfn(hype_page[i+1]) << PAGE_SHIFT)
 	                                    ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1354: FILE: arch/i386/lguest/page_tables.c:362:
+		    | _PAGE_PRESENT|_PAGE_ACCESSED);
 		                   ^

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1415: FILE: arch/i386/lguest/segments.c:17:
+	return (num == GDT_ENTRY_TSS
+		|| num == GDT_ENTRY_LGUEST_CS

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1416: FILE: arch/i386/lguest/segments.c:18:
+		|| num == GDT_ENTRY_LGUEST_CS
+		|| num == GDT_ENTRY_LGUEST_DS

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1417: FILE: arch/i386/lguest/segments.c:19:
+		|| num == GDT_ENTRY_LGUEST_DS
+		|| num == GDT_ENTRY_KERNEL_CS

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1418: FILE: arch/i386/lguest/segments.c:20:
+		|| num == GDT_ENTRY_KERNEL_CS
+		|| num == GDT_ENTRY_KERNEL_DS

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1419: FILE: arch/i386/lguest/segments.c:21:
+		|| num == GDT_ENTRY_KERNEL_DS
+		|| num == GDT_ENTRY_DOUBLEFAULT_TSS);

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1435: FILE: arch/i386/lguest/segments.c:34:
+	if (lg->regs.ds / 8 == desc
+	    || lg->regs.cs / 8 == desc

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1436: FILE: arch/i386/lguest/segments.c:35:
+	    || lg->regs.cs / 8 == desc
+	    || lg->regs.ss / 8 == desc)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1457: FILE: arch/i386/lguest/segments.c:49:
+		 * a removed segment. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1545: FILE: arch/i386/lguest/segments.c:77:
+	 * We don't copy these from host for easy of setup. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1553: FILE: arch/i386/lguest/segments.c:84:
+	/* This is the one which we *cannot* copy from guest, since tss
+	   is depended on this lguest_ro_state, ie. this cpu. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1553: FILE: arch/i386/lguest/segments.c:84:
+	   is depended on this lguest_ro_state, ie. this cpu. */

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1555: FILE: arch/i386/lguest/segments.c:86:
+^Igdt[GDT_ENTRY_TSS].b = 0x00008900 | (tss & 0xFF000000) $

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000458363.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 18 errors, 11 warnings, 31 checks, 1490 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000458363.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
