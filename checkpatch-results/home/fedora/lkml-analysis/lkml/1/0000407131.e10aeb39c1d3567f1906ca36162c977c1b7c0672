CHECK:BRACES: Unbalanced braces around else statement
#94: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1064:
+		} else

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SPLIT_STRING: quoted string split across lines
#162: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1331:
+		ehca_err(&shca->ib_device, "hipz_reregister_pmr failed "
+			 "(Rereg1), h_ret=%lx e_fmr=%p hca_hndl=%lx "

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#163: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1332:
+			 "(Rereg1), h_ret=%lx e_fmr=%p hca_hndl=%lx "
+			 "mr_hndl=%lx lkey=%x lkey_out=%x",

WARNING:SPLIT_STRING: quoted string split across lines
#192: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1343:
+		ehca_err(&shca->ib_device, "hipz_free_mr failed, "
+			 "h_ret=%lx e_fmr=%p hca_hndl=%lx mr_hndl=%lx "

WARNING:SPLIT_STRING: quoted string split across lines
#193: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1344:
+			 "h_ret=%lx e_fmr=%p hca_hndl=%lx mr_hndl=%lx "
+			 "lkey=%x",

WARNING:LINE_SPACING: Missing a blank line after declarations
#243: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1373:
+		u32 offset = (u64)(&e_fmr->flags) - (u64)e_fmr;
+		memcpy(&e_fmr->flags, &(save_mr.flags),

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around save_mr.flags
#243: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1373:
+		memcpy(&e_fmr->flags, &(save_mr.flags),

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

WARNING:SPLIT_STRING: quoted string split across lines
#254: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1381:
 		ehca_err(&shca->ib_device, "ret=%x tmp_lkey=%x tmp_rkey=%x "
+			 "fmr_max_pages=%x",

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#397: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1690:
+	list_for_each_entry_continue(

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pginfo->u.usr.region->chunk_list
#398: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1691:
+		chunk, (&(pginfo->u.usr.region->chunk_list)), list) {

WARNING:SPACING: space prohibited before semicolon
#401: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1694:
+				<< PAGE_SHIFT ;

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPLIT_STRING: quoted string split across lines
#414: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1700:
+				ehca_gen_err("pgaddr=%lx "
+					     "chunk->page_list[i]=%lx "

WARNING:SPLIT_STRING: quoted string split across lines
#415: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1701:
+					     "chunk->page_list[i]=%lx "
+					     "i=%x next_hwpage=%lx",

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#416: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1702:
+					     pgaddr, (u64)sg_dma_address(

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#435: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1718:
+			if (j >= number) break;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'pginfo->u.usr.next_nmap >= chunk->nmap'
#441: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1720:
+		if ((pginfo->u.usr.next_nmap >= chunk->nmap) &&
+		    (j >= number)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'j >= number'
#441: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1720:
+		if ((pginfo->u.usr.next_nmap >= chunk->nmap) &&
+		    (j >= number)) {

CHECK:BRACES: braces {} should be used on all arms of this statement
#441: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1720:
+		if ((pginfo->u.usr.next_nmap >= chunk->nmap) &&
[...]
+		} else if (pginfo->u.usr.next_nmap >= chunk->nmap) {
[...]
+		} else if (j >= number)
[...]
+		else
[...]

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#451: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1730:
+			break;
+		else

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around pginfo->u.usr.region->chunk_list
#469: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1735:
+				   (&(pginfo->u.usr.region->chunk_list)),

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'pginfo->kpage_cnt >= pginfo->num_kpages'
#559: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1757:
+			if ((pginfo->kpage_cnt >= pginfo->num_kpages) ||
+			    (pginfo->hwpage_cnt >= pginfo->num_hwpages)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'pginfo->hwpage_cnt >= pginfo->num_hwpages'
#559: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1757:
+			if ((pginfo->kpage_cnt >= pginfo->num_kpages) ||
+			    (pginfo->hwpage_cnt >= pginfo->num_hwpages)) {

WARNING:SPLIT_STRING: quoted string split across lines
#562: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1760:
+				ehca_gen_err("kpage_cnt >= num_kpages, "
+					     "kpage_cnt=%lx num_kpages=%lx "

WARNING:SPLIT_STRING: quoted string split across lines
#563: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1761:
+					     "kpage_cnt=%lx num_kpages=%lx "
+					     "hwpage_cnt=%lx "

WARNING:SPLIT_STRING: quoted string split across lines
#564: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1762:
+					     "hwpage_cnt=%lx "
+					     "num_hwpages=%lx i=%x",

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#571: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1769:
+			*kpage = phys_to_abs(

ERROR:SPACING: space prohibited after that open parenthesis '('
#574: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1772:
+			if ( !(*kpage) && pbuf->addr ) {

ERROR:SPACING: space prohibited before that close parenthesis ')'
#574: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1772:
+			if ( !(*kpage) && pbuf->addr ) {

WARNING:SPLIT_STRING: quoted string split across lines
#576: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1774:
+				ehca_gen_err("pbuf->addr=%lx "
+					     "pbuf->size=%lx "

WARNING:SPLIT_STRING: quoted string split across lines
#577: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1775:
+					     "pbuf->size=%lx "
+					     "next_hwpage=%lx", pbuf->addr,

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#598: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1787:
+			if (i >= number) break;

ERROR:SPACING: space prohibited after that open parenthesis '('
#629: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1810:
+		if ( !(*kpage) ) {

ERROR:SPACING: space prohibited before that close parenthesis ')'
#629: FILE: drivers/infiniband/hw/ehca/ehca_mrmw.c:1810:
+		if ( !(*kpage) ) {

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000407131.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 6 errors, 15 warnings, 12 checks, 641 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000407131.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
