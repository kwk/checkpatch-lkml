WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#66: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#71: FILE: drivers/video/backlight/adp5520_bl.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#89: FILE: drivers/video/backlight/adp5520_bl.c:19:
+	struct mutex lock;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'brightness > 0'
#102: FILE: drivers/video/backlight/adp5520_bl.c:32:
+		if ((brightness > 0) && (brightness < ADP5020_MAX_BRIGHTNESS)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'brightness < ADP5020_MAX_BRIGHTNESS'
#102: FILE: drivers/video/backlight/adp5520_bl.c:32:
+		if ((brightness > 0) && (brightness < ADP5020_MAX_BRIGHTNESS)) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#137: FILE: drivers/video/backlight/adp5520_bl.c:67:
+	int brightness = bl->props.brightness;
+	if (bl->props.power != FB_BLANK_UNBLANK)

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#150: FILE: drivers/video/backlight/adp5520_bl.c:80:
+	uint8_t reg_val;

WARNING:CONST_STRUCT: struct backlight_ops should normally be const
#157: FILE: drivers/video/backlight/adp5520_bl.c:87:
+static struct backlight_ops adp5520_bl_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#184: FILE: drivers/video/backlight/adp5520_bl.c:114:
+	}

The permissions used in DEVICE_ATTR are unusual.
Typically only three permissions are used - 0644 (RW), 0444 (RO)
and 0200 (WO).

See: https://www.kernel.org/doc/html/latest/filesystems/sysfs.html#attributes

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#186: FILE: drivers/video/backlight/adp5520_bl.c:116:
+	ret |= adp5520_write(master, BL_CONTROL,

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#201: FILE: drivers/video/backlight/adp5520_bl.c:131:
+	uint8_t reg_val;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#211: FILE: drivers/video/backlight/adp5520_bl.c:141:
+static ssize_t adp5520_store(struct device *dev, const char *buf,
+			 size_t count, int reg)

WARNING:CONSIDER_KSTRTO: strict_strtoul is obsolete, use kstrtoul instead
#217: FILE: drivers/video/backlight/adp5520_bl.c:147:
+	ret = strict_strtoul(buf, 10, &val);

The simple_strtol(), simple_strtoll(), simple_strtoul(), and
simple_strtoull() functions explicitly ignore overflows, which
may lead to unexpected results in callers.  The respective kstrtol(),
kstrtoll(), kstrtoul(), and kstrtoull() functions tend to be the
correct replacements.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#simple-strtol-simple-strtoll-simple-strtoul-simple-strtoull

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#229: FILE: drivers/video/backlight/adp5520_bl.c:159:
+static ssize_t adp5520_bl_dark_max_show(struct device *dev,
+		struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#235: FILE: drivers/video/backlight/adp5520_bl.c:165:
+static ssize_t adp5520_bl_dark_max_store(struct device *dev,
+		struct device_attribute *attr, const char *buf, size_t count)

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#238: FILE: drivers/video/backlight/adp5520_bl.c:168:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#243: FILE: drivers/video/backlight/adp5520_bl.c:173:
+static ssize_t adp5520_bl_office_max_show(struct device *dev,
+				     struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#249: FILE: drivers/video/backlight/adp5520_bl.c:179:
+static ssize_t adp5520_bl_office_max_store(struct device *dev,
+		struct device_attribute *attr, const char *buf, size_t count)

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#252: FILE: drivers/video/backlight/adp5520_bl.c:182:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#257: FILE: drivers/video/backlight/adp5520_bl.c:187:
+static ssize_t adp5520_bl_daylight_max_show(struct device *dev,
+			struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#263: FILE: drivers/video/backlight/adp5520_bl.c:193:
+static ssize_t adp5520_bl_daylight_max_store(struct device *dev,
+		struct device_attribute *attr, const char *buf, size_t count)

WARNING:CONSIDER_KSTRTO: strict_strtoul is obsolete, use kstrtoul instead
#267: FILE: drivers/video/backlight/adp5520_bl.c:197:
+	strict_strtoul(buf, 10, &data->cached_daylight_max);

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#269: FILE: drivers/video/backlight/adp5520_bl.c:199:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#274: FILE: drivers/video/backlight/adp5520_bl.c:204:
+static ssize_t adp5520_bl_dark_dim_show(struct device *dev,
+			struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#280: FILE: drivers/video/backlight/adp5520_bl.c:210:
+static ssize_t adp5520_bl_dark_dim_store(struct device *dev,
+				     struct device_attribute *attr,

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#284: FILE: drivers/video/backlight/adp5520_bl.c:214:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#289: FILE: drivers/video/backlight/adp5520_bl.c:219:
+static ssize_t adp5520_bl_office_dim_show(struct device *dev,
+			struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#295: FILE: drivers/video/backlight/adp5520_bl.c:225:
+static ssize_t adp5520_bl_office_dim_store(struct device *dev,
+				     struct device_attribute *attr,

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#299: FILE: drivers/video/backlight/adp5520_bl.c:229:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#304: FILE: drivers/video/backlight/adp5520_bl.c:234:
+static ssize_t adp5520_bl_daylight_dim_show(struct device *dev,
+				     struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#310: FILE: drivers/video/backlight/adp5520_bl.c:240:
+static ssize_t adp5520_bl_daylight_dim_store(struct device *dev,
+				     struct device_attribute *attr,

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#314: FILE: drivers/video/backlight/adp5520_bl.c:244:
+}

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#332: FILE: drivers/video/backlight/adp5520_bl.c:262:
+static int __devinit adp5520_bl_probe(struct platform_device *pdev)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!data"
#339: FILE: drivers/video/backlight/adp5520_bl.c:269:
+	if (data == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!data->pdata"
#345: FILE: drivers/video/backlight/adp5520_bl.c:275:
+	if (data->pdata  == NULL) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#357: FILE: drivers/video/backlight/adp5520_bl.c:287:
+	bl = backlight_device_register(pdev->name, data->master,
+			data, &adp5520_bl_ops);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#369: FILE: drivers/video/backlight/adp5520_bl.c:299:
+		ret = sysfs_create_group(&bl->dev.kobj,
+			&adp5520_bl_attr_group);

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#384: FILE: drivers/video/backlight/adp5520_bl.c:314:
+static int __devexit adp5520_bl_remove(struct platform_device *pdev)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#393: FILE: drivers/video/backlight/adp5520_bl.c:323:
+		sysfs_remove_group(&bl->dev.kobj,
+				&adp5520_bl_attr_group);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#403: FILE: drivers/video/backlight/adp5520_bl.c:333:
+static int adp5520_bl_suspend(struct platform_device *pdev,
+				 pm_message_t state)

WARNING:LINE_SPACING: Missing a blank line after declarations
#406: FILE: drivers/video/backlight/adp5520_bl.c:336:
+	struct backlight_device *bl = platform_get_drvdata(pdev);
+	return adp5520_bl_set(bl, 0);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000070904.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 17 warnings, 24 checks, 395 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000070904.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
