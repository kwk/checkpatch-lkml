WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#50: FILE: drivers/serial/crisv10.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#521: FILE: drivers/serial/crisv10.c:166:
+static int rs_write(struct tty_struct *tty,
+		const unsigned char *buf, int count);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#526: FILE: drivers/serial/crisv10.c:169:
+static int e100_write_rs485(struct tty_struct *tty,
+		const unsigned char *buf, int count);

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#898: FILE: drivers/serial/crisv10.c:1705:
+  local_irq_save(timer_flags); \$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#907: FILE: drivers/serial/crisv10.c:1719:
+  local_irq_restore(timer_flags); \$

WARNING:LINE_SPACING: Missing a blank line after declarations
#1048: FILE: drivers/serial/crisv10.c:2359:
+					struct tty_struct *tty = info->tty;
+					tty_insert_flip_char(tty, 0, flag);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1077: FILE: drivers/serial/crisv10.c:2390:
+		tty_insert_flip_char(tty,
+			IO_EXTRACT(R_SERIAL0_READ, data_in, data_read),

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1439: FILE: drivers/serial/crisv10.c:3586:
+rs_tiocmset(struct tty_struct *tty, struct file *file,
+		unsigned int set, unsigned int clear)

WARNING:TYPO_SPELLING: 'ser' may be misspelled - perhaps 'set'?
#1489: FILE: drivers/serial/crisv10.c:3627:
+	printk(KERN_DEBUG "ser%i: modem state: %i 0x%08X\n",
 	                   ^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1489: FILE: drivers/serial/crisv10.c:3627:
+	printk(KERN_DEBUG "ser%i: modem state: %i 0x%08X\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1490: FILE: drivers/serial/crisv10.c:3628:
+	printk(KERN_DEBUG "ser%i: modem state: %i 0x%08X\n",
+		info->line, result, result);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1496: FILE: drivers/serial/crisv10.c:3633:
+		printk(KERN_DEBUG "state: %s\n", s);

CHECK:SPACING: No space is necessary after a cast
#1610: FILE: drivers/serial/crisv10.c:3657:
+				       (struct serial_struct *) arg);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: No space is necessary after a cast
#1613: FILE: drivers/serial/crisv10.c:3660:
+				       (struct serial_struct *) arg);

CHECK:SPACING: No space is necessary after a cast
#1615: FILE: drivers/serial/crisv10.c:3662:
+		return get_lsr_info(info, (unsigned int *) arg);

CHECK:SPACING: No space is necessary after a cast
#1618: FILE: drivers/serial/crisv10.c:3665:
+		if (copy_to_user((struct e100_serial *) arg,

WARNING:LINE_SPACING: Missing a blank line after declarations
#1632: FILE: drivers/serial/crisv10.c:3674:
+		struct rs485_control rs485ctrl;
+		if (copy_from_user(&rs485ctrl, (struct rs485_control *)arg,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1633: FILE: drivers/serial/crisv10.c:3675:
+		if (copy_from_user(&rs485ctrl, (struct rs485_control *)arg,
+				sizeof(rs485ctrl)))

WARNING:LINE_SPACING: Missing a blank line after declarations
#1649: FILE: drivers/serial/crisv10.c:3684:
+		struct rs485_write rs485wr;
+		if (copy_from_user(&rs485wr, (struct rs485_write *)arg,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1650: FILE: drivers/serial/crisv10.c:3685:
+		if (copy_from_user(&rs485wr, (struct rs485_write *)arg,
+				sizeof(rs485wr)))

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1759: FILE: drivers/serial/crisv10.c:3855:
+		printk(KERN_DEBUG "DMA irq '%s' freed\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1760: FILE: drivers/serial/crisv10.c:3856:
+		printk(KERN_DEBUG "DMA irq '%s' freed\n",
+			info->dma_in_irq_description);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1769: FILE: drivers/serial/crisv10.c:3865:
+		printk(KERN_DEBUG "DMA irq '%s' freed\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1770: FILE: drivers/serial/crisv10.c:3866:
+		printk(KERN_DEBUG "DMA irq '%s' freed\n",
+			info->dma_out_irq_description);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1845: FILE: drivers/serial/crisv10.c:4109:
+				printk(KERN_WARNING "DMA irq '%s' busy; "

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1856: FILE: drivers/serial/crisv10.c:4120:
+				printk(KERN_WARNING "DMA '%s' busy; "

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1865: FILE: drivers/serial/crisv10.c:4129:
+				printk(KERN_DEBUG "DMA irq '%s' allocated\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1866: FILE: drivers/serial/crisv10.c:4130:
+				printk(KERN_DEBUG "DMA irq '%s' allocated\n",
+					info->dma_in_irq_description);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1871: FILE: drivers/serial/crisv10.c:4135:
+			if (request_irq(info->dma_out_irq_nbr,
+					       tr_interrupt,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1875: FILE: drivers/serial/crisv10.c:4139:
+				printk(KERN_WARNING "DMA irq '%s' busy; "

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1886: FILE: drivers/serial/crisv10.c:4150:
+				printk(KERN_WARNING "DMA '%s' busy; "

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1895: FILE: drivers/serial/crisv10.c:4159:
+				printk(KERN_DEBUG "DMA irq '%s' allocated\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1896: FILE: drivers/serial/crisv10.c:4160:
+				printk(KERN_DEBUG "DMA irq '%s' allocated\n",
+					info->dma_out_irq_description);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1911: FILE: drivers/serial/crisv10.c:4174:
+				cris_free_dma(info->dma_out_nbr,
+					info->dma_out_irq_description);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1917: FILE: drivers/serial/crisv10.c:4180:
+				cris_free_dma(info->dma_in_nbr,
+					info->dma_in_irq_description);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#1925: FILE: drivers/serial/crisv10.c:4188:
 
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1927: FILE: drivers/serial/crisv10.c:4190:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1937: FILE: drivers/serial/crisv10.c:4200:
+				cris_free_dma(info->dma_out_nbr,
+					info->dma_out_irq_description);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1939: FILE: drivers/serial/crisv10.c:4202:
+				free_irq(info->dma_out_irq_nbr,
+					info);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1943: FILE: drivers/serial/crisv10.c:4206:
+				cris_free_dma(info->dma_in_nbr,
+					info->dma_in_irq_description);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1945: FILE: drivers/serial/crisv10.c:4208:
+				free_irq(info->dma_in_irq_nbr,
+					info);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1971: FILE: drivers/serial/crisv10.c:4427:
+	if (cris_io_interface_allocate_pins(if_ser0, 'a', rs485_pa_bit,
+			rs485_pa_bit)) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_crit([subsystem]dev, ... then dev_crit(dev, ... then pr_crit(...  to printk(KERN_CRIT ...
#1972: FILE: drivers/serial/crisv10.c:4428:
+		printk(KERN_CRIT "ETRAX100LX serial: Could not allocate "

WARNING:SPLIT_STRING: quoted string split across lines
#1973: FILE: drivers/serial/crisv10.c:4429:
+		printk(KERN_CRIT "ETRAX100LX serial: Could not allocate "
+			"RS485 pin\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1979: FILE: drivers/serial/crisv10.c:4435:
+	if (cris_io_interface_allocate_pins(if_ser0, 'g', rs485_pa_bit,
+			rs485_port_g_bit)) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_crit([subsystem]dev, ... then dev_crit(dev, ... then pr_crit(...  to printk(KERN_CRIT ...
#1980: FILE: drivers/serial/crisv10.c:4436:
+		printk(KERN_CRIT "ETRAX100LX serial: Could not allocate "

WARNING:SPLIT_STRING: quoted string split across lines
#1981: FILE: drivers/serial/crisv10.c:4437:
+		printk(KERN_CRIT "ETRAX100LX serial: Could not allocate "
+			"RS485 pin\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1994: FILE: drivers/serial/crisv10.c:4469:
+			if (cris_request_io_interface(info->io_if,
+					info->io_if_description)) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_crit([subsystem]dev, ... then dev_crit(dev, ... then pr_crit(...  to printk(KERN_CRIT ...
#1995: FILE: drivers/serial/crisv10.c:4470:
+				printk(KERN_CRIT "ETRAX100LX async serial: "

WARNING:SPLIT_STRING: quoted string split across lines
#1996: FILE: drivers/serial/crisv10.c:4471:
+				printk(KERN_CRIT "ETRAX100LX async serial: "
+					"Could not allocate IO pins for "

WARNING:SPLIT_STRING: quoted string split across lines
#1997: FILE: drivers/serial/crisv10.c:4472:
+					"Could not allocate IO pins for "
+					"%s, port %d\n",

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#2026: FILE: drivers/serial/crisv10.c:4534:
+		panic("%s: Failed to request irq8", __FUNCTION__);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2087: FILE: drivers/serial/crisv10.h:1:
+/*

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2126: FILE: drivers/serial/crisv10.h:40:
+	volatile u8	*port;	/* R_SERIALx_CTRL */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2130: FILE: drivers/serial/crisv10.h:44:
+	volatile u8 *oclrintradr;	/* adr to R_DMA_CHx_CLR_INTR */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2131: FILE: drivers/serial/crisv10.h:45:
+	volatile u32 *ofirstadr;	/* adr to R_DMA_CHx_FIRST */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2132: FILE: drivers/serial/crisv10.h:46:
+	volatile u8 *ocmdadr;		/* adr to R_DMA_CHx_CMD */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2133: FILE: drivers/serial/crisv10.h:47:
+	const volatile u8 *ostatusadr;	/* adr to R_DMA_CHx_STATUS */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2136: FILE: drivers/serial/crisv10.h:50:
+	volatile u8 *iclrintradr;	/* adr to R_DMA_CHx_CLR_INTR */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2137: FILE: drivers/serial/crisv10.h:51:
+	volatile u32 *ifirstadr;	/* adr to R_DMA_CHx_FIRST */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2138: FILE: drivers/serial/crisv10.h:52:
+	volatile u8 *icmdadr;		/* adr to R_DMA_CHx_CMD */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2139: FILE: drivers/serial/crisv10.h:53:
+	volatile u32 *idescradr;	/* adr to R_DMA_CHx_DESCR */

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#2174: FILE: drivers/serial/crisv10.h:88:
+	volatile int		tr_running; /* 1 if output is running */

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000361884.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 36 warnings, 27 checks, 2106 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000361884.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
