WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#29: 
This is a PCI device that implements a transport for virtio.  It allows virtio

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#43: FILE: drivers/virtio/Kconfig:10:
+config VIRTIO_PCI
+	tristate "PCI driver for virtio devices (EXPERIMENTAL)"
+	depends on PCI && EXPERIMENTAL
+	select VIRTIO
+	select VIRTIO_RING
+	---help---
+	  This drivers provides support for virtio based paravirtual device
+	  drivers over PCI.  This requires that your VMM has appropriate PCI
+	  virtio backends.  Most QEMU based VMMs should support these devices
+	  (like KVM or Xen).
+
+	  Currently, the ABI is not considered stable so there is no guarantee
+	  that this version of the driver will work with your VMM.
+
+	  If unsure, say M.
+          

Kconfig symbols should have a help text which fully describes
it.

ERROR:TRAILING_WHITESPACE: trailing whitespace
#58: FILE: drivers/virtio/Kconfig:25:
+          $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#68: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#73: FILE: drivers/virtio/virtio_pci.c:1:
+#include <linux/module.h>

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#91: FILE: drivers/virtio/virtio_pci.c:19:
+struct virtio_pci_device
+{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#99: FILE: drivers/virtio/virtio_pci.c:27:
+	spinlock_t lock;

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#104: FILE: drivers/virtio/virtio_pci.c:32:
+struct virtio_pci_vq_info
+{

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#131: FILE: drivers/virtio/virtio_pci.c:59:
+ * would make more sense for virtio to not insist on having it's own device. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#147: FILE: drivers/virtio/virtio_pci.c:75:
+static bool vp_feature(struct virtio_device *vdev, unsigned bit)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#155: FILE: drivers/virtio/virtio_pci.c:83:
+	 * feature bitmask */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#166: FILE: drivers/virtio/virtio_pci.c:94:
+static void vp_get(struct virtio_device *vdev, unsigned offset,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#167: FILE: drivers/virtio/virtio_pci.c:95:
+		   void *buf, unsigned len)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#174: FILE: drivers/virtio/virtio_pci.c:102:
+	 * conversion. */

WARNING:LINE_SPACING: Missing a blank line after declarations
#178: FILE: drivers/virtio/virtio_pci.c:106:
+		u8 val;
+		val = ioread8(ioaddr);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#184: FILE: drivers/virtio/virtio_pci.c:112:
+		u16 val;
+		val = ioread16(ioaddr);

WARNING:LINE_SPACING: Missing a blank line after declarations
#190: FILE: drivers/virtio/virtio_pci.c:118:
+		u32 val;
+		val = ioread32(ioaddr);

WARNING:LINE_SPACING: Missing a blank line after declarations
#196: FILE: drivers/virtio/virtio_pci.c:124:
+		u64 val;
+		val = (u64)ioread32(ioaddr) << 32;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#203: FILE: drivers/virtio/virtio_pci.c:131:
+	 * endianness conversion. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#211: FILE: drivers/virtio/virtio_pci.c:139:
+ * implementation */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#212: FILE: drivers/virtio/virtio_pci.c:140:
+static void vp_set(struct virtio_device *vdev, unsigned offset,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#213: FILE: drivers/virtio/virtio_pci.c:141:
+		   const void *buf, unsigned len)

WARNING:LINE_SPACING: Missing a blank line after declarations
#221: FILE: drivers/virtio/virtio_pci.c:149:
+		u8 val;
+		memcpy(&val, buf, sizeof(val));

WARNING:LINE_SPACING: Missing a blank line after declarations
#227: FILE: drivers/virtio/virtio_pci.c:155:
+		u16 val;
+		memcpy(&val, buf, sizeof(val));

WARNING:LINE_SPACING: Missing a blank line after declarations
#233: FILE: drivers/virtio/virtio_pci.c:161:
+		u32 val;
+		memcpy(&val, buf, sizeof(val));

WARNING:LINE_SPACING: Missing a blank line after declarations
#239: FILE: drivers/virtio/virtio_pci.c:167:
+		u64 val;
+		memcpy(&val, buf, sizeof(val));

WARNING:LINE_SPACING: Missing a blank line after declarations
#254: FILE: drivers/virtio/virtio_pci.c:182:
+	struct virtio_pci_device *vp_dev = to_vp_device(vdev);
+	return ioread8(vp_dev->ioaddr + VIRTIO_PCI_STATUS);

WARNING:LINE_SPACING: Missing a blank line after declarations
#260: FILE: drivers/virtio/virtio_pci.c:188:
+	struct virtio_pci_device *vp_dev = to_vp_device(vdev);
+	return iowrite8(status, vp_dev->ioaddr + VIRTIO_PCI_STATUS);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#270: FILE: drivers/virtio/virtio_pci.c:198:
+	 * signal the other end */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#279: FILE: drivers/virtio/virtio_pci.c:207:
+ * interrupt. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#288: FILE: drivers/virtio/virtio_pci.c:216:
+	 * important to save off the value. */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#306: FILE: drivers/virtio/virtio_pci.c:234:
+static struct virtqueue *vp_find_vq(struct virtio_device *vdev, unsigned index,

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#324: FILE: drivers/virtio/virtio_pci.c:252:
+	 * queue */

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*info)...) over kmalloc(sizeof(struct virtio_pci_vq_info)...)
#325: FILE: drivers/virtio/virtio_pci.c:253:
+	info = kmalloc(sizeof(struct virtio_pci_vq_info), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#333: FILE: drivers/virtio/virtio_pci.c:261:
+	 * location to the host */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!info->pages"
#337: FILE: drivers/virtio/virtio_pci.c:265:
+	if (info->pages == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!info->queue"
#344: FILE: drivers/virtio/virtio_pci.c:272:
+	if (info->queue == NULL) {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#352: FILE: drivers/virtio/virtio_pci.c:280:
+^I^I  $

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#412: FILE: drivers/virtio/virtio_pci.c:340:
+static int __devinit virtio_pci_probe(struct pci_dev *pci_dev,

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*vp_dev)...) over kzalloc(sizeof(struct virtio_pci_device)...)
#419: FILE: drivers/virtio/virtio_pci.c:347:
+	vp_dev = kzalloc(sizeof(struct virtio_pci_device), GFP_KERNEL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!vp_dev"
#420: FILE: drivers/virtio/virtio_pci.c:348:
+	if (vp_dev == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!vp_dev->ioaddr"
#440: FILE: drivers/virtio/virtio_pci.c:368:
+	if (vp_dev->ioaddr == NULL)

WARNING:TYPO_SPELLING: 'subsytem' may be misspelled - perhaps 'subsystem'?
#448: FILE: drivers/virtio/virtio_pci.c:376:
+	 * the subsytem ids */
 	       ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#448: FILE: drivers/virtio/virtio_pci.c:376:
+	 * the subsytem ids */

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#479: FILE: drivers/virtio/virtio_pci.c:407:
+static void __devexit virtio_pci_remove(struct pci_dev *pci_dev)

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#548: FILE: include/linux/virtio_pci.h:1:
+#ifndef _LINUX_VIRTIO_PCI_H

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#576: FILE: include/linux/virtio_pci.h:29:
+ * a read-and-acknowledge. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#580: FILE: include/linux/virtio_pci.h:33:
+ * configuration space */

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000359975.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 4 errors, 37 warnings, 7 checks, 528 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000359975.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
