WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#41: 
  - others? please email me (dev@jaysonking.com) if you have problems with this port

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#239: FILE: include/linux/sched.h:246:
+extern int grunqueue_is_locked(void);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#462: FILE: include/linux/sched.h:1606:
+extern void sched_exit(struct task_struct *p);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#539: FILE: init/main.c:803:
+	printk(KERN_INFO"Running BFS CPU scheduler v0.302 by Con Kolivas.\n");

CHECK:CONCATENATED_STRING: Concatenated strings should use spaces between elements
#539: FILE: init/main.c:803:
+	printk(KERN_INFO"Running BFS CPU scheduler v0.302 by Con Kolivas.\n");

Concatenated elements should have a space in between.
Example::

  printk(KERN_INFO"bar");

should be::

  printk(KERN_INFO "bar");

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#681: FILE: kernel/posix-cpu-timers.c:1023:
+		    tsk->rt_timeout > DIV_ROUND_UP(hard, USEC_PER_SEC/HZ)) {
 		                                                     ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#690: FILE: kernel/posix-cpu-timers.c:1031:
+		if (tsk->rt_timeout > DIV_ROUND_UP(*soft, USEC_PER_SEC/HZ)) {
 		                                                      ^

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#725: FILE: kernel/sched_bfs.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#726: FILE: kernel/sched_bfs.c:2:
+ *  kernel/sched_bfs.c, was sched.c

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#759: FILE: kernel/sched_bfs.c:35:
+#include <asm/uaccess.h>

WARNING:INCLUDE_LINUX: Use #include <linux/mmu_context.h> instead of <asm/mmu_context.h>
#762: FILE: kernel/sched_bfs.c:38:
+#include <asm/mmu_context.h>

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'policy' - possible side-effects?
#802: FILE: kernel/sched_bfs.c:78:
+#define is_rt_policy(policy)	((policy) == SCHED_FIFO || \
+					(policy) == SCHED_RR)

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#824: FILE: kernel/sched_bfs.c:100:
+#define USER_PRIO(p)		((p)-MAX_RT_PRIO)
                     		    ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#827: FILE: kernel/sched_bfs.c:103:
+#define SCHED_PRIO(p)		((p)+MAX_RT_PRIO)
                      		    ^

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#883: FILE: kernel/sched_bfs.c:159:
+	spinlock_t lock;

CHECK:MACRO_ARG_REUSE: Macro argument reuse '__sd' - possible side-effects?
#1012: FILE: kernel/sched_bfs.c:288:
+#define for_each_domain(cpu, __sd) \
+	for (__sd = rcu_dereference(cpu_rq(cpu)->sd); __sd; __sd = __sd->parent)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1100: FILE: kernel/sched_bfs.c:376:
+	struct rq *rq = task_grq_lock(p, flags);
+	update_rq_clock(rq);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#1115: FILE: kernel/sched_bfs.c:391:
+	struct rq *rq = task_grq_lock_irq(p);
+	update_rq_clock(rq);

WARNING:USE_LOCKDEP: Where possible, use lockdep_assert_held instead of assertions based on spin_is_locked
#1139: FILE: kernel/sched_bfs.c:415:
+	return spin_is_locked(&grq.lock);

lockdep_assert_held() annotations should be preferred over
assertions based on spin_is_locked()

See: https://www.kernel.org/doc/html/latest/locking/lockdep-design.html#annotations

WARNING:MEMORY_BARRIER: memory barrier without comment
#1196: FILE: kernel/sched_bfs.c:472:
+	smp_wmb();

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1249: FILE: kernel/sched_bfs.c:525:
+		if ((idleprio_task(p) && idleprio_suitable(p)) ||
+		   (iso_task(p) && isoprio_suitable()))

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1310: FILE: kernel/sched_bfs.c:586:
+	return (cpus_intersects(p->cpus_allowed, grq.cpu_idle_map));

return is not a function and as such doesn't need parentheses::

  return (bar);

can simply be::

  return bar;

WARNING:TYPO_SPELLING: 'successfuly' may be misspelled - perhaps 'successfully'?
#1464: FILE: kernel/sched_bfs.c:740:
+	 * successfuly executed on another CPU. We must ensure that updates of
 	   ^^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:BRACES: braces {} should be used on all arms of this statement
#1489: FILE: kernel/sched_bfs.c:765:
+	if (deactivate)
[...]
+	else {
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1491: FILE: kernel/sched_bfs.c:767:
+	else {

WARNING:TYPO_SPELLING: 'doesnt' may be misspelled - perhaps 'doesn't'?
#1676: FILE: kernel/sched_bfs.c:952:
+ * NOTE: this function doesnt have to take the runqueue lock,
                        ^^^^^^

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'cpu != smp_processor_id()'
#1688: FILE: kernel/sched_bfs.c:964:
+	if ((cpu != smp_processor_id()) && task_curr(p))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1730: FILE: kernel/sched_bfs.c:1006:
+		if (rq_prio > highest_prio || (rq_prio == highest_prio &&
+		    (time_after(offset_deadline, latest_deadline) ||

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1739: FILE: kernel/sched_bfs.c:1015:
+	if (p->prio > highest_prio || (p->policy == SCHED_NORMAL &&
+	    p->prio == highest_prio && !time_before(p->deadline, latest_deadline)))

ERROR:CODE_INDENT: code indent should use tabs where possible
#1740: FILE: kernel/sched_bfs.c:1016:
+^I    ^Ireturn;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1740: FILE: kernel/sched_bfs.c:1016:
+^I    ^Ireturn;$

WARNING:RETURN_VOID: void function return statements are not generally useful
#1745: FILE: kernel/sched_bfs.c:1021:
+	return;
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1796: FILE: kernel/sched_bfs.c:1072:
+	trace_mark(kernel_sched_wakeup,
+		"pid %d state %ld ## rq %p task %p rq->curr %p",

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1848: FILE: kernel/sched_bfs.c:1124:
+	p->sched_time = p->stime_pc = p->utime_pc = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:SPACING: space prohibited before semicolon
#1904: FILE: kernel/sched_bfs.c:1180:
+	rq = task_grq_lock(p, &flags); ;

WARNING:ONE_SEMICOLON: Statements terminations use 1 semicolon
#1904: FILE: kernel/sched_bfs.c:1180:
+	rq = task_grq_lock(p, &flags); ;

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1906: FILE: kernel/sched_bfs.c:1182:
+	BUG_ON(p->state != TASK_RUNNING);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1910: FILE: kernel/sched_bfs.c:1186:
+	trace_mark(kernel_sched_wakeup_new,
+		"pid %d state %ld ## rq %p task %p rq->curr %p",

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 24)
#1912: FILE: kernel/sched_bfs.c:1188:
+	if (!(clone_flags & CLONE_VM) && rq->curr == parent &&
[...]
+			resched_task(parent);

CHECK:BRACES: braces {} should be used on all arms of this statement
#1912: FILE: kernel/sched_bfs.c:1188:
+	if (!(clone_flags & CLONE_VM) && rq->curr == parent &&
[...]
+	} else
[...]

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1913: FILE: kernel/sched_bfs.c:1189:
+	if (!(clone_flags & CLONE_VM) && rq->curr == parent &&
+		!suitable_idle_cpus(p)) {

CHECK:BRACES: Unbalanced braces around else statement
#1920: FILE: kernel/sched_bfs.c:1196:
+	} else

WARNING:REPEATED_WORD: Possible repeated word: 'being'
#1964: FILE: kernel/sched_bfs.c:1240:
+ * preempt_notifier_register - tell me when current is being being preempted & rescheduled

ERROR:CODE_INDENT: code indent should use tabs where possible
#2085: FILE: kernel/sched_bfs.c:1361:
+^I ^I */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2085: FILE: kernel/sched_bfs.c:1361:
+^I ^I */$

WARNING:TYPO_SPELLING: 'reenable' may be misspelled - perhaps 're-enable'?
#2102: FILE: kernel/sched_bfs.c:1378:
+	/* In this case, finish_task_switch does not reenable preemption */
 	                                             ^^^^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2121: FILE: kernel/sched_bfs.c:1397:
+	trace_mark(kernel_sched_schedule,
+		"prev_pid %d next_pid %d prev_state %ld "

WARNING:SPLIT_STRING: quoted string split across lines
#2122: FILE: kernel/sched_bfs.c:1398:
+		"prev_pid %d next_pid %d prev_state %ld "
+		"## rq %p prev %p next %p",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:BRACES: braces {} should be used on all arms of this statement
#2134: FILE: kernel/sched_bfs.c:1410:
+	if (unlikely(!mm)) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#2138: FILE: kernel/sched_bfs.c:1414:
+	} else

CHECK:BRACES: braces {} should be used on all arms of this statement
#2267: FILE: kernel/sched_bfs.c:1543:
+	if (hardirq_count() - hardirq_offset)
[...]
+	else if (softirq_count()) {
[...]
+	} else {
[...]

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'NS' may be better as '(NS)' to avoid precedence issues
#2317: FILE: kernel/sched_bfs.c:1593:
+#define NS_TO_PC(NS)	(NS * 100 / JIFFIES_TO_NS(1))

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2375: FILE: kernel/sched_bfs.c:1651:
+	rq->rq_last_ran = rq->timekeep_clock = rq->clock;

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#2447: FILE: kernel/sched_bfs.c:1723:
+{
+

WARNING:TYPO_SPELLING: 'alloted' may be misspelled - perhaps 'allotted'?
#2525: FILE: kernel/sched_bfs.c:1801:
+ * Test if SCHED_ISO tasks have run longer than their alloted period as RT
                                                       ^^^^^^^

CHECK:BRACES: braces {} should be used on all arms of this statement
#2576: FILE: kernel/sched_bfs.c:1852:
+	if ((rt_queue(rq) || (iso_queue(rq) && !grq.iso_refractory))) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#2579: FILE: kernel/sched_bfs.c:1855:
+	} else

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'val < PREEMPT_MASK'
#2674: FILE: kernel/sched_bfs.c:1950:
+	if (DEBUG_LOCKS_WARN_ON((val < PREEMPT_MASK) &&
+			!(preempt_count() & PREEMPT_MASK)))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2675: FILE: kernel/sched_bfs.c:1951:
+	if (DEBUG_LOCKS_WARN_ON((val < PREEMPT_MASK) &&
+			!(preempt_count() & PREEMPT_MASK)))

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2810: FILE: kernel/sched_bfs.c:2086:
+	printk(KERN_ERR "BUG: scheduling while atomic: %s/%d/0x%08x\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2811: FILE: kernel/sched_bfs.c:2087:
+	printk(KERN_ERR "BUG: scheduling while atomic: %s/%d/0x%08x\n",
+		prev->comm, prev->pid, preempt_count());

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2919: FILE: kernel/sched_bfs.c:2195:
+		if (unlikely(!cpus_intersects(prev->cpus_allowed,
+		    cpumask_of_cpu(cpu))))

ERROR:CODE_INDENT: code indent should use tabs where possible
#2920: FILE: kernel/sched_bfs.c:2196:
+^I^I    ^Iresched_suitable_idle(prev);$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2920: FILE: kernel/sched_bfs.c:2196:
+^I^I    ^Iresched_suitable_idle(prev);$

CHECK:BRACES: braces {} should be used on all arms of this statement
#2940: FILE: kernel/sched_bfs.c:2216:
+	if (likely(prev != next)) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#2958: FILE: kernel/sched_bfs.c:2234:
+	} else

ERROR:CODE_INDENT: code indent should use tabs where possible
#2965: FILE: kernel/sched_bfs.c:2241:
+ ^I^Igoto need_resched;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2965: FILE: kernel/sched_bfs.c:2241:
+ ^I^Igoto need_resched;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#2965: FILE: kernel/sched_bfs.c:2241:
+ ^I^Igoto need_resched;$

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#3011: FILE: kernel/sched_bfs.c:2287:
+	BUG_ON(ti->preempt_count || !irqs_disabled());

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#3030: FILE: kernel/sched_bfs.c:2306:
+int default_wake_function(wait_queue_t *curr, unsigned mode, int sync,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3047: FILE: kernel/sched_bfs.c:2323:
+void __wake_up_common(wait_queue_head_t *q, unsigned int mode,
+			     int nr_exclusive, int sync, void *key)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#3053: FILE: kernel/sched_bfs.c:2329:
+		unsigned flags = curr->flags;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3056: FILE: kernel/sched_bfs.c:2332:
+		if (curr->func(curr, mode, sync, key) &&
+				(flags & WQ_FLAG_EXCLUSIVE) && !--nr_exclusive)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3072: FILE: kernel/sched_bfs.c:2348:
+void __wake_up(wait_queue_head_t *q, unsigned int mode,
+			int nr_exclusive, void *key)

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#3136: FILE: kernel/sched_bfs.c:2412:
+	x->done += UINT_MAX/2;
 	                   ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#3198: FILE: kernel/sched_bfs.c:2474:
+	long t = wait_for_common(x, MAX_SCHEDULE_TIMEOUT, TASK_INTERRUPTIBLE);
+	if (t == -ERESTARTSYS)

WARNING:LINE_SPACING: Missing a blank line after declarations
#3215: FILE: kernel/sched_bfs.c:2491:
+	long t = wait_for_common(x, MAX_SCHEDULE_TIMEOUT, TASK_KILLABLE);
+	if (t == -ERESTARTSYS)

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#3331: FILE: kernel/sched_bfs.c:2607:
+	BUG_ON(prio < 0 || prio > MAX_PRIO);

WARNING:TYPO_SPELLING: 'wont' may be misspelled - perhaps 'won't'?
#3378: FILE: kernel/sched_bfs.c:2654:
+	 * it wont have any effect on scheduling until the task is
 	      ^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#3529: FILE: kernel/sched_bfs.c:2805:
+	BUG_ON(task_queued(p));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3547: FILE: kernel/sched_bfs.c:2823:
+static int __sched_setscheduler(struct task_struct *p, int policy,
+		       struct sched_param *param, bool user)

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#3555: FILE: kernel/sched_bfs.c:2831:
+	BUG_ON(in_interrupt());

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#3577: FILE: kernel/sched_bfs.c:2853:
+		policy = oldpolicy = p->policy;

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#3586: FILE: kernel/sched_bfs.c:2862:
+	    (p->mm && param->sched_priority > MAX_USER_RT_PRIO-1) ||
 	                                                      ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#3587: FILE: kernel/sched_bfs.c:2863:
+	    (!p->mm && param->sched_priority > MAX_RT_PRIO-1))
 	                                                  ^

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'param->sched_priority != 0'
#3589: FILE: kernel/sched_bfs.c:2865:
+	if (is_rt_policy(policy) != (param->sched_priority != 0))

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#3606: FILE: kernel/sched_bfs.c:2882:
+			switch (p->policy) {
[...]
+				case SCHED_ISO:
[...]
+				case SCHED_BATCH:
[...]
+				case SCHED_IDLEPRIO:
[...]
+				default:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

ERROR:CODE_INDENT: code indent should use tabs where possible
#3621: FILE: kernel/sched_bfs.c:2897:
+^I^I^I^I^I    ^Ireturn -EPERM;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3621: FILE: kernel/sched_bfs.c:2897:
+^I^I^I^I^I    ^Ireturn -EPERM;$

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'current->euid != p->euid'
#3633: FILE: kernel/sched_bfs.c:2909:
+		if ((current->euid != p->euid) &&
+		    (current->euid != p->uid))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'current->euid != p->uid'
#3633: FILE: kernel/sched_bfs.c:2909:
+		if ((current->euid != p->euid) &&
+		    (current->euid != p->uid))

WARNING:TYPO_SPELLING: 'apropriate' may be misspelled - perhaps 'appropriate'?
#3647: FILE: kernel/sched_bfs.c:2923:
+	 * To be able to change p->policy safely, the apropriate
 	                                              ^^^^^^^^^^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#3655: FILE: kernel/sched_bfs.c:2931:
+		policy = oldpolicy = -1;

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#3689: FILE: kernel/sched_bfs.c:2965:
+EXPORT_SYMBOL_GPL(sched_setscheduler);

EXPORT_SYMBOL should immediately follow the symbol to be exported.

WARNING:LONG_LINE_COMMENT: line length of 109 exceeds 100 columns
#3692: FILE: kernel/sched_bfs.c:2968:
+ * sched_setscheduler_nocheck - change the scheduling policy and/or RT priority of a thread from kernelspace.

A comment starts before but extends beyond the maximum line length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "p"
#3723: FILE: kernel/sched_bfs.c:2999:
+	if (p != NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'current->euid != p->euid'
#3848: FILE: kernel/sched_bfs.c:3124:
+	if ((current->euid != p->euid) && (current->euid != p->uid) &&
+			!capable(CAP_SYS_NICE))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'current->euid != p->uid'
#3848: FILE: kernel/sched_bfs.c:3124:
+	if ((current->euid != p->euid) && (current->euid != p->uid) &&
+			!capable(CAP_SYS_NICE))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3849: FILE: kernel/sched_bfs.c:3125:
+	if ((current->euid != p->euid) && (current->euid != p->uid) &&
+			!capable(CAP_SYS_NICE))

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#3879: FILE: kernel/sched_bfs.c:3155:
+static int get_user_cpu_mask(unsigned long __user *user_mask_ptr, unsigned len,

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#3882: FILE: kernel/sched_bfs.c:3158:
+	if (len < sizeof(cpumask_t)) {
[...]
+	} else if (len > sizeof(cpumask_t)) {
[...]

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4015: FILE: kernel/sched_bfs.c:3291:
+	if (need_resched() && !(preempt_count() & PREEMPT_ACTIVE) &&
+					system_state == SYSTEM_RUNNING) {

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#4051: FILE: kernel/sched_bfs.c:3327:
+	BUG_ON(!in_softirq());

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#4122: FILE: kernel/sched_bfs.c:3398:
+		ret = MAX_USER_RT_PRIO-1;
 		                      ^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#4204: FILE: kernel/sched_bfs.c:3480:
+	unsigned state;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#4207: FILE: kernel/sched_bfs.c:3483:
+	printk(KERN_INFO "%-13.13s %c", p->comm,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4208: FILE: kernel/sched_bfs.c:3484:
+	printk(KERN_INFO "%-13.13s %c", p->comm,
+		state < sizeof(stat_nam) - 1 ? stat_nam[state] : '?');

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4211: FILE: kernel/sched_bfs.c:3487:
+		printk(KERN_CONT " running  ");

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4211: FILE: kernel/sched_bfs.c:3487:
+		printk(KERN_CONT " running  ");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4213: FILE: kernel/sched_bfs.c:3489:
+		printk(KERN_CONT " %08lx ", thread_saved_pc(p));

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4213: FILE: kernel/sched_bfs.c:3489:
+		printk(KERN_CONT " %08lx ", thread_saved_pc(p));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4216: FILE: kernel/sched_bfs.c:3492:
+		printk(KERN_CONT "  running task    ");

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4216: FILE: kernel/sched_bfs.c:3492:
+		printk(KERN_CONT "  running task    ");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4218: FILE: kernel/sched_bfs.c:3494:
+		printk(KERN_CONT " %016lx ", thread_saved_pc(p));

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4218: FILE: kernel/sched_bfs.c:3494:
+		printk(KERN_CONT " %016lx ", thread_saved_pc(p));

WARNING:LINE_SPACING: Missing a blank line after declarations
#4223: FILE: kernel/sched_bfs.c:3499:
+		unsigned long *n = end_of_stack(p);
+		while (!*n)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4228: FILE: kernel/sched_bfs.c:3504:
+	printk(KERN_CONT "%5lu %5d %6d\n", free,

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4228: FILE: kernel/sched_bfs.c:3504:
+	printk(KERN_CONT "%5lu %5d %6d\n", free,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4229: FILE: kernel/sched_bfs.c:3505:
+	printk(KERN_CONT "%5lu %5d %6d\n", free,
+		task_pid_nr(p), task_pid_nr(p->real_parent));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#4239: FILE: kernel/sched_bfs.c:3515:
+	printk(KERN_INFO

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#4242: FILE: kernel/sched_bfs.c:3518:
+	printk(KERN_INFO

WARNING:TYPO_SPELLING: 'alot' may be misspelled - perhaps 'a lot'?
#4249: FILE: kernel/sched_bfs.c:3525:
+		 * console might take alot of time:
 		                      ^^^^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#4287: FILE: kernel/sched_bfs.c:3563:
+	rq->curr = rq->idle = idle;

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#4356: FILE: kernel/sched_bfs.c:3632:
+				BUG();

CHECK:BRACES: braces {} should be used on all arms of this statement
#4367: FILE: kernel/sched_bfs.c:3643:
+		if (atomic_read(&nohz.load_balancer) == -1) {
[...]
+		} else if (atomic_read(&nohz.load_balancer) == cpu)
[...]

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#4381: FILE: kernel/sched_bfs.c:3657:
+				BUG();

CHECK:BRACES: braces {} should be used on all arms of this statement
#4469: FILE: kernel/sched_bfs.c:3745:
+	if (task_running(p)) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#4473: FILE: kernel/sched_bfs.c:3749:
+	} else

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#4501: FILE: kernel/sched_bfs.c:3777:
+	BUG_ON(cpu_online(this_cpu));

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#4525: FILE: kernel/sched_bfs.c:3801:
+	BUG_ON(cpu_online(smp_processor_id()));

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!entry->proc_handler"
#4575: FILE: kernel/sched_bfs.c:3851:
+		if (entry->proc_handler == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!table"
#4600: FILE: kernel/sched_bfs.c:3876:
+	if (table == NULL)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4604: FILE: kernel/sched_bfs.c:3880:
+	set_table_entry(&table[0], "min_interval", &sd->min_interval,
+		sizeof(long), 0644, proc_doulongvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4606: FILE: kernel/sched_bfs.c:3882:
+	set_table_entry(&table[1], "max_interval", &sd->max_interval,
+		sizeof(long), 0644, proc_doulongvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4608: FILE: kernel/sched_bfs.c:3884:
+	set_table_entry(&table[2], "busy_idx", &sd->busy_idx,
+		sizeof(int), 0644, proc_dointvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4610: FILE: kernel/sched_bfs.c:3886:
+	set_table_entry(&table[3], "idle_idx", &sd->idle_idx,
+		sizeof(int), 0644, proc_dointvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4612: FILE: kernel/sched_bfs.c:3888:
+	set_table_entry(&table[4], "newidle_idx", &sd->newidle_idx,
+		sizeof(int), 0644, proc_dointvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4614: FILE: kernel/sched_bfs.c:3890:
+	set_table_entry(&table[5], "wake_idx", &sd->wake_idx,
+		sizeof(int), 0644, proc_dointvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4616: FILE: kernel/sched_bfs.c:3892:
+	set_table_entry(&table[6], "forkexec_idx", &sd->forkexec_idx,
+		sizeof(int), 0644, proc_dointvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4618: FILE: kernel/sched_bfs.c:3894:
+	set_table_entry(&table[7], "busy_factor", &sd->busy_factor,
+		sizeof(int), 0644, proc_dointvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4620: FILE: kernel/sched_bfs.c:3896:
+	set_table_entry(&table[8], "imbalance_pct", &sd->imbalance_pct,
+		sizeof(int), 0644, proc_dointvec_minmax);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4622: FILE: kernel/sched_bfs.c:3898:
+	set_table_entry(&table[9], "cache_nice_tries",
+		&sd->cache_nice_tries,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4625: FILE: kernel/sched_bfs.c:3901:
+	set_table_entry(&table[10], "flags", &sd->flags,
+		sizeof(int), 0644, proc_dointvec_minmax);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#4640: FILE: kernel/sched_bfs.c:3916:
+	entry = table = sd_alloc_ctl_entry(domain_num + 1);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!table"
#4641: FILE: kernel/sched_bfs.c:3917:
+	if (table == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!entry"
#4666: FILE: kernel/sched_bfs.c:3942:
+	if (entry == NULL)

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#4694: FILE: kernel/sched_bfs.c:3970:
+}
+static void unregister_sched_domain_sysctl(void)

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#4794: FILE: kernel/sched_bfs.c:4070:
+	switch (action) {
+

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#4805: FILE: kernel/sched_bfs.c:4081:
+			BUG_ON(!cpu_isset(cpu, rq->rd->span));

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#4841: FILE: kernel/sched_bfs.c:4117:
+			BUG_ON(!cpu_isset(cpu, rq->rd->span));

WARNING:MISPLACED_INIT: __cpuinitdata should be placed after migration_notifier
#4854: FILE: kernel/sched_bfs.c:4130:
+static struct notifier_block __cpuinitdata migration_notifier = {

It is possible to use section markers on variables in a way
which gcc doesn't understand (or at least not the way the
developer intended)::

  static struct __initdata samsung_pll_clock exynos4_plls[nr_plls] = {

does not put exynos4_plls in the .initdata section. The __initdata
marker can be virtually anywhere on the line, except right after
"struct". The preferred location is before the "=" sign if there is
one, or before the trailing ";" otherwise.

See: https://lore.kernel.org/lkml/1377655732.3619.19.camel@joe-AO722/

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#4866: FILE: kernel/sched_bfs.c:4142:
+	BUG_ON(err == NOTIFY_BAD);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#4903: FILE: kernel/sched_bfs.c:4179:
+
+	}

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4916: FILE: kernel/sched_bfs.c:4192:
+	printk(KERN_DEBUG "%*s domain %d: ", level, "", level);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#4919: FILE: kernel/sched_bfs.c:4195:
+		printk("does not load-balance\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4921: FILE: kernel/sched_bfs.c:4197:
+			printk(KERN_ERR "ERROR: !SD_LOAD_BALANCE domain"

WARNING:SPLIT_STRING: quoted string split across lines
#4922: FILE: kernel/sched_bfs.c:4198:
+			printk(KERN_ERR "ERROR: !SD_LOAD_BALANCE domain"
+					" has parent");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4926: FILE: kernel/sched_bfs.c:4202:
+	printk(KERN_CONT "span %s level %s\n",

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4926: FILE: kernel/sched_bfs.c:4202:
+	printk(KERN_CONT "span %s level %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4927: FILE: kernel/sched_bfs.c:4203:
+	printk(KERN_CONT "span %s level %s\n",
+		str, sd_level_to_string(sd->level));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4930: FILE: kernel/sched_bfs.c:4206:
+		printk(KERN_ERR "ERROR: domain->span does not contain "

WARNING:SPLIT_STRING: quoted string split across lines
#4931: FILE: kernel/sched_bfs.c:4207:
+		printk(KERN_ERR "ERROR: domain->span does not contain "
+				"CPU%d\n", cpu);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4934: FILE: kernel/sched_bfs.c:4210:
+		printk(KERN_ERR "ERROR: domain->groups does not contain"

WARNING:SPLIT_STRING: quoted string split across lines
#4935: FILE: kernel/sched_bfs.c:4211:
+		printk(KERN_ERR "ERROR: domain->groups does not contain"
+				" CPU%d\n", cpu);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4938: FILE: kernel/sched_bfs.c:4214:
+	printk(KERN_DEBUG "%*s groups:", level + 1, "");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#4941: FILE: kernel/sched_bfs.c:4217:
+			printk("\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4942: FILE: kernel/sched_bfs.c:4218:
+			printk(KERN_ERR "ERROR: group is NULL\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4947: FILE: kernel/sched_bfs.c:4223:
+			printk(KERN_CONT "\n");

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4947: FILE: kernel/sched_bfs.c:4223:
+			printk(KERN_CONT "\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4948: FILE: kernel/sched_bfs.c:4224:
+			printk(KERN_ERR "ERROR: domain->cpu_power not "

WARNING:SPLIT_STRING: quoted string split across lines
#4949: FILE: kernel/sched_bfs.c:4225:
+			printk(KERN_ERR "ERROR: domain->cpu_power not "
+					"set\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4954: FILE: kernel/sched_bfs.c:4230:
+			printk(KERN_CONT "\n");

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4954: FILE: kernel/sched_bfs.c:4230:
+			printk(KERN_CONT "\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4955: FILE: kernel/sched_bfs.c:4231:
+			printk(KERN_ERR "ERROR: empty group\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4960: FILE: kernel/sched_bfs.c:4236:
+			printk(KERN_CONT "\n");

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4960: FILE: kernel/sched_bfs.c:4236:
+			printk(KERN_CONT "\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4961: FILE: kernel/sched_bfs.c:4237:
+			printk(KERN_ERR "ERROR: repeated CPUs\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4968: FILE: kernel/sched_bfs.c:4244:
+		printk(KERN_CONT " %s", str);

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4968: FILE: kernel/sched_bfs.c:4244:
+		printk(KERN_CONT " %s", str);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_cont([subsystem]dev, ... then dev_cont(dev, ... then pr_cont(...  to printk(KERN_CONT ...
#4972: FILE: kernel/sched_bfs.c:4248:
+	printk(KERN_CONT "\n");

WARNING:LOGGING_CONTINUATION: Avoid logging continuation uses where feasible
#4972: FILE: kernel/sched_bfs.c:4248:
+	printk(KERN_CONT "\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4975: FILE: kernel/sched_bfs.c:4251:
+		printk(KERN_ERR "ERROR: groups don't span domain->span\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4978: FILE: kernel/sched_bfs.c:4254:
+		printk(KERN_ERR "ERROR: parent span is not a superset "

WARNING:SPLIT_STRING: quoted string split across lines
#4979: FILE: kernel/sched_bfs.c:4255:
+		printk(KERN_ERR "ERROR: parent span is not a superset "
+			"of domain->span\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4989: FILE: kernel/sched_bfs.c:4265:
+		printk(KERN_DEBUG "CPU%d attaching NULL sched-domain.\n", cpu);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4993: FILE: kernel/sched_bfs.c:4269:
+	printk(KERN_DEBUG "CPU%d attaching sched-domain:\n", cpu);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4997: FILE: kernel/sched_bfs.c:4273:
+		printk(KERN_DEBUG "Cannot load-balance (out of memory)\n");

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#4997: FILE: kernel/sched_bfs.c:4273:
+	if (!groupmask) {
+		printk(KERN_DEBUG "Cannot load-balance (out of memory)\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#5139: FILE: kernel/sched_bfs.c:4415:
+		struct sched_domain *parent = tmp->parent;
+		if (!parent)

WARNING:MISPLACED_INIT: __initdata should be placed after ints[NR_CPUS]
#5166: FILE: kernel/sched_bfs.c:4442:
+	static int __initdata ints[NR_CPUS];

WARNING:NR_CPUS: usage of NR_CPUS is often wrong - consider using cpu_possible(), num_possible_cpus(), for_each_possible_cpu(), etc
#5172: FILE: kernel/sched_bfs.c:4448:
+		if (ints[i] < NR_CPUS)

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#5177: FILE: kernel/sched_bfs.c:4453:
+__setup("isolcpus=", isolated_cpu_setup);

WARNING:LINE_SPACING: Missing a blank line after declarations
#5284: FILE: kernel/sched_bfs.c:4560:
+	nodemask_t used_nodes;
+	node_to_cpumask_ptr(nodemask, node);

CHECK:ASSIGNMENT_CONTINUATIONS: Assignment operator '=' should be on the previous line
#5439: FILE: kernel/sched_bfs.c:4715:
+		struct sched_group **sched_group_nodes
+			= sched_group_nodes_bycpu[cpu];

Assignment operators should not be written at the start of a
line but should follow the operand at the previous line.

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!sg"
#5452: FILE: kernel/sched_bfs.c:4728:
+			if (sg == NULL)

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#5540: FILE: kernel/sched_bfs.c:4816:
+ SD_INIT_FUNC(ALLNODES)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#5541: FILE: kernel/sched_bfs.c:4817:
+ SD_INIT_FUNC(NODE)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#5544: FILE: kernel/sched_bfs.c:4820:
+ SD_INIT_FUNC(SIBLING)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#5547: FILE: kernel/sched_bfs.c:4823:
+ SD_INIT_FUNC(MC)$

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'v' may be better as '(v)' to avoid precedence issues
#5574: FILE: kernel/sched_bfs.c:4850:
+#define	SCHED_CPUMASK_DECLARE(v)	struct allmasks *v

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'v' may be better as '(v)' to avoid precedence issues
#5578: FILE: kernel/sched_bfs.c:4854:
+#define	SCHED_CPUMASK_DECLARE(v)	struct allmasks _v, *v = &_v

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#5581: FILE: kernel/sched_bfs.c:4857:
+#define^ISCHED_CPUMASK_VAR(v, a) ^Icpumask_t *v = (cpumask_t *) \$

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'v' - possible side-effects?
#5581: FILE: kernel/sched_bfs.c:4857:
+#define	SCHED_CPUMASK_VAR(v, a) 	cpumask_t *v = (cpumask_t *) \
+			((unsigned long)(a) + offsetof(struct allmasks, v))

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'v' may be better as '(v)' to avoid precedence issues
#5581: FILE: kernel/sched_bfs.c:4857:
+#define	SCHED_CPUMASK_VAR(v, a) 	cpumask_t *v = (cpumask_t *) \
+			((unsigned long)(a) + offsetof(struct allmasks, v))

WARNING:CONSIDER_KSTRTO: simple_strtoul is obsolete, use kstrtoul instead
#5590: FILE: kernel/sched_bfs.c:4866:
+	val = simple_strtoul(str, NULL, 0);

The simple_strtol(), simple_strtoll(), simple_strtoul(), and
simple_strtoull() functions explicitly ignore overflows, which
may lead to unexpected results in callers.  The respective kstrtol(),
kstrtoll(), kstrtoul(), and kstrtoull() functions tend to be the
correct replacements.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#simple-strtol-simple-strtoll-simple-strtoul-simple-strtoull

CHECK:UNDOCUMENTED_SETUP: __setup appears un-documented -- check Documentation/admin-guide/kernel-parameters.txt
#5596: FILE: kernel/sched_bfs.c:4872:
+__setup("relax_domain_level=", setup_relax_domain_level);

CHECK:BRACES: braces {} should be used on all arms of this statement
#5603: FILE: kernel/sched_bfs.c:4879:
+	if (!attr || attr->relax_domain_level < 0) {
[...]
+	} else
[...]

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#5606: FILE: kernel/sched_bfs.c:4882:
+			return;
+		else

CHECK:BRACES: Unbalanced braces around else statement
#5608: FILE: kernel/sched_bfs.c:4884:
+	} else

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#5612: FILE: kernel/sched_bfs.c:4888:
+		sd->flags &= ~(SD_WAKE_IDLE|SD_BALANCE_NEWIDLE);
 		                           ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#5615: FILE: kernel/sched_bfs.c:4891:
+		sd->flags |= (SD_WAKE_IDLE_FAR|SD_BALANCE_NEWIDLE);
 		                              ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#5628: FILE: kernel/sched_bfs.c:4904:
+	struct root_domain *rd;
+	SCHED_CPUMASK_DECLARE(allmasks);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#5640: FILE: kernel/sched_bfs.c:4916:
+		printk(KERN_WARNING "Can not alloc sched group node list\n");

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#5640: FILE: kernel/sched_bfs.c:4916:
+	if (!sched_group_nodes) {
+		printk(KERN_WARNING "Can not alloc sched group node list\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#5647: FILE: kernel/sched_bfs.c:4923:
+		printk(KERN_WARNING "Cannot alloc root domain\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#5658: FILE: kernel/sched_bfs.c:4934:
+		printk(KERN_WARNING "Cannot alloc cpumask array\n");

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#5658: FILE: kernel/sched_bfs.c:4934:
+	if (!allmasks) {
+		printk(KERN_WARNING "Cannot alloc cpumask array\n");

CHECK:LINE_SPACING: Please don't use multiple blank lines
#5668: FILE: kernel/sched_bfs.c:4944:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#5678: FILE: kernel/sched_bfs.c:4954:
+		struct sched_domain *sd = NULL, *p;
+		SCHED_CPUMASK_VAR(nodemask, allmasks);

CHECK:BRACES: braces {} should be used on all arms of this statement
#5684: FILE: kernel/sched_bfs.c:4960:
+		if (cpus_weight(*cpu_map) >
[...]
+		} else
[...]

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#5685: FILE: kernel/sched_bfs.c:4961:
+				SD_NODES_PER_DOMAIN*cpus_weight(*nodemask)) {
 				                   ^

CHECK:BRACES: Unbalanced braces around else statement
#5693: FILE: kernel/sched_bfs.c:4969:
+		} else

WARNING:LINE_SPACING: Missing a blank line after declarations
#5803: FILE: kernel/sched_bfs.c:5079:
+		struct sched_group *sg, *prev;
+		SCHED_CPUMASK_VAR(nodemask, allmasks);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc_node(sizeof(*sg)...) over kmalloc_node(sizeof(struct sched_group)...)
#5820: FILE: kernel/sched_bfs.c:5096:
+		sg = kmalloc_node(sizeof(struct sched_group), GFP_KERNEL, i);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#5822: FILE: kernel/sched_bfs.c:5098:
+			printk(KERN_WARNING "Can not alloc domain group for "

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#5822: FILE: kernel/sched_bfs.c:5098:
+		if (!sg) {
+			printk(KERN_WARNING "Can not alloc domain group for "

WARNING:SPLIT_STRING: quoted string split across lines
#5823: FILE: kernel/sched_bfs.c:5099:
+			printk(KERN_WARNING "Can not alloc domain group for "
+				"node %d\n", i);

WARNING:LINE_SPACING: Missing a blank line after declarations
#5842: FILE: kernel/sched_bfs.c:5118:
+			int n = (i + j) % nr_node_ids;
+			node_to_cpumask_ptr(pnodemask, n);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc_node(sizeof(*sg)...) over kmalloc_node(sizeof(struct sched_group)...)
#5854: FILE: kernel/sched_bfs.c:5130:
+			sg = kmalloc_node(sizeof(struct sched_group),

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#5857: FILE: kernel/sched_bfs.c:5133:
+				printk(KERN_WARNING

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#5857: FILE: kernel/sched_bfs.c:5133:
+			if (!sg) {
+				printk(KERN_WARNING

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5901: FILE: kernel/sched_bfs.c:5177:
+		cpu_to_allnodes_group(first_cpu(*cpu_map), cpu_map, &sg,
+								tmpmask);

WARNING:TYPO_SPELLING: 'attribues' may be misspelled - perhaps 'attributes'?
#5938: FILE: kernel/sched_bfs.c:5214:
+				/* attribues of custom domains in 'doms_cur' */
 				   ^^^^^^^^^

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __weak over __attribute__((weak))
#5947: FILE: kernel/sched_bfs.c:5223:
+void __attribute__((weak)) arch_update_cpu_topology(void)

WARNING:DEPRECATED_API: Deprecated use of 'synchronize_sched', prefer 'synchronize_rcu' instead
#5992: FILE: kernel/sched_bfs.c:5268:
+	synchronize_sched();

Usage of a deprecated RCU API is detected.  It is recommended to replace
old flavourful RCU APIs by their new vanilla-RCU counterparts.

The full list of available RCU APIs can be viewed from the kernel docs.

See: https://www.kernel.org/doc/html/latest/RCU/whatisRCU.html#full-list-of-rcu-apis

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#6053: FILE: kernel/sched_bfs.c:5329:
+			if (cpus_equal(doms_cur[i], doms_new[j])
+			    && dattrs_equal(dattr_cur, i, dattr_new, j))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!doms_new"
#6062: FILE: kernel/sched_bfs.c:5338:
+	if (doms_new == NULL) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#6073: FILE: kernel/sched_bfs.c:5349:
+			if (cpus_equal(doms_new[i], doms_cur[j])
+			    && dattrs_equal(dattr_new, i, dattr_cur, j))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6078: FILE: kernel/sched_bfs.c:5354:
+		__build_sched_domains(doms_new + i,
+					dattr_new ? dattr_new + i : NULL);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#6133: FILE: kernel/sched_bfs.c:5409:
+}
+static ssize_t sched_mc_power_savings_store(struct sysdev_class *class,

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#6149: FILE: kernel/sched_bfs.c:5425:
+}
+static ssize_t sched_smt_power_savings_store(struct sysdev_class *dev,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6200: FILE: kernel/sched_bfs.c:5476:
+static int update_runtime(struct notifier_block *nfb,
+				unsigned long action, void *hcpu)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6227: FILE: kernel/sched_bfs.c:5503:
+	sched_group_nodes_bycpu = kzalloc(nr_cpu_ids * sizeof(void **),
+								GFP_KERNEL);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#6228: FILE: kernel/sched_bfs.c:5504:
+	BUG_ON(sched_group_nodes_bycpu == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!sched_group_nodes_bycpu"
#6228: FILE: kernel/sched_bfs.c:5504:
+	BUG_ON(sched_group_nodes_bycpu == NULL);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#6249: FILE: kernel/sched_bfs.c:5525:
+		BUG();

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#6297: FILE: kernel/sched_bfs.c:5573:
+		(addr >= (unsigned long)__sched_text_start
+		&& addr < (unsigned long)__sched_text_end);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#6312: FILE: kernel/sched_bfs.c:5588:
+		rq->user_pc = rq->nice_pc = rq->softirq_pc = rq->system_pc =

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#6313: FILE: kernel/sched_bfs.c:5589:
+			      rq->iowait_pc = rq->idle_pc = 0;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#6382: FILE: kernel/sched_bfs.c:5658:
+		printk(KERN_ERR "BUG: sleeping function called from invalid"

WARNING:SPLIT_STRING: quoted string split across lines
#6383: FILE: kernel/sched_bfs.c:5659:
+		printk(KERN_ERR "BUG: sleeping function called from invalid"
+				" context at %s:%d\n", file, line);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#6384: FILE: kernel/sched_bfs.c:5660:
+		printk("in_atomic():%d, irqs_disabled():%d\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6385: FILE: kernel/sched_bfs.c:5661:
+		printk("in_atomic():%d, irqs_disabled():%d\n",
+			in_atomic(), irqs_disabled());

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#6543: FILE: kernel/sysctl.c:86:
+extern int rr_interval;

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#6544: FILE: kernel/sysctl.c:87:
+extern int sched_iso_cpu;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#6690: FILE: kernel/sysctl.c:613:
+		.maxlen		= sizeof (int),

WARNING:DUPLICATED_SYSCTL_CONST: duplicated sysctl range checking value 'one', consider using the shared one in include/linux/sysctl.h
#6694: FILE: kernel/sysctl.c:617:
+		.extra1		= &one,

Commit d91bff3011cf ("proc/sysctl: add shared variables for range
check") added some shared const variables to be used instead of a local
copy in each source file.

Consider replacing the sysctl range checking value with the shared
one in include/linux/sysctl.h.  The following conversion scheme may
be used::

  &zero     ->  SYSCTL_ZERO
  &one      ->  SYSCTL_ONE
  &int_max  ->  SYSCTL_INT_MAX

See:

  1. https://lore.kernel.org/lkml/20190430180111.10688-1-mcroce@redhat.com/
  2. https://lore.kernel.org/lkml/20190531131422.14970-1-mcroce@redhat.com/

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#6701: FILE: kernel/sysctl.c:624:
+		.maxlen		= sizeof (int),

WARNING:DUPLICATED_SYSCTL_CONST: duplicated sysctl range checking value 'zero', consider using the shared one in include/linux/sysctl.h
#6705: FILE: kernel/sysctl.c:628:
+		.extra1		= &zero,

WARNING:TYPO_SPELLING: 'EXTRAVERSION' may be misspelled - perhaps 'EXTROVERSION'?
#6760: FILE: Makefile:4:
+EXTRAVERSION = .35-bfs302
 ^^^^^^^^^^^^

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000063990.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 7 errors, 141 warnings, 113 checks, 6597 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000063990.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
