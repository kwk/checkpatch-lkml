WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#42: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#47: FILE: fs/ceph/inode.c:1:
+#include <linux/module.h>

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:LINE_SPACING: Please don't use multiple blank lines
#70: FILE: fs/ceph/inode.c:24:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!inode"
#80: FILE: fs/ceph/inode.c:34:
+	if (inode == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#83: FILE: fs/ceph/inode.c:37:
+		dout(40, "get_inode created new inode %p %llx.%llx ino %llx\n",
 		^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#88: FILE: fs/ceph/inode.c:42:
+	dout(30, "get_inode on %lu=%llx.%llx got %p\n", inode->i_ino, vino.ino,
 	^^^^

WARNING:TYPO_SPELLING: 'constuct' may be misspelled - perhaps 'construct'?
#94: FILE: fs/ceph/inode.c:48:
+ * get/constuct snapdir inode for a given directory
        ^^^^^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#103: FILE: fs/ceph/inode.c:57:
+	struct inode *inode = ceph_get_inode(parent->i_sb, vino);
+	if (IS_ERR(inode))

CHECK:LINE_SPACING: Please don't use multiple blank lines
#114: FILE: fs/ceph/inode.c:68:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#124: FILE: fs/ceph/inode.c:78:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#163: FILE: fs/ceph/inode.c:117:
+	dout(20, "get_or_create_frag added %llx.%llx frag %x\n",
 	^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#175: FILE: fs/ceph/inode.c:129:
+u32 ceph_choose_frag(struct ceph_inode_info *ci, u32 v,
+		       struct ceph_inode_frag *pfrag,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#180: FILE: fs/ceph/inode.c:134:
+	unsigned nway, i;

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#202: FILE: fs/ceph/inode.c:156:
+		dout(30, "choose_frag(%x) %x splits by %d (%d ways)\n", v, t,
 		^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#211: FILE: fs/ceph/inode.c:165:
+		BUG_ON(i == nway);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#213: FILE: fs/ceph/inode.c:167:
+	dout(30, "choose_frag(%x) = %x\n", v, t);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#243: FILE: fs/ceph/inode.c:197:
+			dout(20, "fill_dirfrag removed %llx.%llx frag %x"
 			^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#244: FILE: fs/ceph/inode.c:198:
+			dout(20, "fill_dirfrag removed %llx.%llx frag %x"
+			     " (no ref)\n", ceph_vinop(inode), id);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#249: FILE: fs/ceph/inode.c:203:
+			dout(20, "fill_dirfrag cleared %llx.%llx frag %x"
 			^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#250: FILE: fs/ceph/inode.c:204:
+			dout(20, "fill_dirfrag cleared %llx.%llx frag %x"
+			     " referral\n", ceph_vinop(inode), id);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#257: FILE: fs/ceph/inode.c:211:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#262: FILE: fs/ceph/inode.c:216:
+		/* this is not the end of the world; we can continue
+		   with bad/inaccurate delegation info */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#262: FILE: fs/ceph/inode.c:216:
+		   with bad/inaccurate delegation info */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#273: FILE: fs/ceph/inode.c:227:
+	dout(20, "fill_dirfrag %llx.%llx frag %x referral mds %d ndist=%d\n",
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#281: FILE: fs/ceph/inode.c:235:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#294: FILE: fs/ceph/inode.c:248:
+	dout(10, "alloc_inode %p\n", &ci->vfs_inode);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#356: FILE: fs/ceph/inode.c:310:
+	dout(30, "destroy_inode %p ino %llx.%llx\n", inode, ceph_vinop(inode));
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#367: FILE: fs/ceph/inode.c:321:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#386: FILE: fs/ceph/inode.c:340:
+		dout(10, "size %lld -> %llu\n", inode->i_size, size);
 		^^^^

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#388: FILE: fs/ceph/inode.c:342:
+		inode->i_blocks = (size + (1<<9) - 1) >> 9;
 		                            ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#403: FILE: fs/ceph/inode.c:357:
+	} else if (issued & (CEPH_CAP_WR|CEPH_CAP_WRBUFFER)) {
 	                                ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#432: FILE: fs/ceph/inode.c:386:
+		dout(10, "%p mds time_warp_seq %llu < %llu\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#453: FILE: fs/ceph/inode.c:407:
+	dout(30, "fill_inode %p ino %llx.%llx v %llu had %llu\n",
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#528: FILE: fs/ceph/inode.c:482:
+		dout(20, " frag %x split by %d\n", frag->frag, frag->split_by);
 		^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#553: FILE: fs/ceph/inode.c:507:
+			BUG_ON(symlen != inode->i_size);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#555: FILE: fs/ceph/inode.c:509:
+			ci->i_symlink = kmalloc(symlen+1, GFP_NOFS);
 			                              ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#591: FILE: fs/ceph/inode.c:545:
+
+

WARNING:MISORDERED_TYPE: type 'long unsigned' should be specified in [[un]signed] [short|int|long|long long] order
#604: FILE: fs/ceph/inode.c:558:
+	long unsigned duration = le32_to_cpu(lease->duration_ms);

WARNING:MISORDERED_TYPE: type 'long unsigned' should be specified in [[un]signed] [short|int|long|long long] order
#605: FILE: fs/ceph/inode.c:559:
+	long unsigned ttl = from_time + (duration * HZ) / 1000;

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#607: FILE: fs/ceph/inode.c:561:
+	dout(10, "update_inode_lease %p mask %d duration %lu ms ttl %lu\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'update_inode_lease', this function's name, in a string
#607: FILE: fs/ceph/inode.c:561:
+	dout(10, "update_inode_lease %p mask %d duration %lu ms ttl %lu\n",

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#656: FILE: fs/ceph/inode.c:610:
+		dout(20, "lease_valid inode %p EXCL cap -> ICONTENT\n", inode);
 		^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#665: FILE: fs/ceph/inode.c:619:
+		struct ceph_mds_session *s = ci->i_lease_session;
+		spin_lock(&s->s_cap_lock);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#677: FILE: fs/ceph/inode.c:631:
+	dout(10, "lease_valid inode %p have %d want %d valid %d = %d\n", inode,
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#682: FILE: fs/ceph/inode.c:636:
+
+

WARNING:MISORDERED_TYPE: type 'long unsigned' should be specified in [[un]signed] [short|int|long|long long] order
#693: FILE: fs/ceph/inode.c:647:
+	long unsigned duration = le32_to_cpu(lease->duration_ms);

WARNING:MISORDERED_TYPE: type 'long unsigned' should be specified in [[un]signed] [short|int|long|long long] order
#694: FILE: fs/ceph/inode.c:648:
+	long unsigned ttl = from_time + (duration * HZ) / 1000;

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#696: FILE: fs/ceph/inode.c:650:
+	dout(10, "update_dentry_lease %p mask %d duration %lu ms ttl %lu\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'update_dentry_lease', this function's name, in a string
#696: FILE: fs/ceph/inode.c:650:
+	dout(10, "update_dentry_lease %p mask %d duration %lu ms ttl %lu\n",

WARNING:LINE_SPACING: Missing a blank line after declarations
#706: FILE: fs/ceph/inode.c:660:
+		struct inode *dir = dentry->d_parent->d_inode;
+		dentry->d_time = ceph_inode(dir)->i_version;

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#707: FILE: fs/ceph/inode.c:661:
+		dout(20, " no lease, setting d_time to %lu\n", dentry->d_time);
 		^^^^

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*di)...) over kmalloc(sizeof(struct ceph_dentry_info)...)
#720: FILE: fs/ceph/inode.c:674:
+		di = kmalloc(sizeof(struct ceph_dentry_info),

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#744: FILE: fs/ceph/inode.c:698:
+		dout(10, "lease dget on %p\n", dentry);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#779: FILE: fs/ceph/inode.c:733:
+	dout(20, "dentry_lease_valid - dentry %p = %d\n", dentry, valid);
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#783: FILE: fs/ceph/inode.c:737:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#808: FILE: fs/ceph/inode.c:762:
+		dout(10, "dn %p (%d) spliced with %p (%d) "
 		^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#809: FILE: fs/ceph/inode.c:763:
+		dout(10, "dn %p (%d) spliced with %p (%d) "
+		     "inode %p ino %llx.%llx\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#817: FILE: fs/ceph/inode.c:771:
+		dout(10, "dn %p attached to %p ino %llx.%llx\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#856: FILE: fs/ceph/inode.c:810:
+		dout(10, "fill_trace reply has empty trace!\n");
 		^^^^

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#860: FILE: fs/ceph/inode.c:814:
+#if 0

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#867: FILE: fs/ceph/inode.c:821:
+		dout(0, "fill_trace faking empty trace on %d %s\n",
 		^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#881: FILE: fs/ceph/inode.c:835:
+		 * (if it is in an mds stray dir) */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dn"
#889: FILE: fs/ceph/inode.c:843:
+		if (dn == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!sb->s_root"
#904: FILE: fs/ceph/inode.c:858:
+		if (unlikely(sb->s_root == NULL))

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#917: FILE: fs/ceph/inode.c:871:
+		dout(10, "fill_trace %d/%d parent %p inode %p: '%.*s'"
 		^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#918: FILE: fs/ceph/inode.c:872:
+		dout(10, "fill_trace %d/%d parent %p inode %p: '%.*s'"
+		     " ic %d dmask %d\n",

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#919: FILE: fs/ceph/inode.c:873:
+		     (d+1), rinfo->trace_numd, parent, parent->d_inode,
 		       ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#926: FILE: fs/ceph/inode.c:880:
+			dout(10, "fill_trace  FAILED to take %p i_mutex\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#941: FILE: fs/ceph/inode.c:895:
+			dout(10, "fill_trace  no icontent|dentry lease\n");
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#943: FILE: fs/ceph/inode.c:897:
+		dout(10, "fill_trace  took %p i_mutex\n", parent->d_inode);
 		^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#946: FILE: fs/ceph/inode.c:900:
+	retry_lookup:

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#949: FILE: fs/ceph/inode.c:903:
+		dout(10, "fill_trace d_lookup of '%.*s' got %p\n",
 		^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#956: FILE: fs/ceph/inode.c:910:
+		if (d == rinfo->trace_numd-1 && req->r_last_dentry) {
 		                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#959: FILE: fs/ceph/inode.c:913:
+				dout(10, "fill_trace provided dn %p '%.*s'\n",
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#963: FILE: fs/ceph/inode.c:917:
+				dout(10, "fill_trace matches provided dn %p\n",
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#967: FILE: fs/ceph/inode.c:921:
+				dout(10, "fill_trace NOT using provided dn %p "
 				^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#968: FILE: fs/ceph/inode.c:922:
+				dout(10, "fill_trace NOT using provided dn %p "
+				     "(parent %p)\n", req->r_last_dentry,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#982: FILE: fs/ceph/inode.c:936:
+			dout(10, "fill_trace d_alloc %p '%.*s'\n", dn,
 			^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#986: FILE: fs/ceph/inode.c:940:
+		BUG_ON(!dn);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#989: FILE: fs/ceph/inode.c:943:
+		if (d+1 == rinfo->trace_numi) {
 		     ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#990: FILE: fs/ceph/inode.c:944:
+			dout(10, "fill_trace null dentry\n");
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#992: FILE: fs/ceph/inode.c:946:
+				dout(20, "d_delete %p\n", dn);
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#997: FILE: fs/ceph/inode.c:951:
+			dout(20, "d_instantiate %p NULL\n", dn);
 			^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1007: FILE: fs/ceph/inode.c:961:
+		if (d == rinfo->trace_numd-1 && req->r_old_dentry) {
 		                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1008: FILE: fs/ceph/inode.c:962:
+			dout(10, " src %p '%.*s' dst %p '%.*s'\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1013: FILE: fs/ceph/inode.c:967:
+			dout(10, "fill_trace doing d_move %p -> %p\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1016: FILE: fs/ceph/inode.c:970:
+			dout(10, " src %p '%.*s' dst %p '%.*s'\n",
 			^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1027: FILE: fs/ceph/inode.c:981:
+		ininfo = rinfo->trace_in[d+1].in;
 		                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1033: FILE: fs/ceph/inode.c:987:
+				dout(10, "dn %p wrong inode %p ino %llx.%llx\n",
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1039: FILE: fs/ceph/inode.c:993:
+			dout(10, "dn %p correct %p ino %llx.%llx\n",
 			^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#1062: FILE: fs/ceph/inode.c:1016:
+	update_inode:

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1063: FILE: fs/ceph/inode.c:1017:
+		BUG_ON(dn->d_inode != in);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1065: FILE: fs/ceph/inode.c:1019:
+				      &rinfo->trace_in[d+1],
 				                        ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1067: FILE: fs/ceph/inode.c:1021:
+				      rinfo->trace_dir[d+1] : NULL);
 				                        ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1082: FILE: fs/ceph/inode.c:1036:
+			struct inode *snapdir = ceph_get_snapdir(in);
+			dput(dn);

WARNING:SUSPECT_COMMA_SEMICOLON: Possible comma where semicolon could be used
#1088: FILE: fs/ceph/inode.c:1042:
+				dname.name = client->mount_args.snapdir_name,
+				dname.len = strlen(dname.name);

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1095: FILE: fs/ceph/inode.c:1049:
+					iput(snapdir);
 					^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1100: FILE: fs/ceph/inode.c:1054:
+			iput(snapdir);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1101: FILE: fs/ceph/inode.c:1055:
+			dout(10, " snapdir dentry is %p\n", dn);
 			^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1105: FILE: fs/ceph/inode.c:1059:
+
+

WARNING:INDENTED_LABEL: labels should not be indented
#1106: FILE: fs/ceph/inode.c:1060:
+	out_dir_no_inode:

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1113: FILE: fs/ceph/inode.c:1067:
+
+

WARNING:INDENTED_LABEL: labels should not be indented
#1114: FILE: fs/ceph/inode.c:1068:
+	no_dir_mutex:

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1119: FILE: fs/ceph/inode.c:1073:
+		if (d == rinfo->trace_numd-1 && req->r_last_dentry) {
 		                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1121: FILE: fs/ceph/inode.c:1075:
+			dout(10, "fill_trace using provided dn %p\n", dn);
 			^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1127: FILE: fs/ceph/inode.c:1081:
+		if (d+1 == rinfo->trace_numi) {
 		     ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1135: FILE: fs/ceph/inode.c:1089:
+		ininfo = rinfo->trace_in[d+1].in;
 		                          ^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1149: FILE: fs/ceph/inode.c:1103:
+			iput(in);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1151: FILE: fs/ceph/inode.c:1105:
+			dout(10, " using existing %p alias %p\n", in, dn);
 			^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dn->d_inode"
#1153: FILE: fs/ceph/inode.c:1107:
+			if (dn && dn->d_inode == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1154: FILE: fs/ceph/inode.c:1108:
+				dout(10, " instantiating provided %p\n", dn);
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1158: FILE: fs/ceph/inode.c:1112:
+					dout(10, " ignoring provided dn %p\n",
 					^^^^

WARNING:LINUX_VERSION_CODE: LINUX_VERSION_CODE should be avoided, code should be for the version to which it is merged
#1162: FILE: fs/ceph/inode.c:1116:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 28)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1162: FILE: fs/ceph/inode.c:1116:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 28)

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1167: FILE: fs/ceph/inode.c:1121:
+				iput(in);
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1168: FILE: fs/ceph/inode.c:1122:
+				dout(10, " d_alloc_anon new dn %p\n", dn);
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1181: FILE: fs/ceph/inode.c:1135:
+	dout(10, "fill_trace done err=%d, last dn %p in %p\n", err, dn, in);
 	^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1186: FILE: fs/ceph/inode.c:1140:
+		iput(req->r_last_inode);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1209: FILE: fs/ceph/inode.c:1163:
+		dout(10, "readdir_prepopulate %d items under SNAPDIR dn %p\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1212: FILE: fs/ceph/inode.c:1166:
+		dout(10, "readdir_prepopulate %d items under dn %p\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1230: FILE: fs/ceph/inode.c:1184:
+		dout(30, "d_lookup on parent=%p name=%.*s got %p\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1235: FILE: fs/ceph/inode.c:1189:
+			dout(40, "d_alloc %p '%.*s' = %p\n", parent,
 			^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dn"
#1237: FILE: fs/ceph/inode.c:1191:
+			if (dn == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1238: FILE: fs/ceph/inode.c:1192:
+				dout(30, "d_alloc badness\n");
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1246: FILE: fs/ceph/inode.c:1200:
+			dout(10, " dn %p points to wrong inode %p\n",
 			^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!in"
#1258: FILE: fs/ceph/inode.c:1212:
+			if (in == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1259: FILE: fs/ceph/inode.c:1213:
+				dout(30, "new_inode badness\n");
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1269: FILE: fs/ceph/inode.c:1223:
+			dout(0, "ceph_fill_inode badness on %p\n", in);
 			^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1282: FILE: fs/ceph/inode.c:1236:
+		iput(snapdir);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1285: FILE: fs/ceph/inode.c:1239:
+	dout(10, "readdir_prepopulate done\n");
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1289: FILE: fs/ceph/inode.c:1243:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1295: FILE: fs/ceph/inode.c:1249:
+	dout(30, "set_size %p %llu -> %llu\n", inode, inode->i_size, size);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1319: FILE: fs/ceph/inode.c:1273:
+	dout(20, "put_mode %p fmode %d %d -> %d\n", &ci->vfs_inode, fmode,
 	^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1320: FILE: fs/ceph/inode.c:1274:
+	     ci->i_nr_by_mode[fmode], ci->i_nr_by_mode[fmode]-1);
 	                                                     ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1329: FILE: fs/ceph/inode.c:1283:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1340: FILE: fs/ceph/inode.c:1294:
+	dout(10, "writeback %p\n", inode);
 	^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1342: FILE: fs/ceph/inode.c:1296:
+	iput(inode);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1358: FILE: fs/ceph/inode.c:1312:
+	dout(10, "invalidate_pages %p gen %d revoking %d\n", inode,
 	^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1362: FILE: fs/ceph/inode.c:1316:
+		BUG_ON(ci->i_rdcache_revoking > ci->i_rdcache_gen);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1375: FILE: fs/ceph/inode.c:1329:
+		dout(10, "invalidate_pages %p gen %d successful\n", inode,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1381: FILE: fs/ceph/inode.c:1335:
+		dout(10, "invalidate_pages %p gen %d raced, gen now %d\n",
 		^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1389: FILE: fs/ceph/inode.c:1343:
+	iput(inode);
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1392: FILE: fs/ceph/inode.c:1346:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1404: FILE: fs/ceph/inode.c:1358:
+	dout(10, "vmtruncate_work %p\n", inode);
 	^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#1408: FILE: fs/ceph/inode.c:1362:
+	iput(inode);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1430: FILE: fs/ceph/inode.c:1384:
+		dout(10, "__do_pending_vmtruncate %p to %lld\n", inode, to);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1435: FILE: fs/ceph/inode.c:1389:
+		dout(10, "__do_pending_vmtruncate %p nothing to do\n", inode);
 		^^^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1442: FILE: fs/ceph/inode.c:1396:
+static void *ceph_sym_follow_link(struct dentry *dentry, struct nameidata *nd)
                                                                            ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1445: FILE: fs/ceph/inode.c:1399:
+	nd_set_link(nd, ci->i_symlink);
 	            ^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1445: FILE: fs/ceph/inode.c:1399:
+	struct ceph_inode_info *ci = ceph_inode(dentry->d_inode);
+	nd_set_link(nd, ci->i_symlink);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1454: FILE: fs/ceph/inode.c:1408:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1470: FILE: fs/ceph/inode.c:1424:
+		dout(5, "prepare_setattr dentry %p (inode %llx.%llx)\n", dentry,
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'prepare_setattr', this function's name, in a string
#1470: FILE: fs/ceph/inode.c:1424:
+		dout(5, "prepare_setattr dentry %p (inode %llx.%llx)\n", dentry,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1477: FILE: fs/ceph/inode.c:1431:
+		dout(5, "prepare_setattr dentry %p (full path)\n", dentry);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'prepare_setattr', this function's name, in a string
#1477: FILE: fs/ceph/inode.c:1431:
+		dout(5, "prepare_setattr dentry %p (full path)\n", dentry);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1515: FILE: fs/ceph/inode.c:1469:
+	dout(10, "chown result %d\n", err);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1536: FILE: fs/ceph/inode.c:1490:
+	dout(10, "chmod result %d\n", err);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1553: FILE: fs/ceph/inode.c:1507:
+		dout(10, "utime holding EXCL, doing locally\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1569: FILE: fs/ceph/inode.c:1523:
+		dout(10, "utime holding WR, doing [am]time increase locally\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1584: FILE: fs/ceph/inode.c:1538:
+		dout(10, "lease indicates utimes is a no-op\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1604: FILE: fs/ceph/inode.c:1558:
+	dout(10, "utime result %d\n", err);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1619: FILE: fs/ceph/inode.c:1573:
+	dout(10, "truncate: ia_size %d i_size %d\n",
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1623: FILE: fs/ceph/inode.c:1577:
+		dout(10, "holding EXCL, doing truncate (fwd) locally\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1636: FILE: fs/ceph/inode.c:1590:
+		dout(10, "lease indicates truncate is a no-op\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1647: FILE: fs/ceph/inode.c:1601:
+	dout(10, "truncate result %d\n", err);
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1652: FILE: fs/ceph/inode.c:1606:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1670: FILE: fs/ceph/inode.c:1624:
+		dout(10, "setattr: %p uid %d -> %d\n", inode,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1673: FILE: fs/ceph/inode.c:1627:
+		dout(10, "setattr: %p gid %d -> %d\n", inode,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1676: FILE: fs/ceph/inode.c:1630:
+		dout(10, "setattr: %p mode 0%o -> 0%o\n", inode, inode->i_mode,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1679: FILE: fs/ceph/inode.c:1633:
+		dout(10, "setattr: %p size %lld -> %lld\n", inode,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1682: FILE: fs/ceph/inode.c:1636:
+		dout(10, "setattr: %p atime %ld.%ld -> %ld.%ld\n", inode,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1686: FILE: fs/ceph/inode.c:1640:
+		dout(10, "setattr: %p mtime %ld.%ld -> %ld.%ld\n", inode,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1690: FILE: fs/ceph/inode.c:1644:
+		dout(10, "setattr: %p ctime %ld.%ld -> %ld.%ld\n", inode,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1694: FILE: fs/ceph/inode.c:1648:
+		dout(10, "setattr: %p ATTR_FILE ... hrm!\n", inode);
 		^^^^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1696: FILE: fs/ceph/inode.c:1650:
+	if (ia_valid & (ATTR_UID|ATTR_GID))
 	                        ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1700: FILE: fs/ceph/inode.c:1654:
+	if (ia_valid & (ATTR_ATIME|ATTR_MTIME))
 	                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1717: FILE: fs/ceph/inode.c:1671:
+		dout(30, "getattr dentry %p inode %p SNAPDIR\n", dentry,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1722: FILE: fs/ceph/inode.c:1676:
+	dout(30, "getattr dentry %p inode %p mask %d\n", dentry,
 	^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#1737: FILE: fs/ceph/inode.c:1691:
+			derr(0, "WARNING: getattr on unhashed cap-less"
+			     " dentry %p %.*s\n", dentry,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1763: FILE: fs/ceph/inode.c:1717:
+	dout(30, "getattr returned %d\n", err);
 	^^^^

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around function pointer (vir_xattr->getxattr_cb)
#1874: FILE: fs/ceph/inode.c:1828:
+		return (vir_xattr->getxattr_cb)(ci, value, size);

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

WARNING:LINE_SPACING: Missing a blank line after declarations
#1894: FILE: fs/ceph/inode.c:1848:
+		int match;
+		ceph_decode_32_safe(&p, end, len, bad);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "_ceph_match_vir_xattr"
#2026: FILE: fs/ceph/inode.c:1980:
+	if (_ceph_match_vir_xattr(name) != NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2032: FILE: fs/ceph/inode.c:1986:
+		pages = kmalloc(sizeof(pages)*nr_pages, GFP_NOFS);
 		                             ^

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#2032: FILE: fs/ceph/inode.c:1986:
+		pages = kmalloc(sizeof(pages)*nr_pages, GFP_NOFS);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2043: FILE: fs/ceph/inode.c:1997:
+			memcpy(kaddr, value + i*PAGE_CACHE_SIZE,
 			                       ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#2044: FILE: fs/ceph/inode.c:1998:
+			       min(PAGE_CACHE_SIZE, size-i*PAGE_CACHE_SIZE));
 			                                ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2044: FILE: fs/ceph/inode.c:1998:
+			       min(PAGE_CACHE_SIZE, size-i*PAGE_CACHE_SIZE));
 			                                  ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "_ceph_match_vir_xattr"
#2098: FILE: fs/ceph/inode.c:2052:
+	if (_ceph_match_vir_xattr(name) != NULL)

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000204215.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 142 warnings, 47 checks, 2070 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000204215.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
