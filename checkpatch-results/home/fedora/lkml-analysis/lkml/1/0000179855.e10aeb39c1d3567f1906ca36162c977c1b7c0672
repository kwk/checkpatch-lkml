WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#46: 
Subject: [PATCH] [Target_Core_Mod]: Add INQUIRY EVPD response parsing support

WARNING:TYPO_SPELLING: 'Identifer' may be misspelled - perhaps 'Identifier'?
#71: 
T10 EVPD Identifer Length: 8
         ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'Identifer' may be misspelled - perhaps 'Identifier'?
#75: 
T10 EVPD Identifer Length: 20
         ^^^^^^^^^

WARNING:TYPO_SPELLING: 'Identifer' may be misspelled - perhaps 'Identifier'?
#86: 
T10 EVPD Identifer Length: 8
         ^^^^^^^^^

WARNING:TYPO_SPELLING: 'Identifer' may be misspelled - perhaps 'Identifier'?
#90: 
T10 EVPD Identifer Length: 8
         ^^^^^^^^^

WARNING:TYPO_SPELLING: 'Identifer' may be misspelled - perhaps 'Identifier'?
#95: 
T10 EVPD Identifer Length: 4
         ^^^^^^^^^

WARNING:TYPO_SPELLING: 'Identifer' may be misspelled - perhaps 'Identifier'?
#100: 
T10 EVPD Identifer Length: 24
         ^^^^^^^^^

WARNING:NEW_TYPEDEFS: do not add new typedefs
#130: FILE: drivers/lio-core/target_core_base.h:237:
+typedef struct t10_evpd_s {

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#146: FILE: drivers/lio-core/target_core_base.h:251:
+	spinlock_t t10_evpd_lock;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#168: FILE: drivers/lio-core/target_core_device.c:605:
+extern void se_release_evpd_for_dev (se_device_t *dev)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#174: FILE: drivers/lio-core/target_core_device.c:611:
+	list_for_each_entry_safe(evpd, evpd_tmp, &dev->t10_wwn.t10_evpd_list,
+			evpd_list) {

WARNING:RETURN_VOID: void function return statements are not generally useful
#181: FILE: drivers/lio-core/target_core_device.c:618:
+	return;
+}

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#194: FILE: drivers/lio-core/target_core_device.h:45:
+extern void se_release_evpd_for_dev (se_device_t *);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#194: FILE: drivers/lio-core/target_core_device.h:45:
+extern void se_release_evpd_for_dev (se_device_t *);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'se_device_t *' should also have an identifier name
#194: FILE: drivers/lio-core/target_core_device.h:45:
+extern void se_release_evpd_for_dev (se_device_t *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#215: FILE: drivers/lio-core/target_core_transport.c:1640:
+static const char hex_str[]="0123456789abcdef";
                            ^

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#217: FILE: drivers/lio-core/target_core_transport.c:1642:
+extern void transport_dump_evpd_proto_id (

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#217: FILE: drivers/lio-core/target_core_transport.c:1642:
+extern void transport_dump_evpd_proto_id (

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#230: FILE: drivers/lio-core/target_core_transport.c:1655:
+		sprintf(buf+len, "Fibre Channel\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#233: FILE: drivers/lio-core/target_core_transport.c:1658:
+		sprintf(buf+len, "Parallel SCSI\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#236: FILE: drivers/lio-core/target_core_transport.c:1661:
+		sprintf(buf+len, "SSA\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#239: FILE: drivers/lio-core/target_core_transport.c:1664:
+		sprintf(buf+len, "IEEE 1394\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#242: FILE: drivers/lio-core/target_core_transport.c:1667:
+		sprintf(buf+len, "SCSI Remote Direct Memory Access Protocol\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#245: FILE: drivers/lio-core/target_core_transport.c:1670:
+		sprintf(buf+len, "Internet SCSI (iSCSI)\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#248: FILE: drivers/lio-core/target_core_transport.c:1673:
+		sprintf(buf+len, "SAS Serial SCSI Protocol\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#251: FILE: drivers/lio-core/target_core_transport.c:1676:
+		sprintf(buf+len, "Automation/Drive Interface Transport Protocol\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#254: FILE: drivers/lio-core/target_core_transport.c:1679:
+		sprintf(buf+len, "AT Attachment Interface ATA/ATAPI\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#257: FILE: drivers/lio-core/target_core_transport.c:1682:
+		sprintf(buf+len, "Unknown 0x%02x\n", evpd->protocol_identifier);
 		           ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#262: FILE: drivers/lio-core/target_core_transport.c:1687:
+^I^Istrncpy(p_buf, buf, p_buf_len);^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#263: FILE: drivers/lio-core/target_core_transport.c:1688:
+^Ielse $

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#264: FILE: drivers/lio-core/target_core_transport.c:1689:
+		printk("%s", buf);

WARNING:RETURN_VOID: void function return statements are not generally useful
#267: FILE: drivers/lio-core/target_core_transport.c:1692:
+	return;
+}

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#269: FILE: drivers/lio-core/target_core_transport.c:1694:
+extern void transport_set_evpd_proto_id (t10_evpd_t *evpd, unsigned char *page_83)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#273: FILE: drivers/lio-core/target_core_transport.c:1698:
+^I * $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#278: FILE: drivers/lio-core/target_core_transport.c:1703:
+^I^Itransport_dump_evpd_proto_id(evpd, NULL, 0);^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#280: FILE: drivers/lio-core/target_core_transport.c:1705:
+^I$

WARNING:RETURN_VOID: void function return statements are not generally useful
#282: FILE: drivers/lio-core/target_core_transport.c:1707:
+	return;
+}

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#284: FILE: drivers/lio-core/target_core_transport.c:1709:
+extern int transport_dump_evpd_assoc (

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#284: FILE: drivers/lio-core/target_core_transport.c:1709:
+extern int transport_dump_evpd_assoc (

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#297: FILE: drivers/lio-core/target_core_transport.c:1722:
+		sprintf(buf+len, "addressed logical unit\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#300: FILE: drivers/lio-core/target_core_transport.c:1725:
+		sprintf(buf+len, "target port\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#303: FILE: drivers/lio-core/target_core_transport.c:1728:
+		sprintf(buf+len, "SCSI target device\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#306: FILE: drivers/lio-core/target_core_transport.c:1731:
+		sprintf(buf+len, "Unknown 0x%02x\n", evpd->association);
 		           ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#314: FILE: drivers/lio-core/target_core_transport.c:1739:
+		printk("%s", buf);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#316: FILE: drivers/lio-core/target_core_transport.c:1741:
+	return(ret);

return is not a function and as such doesn't need parentheses::

  return (bar);

can simply be::

  return bar;

ERROR:TRAILING_WHITESPACE: trailing whitespace
#317: FILE: drivers/lio-core/target_core_transport.c:1742:
+}^I$

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#319: FILE: drivers/lio-core/target_core_transport.c:1744:
+static int transport_set_evpd_assoc (t10_evpd_t *evpd, unsigned char *page_83)

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#327: FILE: drivers/lio-core/target_core_transport.c:1752:
+	return(transport_dump_evpd_assoc(evpd, NULL, 0));

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#330: FILE: drivers/lio-core/target_core_transport.c:1755:
+extern int transport_dump_evpd_ident_type (

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#330: FILE: drivers/lio-core/target_core_transport.c:1755:
+extern int transport_dump_evpd_ident_type (

ERROR:CODE_INDENT: code indent should use tabs where possible
#332: FILE: drivers/lio-core/target_core_transport.c:1757:
+        unsigned char *p_buf,$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#332: FILE: drivers/lio-core/target_core_transport.c:1757:
+        unsigned char *p_buf,$

ERROR:CODE_INDENT: code indent should use tabs where possible
#333: FILE: drivers/lio-core/target_core_transport.c:1758:
+        int p_buf_len)$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#333: FILE: drivers/lio-core/target_core_transport.c:1758:
+        int p_buf_len)$

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#343: FILE: drivers/lio-core/target_core_transport.c:1768:
+		sprintf(buf+len, "Vendor specific\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#346: FILE: drivers/lio-core/target_core_transport.c:1771:
+		sprintf(buf+len, "T10 Vendor ID based\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#349: FILE: drivers/lio-core/target_core_transport.c:1774:
+		sprintf(buf+len, "EUI-64 based\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#352: FILE: drivers/lio-core/target_core_transport.c:1777:
+		sprintf(buf+len, "NAA\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#355: FILE: drivers/lio-core/target_core_transport.c:1780:
+		sprintf(buf+len, "Relative target port identifier\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#358: FILE: drivers/lio-core/target_core_transport.c:1783:
+		sprintf(buf+len, "SCSI name string\n");
 		           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#361: FILE: drivers/lio-core/target_core_transport.c:1786:
+		sprintf(buf+len, "Unsupported: 0x%02x\n", evpd->device_identifier_type);
 		           ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#369: FILE: drivers/lio-core/target_core_transport.c:1794:
+		printk("%s", buf);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#371: FILE: drivers/lio-core/target_core_transport.c:1796:
+	return(ret);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#374: FILE: drivers/lio-core/target_core_transport.c:1799:
+extern int transport_set_evpd_ident_type (t10_evpd_t *evpd, unsigned char *page_83)

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#382: FILE: drivers/lio-core/target_core_transport.c:1807:
+	return(transport_dump_evpd_ident_type(evpd, NULL, 0));

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#385: FILE: drivers/lio-core/target_core_transport.c:1810:
+extern int transport_dump_evpd_ident (

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#385: FILE: drivers/lio-core/target_core_transport.c:1810:
+extern int transport_dump_evpd_ident (

ERROR:TRAILING_WHITESPACE: trailing whitespace
#392: FILE: drivers/lio-core/target_core_transport.c:1817:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#398: FILE: drivers/lio-core/target_core_transport.c:1823:
+^I^I^I&evpd->device_identifier[0]);^I^I^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#401: FILE: drivers/lio-core/target_core_transport.c:1826:
+^I^Isprintf(buf, "T10 EVPD ASCII Device Identifier: %s\n",^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#405: FILE: drivers/lio-core/target_core_transport.c:1830:
+^I^Isprintf(buf, "T10 EVPD UTF-8 Device Identifier: %s\n", $

WARNING:SPLIT_STRING: quoted string split across lines
#410: FILE: drivers/lio-core/target_core_transport.c:1835:
+		sprintf(buf, "T10 EVPD Device Identifier encoding unsupported:"
+			" 0x%02x", evpd->device_identifier_code_set);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#418: FILE: drivers/lio-core/target_core_transport.c:1843:
+		printk("%s", buf);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#419: FILE: drivers/lio-core/target_core_transport.c:1844:
+^I$

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#420: FILE: drivers/lio-core/target_core_transport.c:1845:
+	return(ret);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#423: FILE: drivers/lio-core/target_core_transport.c:1848:
+extern int transport_set_evpd_ident (t10_evpd_t *evpd, unsigned char *page_83)

WARNING:TYPO_SPELLING: 'identifer' may be misspelled - perhaps 'identifier'?
#425: FILE: drivers/lio-core/target_core_transport.c:1850:
+	int j = 0, i = 4; /* offset to start of the identifer */
 	                                            ^^^^^^^^^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#472: FILE: drivers/lio-core/target_core_transport.c:1908:
+	printk("T10 EVPD Page Length: %d\n", page_len);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#494: FILE: drivers/lio-core/target_core_transport.c:1912:
+		if (!(ident_len = page_83[3])) {

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#495: FILE: drivers/lio-core/target_core_transport.c:1913:
+			printk(KERN_ERR "page_83[3]: identifier length zero!\n");

WARNING:TYPO_SPELLING: 'Identifer' may be misspelled - perhaps 'Identifier'?
#498: FILE: drivers/lio-core/target_core_transport.c:1916:
+		printk("T10 EVPD Identifer Length: %d\n", ident_len);
 		                 ^^^^^^^^^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#498: FILE: drivers/lio-core/target_core_transport.c:1916:
+		printk("T10 EVPD Identifer Length: %d\n", ident_len);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#500: FILE: drivers/lio-core/target_core_transport.c:1918:
+		if (!(evpd = kzalloc(sizeof(t10_evpd_t), GFP_KERNEL))) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#501: FILE: drivers/lio-core/target_core_transport.c:1919:
+			printk("Unable to allocate memory for t10_evpd_t\n");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#520: FILE: drivers/lio-core/target_core_transport.c:1938:
+^I^I^Icontinue;^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#522: FILE: drivers/lio-core/target_core_transport.c:1940:
+^I^I^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#527: FILE: drivers/lio-core/target_core_transport.c:1945:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#552: FILE: drivers/lio-core/target_core_transport.c:2154:
+^I$

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000179855.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 25 errors, 35 warnings, 28 checks, 417 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000179855.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
