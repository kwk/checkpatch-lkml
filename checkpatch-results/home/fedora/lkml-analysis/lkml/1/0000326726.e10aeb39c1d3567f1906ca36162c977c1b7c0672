CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#104: FILE: drivers/ide/ide-tape.c:548:
+		count = min(

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#127: FILE: drivers/ide/ide-tape.c:572:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#128: FILE: drivers/ide/ide-tape.c:573:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#157: FILE: drivers/ide/ide-tape.c:602:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#158: FILE: drivers/ide/ide-tape.c:603:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#243: FILE: drivers/ide/ide-tape.c:805:
+			printk(KERN_ERR "ide-tape: bug: tape->next_stage !="

WARNING:SPLIT_STRING: quoted string split across lines
#244: FILE: drivers/ide/ide-tape.c:806:
+			printk(KERN_ERR "ide-tape: bug: tape->next_stage !="
+					" NULL\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#247: FILE: drivers/ide/ide-tape.c:808:
+			printk(KERN_ERR "ide-tape: bug: nr_stages should be 0 "

WARNING:SPLIT_STRING: quoted string split across lines
#248: FILE: drivers/ide/ide-tape.c:809:
+			printk(KERN_ERR "ide-tape: bug: nr_stages should be 0 "
+					"now\n");

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#259: FILE: drivers/ide/ide-tape.c:855:
+	case 0:	error = IDETAPE_ERROR_GENERAL; break;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#260: FILE: drivers/ide/ide-tape.c:856:
+	case 1: error = 0; break;

WARNING:TYPO_SPELLING: 'uptodate' may be misspelled - perhaps 'up-to-date'?
#261: FILE: drivers/ide/ide-tape.c:857:
+	default: error = uptodate;
 	                 ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#261: FILE: drivers/ide/ide-tape.c:857:
+	default: error = uptodate;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#271: FILE: drivers/ide/ide-tape.c:882:
+					idetape_abort_pipeline(drive,
+								active_stage);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#299: FILE: drivers/ide/ide-tape.c:934:
+		printk(KERN_ERR "ide-tape: Error in REQUEST SENSE itself - "

WARNING:SPLIT_STRING: quoted string split across lines
#300: FILE: drivers/ide/ide-tape.c:935:
+		printk(KERN_ERR "ide-tape: Error in REQUEST SENSE itself - "
+				"Aborting request!\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#349: FILE: drivers/ide/ide-tape.c:1237:
+		printk(KERN_ERR "ide-tape: Strange, packet command initiated "

WARNING:SPLIT_STRING: quoted string split across lines
#350: FILE: drivers/ide/ide-tape.c:1238:
+		printk(KERN_ERR "ide-tape: Strange, packet command initiated "
+				"yet DRQ isn't asserted\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#380: FILE: drivers/ide/ide-tape.c:1388:
+	if (time_after(jiffies,
+			tape->controlled_pipeline_head_time + 120 * HZ)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#480: FILE: drivers/ide/ide-tape.c:1510:
+static void idetape_create_read_cmd(idetape_tape_t *tape, idetape_pc_t *pc,
+		unsigned int length, struct idetape_bh *bh)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#490: FILE: drivers/ide/ide-tape.c:1550:
+static void idetape_create_write_cmd(idetape_tape_t *tape, idetape_pc_t *pc,
+		unsigned int length, struct idetape_bh *bh)

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*stage->bh)...) over kmalloc(sizeof(struct idetape_bh)...)
#576: FILE: drivers/ide/ide-tape.c:1715:
+	stage->bh = kmalloc(sizeof(struct idetape_bh), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:SPACING: No space is necessary after a cast
#582: FILE: drivers/ide/ide-tape.c:1720:
+	bh->b_data = (char *) __get_free_page(GFP_KERNEL);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: No space is necessary after a cast
#592: FILE: drivers/ide/ide-tape.c:1729:
+		b_data = (char *) __get_free_page(GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*bh)...) over kmalloc(sizeof(struct idetape_bh)...)
#602: FILE: drivers/ide/ide-tape.c:1748:
+		bh = kmalloc(sizeof(struct idetape_bh), GFP_KERNEL);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#622: FILE: drivers/ide/ide-tape.c:1784:
+static int idetape_copy_stage_from_user(idetape_tape_t *tape,
+		idetape_stage_t *stage, const char __user *buf, int n)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#632: FILE: drivers/ide/ide-tape.c:1792:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#633: FILE: drivers/ide/ide-tape.c:1793:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#642: FILE: drivers/ide/ide-tape.c:1800:
+		if (copy_from_user(bh->b_data + atomic_read(&bh->b_count), buf,
+				count))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#652: FILE: drivers/ide/ide-tape.c:1816:
+static int idetape_copy_stage_to_user(idetape_tape_t *tape, char __user *buf,
+		idetape_stage_t *stage, int n)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#662: FILE: drivers/ide/ide-tape.c:1824:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#663: FILE: drivers/ide/ide-tape.c:1825:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#733: FILE: drivers/ide/ide-tape.c:1903:
+		printk(KERN_ERR "ide-tape: bug: Trying to sleep on non-valid"

WARNING:SPLIT_STRING: quoted string split across lines
#734: FILE: drivers/ide/ide-tape.c:1904:
+		printk(KERN_ERR "ide-tape: bug: Trying to sleep on non-valid"
+				 " request\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#744: FILE: drivers/ide/ide-tape.c:1954:
+static void idetape_create_write_filemark_cmd(ide_drive_t *drive,
+		idetape_pc_t *pc, int write_filemark)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#763: FILE: drivers/ide/ide-tape.c:1995:
+static void idetape_create_load_unload_cmd(ide_drive_t *drive, idetape_pc_t *pc,
+		int cmd)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#773: FILE: drivers/ide/ide-tape.c:2023:
+			idetape_create_load_unload_cmd(drive, &pc,
+							IDETAPE_LU_LOAD_MASK);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#822: FILE: drivers/ide/ide-tape.c:2077:
+static void idetape_create_locate_cmd(ide_drive_t *drive, idetape_pc_t *pc,
+		unsigned int block, u8 partition, int skip)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#860: FILE: drivers/ide/ide-tape.c:2157:
+static int idetape_position_tape(ide_drive_t *drive, unsigned int block,
+		u8 partition, int skip)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#879: FILE: drivers/ide/ide-tape.c:2187:
+			printk(KERN_INFO "ide-tape: %s: position_tape failed in"

WARNING:SPLIT_STRING: quoted string split across lines
#880: FILE: drivers/ide/ide-tape.c:2188:
+			printk(KERN_INFO "ide-tape: %s: position_tape failed in"
+					 " discard_pipeline()\n", tape->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1001: FILE: drivers/ide/ide-tape.c:2394:
+		printk(KERN_ERR "ide-tape: bug: Trying to empty write pipeline,"

WARNING:SPLIT_STRING: quoted string split across lines
#1002: FILE: drivers/ide/ide-tape.c:2395:
+		printk(KERN_ERR "ide-tape: bug: Trying to empty write pipeline,"
+				" but we are not writing.\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1012: FILE: drivers/ide/ide-tape.c:2418:
+					printk(KERN_INFO "ide-tape: bug,"

WARNING:SPLIT_STRING: quoted string split across lines
#1013: FILE: drivers/ide/ide-tape.c:2419:
+					printk(KERN_INFO "ide-tape: bug,"
+							 " bh NULL\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1021: FILE: drivers/ide/ide-tape.c:2425:
+				memset(bh->b_data + atomic_read(&bh->b_count),
+						0, min);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1058: FILE: drivers/ide/ide-tape.c:2494:
+			printk(KERN_ERR "ide-tape: merge_stage_size should be"

WARNING:SPLIT_STRING: quoted string split across lines
#1059: FILE: drivers/ide/ide-tape.c:2495:
+			printk(KERN_ERR "ide-tape: merge_stage_size should be"
+					 " 0 now\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1074: FILE: drivers/ide/ide-tape.c:2511:
+			bytes_read = idetape_queue_rw_tail(drive,
+							REQ_IDETAPE_READ, 0,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1114: FILE: drivers/ide/ide-tape.c:2595:
+		printk(KERN_ERR "ide-tape: bug: trying to return more bytes"

WARNING:SPLIT_STRING: quoted string split across lines
#1115: FILE: drivers/ide/ide-tape.c:2596:
+		printk(KERN_ERR "ide-tape: bug: trying to return more bytes"
+				" than requested\n");

CHECK:SPACING: No space is necessary after a cast
#1192: FILE: drivers/ide/ide-tape.c:2696:
+		config.dsc_rw_frequency = (int) tape->best_dsc_rw_freq;

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1269: FILE: drivers/ide/ide-tape.c:2787:
+		count = (MTBSFM == mt_op ? 1 : -1);

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1272: FILE: drivers/ide/ide-tape.c:2790:
+		printk(KERN_ERR "ide-tape: MTIO operation %d not supported\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1273: FILE: drivers/ide/ide-tape.c:2791:
+		printk(KERN_ERR "ide-tape: MTIO operation %d not supported\n",
+				mt_op);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1341: FILE: drivers/ide/ide-tape.c:2877:
+static ssize_t idetape_chrdev_write(struct file *file, const char __user *buf,
 				     size_t count, loff_t *ppos)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1370: FILE: drivers/ide/ide-tape.c:2930:
+			printk(KERN_ERR "ide-tape: bug: merge buf too big\n");

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 32)
#1378: FILE: drivers/ide/ide-tape.c:2936:
+		if (idetape_copy_stage_from_user(tape, tape->merge_stage, buf,
[...]
 				ret = -EFAULT;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1491: FILE: drivers/ide/ide-tape.c:3056:
+		idetape_create_load_unload_cmd(drive, &pc,
+					      !IDETAPE_LU_LOAD_MASK);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1502: FILE: drivers/ide/ide-tape.c:3067:
+		idetape_create_load_unload_cmd(drive, &pc,
+			IDETAPE_LU_RETENSION_MASK | IDETAPE_LU_LOAD_MASK);

CHECK:BRACES: braces {} should be used on all arms of this statement
#1512: FILE: drivers/ide/ide-tape.c:3077:
+		if (mt_count) {
[...]
+		} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1518: FILE: drivers/ide/ide-tape.c:3083:
+		} else

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1617: FILE: drivers/ide/ide-tape.c:3112:
+		printk(KERN_ERR "ide-tape: MTIO operation %d not supported\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1618: FILE: drivers/ide/ide-tape.c:3113:
+		printk(KERN_ERR "ide-tape: MTIO operation %d not supported\n",
+				mt_op);

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1694: FILE: drivers/ide/ide-tape.c:3204:
+static int idetape_chrdev_open(struct inode *inode, struct file *filp)
                                                                  ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#1712: FILE: drivers/ide/ide-tape.c:3305:
+static int idetape_chrdev_release(struct inode *inode, struct file *filp)
                                                                     ^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1829: FILE: drivers/ide/ide-tape.c:3639:
+	device_destroy(idetape_sysfs_class,
+			MKDEV(IDETAPE_MAJOR, tape->minor + 128));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1850: FILE: drivers/ide/ide-tape.c:3752:
+		printk(KERN_ERR "ide-tape: %s: not supported by this version of"

WARNING:SPLIT_STRING: quoted string split across lines
#1851: FILE: drivers/ide/ide-tape.c:3753:
+		printk(KERN_ERR "ide-tape: %s: not supported by this version of"
+				" the driver\n", drive->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1856: FILE: drivers/ide/ide-tape.c:3757:
+		printk(KERN_INFO "ide-tape: passing drive %s to ide-scsi"

WARNING:SPLIT_STRING: quoted string split across lines
#1857: FILE: drivers/ide/ide-tape.c:3758:
+		printk(KERN_INFO "ide-tape: passing drive %s to ide-scsi"
+				 " emulation.\n", drive->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1864: FILE: drivers/ide/ide-tape.c:3763:
+		printk(KERN_ERR "ide-tape: %s: Can't allocate a tape struct\n",

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#1864: FILE: drivers/ide/ide-tape.c:3763:
 	if (tape == NULL) {
+		printk(KERN_ERR "ide-tape: %s: Can't allocate a tape struct\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1865: FILE: drivers/ide/ide-tape.c:3764:
+		printk(KERN_ERR "ide-tape: %s: Can't allocate a tape struct\n",
+				drive->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1883: FILE: drivers/ide/ide-tape.c:3829:
+		printk(KERN_ERR "ide-tape: Failed to register chrdev"

WARNING:SPLIT_STRING: quoted string split across lines
#1884: FILE: drivers/ide/ide-tape.c:3830:
+		printk(KERN_ERR "ide-tape: Failed to register chrdev"
+				" interface\n");

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000326726.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 3 errors, 40 warnings, 33 checks, 1709 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000326726.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
