WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#72: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#77: FILE: drivers/video/backlight/adp8860_bl.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:BIT_MACRO: Prefer using the BIT macro
#145: FILE: drivers/video/backlight/adp8860_bl.c:69:
+#define INT_CFG			(1 << 6)

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

CHECK:BIT_MACRO: Prefer using the BIT macro
#146: FILE: drivers/video/backlight/adp8860_bl.c:70:
+#define NSTBY			(1 << 5)

CHECK:BIT_MACRO: Prefer using the BIT macro
#147: FILE: drivers/video/backlight/adp8860_bl.c:71:
+#define DIM_EN			(1 << 4)

CHECK:BIT_MACRO: Prefer using the BIT macro
#148: FILE: drivers/video/backlight/adp8860_bl.c:72:
+#define SIS_EN			(1 << 2)

CHECK:BIT_MACRO: Prefer using the BIT macro
#149: FILE: drivers/video/backlight/adp8860_bl.c:73:
+#define CMP_AUTOEN		(1 << 1)

CHECK:BIT_MACRO: Prefer using the BIT macro
#150: FILE: drivers/video/backlight/adp8860_bl.c:74:
+#define BLEN			(1 << 0)

WARNING:TYPO_SPELLING: 'ALS' may be misspelled - perhaps 'ALSO'?
#152: FILE: drivers/video/backlight/adp8860_bl.c:76:
+/* ADP8860_CCFG Main ALS comparator level enable */
                      ^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:BIT_MACRO: Prefer using the BIT macro
#153: FILE: drivers/video/backlight/adp8860_bl.c:77:
+#define L3_EN			(1 << 1)

CHECK:BIT_MACRO: Prefer using the BIT macro
#154: FILE: drivers/video/backlight/adp8860_bl.c:78:
+#define L2_EN			(1 << 0)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'filt' may be better as '(filt)' to avoid precedence issues
#162: FILE: drivers/video/backlight/adp8860_bl.c:86:
+#define ALS_CCFG_VAL(filt)	((0x7 & filt) << 5)

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#178: FILE: drivers/video/backlight/adp8860_bl.c:102:
+	struct mutex lock;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#199: FILE: drivers/video/backlight/adp8860_bl.c:123:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#208: FILE: drivers/video/backlight/adp8860_bl.c:132:
+	uint8_t reg_val;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#227: FILE: drivers/video/backlight/adp8860_bl.c:151:
+	uint8_t reg_val;

WARNING:LINE_SPACING: Missing a blank line after declarations
#250: FILE: drivers/video/backlight/adp8860_bl.c:174:
+	struct adp8860_led *led = container_of(work, struct adp8860_led, work);
+	adp8860_write(led->client, ADP8860_ISC1 - led->id + 1,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#251: FILE: drivers/video/backlight/adp8860_bl.c:175:
+	adp8860_write(led->client, ADP8860_ISC1 - led->id + 1,
+			 led->new_brightness >> 1);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#255: FILE: drivers/video/backlight/adp8860_bl.c:179:
+static void adp8860_led_set(struct led_classdev *led_cdev,
+			   enum led_brightness value)

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#282: FILE: drivers/video/backlight/adp8860_bl.c:206:
+static int __devinit adp8860_led_probe(struct i2c_client *client)

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#291: FILE: drivers/video/backlight/adp8860_bl.c:215:
+	led = kzalloc(sizeof(*led) * pdata->num_leds, GFP_KERNEL);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!led"
#292: FILE: drivers/video/backlight/adp8860_bl.c:216:
+	if (led == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#293: FILE: drivers/video/backlight/adp8860_bl.c:217:
+	if (led == NULL) {
+		dev_err(&client->dev, "failed to alloc memory\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#299: FILE: drivers/video/backlight/adp8860_bl.c:223:
+	ret = adp8860_write(client, ADP8860_ISCT1,
+			(pdata->led_on_time & 0x3) << 6);

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#366: FILE: drivers/video/backlight/adp8860_bl.c:290:
+static int __devexit adp8860_led_remove(struct i2c_client *client)

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#382: FILE: drivers/video/backlight/adp8860_bl.c:306:
+static int __devinit adp8860_led_probe(struct i2c_client *client)

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#387: FILE: drivers/video/backlight/adp8860_bl.c:311:
+static int __devexit adp8860_led_remove(struct i2c_client *client)

CHECK:BRACES: braces {} should be used on all arms of this statement
#399: FILE: drivers/video/backlight/adp8860_bl.c:323:
+	if (data->pdata->en_ambl_sens) {
[...]
+	} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'brightness > 0'
#400: FILE: drivers/video/backlight/adp8860_bl.c:324:
+		if ((brightness > 0) && (brightness < ADP8860_MAX_BRIGHTNESS)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'brightness < ADP8860_MAX_BRIGHTNESS'
#400: FILE: drivers/video/backlight/adp8860_bl.c:324:
+		if ((brightness > 0) && (brightness < ADP8860_MAX_BRIGHTNESS)) {

CHECK:BRACES: Unbalanced braces around else statement
#415: FILE: drivers/video/backlight/adp8860_bl.c:339:
+	} else

WARNING:LINE_SPACING: Missing a blank line after declarations
#434: FILE: drivers/video/backlight/adp8860_bl.c:358:
+	int brightness = bl->props.brightness;
+	if (bl->props.power != FB_BLANK_UNBLANK)

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#500: FILE: drivers/video/backlight/adp8860_bl.c:424:
+	uint8_t reg_val;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#513: FILE: drivers/video/backlight/adp8860_bl.c:437:
+static ssize_t adp8860_store(struct device *dev, const char *buf,
+			 size_t count, int reg)

WARNING:CONSIDER_KSTRTO: strict_strtoul is obsolete, use kstrtoul instead
#519: FILE: drivers/video/backlight/adp8860_bl.c:443:
+	ret = strict_strtoul(buf, 10, &val);

The simple_strtol(), simple_strtoll(), simple_strtoul(), and
simple_strtoull() functions explicitly ignore overflows, which
may lead to unexpected results in callers.  The respective kstrtol(),
kstrtoll(), kstrtoul(), and kstrtoull() functions tend to be the
correct replacements.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#simple-strtol-simple-strtoll-simple-strtoul-simple-strtoull

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#531: FILE: drivers/video/backlight/adp8860_bl.c:455:
+static ssize_t adp8860_bl_l3_dark_max_show(struct device *dev,
+				     struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#537: FILE: drivers/video/backlight/adp8860_bl.c:461:
+static ssize_t adp8860_bl_l3_dark_max_store(struct device *dev,
+		struct device_attribute *attr, const char *buf, size_t count)

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#540: FILE: drivers/video/backlight/adp8860_bl.c:464:
+}

The permissions used in DEVICE_ATTR are unusual.
Typically only three permissions are used - 0644 (RW), 0444 (RO)
and 0200 (WO).

See: https://www.kernel.org/doc/html/latest/filesystems/sysfs.html#attributes

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#546: FILE: drivers/video/backlight/adp8860_bl.c:470:
+static ssize_t adp8860_bl_l2_office_max_show(struct device *dev,
+		struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#552: FILE: drivers/video/backlight/adp8860_bl.c:476:
+static ssize_t adp8860_bl_l2_office_max_store(struct device *dev,
+		struct device_attribute *attr, const char *buf, size_t count)

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#555: FILE: drivers/video/backlight/adp8860_bl.c:479:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#560: FILE: drivers/video/backlight/adp8860_bl.c:484:
+static ssize_t adp8860_bl_l1_daylight_max_show(struct device *dev,
+			struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#566: FILE: drivers/video/backlight/adp8860_bl.c:490:
+static ssize_t adp8860_bl_l1_daylight_max_store(struct device *dev,
+		struct device_attribute *attr, const char *buf, size_t count)

WARNING:CONSIDER_KSTRTO: strict_strtoul is obsolete, use kstrtoul instead
#570: FILE: drivers/video/backlight/adp8860_bl.c:494:
+	strict_strtoul(buf, 10, &data->cached_daylight_max);

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#572: FILE: drivers/video/backlight/adp8860_bl.c:496:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#577: FILE: drivers/video/backlight/adp8860_bl.c:501:
+static ssize_t adp8860_bl_l3_dark_dim_show(struct device *dev,
+			struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#583: FILE: drivers/video/backlight/adp8860_bl.c:507:
+static ssize_t adp8860_bl_l3_dark_dim_store(struct device *dev,
+				     struct device_attribute *attr,

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#587: FILE: drivers/video/backlight/adp8860_bl.c:511:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#592: FILE: drivers/video/backlight/adp8860_bl.c:516:
+static ssize_t adp8860_bl_l2_office_dim_show(struct device *dev,
+			struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#598: FILE: drivers/video/backlight/adp8860_bl.c:522:
+static ssize_t adp8860_bl_l2_office_dim_store(struct device *dev,
+				     struct device_attribute *attr,

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#602: FILE: drivers/video/backlight/adp8860_bl.c:526:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#607: FILE: drivers/video/backlight/adp8860_bl.c:531:
+static ssize_t adp8860_bl_l1_daylight_dim_show(struct device *dev,
+				     struct device_attribute *attr, char *buf)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#613: FILE: drivers/video/backlight/adp8860_bl.c:537:
+static ssize_t adp8860_bl_l1_daylight_dim_store(struct device *dev,
+				     struct device_attribute *attr,

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#617: FILE: drivers/video/backlight/adp8860_bl.c:541:
+}

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#623: FILE: drivers/video/backlight/adp8860_bl.c:547:
+static ssize_t adp8860_bl_ambient_light_level_show(struct device *dev,
+				     struct device_attribute *attr, char *buf)

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#627: FILE: drivers/video/backlight/adp8860_bl.c:551:
+	uint8_t reg_val;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u16' over 'uint16_t'
#628: FILE: drivers/video/backlight/adp8860_bl.c:552:
+	uint16_t ret_val;

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'adp8860_bl_ambient_light_level_show' to 'ambient_light_level_show'
#643: FILE: drivers/video/backlight/adp8860_bl.c:567:
+}

The function names used in DEVICE_ATTR is unusual.
Typically, the store and show functions are used with <attr>_store and
<attr>_show, where <attr> is a named attribute variable of the device.

Consider the following examples::

  static DEVICE_ATTR(type, 0444, type_show, NULL);
  static DEVICE_ATTR(power, 0644, power_show, power_store);

The function names should preferably follow the above pattern.

See: https://www.kernel.org/doc/html/latest/driver-api/driver-model/device.html#attributes

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#648: FILE: drivers/video/backlight/adp8860_bl.c:572:
+static ssize_t adp8860_bl_ambient_light_zone_show(struct device *dev,
+				     struct device_attribute *attr, char *buf)

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#652: FILE: drivers/video/backlight/adp8860_bl.c:576:
+	uint8_t reg_val;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#666: FILE: drivers/video/backlight/adp8860_bl.c:590:
+static ssize_t adp8860_bl_ambient_light_zone_store(struct device *dev,
+				     struct device_attribute *attr,

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#671: FILE: drivers/video/backlight/adp8860_bl.c:595:
+	uint8_t reg_val;

WARNING:CONSIDER_KSTRTO: strict_strtoul is obsolete, use kstrtoul instead
#674: FILE: drivers/video/backlight/adp8860_bl.c:598:
+	ret = strict_strtoul(buf, 10, &val);

WARNING:DEVICE_ATTR_PERMS: DEVICE_ATTR unusual permissions '0664' used
#695: FILE: drivers/video/backlight/adp8860_bl.c:619:
+}

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#719: FILE: drivers/video/backlight/adp8860_bl.c:643:
+static int __devinit adp8860_probe(struct i2c_client *client,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#720: FILE: drivers/video/backlight/adp8860_bl.c:644:
+static int __devinit adp8860_probe(struct i2c_client *client,
+					const struct i2c_device_id *id)

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#726: FILE: drivers/video/backlight/adp8860_bl.c:650:
+	uint8_t reg_val;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#730: FILE: drivers/video/backlight/adp8860_bl.c:654:
+	if (!i2c_check_functionality(client->adapter,
+					I2C_FUNC_SMBUS_BYTE_DATA)) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!data"
#750: FILE: drivers/video/backlight/adp8860_bl.c:674:
+	if (data == NULL)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#765: FILE: drivers/video/backlight/adp8860_bl.c:689:
+	bl = backlight_device_register(dev_driver_string(&client->dev),
+			&client->dev, data, &adp8860_bl_ops);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#779: FILE: drivers/video/backlight/adp8860_bl.c:703:
+		ret = sysfs_create_group(&bl->dev.kobj,
+			&adp8860_bl_attr_group);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#804: FILE: drivers/video/backlight/adp8860_bl.c:728:
+		sysfs_remove_group(&data->bl->dev.kobj,
+			&adp8860_bl_attr_group);

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#814: FILE: drivers/video/backlight/adp8860_bl.c:738:
+static int __devexit adp8860_remove(struct i2c_client *client)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#825: FILE: drivers/video/backlight/adp8860_bl.c:749:
+		sysfs_remove_group(&data->bl->dev.kobj,
+			&adp8860_bl_attr_group);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#892: FILE: include/linux/i2c/adp8860.h:1:
+/*

CHECK:BIT_MACRO: Prefer using the BIT macro
#917: FILE: include/linux/i2c/adp8860.h:26:
+#define ADP8860_LED_OFFT_600ms	(1 << FLAG_OFFT_SHIFT)

CHECK:BIT_MACRO: Prefer using the BIT macro
#938: FILE: include/linux/i2c/adp8860.h:47:
+#define ADP8860_BL_D7		(1 << 6)

CHECK:BIT_MACRO: Prefer using the BIT macro
#939: FILE: include/linux/i2c/adp8860.h:48:
+#define ADP8860_BL_D6		(1 << 5)

CHECK:BIT_MACRO: Prefer using the BIT macro
#940: FILE: include/linux/i2c/adp8860.h:49:
+#define ADP8860_BL_D5		(1 << 4)

CHECK:BIT_MACRO: Prefer using the BIT macro
#941: FILE: include/linux/i2c/adp8860.h:50:
+#define ADP8860_BL_D4		(1 << 3)

CHECK:BIT_MACRO: Prefer using the BIT macro
#942: FILE: include/linux/i2c/adp8860.h:51:
+#define ADP8860_BL_D3		(1 << 2)

CHECK:BIT_MACRO: Prefer using the BIT macro
#943: FILE: include/linux/i2c/adp8860.h:52:
+#define ADP8860_BL_D2		(1 << 1)

CHECK:BIT_MACRO: Prefer using the BIT macro
#944: FILE: include/linux/i2c/adp8860.h:53:
+#define ADP8860_BL_D1		(1 << 0)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'I' may be better as '(I)' to avoid precedence issues
#980: FILE: include/linux/i2c/adp8860.h:89:
+#define ADP8860_BL_CUR_mA(I)		((I * 127) / 30)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'I' may be better as '(I)' to avoid precedence issues
#985: FILE: include/linux/i2c/adp8860.h:94:
+#define ADP8860_L2_COMP_CURR_uA(I)	((I * 255) / 1106)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'I' may be better as '(I)' to avoid precedence issues
#990: FILE: include/linux/i2c/adp8860.h:99:
+#define ADP8860_L3_COMP_CURR_uA(I)	((I * 255) / 138)

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000002501.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 25 warnings, 61 checks, 970 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000002501.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
