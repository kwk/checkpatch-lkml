WARNING:TYPO_SPELLING: 'defitions' may be misspelled - perhaps 'definitions'?
#22: 
Subject: [TOMOYO #6 retry 06/21] Data structures and prototype defitions.
                                                               ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:COMMIT_MESSAGE: Missing commit description - Add an appropriate one

The patch is missing a commit description.  A brief
description of the changes made by the patch should be added.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#describe-your-changes

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#38: FILE: security/tomoyo/include/realpath.h:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#39: FILE: security/tomoyo/include/realpath.h:2:
+ * security/tomoyo/include/realpath.h

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#86: FILE: security/tomoyo/include/tomoyo.h:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#87: FILE: security/tomoyo/include/tomoyo.h:2:
+ * security/tomoyo/include/tomoyo.h

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'pos' - possible side-effects?
#140: FILE: security/tomoyo/include/tomoyo.h:55:
+#define list_for_each_cookie(pos, cookie, head) \
+	for ((cookie) || ((cookie) = (head)), pos = (cookie)->next; \
+	     prefetch(pos->next), pos != (head) || ((cookie) = NULL); \
+	     (cookie) = pos, pos = pos->next)

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'cookie' - possible side-effects?
#140: FILE: security/tomoyo/include/tomoyo.h:55:
+#define list_for_each_cookie(pos, cookie, head) \
+	for ((cookie) || ((cookie) = (head)), pos = (cookie)->next; \
+	     prefetch(pos->next), pos != (head) || ((cookie) = NULL); \
+	     (cookie) = pos, pos = pos->next)

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'head' - possible side-effects?
#140: FILE: security/tomoyo/include/tomoyo.h:55:
+#define list_for_each_cookie(pos, cookie, head) \
+	for ((cookie) || ((cookie) = (head)), pos = (cookie)->next; \
+	     prefetch(pos->next), pos != (head) || ((cookie) = NULL); \
+	     (cookie) = pos, pos = pos->next)

WARNING:LINE_SPACING: Missing a blank line after declarations
#159: FILE: security/tomoyo/include/tomoyo.h:74:
+	struct list_head *next = head;
+	new->next = next;

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:CONST_STRUCT: struct seq_operations should normally be const
#166: FILE: security/tomoyo/include/tomoyo.h:81:
+extern struct seq_operations mounts_op;

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

CHECK:SPACING: No space is necessary after a cast
#176: FILE: security/tomoyo/include/tomoyo.h:91:
+#define TMY_SECURITY ((struct tmy_security *) current->security)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#202: FILE: security/tomoyo/include/tomoyo.h:117:
+
+

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#208: FILE: security/tomoyo/include/tomoyo.h:123:
+};
+struct dentry;

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#224: FILE: security/tomoyo/include/tomoyo.h:139:
+};
+struct condition_list;

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __packed over __attribute__((__packed__))
#243: FILE: security/tomoyo/include/tomoyo.h:158:
+} __attribute__((__packed__));

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#362: FILE: security/tomoyo/include/tomoyo.h:277:
+#define TMY_AGGREGATOR               ^I"aggregator "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#363: FILE: security/tomoyo/include/tomoyo.h:278:
+#define TMY_AGGREGATOR_LEN           ^I(sizeof(TMY_AGGREGATOR) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#364: FILE: security/tomoyo/include/tomoyo.h:279:
+#define TMY_ALIAS                    ^I"alias "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#365: FILE: security/tomoyo/include/tomoyo.h:280:
+#define TMY_ALIAS_LEN                ^I(sizeof(TMY_ALIAS) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#366: FILE: security/tomoyo/include/tomoyo.h:281:
+#define TMY_ALLOW_READ               ^I"allow_read "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#367: FILE: security/tomoyo/include/tomoyo.h:282:
+#define TMY_ALLOW_READ_LEN           ^I(sizeof(TMY_ALLOW_READ) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#368: FILE: security/tomoyo/include/tomoyo.h:283:
+#define TMY_DELETE                   ^I"delete "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#369: FILE: security/tomoyo/include/tomoyo.h:284:
+#define TMY_DELETE_LEN               ^I(sizeof(TMY_DELETE) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#370: FILE: security/tomoyo/include/tomoyo.h:285:
+#define TMY_DENY_REWRITE             ^I"deny_rewrite "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#371: FILE: security/tomoyo/include/tomoyo.h:286:
+#define TMY_DENY_REWRITE_LEN         ^I(sizeof(TMY_DENY_REWRITE) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#372: FILE: security/tomoyo/include/tomoyo.h:287:
+#define TMY_FILE_PATTERN             ^I"file_pattern "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#373: FILE: security/tomoyo/include/tomoyo.h:288:
+#define TMY_FILE_PATTERN_LEN         ^I(sizeof(TMY_FILE_PATTERN) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#374: FILE: security/tomoyo/include/tomoyo.h:289:
+#define TMY_INITIALIZE_DOMAIN        ^I"initialize_domain "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#375: FILE: security/tomoyo/include/tomoyo.h:290:
+#define TMY_INITIALIZE_DOMAIN_LEN    ^I(sizeof(TMY_INITIALIZE_DOMAIN) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#376: FILE: security/tomoyo/include/tomoyo.h:291:
+#define TMY_KEEP_DOMAIN              ^I"keep_domain "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#377: FILE: security/tomoyo/include/tomoyo.h:292:
+#define TMY_KEEP_DOMAIN_LEN          ^I(sizeof(TMY_KEEP_DOMAIN) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#378: FILE: security/tomoyo/include/tomoyo.h:293:
+#define TMY_NO_INITIALIZE_DOMAIN     ^I"no_initialize_domain "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#379: FILE: security/tomoyo/include/tomoyo.h:294:
+#define TMY_NO_INITIALIZE_DOMAIN_LEN ^I(sizeof(TMY_NO_INITIALIZE_DOMAIN) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#380: FILE: security/tomoyo/include/tomoyo.h:295:
+#define TMY_NO_KEEP_DOMAIN           ^I"no_keep_domain "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#381: FILE: security/tomoyo/include/tomoyo.h:296:
+#define TMY_NO_KEEP_DOMAIN_LEN       ^I(sizeof(TMY_NO_KEEP_DOMAIN) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#382: FILE: security/tomoyo/include/tomoyo.h:297:
+#define TMY_PATH_GROUP               ^I"path_group "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#383: FILE: security/tomoyo/include/tomoyo.h:298:
+#define TMY_PATH_GROUP_LEN           ^I(sizeof(TMY_PATH_GROUP) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#384: FILE: security/tomoyo/include/tomoyo.h:299:
+#define TMY_SELECT                   ^I"select "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#385: FILE: security/tomoyo/include/tomoyo.h:300:
+#define TMY_SELECT_LEN               ^I(sizeof(TMY_SELECT) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#386: FILE: security/tomoyo/include/tomoyo.h:301:
+#define TMY_UNDELETE                 ^I"undelete "$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#387: FILE: security/tomoyo/include/tomoyo.h:302:
+#define TMY_UNDELETE_LEN             ^I(sizeof(TMY_UNDELETE) - 1)$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#398: FILE: security/tomoyo/include/tomoyo.h:313:
+#define TMY_ROOT_NAME ^I^I        "<kernel>"$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#399: FILE: security/tomoyo/include/tomoyo.h:314:
+#define TMY_ROOT_NAME_LEN ^I        (sizeof(TMY_ROOT_NAME) - 1)$

WARNING:SPACING: Unnecessary space before function pointer arguments
#544: FILE: security/tomoyo/include/tomoyo.h:459:
+	int (*read) (struct io_buffer *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct io_buffer *' should also have an identifier name
#544: FILE: security/tomoyo/include/tomoyo.h:459:
+	int (*read) (struct io_buffer *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:SPACING: Unnecessary space before function pointer arguments
#546: FILE: security/tomoyo/include/tomoyo.h:461:
+	int (*write) (struct io_buffer *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct io_buffer *' should also have an identifier name
#546: FILE: security/tomoyo/include/tomoyo.h:461:
+	int (*write) (struct io_buffer *);

WARNING:SPACING: Unnecessary space before function pointer arguments
#548: FILE: security/tomoyo/include/tomoyo.h:463:
+	int (*poll) (struct file *file, poll_table *wait);

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#579: FILE: security/tomoyo/include/tomoyo.h:494:
+int tmy_conceal_mount(struct nameidata *nd);
                                         ^^

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __printf(1, 2) over __attribute__((format(printf, 1, 2)))
#627: FILE: security/tomoyo/include/tomoyo.h:542:
+	__attribute__((format(printf, 1, 2)));

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __printf(1, 2) over __attribute__((format(printf, 1, 2)))
#630: FILE: security/tomoyo/include/tomoyo.h:545:
+	__attribute__((format(printf, 1, 2)));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#638: FILE: security/tomoyo/include/tomoyo.h:553:
+bool tmy_is_correct_domain(const unsigned char *domainname,
+			  const char *function);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#640: FILE: security/tomoyo/include/tomoyo.h:555:
+bool tmy_correct_path(const char *filename,
+		     const int start_type,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#646: FILE: security/tomoyo/include/tomoyo.h:561:
+bool tmy_path_match(const struct path_info *pathname0,
+		   const struct path_info *pattern0);

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __printf(2, 3) over __attribute__((format(printf, 2, 3)))
#693: FILE: security/tomoyo/include/tomoyo.h:608:
+	__attribute__((format(printf, 2, 3)));

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __printf(3, 4) over __attribute__((format(printf, 3, 4)))
#695: FILE: security/tomoyo/include/tomoyo.h:610:
+	__attribute__((format(printf, 3, 4)));

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct linux_binprm *' should also have an identifier name
#726: FILE: security/tomoyo/include/tomoyo.h:641:
+int tmy_find_next_domain(struct linux_binprm *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct domain_info **' should also have an identifier name
#726: FILE: security/tomoyo/include/tomoyo.h:641:
+int tmy_find_next_domain(struct linux_binprm *,

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#732: FILE: security/tomoyo/include/tomoyo.h:647:
+int tmy_exec_perm(const struct path_info *filename, struct file *filp);
                                                                  ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#744: FILE: security/tomoyo/include/tomoyo.h:659:
+int tmy_rewrite_perm(struct file *filp);
                                   ^^^^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#764: FILE: security/tomoyo/include/tomoyo.h:679:
+#define TMY_TYPE_FILE_ACL    ^I100$

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000339096.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 52 warnings, 10 checks, 740 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000339096.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
