WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#53: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#58: FILE: drivers/block/drbd/drbd_main.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#59: FILE: drivers/block/drbd/drbd_main.c:2:
+/*
+   drbd.c

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#79: FILE: drivers/block/drbd/drbd_main.c:22:
+   the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#87: FILE: drivers/block/drbd/drbd_main.c:30:
+#include <asm/uaccess.h>

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#124: FILE: drivers/block/drbd/drbd_main.c:67:
+int drbdd_init(struct drbd_thread *);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct drbd_thread *' should also have an identifier name
#124: FILE: drivers/block/drbd/drbd_main.c:67:
+int drbdd_init(struct drbd_thread *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#125: FILE: drivers/block/drbd/drbd_main.c:68:
+int drbd_worker(struct drbd_thread *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct drbd_thread *' should also have an identifier name
#125: FILE: drivers/block/drbd/drbd_main.c:68:
+int drbd_worker(struct drbd_thread *);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#126: FILE: drivers/block/drbd/drbd_main.c:69:
+int drbd_asender(struct drbd_thread *);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct drbd_thread *' should also have an identifier name
#126: FILE: drivers/block/drbd/drbd_main.c:69:
+int drbd_asender(struct drbd_thread *);

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#128: FILE: drivers/block/drbd/drbd_main.c:71:
+int drbd_init(void);

WARNING:SPLIT_STRING: quoted string split across lines
#151: FILE: drivers/block/drbd/drbd_main.c:94:
+MODULE_AUTHOR("Philipp Reisner <phil@linbit.com>, "
+	      "Lars Ellenberg <lars@linbit.com>");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#162: FILE: drivers/block/drbd/drbd_main.c:105:
+ * this becomes the boot parameter drbd.minor_count */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#192: FILE: drivers/block/drbd/drbd_main.c:135:
+ * to run. Default is /sbin/drbdadm */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#210: FILE: drivers/block/drbd/drbd_main.c:153:
+/* I do not use a standard mempool, because:
+   1) I want to hand out the preallocated objects first.

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#216: FILE: drivers/block/drbd/drbd_main.c:159:
+spinlock_t   drbd_pp_lock;

WARNING:CONST_STRUCT: struct block_device_operations should normally be const
#222: FILE: drivers/block/drbd/drbd_main.c:165:
+static struct block_device_operations drbd_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:ARRAY_SIZE: Prefer ARRAY_SIZE(A)
#228: FILE: drivers/block/drbd/drbd_main.c:171:
+#define ARRY_SIZE(A) (sizeof(A)/sizeof(A[0]))

The ARRAY_SIZE(foo) macro should be preferred over
sizeof(foo)/sizeof(foo[0]) for finding number of elements in an
array.

The macro is defined in include/linux/kernel.h::

  #define ARRAY_SIZE(x) (sizeof(x) / sizeof((x)[0]))

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#228: FILE: drivers/block/drbd/drbd_main.c:171:
+#define ARRY_SIZE(A) (sizeof(A)/sizeof(A[0]))
                                ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#232: FILE: drivers/block/drbd/drbd_main.c:175:
+/* When checking with sparse, and this is an inline function, sparse will
+   give tons of false positives. When this is a real functions sparse works.

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*b)...) over kmalloc(sizeof(struct drbd_tl_epoch)...)
#264: FILE: drivers/block/drbd/drbd_main.c:207:
+	b = kmalloc(sizeof(struct drbd_tl_epoch), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#316: FILE: drivers/block/drbd/drbd_main.c:259:
+	 * when using TCQ for our write ordering code */

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#317: FILE: drivers/block/drbd/drbd_main.c:260:
+	new->br_number = (newest_before->br_number+1) ?: 1;
 	                                          ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#335: FILE: drivers/block/drbd/drbd_main.c:278:
+void tl_release(struct drbd_conf *mdev, unsigned int barrier_nr,
+		       unsigned int set_size)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b"
#346: FILE: drivers/block/drbd/drbd_main.c:289:
+	if (b == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#368: FILE: drivers/block/drbd/drbd_main.c:311:
+	/* There could be requests on the list waiting for completion
+	   of the write to the local disk. To avoid corruptions of

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#388: FILE: drivers/block/drbd/drbd_main.c:331:
+		/* if nob == NULL b was the only barrier, and becomes the new
+		   barrer. Threfore mdev->oldest_tle points already to b */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#388: FILE: drivers/block/drbd/drbd_main.c:331:
+		   barrer. Threfore mdev->oldest_tle points already to b */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "nob"
#390: FILE: drivers/block/drbd/drbd_main.c:333:
+		D_ASSERT(nob != NULL);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#405: FILE: drivers/block/drbd/drbd_main.c:348:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#432: FILE: drivers/block/drbd/drbd_main.c:375:
+		 * in case local io is still pending */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#437: FILE: drivers/block/drbd/drbd_main.c:380:
+		 * in which case w.cb is still NULL. */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "b->w.cb"
#438: FILE: drivers/block/drbd/drbd_main.c:381:
+		if (b->w.cb != NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!tmp"
#443: FILE: drivers/block/drbd/drbd_main.c:386:
+			D_ASSERT(tmp == NULL);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'drbd_io_error', this function's name, in a string
#510: FILE: drivers/block/drbd/drbd_main.c:453:
+			dev_err(DEV, "Sending state in drbd_io_error() failed\n");

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#517: FILE: drivers/block/drbd/drbd_main.c:460:
+	 * to ensure the md-sync-timer is stopped if running. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#538: FILE: drivers/block/drbd/drbd_main.c:481:
+	return (os.conn >= C_CONNECTED && ns.conn >= C_CONNECTED &&
+		 ((os.role != R_PRIMARY && ns.role == R_PRIMARY) ||

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#570: FILE: drivers/block/drbd/drbd_main.c:513:
+void drbd_force_state(struct drbd_conf *mdev,
+	union drbd_state mask, union drbd_state val)

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#580: FILE: drivers/block/drbd/drbd_main.c:523:
+int drbd_send_state_req(struct drbd_conf *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct drbd_conf *' should also have an identifier name
#580: FILE: drivers/block/drbd/drbd_main.c:523:
+int drbd_send_state_req(struct drbd_conf *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'union drbd_state' should also have an identifier name
#580: FILE: drivers/block/drbd/drbd_main.c:523:
+int drbd_send_state_req(struct drbd_conf *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'union drbd_state' should also have an identifier name
#580: FILE: drivers/block/drbd/drbd_main.c:523:
+int drbd_send_state_req(struct drbd_conf *,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#584: FILE: drivers/block/drbd/drbd_main.c:527:
+static enum drbd_state_ret_codes _req_st_cond(struct drbd_conf *mdev,
+				    union drbd_state mask, union drbd_state val)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#668: FILE: drivers/block/drbd/drbd_main.c:611:
+		wait_event(mdev->state_wait,
+			(rv = _req_st_cond(mdev, mask, val)));

WARNING:TYPO_SPELLING: 'Reqest' may be misspelled - perhaps 'Request'?
#700: FILE: drivers/block/drbd/drbd_main.c:643:
+ * _drbd_request_state() - Reqest a state change (with flags)
                            ^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#723: FILE: drivers/block/drbd/drbd_main.c:666:
+	dev_err(DEV, " %s = { cs:%s ro:%s/%s ds:%s/%s %c%c%c%c }\n",
+	    name,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#737: FILE: drivers/block/drbd/drbd_main.c:680:
+void print_st_err(struct drbd_conf *mdev,
+	union drbd_state os, union drbd_state ns, int err)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#746: FILE: drivers/block/drbd/drbd_main.c:689:
+
+

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'A' - possible side-effects?
#755: FILE: drivers/block/drbd/drbd_main.c:698:
+#define PSC(A) \
+	({ if (ns.A != os.A) { \
+		pbp += sprintf(pbp, #A "( %s -> %s ) ", \
+			      A##s_to_name(os.A), \
+			      A##s_to_name(ns.A)); \
+	} })

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'A' may be better as '(A)' to avoid precedence issues
#755: FILE: drivers/block/drbd/drbd_main.c:698:
+#define PSC(A) \
+	({ if (ns.A != os.A) { \
+		pbp += sprintf(pbp, #A "( %s -> %s ) ", \
+			      A##s_to_name(os.A), \
+			      A##s_to_name(ns.A)); \
+	} })

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#756: FILE: drivers/block/drbd/drbd_main.c:699:
+	({ if (ns.A != os.A) { \

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 53)
#787: FILE: drivers/block/drbd/drbd_main.c:730:
+	if (rv <= 0)
+		/* already found a reason to abort */;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#820: FILE: drivers/block/drbd/drbd_main.c:763:
+	else if ((ns.conn == C_VERIFY_S || ns.conn == C_VERIFY_T) &&
+		  mdev->agreed_pro_version < 88)

WARNING:TYPO_SPELLING: 'Dissalow' may be misspelled - perhaps 'Disallow'?
#894: FILE: drivers/block/drbd/drbd_main.c:837:
+	/* Dissalow Network errors to configure a device's network part */
 	   ^^^^^^^^

WARNING:TYPO_SPELLING: 'UpToDate' may be misspelled - perhaps 'Up-to-date'?
#950: FILE: drivers/block/drbd/drbd_main.c:893:
+			dev_warn(DEV, "Implicitly set disk from Outdated to UpToDate\n");
 			                                                    ^^^^^^^^

WARNING:TYPO_SPELLING: 'UpToDate' may be misspelled - perhaps 'Up-to-date'?
#972: FILE: drivers/block/drbd/drbd_main.c:915:
+			dev_warn(DEV, "Implicitly set pdsk from Outdated to UpToDate\n");
 			                                                    ^^^^^^^^

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 24)
#989: FILE: drivers/block/drbd/drbd_main.c:932:
+	if (fp == FP_STONITH &&
[...]
+			ns.susp = 1;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1018: FILE: drivers/block/drbd/drbd_main.c:961:
+		 * first P_OV_REQUEST is received */

WARNING:LINE_SPACING: Missing a blank line after declarations
#1022: FILE: drivers/block/drbd/drbd_main.c:965:
+		unsigned long bit = BM_SECT_TO_BIT(mdev->ov_start_sector);
+		if (bit >= mdev->rs_total)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1039: FILE: drivers/block/drbd/drbd_main.c:982:
+int __drbd_set_state(struct drbd_conf *mdev,
+		    union drbd_state ns, enum chg_state_flags flags,

CHECK:BRACES: braces {} should be used on all arms of this statement
#1059: FILE: drivers/block/drbd/drbd_main.c:1002:
+		if (rv < SS_SUCCESS) {
[...]
+		} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1061: FILE: drivers/block/drbd/drbd_main.c:1004:
+			/* If the old state was illegal as well, then let
+			   this happen...*/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1061: FILE: drivers/block/drbd/drbd_main.c:1004:
+			   this happen...*/

WARNING:SPLIT_STRING: quoted string split across lines
#1065: FILE: drivers/block/drbd/drbd_main.c:1008:
+				dev_err(DEV, "Considering state change from bad state. "
+				    "Error would be: '%s'\n",

CHECK:BRACES: Unbalanced braces around else statement
#1071: FILE: drivers/block/drbd/drbd_main.c:1014:
+		} else

WARNING:LINE_SPACING: Missing a blank line after declarations
#1086: FILE: drivers/block/drbd/drbd_main.c:1029:
+		char *pbp, pb[300];
+		pbp = pb;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1130: FILE: drivers/block/drbd/drbd_main.c:1073:
+		dev_info(DEV, "Online Verify reached sector %llu\n",
+			(unsigned long long)mdev->ov_start_sector);

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1136: FILE: drivers/block/drbd/drbd_main.c:1079:
+		mdev->rs_paused += (long)jiffies-(long)mdev->rs_mark_time;
 		                                ^

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1141: FILE: drivers/block/drbd/drbd_main.c:1084:
+			/* This if (!test_bit) is only needed for the case
+			   that a device that has ceased to used its timer,

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1143: FILE: drivers/block/drbd/drbd_main.c:1086:
+			   paused and resumed. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1173: FILE: drivers/block/drbd/drbd_main.c:1116:
+			dev_info(DEV, "Starting Online Verify from sector %llu\n",
+					(unsigned long long)mdev->ov_position);

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1179: FILE: drivers/block/drbd/drbd_main.c:1122:
+		u32 mdf = mdev->ldev->md.flags & ~(MDF_CONSISTENT|MDF_PRIMARY_IND|
 		                                                 ^

CHECK:SPACING: space preferred before that '|' (ctx:VxE)
#1179: FILE: drivers/block/drbd/drbd_main.c:1122:
+		u32 mdf = mdev->ldev->md.flags & ~(MDF_CONSISTENT|MDF_PRIMARY_IND|
 		                                                                 ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1180: FILE: drivers/block/drbd/drbd_main.c:1123:
+						 MDF_CONNECTED_IND|MDF_WAS_UP_TO_DATE|
 						                  ^

CHECK:SPACING: space preferred before that '|' (ctx:VxE)
#1180: FILE: drivers/block/drbd/drbd_main.c:1123:
+						 MDF_CONNECTED_IND|MDF_WAS_UP_TO_DATE|
 						                                     ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1181: FILE: drivers/block/drbd/drbd_main.c:1124:
+						 MDF_PEER_OUT_DATED|MDF_CRASHED_PRIMARY);
 						                   ^

CHECK:SPACING: No space is necessary after a cast
#1242: FILE: drivers/block/drbd/drbd_main.c:1185:
+	ascw = (struct after_state_chg_work *) w;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "ascw->done"
#1245: FILE: drivers/block/drbd/drbd_main.c:1188:
+		D_ASSERT(ascw->done != NULL);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1303: FILE: drivers/block/drbd/drbd_main.c:1246:
+	/* Here we have the actions that are performed after a
+	   state change. This function might sleep */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1303: FILE: drivers/block/drbd/drbd_main.c:1246:
+	   state change. This function might sleep */

WARNING:TYPO_SPELLING: 'successfull' may be misspelled - perhaps 'successful'?
#1306: FILE: drivers/block/drbd/drbd_main.c:1249:
+		/* case1: The outdate peer handler is successfull:
 		                                      ^^^^^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1307: FILE: drivers/block/drbd/drbd_main.c:1250:
+		 * case2: The connection was established again: */

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1328: FILE: drivers/block/drbd/drbd_main.c:1271:
+	     os.pdsk != D_OUTDATED)
+	&&  (ns.pdsk < D_INCONSISTENT ||

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'os.aftr_isp != ns.aftr_isp'
#1364: FILE: drivers/block/drbd/drbd_main.c:1307:
+	if (ns.conn >= C_CONNECTED &&
+	     ((os.aftr_isp != ns.aftr_isp) ||
+	      (os.user_isp != ns.user_isp)))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'os.user_isp != ns.user_isp'
#1364: FILE: drivers/block/drbd/drbd_main.c:1307:
+	if (ns.conn >= C_CONNECTED &&
+	     ((os.aftr_isp != ns.aftr_isp) ||
+	      (os.user_isp != ns.user_isp)))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1365: FILE: drivers/block/drbd/drbd_main.c:1308:
+	if (ns.conn >= C_CONNECTED &&
+	     ((os.aftr_isp != ns.aftr_isp) ||

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1375: FILE: drivers/block/drbd/drbd_main.c:1318:
+	/* Make sure the peer gets informed about eventual state
+	   changes (ISP bits) while we were in WFReportParams. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1375: FILE: drivers/block/drbd/drbd_main.c:1318:
+	   changes (ISP bits) while we were in WFReportParams. */

WARNING:LONG_LINE_STRING: line length of 117 exceeds 100 columns
#1382: FILE: drivers/block/drbd/drbd_main.c:1325:
+		drbd_queue_bitmap_io(mdev, &drbd_bmio_set_n_write, &abw_start_sync, "set_n_write from StartingSync");

A string starts before but extends beyond the maximum line length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:LONG_LINE_STRING: line length of 104 exceeds 100 columns
#1387: FILE: drivers/block/drbd/drbd_main.c:1330:
+		drbd_queue_bitmap_io(mdev, &drbd_bmio_set_n_write, NULL, "set_n_write from invalidate");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1391: FILE: drivers/block/drbd/drbd_main.c:1334:
+		/* since get_ldev() only works as long as disk>=D_INCONSISTENT,
+		   and it is D_DISKLESS here, local_cnt can only go down, it can

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1392: FILE: drivers/block/drbd/drbd_main.c:1335:
+		   not increase... It will reach zero */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1405: FILE: drivers/block/drbd/drbd_main.c:1348:
+		__no_warn(local,
+			drbd_free_bc(mdev->ldev);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1430: FILE: drivers/block/drbd/drbd_main.c:1373:
+	/* Terminate worker thread if we are unconfigured - it will be
+	   restarted as needed... */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1430: FILE: drivers/block/drbd/drbd_main.c:1373:
+	   restarted as needed... */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1444: FILE: drivers/block/drbd/drbd_main.c:1387:
+
+

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1447: FILE: drivers/block/drbd/drbd_main.c:1390:
+	struct drbd_thread *thi = (struct drbd_thread *) arg;
 	                    ^^^

CHECK:SPACING: No space is necessary after a cast
#1447: FILE: drivers/block/drbd/drbd_main.c:1390:
+	struct drbd_thread *thi = (struct drbd_thread *) arg;

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1453: FILE: drivers/block/drbd/drbd_main.c:1396:
+	retval = thi->function(thi);
 	                       ^^^

WARNING:TYPO_SPELLING: 'assignement' may be misspelled - perhaps 'assignment'?
#1462: FILE: drivers/block/drbd/drbd_main.c:1405:
+	 * t_state check and assignement needs to be within the same spinlock,
 	                     ^^^^^^^^^^^

CHECK:CAMELCASE: Avoid CamelCase: <Restarting>
#1467: FILE: drivers/block/drbd/drbd_main.c:1410:
+	if (thi->t_state == Restarting) {

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <Running>
#1469: FILE: drivers/block/drbd/drbd_main.c:1412:
+		thi->t_state = Running;

CHECK:CAMELCASE: Avoid CamelCase: <None>
#1475: FILE: drivers/block/drbd/drbd_main.c:1418:
+	thi->t_state = None;

WARNING:MEMORY_BARRIER: memory barrier without comment
#1476: FILE: drivers/block/drbd/drbd_main.c:1419:
+	smp_mb();

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1487: FILE: drivers/block/drbd/drbd_main.c:1430:
+static void drbd_thread_init(struct drbd_conf *mdev, struct drbd_thread *thi,
                                                                          ^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1488: FILE: drivers/block/drbd/drbd_main.c:1431:
+static void drbd_thread_init(struct drbd_conf *mdev, struct drbd_thread *thi,
+		      int (*func) (struct drbd_thread *))

WARNING:SPACING: Unnecessary space before function pointer arguments
#1488: FILE: drivers/block/drbd/drbd_main.c:1431:
+		      int (*func) (struct drbd_thread *))

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1497: FILE: drivers/block/drbd/drbd_main.c:1440:
+int drbd_thread_start(struct drbd_thread *thi)
                                           ^^^

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1504: FILE: drivers/block/drbd/drbd_main.c:1447:
+		thi == &mdev->receiver ? "receiver" :
 		^^^

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1505: FILE: drivers/block/drbd/drbd_main.c:1448:
+		thi == &mdev->asender  ? "asender"  :
 		^^^

WARNING:TYPO_SPELLING: 'asender' may be misspelled - perhaps 'ascender'?
#1505: FILE: drivers/block/drbd/drbd_main.c:1448:
+		thi == &mdev->asender  ? "asender"  :
 		              ^^^^^^^

WARNING:TYPO_SPELLING: 'asender' may be misspelled - perhaps 'ascender'?
#1505: FILE: drivers/block/drbd/drbd_main.c:1448:
+		thi == &mdev->asender  ? "asender"  :
 		                          ^^^^^^^

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1506: FILE: drivers/block/drbd/drbd_main.c:1449:
+		thi == &mdev->worker   ? "worker"   : "NONSENSE";
 		^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1509: FILE: drivers/block/drbd/drbd_main.c:1452:
+	 * while holding the req lock irqsave */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1515: FILE: drivers/block/drbd/drbd_main.c:1458:
+		dev_info(DEV, "Starting %s thread (from %s [%d])\n",
+				me, current->comm, current->pid);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'drbd_thread_start', this function's name, in a string
#1519: FILE: drivers/block/drbd/drbd_main.c:1462:
+			dev_err(DEV, "Failed to get module reference in drbd_thread_start\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!thi->task"
#1524: FILE: drivers/block/drbd/drbd_main.c:1467:
+		D_ASSERT(thi->task == NULL);

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1530: FILE: drivers/block/drbd/drbd_main.c:1473:
+		nt = kthread_create(drbd_thread_setup, (void *) thi,
 		                                                ^^^

CHECK:SPACING: No space is necessary after a cast
#1530: FILE: drivers/block/drbd/drbd_main.c:1473:
+		nt = kthread_create(drbd_thread_setup, (void *) thi,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1548: FILE: drivers/block/drbd/drbd_main.c:1491:
+		dev_info(DEV, "Restarting %s thread (from %s [%d])\n",
+				me, current->comm, current->pid);

WARNING:PREFER_FALLTHROUGH: Prefer 'fallthrough;' over fallthrough comment
#1549: FILE: drivers/block/drbd/drbd_main.c:1492:
+		/* fall through */

Use the `fallthrough;` pseudo keyword instead of
`/* fallthrough */` like comments.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1560: FILE: drivers/block/drbd/drbd_main.c:1503:
+
+

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1561: FILE: drivers/block/drbd/drbd_main.c:1504:
+void _drbd_thread_stop(struct drbd_thread *thi, int restart, int wait)
                                            ^^^

CHECK:CAMELCASE: Avoid CamelCase: <Exiting>
#1565: FILE: drivers/block/drbd/drbd_main.c:1508:
+	enum drbd_thread_state ns = restart ? Restarting : Exiting;

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1573: FILE: drivers/block/drbd/drbd_main.c:1516:
+			drbd_thread_start(thi);
 			                  ^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!thi->task"
#1578: FILE: drivers/block/drbd/drbd_main.c:1521:
+		if (thi->task == NULL) {

WARNING:MEMORY_BARRIER: memory barrier without comment
#1584: FILE: drivers/block/drbd/drbd_main.c:1527:
+		smp_mb();

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#1589: FILE: drivers/block/drbd/drbd_main.c:1532:
+
+	}

WARNING:TYPO_SPELLING: 'benificial' may be misspelled - perhaps 'beneficial'?
#1602: FILE: drivers/block/drbd/drbd_main.c:1545:
+ * Forces all threads of a device onto the same CPU. This is benificial for
                                                              ^^^^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1622: FILE: drivers/block/drbd/drbd_main.c:1565:
+	 * to that macro, which results in "parse error before '{'" ;-> */

CHECK:SPACING: No space is necessary after a cast
#1623: FILE: drivers/block/drbd/drbd_main.c:1566:
+	return (cpumask_t) CPU_MASK_ALL; /* Never reached. */

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1636: FILE: drivers/block/drbd/drbd_main.c:1579:
+	struct drbd_thread *thi =
 	                    ^^^

WARNING:TYPO_SPELLING: 'asender' may be misspelled - perhaps 'ascender'?
#1637: FILE: drivers/block/drbd/drbd_main.c:1580:
+		p == mdev->asender.task  ? &mdev->asender  :
 		           ^^^^^^^

WARNING:TYPO_SPELLING: 'asender' may be misspelled - perhaps 'ascender'?
#1637: FILE: drivers/block/drbd/drbd_main.c:1580:
+		p == mdev->asender.task  ? &mdev->asender  :
 		                                  ^^^^^^^

WARNING:TYPO_SPELLING: 'thi' may be misspelled - perhaps 'the'?
#1641: FILE: drivers/block/drbd/drbd_main.c:1584:
+	ERR_IF(thi == NULL)
 	       ^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!thi"
#1641: FILE: drivers/block/drbd/drbd_main.c:1584:
+	ERR_IF(thi == NULL)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1647: FILE: drivers/block/drbd/drbd_main.c:1590:
+	/* preempt_disable();
+	   Thas was a kernel that warned about a call to smp_processor_id() while preemt

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1648: FILE: drivers/block/drbd/drbd_main.c:1591:
+	   was not disabled. It seems that this was fixed in manline. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1656: FILE: drivers/block/drbd/drbd_main.c:1599:
+int _drbd_send_cmd(struct drbd_conf *mdev, struct socket *sock,
+			  enum drbd_packets cmd, struct p_header *h,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1657: FILE: drivers/block/drbd/drbd_main.c:1600:
+			  size_t size, unsigned msg_flags)

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1666: FILE: drivers/block/drbd/drbd_main.c:1609:
+	h->length  = cpu_to_be16(size-sizeof(struct p_header));
 	                             ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1674: FILE: drivers/block/drbd/drbd_main.c:1617:
+		dev_err(DEV, "short sent %s size=%d sent=%d\n",
+		    cmdname(cmd), (int)size, sent);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1696: FILE: drivers/block/drbd/drbd_main.c:1639:
+	 * while we were waiting in down()... */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "sock"
#1697: FILE: drivers/block/drbd/drbd_main.c:1640:
+	if (likely(sock != NULL))

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1746: FILE: drivers/block/drbd/drbd_main.c:1689:
+	 * then use the pre-allocated sbuf there */

CHECK:BRACES: braces {} should be used on all arms of this statement
#1750: FILE: drivers/block/drbd/drbd_main.c:1693:
+	if (likely(sock != NULL)) {
[...]
+	} else
[...]

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "sock"
#1750: FILE: drivers/block/drbd/drbd_main.c:1693:
+	if (likely(sock != NULL)) {

CHECK:BRACES: Unbalanced braces around else statement
#1766: FILE: drivers/block/drbd/drbd_main.c:1709:
+	} else

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1785: FILE: drivers/block/drbd/drbd_main.c:1728:
+	 * as that is blocked during handshake */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!p"
#1787: FILE: drivers/block/drbd/drbd_main.c:1730:
+	if (p == NULL)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1840: FILE: drivers/block/drbd/drbd_main.c:1783:
+
+

WARNING:TYPO_SPELLING: 'wont' may be misspelled - perhaps 'won't'?
#1892: FILE: drivers/block/drbd/drbd_main.c:1835:
+	/* Grab state lock so we wont send state if we're in the middle
 	                         ^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1893: FILE: drivers/block/drbd/drbd_main.c:1836:
+	 * of a cluster wide state change on another thread */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "sock"
#1901: FILE: drivers/block/drbd/drbd_main.c:1844:
+	if (likely(sock != NULL)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1913: FILE: drivers/block/drbd/drbd_main.c:1856:
+int drbd_send_state_req(struct drbd_conf *mdev,
+	union drbd_state mask, union drbd_state val)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1935: FILE: drivers/block/drbd/drbd_main.c:1878:
+int fill_bitmap_rle_bits(struct drbd_conf *mdev,
+	struct p_compressed_bm *p,

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1942: FILE: drivers/block/drbd/drbd_main.c:1885:
+	unsigned len;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1943: FILE: drivers/block/drbd/drbd_main.c:1886:
+	unsigned toggle;

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 24)
#1947: FILE: drivers/block/drbd/drbd_main.c:1890:
+	if ((mdev->sync_conf.use_rle == 0) ||
[...]
+			return 0;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'mdev->sync_conf.use_rle == 0'
#1947: FILE: drivers/block/drbd/drbd_main.c:1890:
+	if ((mdev->sync_conf.use_rle == 0) ||
+		(mdev->agreed_pro_version < 90))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'mdev->agreed_pro_version < 90'
#1947: FILE: drivers/block/drbd/drbd_main.c:1890:
+	if ((mdev->sync_conf.use_rle == 0) ||
+		(mdev->agreed_pro_version < 90))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1948: FILE: drivers/block/drbd/drbd_main.c:1891:
+	if ((mdev->sync_conf.use_rle == 0) ||
+		(mdev->agreed_pro_version < 90))

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1962: FILE: drivers/block/drbd/drbd_main.c:1905:
+	 * start with toggle == 2 to be able to tell the first iteration */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1966: FILE: drivers/block/drbd/drbd_main.c:1909:
+	 * using RLE and VLI. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1977: FILE: drivers/block/drbd/drbd_main.c:1920:
+				 * store start value, */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1987: FILE: drivers/block/drbd/drbd_main.c:1930:
+		 * can only happen if bitmap is modified while we scan it. */

WARNING:SPLIT_STRING: quoted string split across lines
#1990: FILE: drivers/block/drbd/drbd_main.c:1933:
+			dev_err(DEV, "unexpected zero runlength while encoding bitmap "
+			    "t:%u bo:%lu\n", toggle, c->bit_offset);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2011: FILE: drivers/block/drbd/drbd_main.c:1954:
+		 * we need to rewind both word and bit position. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2019: FILE: drivers/block/drbd/drbd_main.c:1962:
+	 * update c->word_offset. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2030: FILE: drivers/block/drbd/drbd_main.c:1973:
+send_bitmap_rle_or_plain(struct drbd_conf *mdev,
+	struct p_header *h, struct bm_xfer_ctx *c)

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#2032: FILE: drivers/block/drbd/drbd_main.c:1975:
+	struct p_compressed_bm *p = (void*)h;

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2045: FILE: drivers/block/drbd/drbd_main.c:1988:
+		ok = _drbd_send_cmd(mdev, mdev->data.socket, P_COMPRESSED_BITMAP, h,
+			sizeof(*p) + len, 0);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2054: FILE: drivers/block/drbd/drbd_main.c:1997:
+		 * send a buffer full of plain text bits instead. */

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#2058: FILE: drivers/block/drbd/drbd_main.c:2001:
+			drbd_bm_get_lel(mdev, c->word_offset, num_words, (unsigned long*)h->payload);

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#2058: FILE: drivers/block/drbd/drbd_main.c:2001:
+			drbd_bm_get_lel(mdev, c->word_offset, num_words, (unsigned long*)h->payload);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2060: FILE: drivers/block/drbd/drbd_main.c:2003:
+		ok = _drbd_send_cmd(mdev, mdev->data.socket, P_BITMAP,
+				   h, sizeof(struct p_header) + len, 0);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2087: FILE: drivers/block/drbd/drbd_main.c:2030:
+	 * and allocate that during initial device creation? */

CHECK:SPACING: No space is necessary after a cast
#2088: FILE: drivers/block/drbd/drbd_main.c:2031:
+	p = (struct p_header *) __get_free_page(GFP_NOIO);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2101: FILE: drivers/block/drbd/drbd_main.c:2044:
+				 * side that a full resync is required! */

CHECK:SPACING: No space is necessary after a cast
#2120: FILE: drivers/block/drbd/drbd_main.c:2063:
+	free_page((unsigned long) p);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2146: FILE: drivers/block/drbd/drbd_main.c:2089:
+	ok = drbd_send_cmd(mdev, USE_META_SOCKET, P_BARRIER_ACK,
+			(struct p_header *)&p, sizeof(p));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2174: FILE: drivers/block/drbd/drbd_main.c:2117:
+	ok = drbd_send_cmd(mdev, USE_META_SOCKET, cmd,
+				(struct p_header *)&p, sizeof(p));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2202: FILE: drivers/block/drbd/drbd_main.c:2145:
+int drbd_send_ack(struct drbd_conf *mdev,
+	enum drbd_packets cmd, struct drbd_epoch_entry *e)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2211: FILE: drivers/block/drbd/drbd_main.c:2154:
+ * are is sync or not. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2232: FILE: drivers/block/drbd/drbd_main.c:2175:
+	ok = drbd_send_cmd(mdev, USE_DATA_SOCKET, cmd,
+				(struct p_header *)&p, sizeof(p));

WARNING:TYPO_SPELLING: 'asender' may be misspelled - perhaps 'ascender'?
#2286: FILE: drivers/block/drbd/drbd_main.c:2229:
+		|| !mdev->asender.task
 		          ^^^^^^^

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2286: FILE: drivers/block/drbd/drbd_main.c:2229:
+	drop_it =   mdev->meta.socket == sock
+		|| !mdev->asender.task

WARNING:TYPO_SPELLING: 'asender' may be misspelled - perhaps 'ascender'?
#2287: FILE: drivers/block/drbd/drbd_main.c:2230:
+		|| get_t_state(&mdev->asender) != Running
 		                      ^^^^^^^

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2287: FILE: drivers/block/drbd/drbd_main.c:2230:
+		|| !mdev->asender.task
+		|| get_t_state(&mdev->asender) != Running

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2288: FILE: drivers/block/drbd/drbd_main.c:2231:
+		|| get_t_state(&mdev->asender) != Running
+		|| mdev->state.conn < C_CONNECTED;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2296: FILE: drivers/block/drbd/drbd_main.c:2239:
+		dev_err(DEV, "[%s/%d] sock_sendmsg time expired, ko = %u\n",
+		       current->comm, current->pid, mdev->ko_count);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2325: FILE: drivers/block/drbd/drbd_main.c:2268:
+static int _drbd_no_send_page(struct drbd_conf *mdev, struct page *page,
+		   int offset, size_t size)

WARNING:LINE_SPACING: Missing a blank line after declarations
#2328: FILE: drivers/block/drbd/drbd_main.c:2271:
+	int sent = drbd_send(mdev, mdev->data.socket, kmap(page) + offset, size, 0);
+	kunmap(page);

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#2330: FILE: drivers/block/drbd/drbd_main.c:2273:
+		mdev->send_cnt += size>>9;
 		                      ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2335: FILE: drivers/block/drbd/drbd_main.c:2278:
+static int _drbd_send_page(struct drbd_conf *mdev, struct page *page,
+		    int offset, size_t size)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2346: FILE: drivers/block/drbd/drbd_main.c:2289:
+	 * by someone, leading to some obscure delayed Oops somewhere else. */

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#2360: FILE: drivers/block/drbd/drbd_main.c:2303:
+				break;
+			else

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2365: FILE: drivers/block/drbd/drbd_main.c:2308:
+			dev_warn(DEV, "%s: size=%d len=%d sent=%d\n",
+			     __func__, (int)size, len, sent);

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#2376: FILE: drivers/block/drbd/drbd_main.c:2319:
+		mdev->send_cnt += size>>9;
 		                      ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#2384: FILE: drivers/block/drbd/drbd_main.c:2327:
+	int i;
+	__bio_for_each_segment(bvec, bio, i, 0) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2386: FILE: drivers/block/drbd/drbd_main.c:2329:
+		if (!_drbd_no_send_page(mdev, bvec->bv_page,
+				     bvec->bv_offset, bvec->bv_len))

WARNING:LINE_SPACING: Missing a blank line after declarations
#2396: FILE: drivers/block/drbd/drbd_main.c:2339:
+	int i;
+	__bio_for_each_segment(bvec, bio, i, 0) {

WARNING:TYPO_SPELLING: 'interupted' may be misspelled - perhaps 'interrupted'?
#2490: FILE: drivers/block/drbd/drbd_main.c:2433:
+	 * This one may be interupted by DRBD_SIG and/or DRBD_SIGKILL
 	                   ^^^^^^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2498: FILE: drivers/block/drbd/drbd_main.c:2441:
+	ok = sizeof(p) == drbd_send(mdev, mdev->data.socket, &p,
+					sizeof(p), MSG_MORE);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2512: FILE: drivers/block/drbd/drbd_main.c:2455:
+/*
+  drbd_send distinguishes two cases:

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2528: FILE: drivers/block/drbd/drbd_main.c:2471:
+	      void *buf, size_t size, unsigned msg_flags)

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#2566: FILE: drivers/block/drbd/drbd_main.c:2509:
+				break;
+			else

CHECK:BRACES: braces {} should be used on all arms of this statement
#2585: FILE: drivers/block/drbd/drbd_main.c:2528:
+		if (rv != -EAGAIN) {
[...]
+		} else
[...]

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2587: FILE: drivers/block/drbd/drbd_main.c:2530:
+			dev_err(DEV, "%s_sendmsg returned %d\n",
+			    sock == mdev->meta.socket ? "msock" : "sock",

CHECK:BRACES: Unbalanced braces around else statement
#2590: FILE: drivers/block/drbd/drbd_main.c:2533:
+		} else

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2605: FILE: drivers/block/drbd/drbd_main.c:2548:
+	 * and no race with updating open_cnt */

WARNING:LINE_SPACING: Missing a blank line after declarations
#2624: FILE: drivers/block/drbd/drbd_main.c:2567:
+	struct drbd_conf *mdev = gd->private_data;
+	mdev->open_cnt--;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2647: FILE: drivers/block/drbd/drbd_main.c:2590:
+			 * anyways, to detect "double queuing" ... */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2677: FILE: drivers/block/drbd/drbd_main.c:2620:
+	 * note: only assignments, no allocation in here */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2683: FILE: drivers/block/drbd/drbd_main.c:2626:
+	 * to eventually support barriers */

WARNING:CONSIDER_COMPLETION: consider using a completion
#2698: FILE: drivers/block/drbd/drbd_main.c:2641:
+	sema_init(&mdev->data.work.s, 0);

WARNING:CONSIDER_COMPLETION: consider using a completion
#2699: FILE: drivers/block/drbd/drbd_main.c:2642:
+	sema_init(&mdev->meta.work.s, 0);

CHECK:SPACING: No space is necessary after a cast
#2729: FILE: drivers/block/drbd/drbd_main.c:2672:
+	mdev->resync_timer.data = (unsigned long) mdev;

CHECK:SPACING: No space is necessary after a cast
#2731: FILE: drivers/block/drbd/drbd_main.c:2674:
+	mdev->md_sync_timer.data = (unsigned long) mdev;

WARNING:TYPO_SPELLING: 'asender' may be misspelled - perhaps 'ascender'?
#2741: FILE: drivers/block/drbd/drbd_main.c:2684:
+	drbd_thread_init(mdev, &mdev->asender, drbd_asender);
 	                              ^^^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2752: FILE: drivers/block/drbd/drbd_main.c:2695:
+		dev_err(DEV, "ASSERT FAILED: receiver t_state == %d expected 0.\n",
+				mdev->receiver.t_state);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!mdev->net_conf"
#2769: FILE: drivers/block/drbd/drbd_main.c:2712:
+	D_ASSERT(mdev->net_conf == NULL);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#2795: FILE: drivers/block/drbd/drbd_main.c:2738:
+
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2797: FILE: drivers/block/drbd/drbd_main.c:2740:
+
+

WARNING:NEEDLESS_IF: mempool_destroy(NULL) is safe and this check is probably not required
#2812: FILE: drivers/block/drbd/drbd_main.c:2755:
+	if (drbd_ee_mempool)
+		mempool_destroy(drbd_ee_mempool);

WARNING:NEEDLESS_IF: mempool_destroy(NULL) is safe and this check is probably not required
#2814: FILE: drivers/block/drbd/drbd_main.c:2757:
+	if (drbd_request_mempool)
+		mempool_destroy(drbd_request_mempool);

WARNING:NEEDLESS_IF: kmem_cache_destroy(NULL) is safe and this check is probably not required
#2816: FILE: drivers/block/drbd/drbd_main.c:2759:
+	if (drbd_ee_cache)
+		kmem_cache_destroy(drbd_ee_cache);

WARNING:NEEDLESS_IF: kmem_cache_destroy(NULL) is safe and this check is probably not required
#2818: FILE: drivers/block/drbd/drbd_main.c:2761:
+	if (drbd_request_cache)
+		kmem_cache_destroy(drbd_request_cache);

WARNING:NEEDLESS_IF: kmem_cache_destroy(NULL) is safe and this check is probably not required
#2820: FILE: drivers/block/drbd/drbd_main.c:2763:
+	if (drbd_bm_ext_cache)
+		kmem_cache_destroy(drbd_bm_ext_cache);

WARNING:NEEDLESS_IF: kmem_cache_destroy(NULL) is safe and this check is probably not required
#2822: FILE: drivers/block/drbd/drbd_main.c:2765:
+	if (drbd_al_ext_cache)
+		kmem_cache_destroy(drbd_al_ext_cache);

WARNING:RETURN_VOID: void function return statements are not generally useful
#2832: FILE: drivers/block/drbd/drbd_main.c:2775:
+	return;
+}

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#2837: FILE: drivers/block/drbd/drbd_main.c:2780:
+	const int number = (DRBD_MAX_SEGMENT_SIZE/PAGE_SIZE) * minor_count;
 	                                         ^

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#2849: FILE: drivers/block/drbd/drbd_main.c:2792:
+	drbd_request_cache = kmem_cache_create(

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!drbd_request_cache"
#2851: FILE: drivers/block/drbd/drbd_main.c:2794:
+	if (drbd_request_cache == NULL)

CHECK:CAMELCASE: Avoid CamelCase: <Enomem>
#2852: FILE: drivers/block/drbd/drbd_main.c:2795:
+		goto Enomem;

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#2854: FILE: drivers/block/drbd/drbd_main.c:2797:
+	drbd_ee_cache = kmem_cache_create(

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!drbd_ee_cache"
#2856: FILE: drivers/block/drbd/drbd_main.c:2799:
+	if (drbd_ee_cache == NULL)

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#2859: FILE: drivers/block/drbd/drbd_main.c:2802:
+	drbd_bm_ext_cache = kmem_cache_create(

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!drbd_bm_ext_cache"
#2861: FILE: drivers/block/drbd/drbd_main.c:2804:
+	if (drbd_bm_ext_cache == NULL)

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#2864: FILE: drivers/block/drbd/drbd_main.c:2807:
+	drbd_al_ext_cache = kmem_cache_create(

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!drbd_al_ext_cache"
#2866: FILE: drivers/block/drbd/drbd_main.c:2809:
+	if (drbd_al_ext_cache == NULL)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2871: FILE: drivers/block/drbd/drbd_main.c:2814:
+	drbd_request_mempool = mempool_create(number,
+		mempool_alloc_slab, mempool_free_slab, drbd_request_cache);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!drbd_request_mempool"
#2872: FILE: drivers/block/drbd/drbd_main.c:2815:
+	if (drbd_request_mempool == NULL)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2876: FILE: drivers/block/drbd/drbd_main.c:2819:
+	drbd_ee_mempool = mempool_create(number,
+		mempool_alloc_slab, mempool_free_slab, drbd_ee_cache);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!drbd_request_mempool"
#2877: FILE: drivers/block/drbd/drbd_main.c:2820:
+	if (drbd_request_mempool == NULL)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2900: FILE: drivers/block/drbd/drbd_main.c:2843:
+static int drbd_notify_sys(struct notifier_block *this, unsigned long code,
+	void *unused)

WARNING:TYPO_SPELLING: 'interessting' may be misspelled - perhaps 'interesting'?
#2902: FILE: drivers/block/drbd/drbd_main.c:2845:
+	/* just so we have it.  you never know what interessting things we
 	                                            ^^^^^^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2939: FILE: drivers/block/drbd/drbd_main.c:2882:
+ * currently only used from module cleanup code. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2950: FILE: drivers/block/drbd/drbd_main.c:2893:
+		dev_err(DEV, "open_cnt = %d in %s:%u", mdev->open_cnt,
+				__FILE__ , __LINE__);

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#2950: FILE: drivers/block/drbd/drbd_main.c:2893:
+				__FILE__ , __LINE__);
 				         ^

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#2952: FILE: drivers/block/drbd/drbd_main.c:2895:
+	ERR_IF (!list_empty(&mdev->data.work.q)) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#2954: FILE: drivers/block/drbd/drbd_main.c:2897:
+		struct list_head *lp;
+		list_for_each(lp, &mdev->data.work.q) {

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2963: FILE: drivers/block/drbd/drbd_main.c:2906:
+	 * device (re-)configuration or state changes */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2975: FILE: drivers/block/drbd/drbd_main.c:2918:
+	/*
+	mdev->ee_hash_s = 0;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2991: FILE: drivers/block/drbd/drbd_main.c:2934:
+	 * and actually free the mdev itself */

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#3016: FILE: drivers/block/drbd/drbd_main.c:2959:
+	printk(KERN_INFO "drbd: module cleanup done.\n");

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*mdev)...) over kzalloc(sizeof(struct drbd_conf)...)
#3064: FILE: drivers/block/drbd/drbd_main.c:3007:
+	mdev = kzalloc(sizeof(struct drbd_conf), GFP_KERNEL);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3117: FILE: drivers/block/drbd/drbd_main.c:3060:
+	mdev->app_reads_hash = kzalloc(APP_R_HSIZE*sizeof(void *), GFP_KERNEL);
 	                                          ^

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*mdev->current_epoch)...) over kzalloc(sizeof(struct drbd_epoch)...)
#3121: FILE: drivers/block/drbd/drbd_main.c:3064:
+	mdev->current_epoch = kzalloc(sizeof(struct drbd_epoch), GFP_KERNEL);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3131: FILE: drivers/block/drbd/drbd_main.c:3074:
+/* out_whatever_else:
+	kfree(mdev->current_epoch); */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3131: FILE: drivers/block/drbd/drbd_main.c:3074:
+	kfree(mdev->current_epoch); */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3150: FILE: drivers/block/drbd/drbd_main.c:3093:
+ * last part of drbd_delete_device. */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3164: FILE: drivers/block/drbd/drbd_main.c:3107:
+
+

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#3170: FILE: drivers/block/drbd/drbd_main.c:3113:
+		printk(KERN_ERR

WARNING:SPLIT_STRING: quoted string split across lines
#3172: FILE: drivers/block/drbd/drbd_main.c:3115:
+		       "drbd: never change the size or layout "
+		       "of the HandShake packet.\n");

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3176: FILE: drivers/block/drbd/drbd_main.c:3119:
+	if (1 > minor_count || minor_count > 255) {

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#3177: FILE: drivers/block/drbd/drbd_main.c:3120:
+		printk(KERN_ERR

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#3192: FILE: drivers/block/drbd/drbd_main.c:3135:
+		printk(KERN_ERR

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3208: FILE: drivers/block/drbd/drbd_main.c:3151:
+	minor_table = kzalloc(sizeof(struct drbd_conf *)*minor_count,
 	                                                ^

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#3208: FILE: drivers/block/drbd/drbd_main.c:3151:
+	minor_table = kzalloc(sizeof(struct drbd_conf *)*minor_count,
+				GFP_KERNEL);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3209: FILE: drivers/block/drbd/drbd_main.c:3152:
+	minor_table = kzalloc(sizeof(struct drbd_conf *)*minor_count,
+				GFP_KERNEL);

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#3217: FILE: drivers/block/drbd/drbd_main.c:3160:
+	drbd_proc = proc_create("drbd", S_IFREG | S_IRUGO , NULL, &drbd_proc_fops);
 	                                                  ^

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#3217: FILE: drivers/block/drbd/drbd_main.c:3160:
+	drbd_proc = proc_create("drbd", S_IFREG | S_IRUGO , NULL, &drbd_proc_fops);

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#3219: FILE: drivers/block/drbd/drbd_main.c:3162:
+		printk(KERN_ERR "drbd: unable to register proc file\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#3225: FILE: drivers/block/drbd/drbd_main.c:3168:
+	printk(KERN_INFO "drbd: initialised. "

WARNING:SPLIT_STRING: quoted string split across lines
#3226: FILE: drivers/block/drbd/drbd_main.c:3169:
+	printk(KERN_INFO "drbd: initialised. "
+	       "Version: " REL_VERSION " (api:%d/proto:%d-%d)\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#3228: FILE: drivers/block/drbd/drbd_main.c:3171:
+	printk(KERN_INFO "drbd: %s\n", drbd_buildtag());

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#3229: FILE: drivers/block/drbd/drbd_main.c:3172:
+	printk(KERN_INFO "drbd: registered as block device major %d\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3230: FILE: drivers/block/drbd/drbd_main.c:3173:
+	printk(KERN_INFO "drbd: registered as block device major %d\n",
+		DRBD_MAJOR);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#3231: FILE: drivers/block/drbd/drbd_main.c:3174:
+	printk(KERN_INFO "drbd: minor_table @ 0x%p\n", minor_table);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#3239: FILE: drivers/block/drbd/drbd_main.c:3182:
+		printk(KERN_ERR "drbd: ran out of memory\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#3241: FILE: drivers/block/drbd/drbd_main.c:3184:
+		printk(KERN_ERR "drbd: initialization failure\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ldev"
#3247: FILE: drivers/block/drbd/drbd_main.c:3190:
+	if (ldev == NULL)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3273: FILE: drivers/block/drbd/drbd_main.c:3216:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3328: FILE: drivers/block/drbd/drbd_main.c:3271:
+	 * metadata even if we detach due to a disk failure! */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3366: FILE: drivers/block/drbd/drbd_main.c:3309:
+	 * since we updated it on metadata. */

WARNING:TYPO_SPELLING: 'cant' may be misspelled - perhaps 'can't'?
#3395: FILE: drivers/block/drbd/drbd_main.c:3338:
+		/* NOTE: cant do normal error processing here as this is
 		         ^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3396: FILE: drivers/block/drbd/drbd_main.c:3339:
+		/* NOTE: cant do normal error processing here as this is
+		   called BEFORE disk is attached */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3396: FILE: drivers/block/drbd/drbd_main.c:3339:
+		   called BEFORE disk is attached */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3409: FILE: drivers/block/drbd/drbd_main.c:3352:
+		dev_err(DEV, "unexpected al_offset: %d (expected %d)\n",
+		    be32_to_cpu(buffer->al_offset), bdev->md.al_offset);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3415: FILE: drivers/block/drbd/drbd_main.c:3358:
+		dev_err(DEV, "unexpected bm_offset: %d (expected %d)\n",
+		    be32_to_cpu(buffer->bm_offset), bdev->md.bm_offset);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3421: FILE: drivers/block/drbd/drbd_main.c:3364:
+		dev_err(DEV, "unexpected md_size: %u (expected %u)\n",
+		    be32_to_cpu(buffer->md_size_sect), bdev->md.md_size_sect);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3428: FILE: drivers/block/drbd/drbd_main.c:3371:
+		dev_err(DEV, "unexpected bm_bytes_per_bit: %u (expected %u)\n",
+		    be32_to_cpu(buffer->bm_bytes_per_bit), BM_BLOCK_SIZE);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3461: FILE: drivers/block/drbd/drbd_main.c:3404:
+	mod_timer(&mdev->md_sync_timer, jiffies + 5*HZ);
 	                                           ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3464: FILE: drivers/block/drbd/drbd_main.c:3407:
+
+

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#3470: FILE: drivers/block/drbd/drbd_main.c:3413:
+		mdev->ldev->md.uuid[i+1] = mdev->ldev->md.uuid[i];
 		                     ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#3472: FILE: drivers/block/drbd/drbd_main.c:3415:
+		trace_drbd_uuid(mdev, i+1);
 		                       ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3492: FILE: drivers/block/drbd/drbd_main.c:3435:
+
+

CHECK:BRACES: braces {} should be used on all arms of this statement
#3648: FILE: drivers/block/drbd/drbd_main.c:3591:
+		if (list_empty(&mdev->bm_io_work.w.list)) {
[...]
+		} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#3651: FILE: drivers/block/drbd/drbd_main.c:3594:
+		} else

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#3697: FILE: drivers/block/drbd/drbd_main.c:3640:
+}
+int drbd_md_test_flag(struct drbd_backing_dev *bdev, int flag)

CHECK:SPACING: No space is necessary after a cast
#3704: FILE: drivers/block/drbd/drbd_main.c:3647:
+	struct drbd_conf *mdev = (struct drbd_conf *) data;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3719: FILE: drivers/block/drbd/drbd_main.c:3662:
+ * stolen from kernel/rcutorture.c */

ERROR:OPEN_BRACE: open brace '{' following function definitions go on the next line
#3747: FILE: drivers/block/drbd/drbd_main.c:3690:
+static char *
+_drbd_fault_str(unsigned int type) {

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:STATIC_CONST_CHAR_ARRAY: char * array declaration might be better as static const
#3749: FILE: drivers/block/drbd/drbd_main.c:3692:
+	static char *_faults[] = {

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#3769: FILE: drivers/block/drbd/drbd_main.c:3712:
+	unsigned int ret = (

WARNING:PRINTK_RATELIMITED: Prefer printk_ratelimited or pr_<level>_ratelimited to printk_ratelimit
#3777: FILE: drivers/block/drbd/drbd_main.c:3720:
+		if (printk_ratelimit())

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3779: FILE: drivers/block/drbd/drbd_main.c:3722:
+			dev_warn(DEV, "***Simulating %s failure\n",
+				_drbd_fault_str(type));

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3789: FILE: drivers/block/drbd/drbd_main.c:3732:
+	/* DRBD built from external sources has here a reference to the
+	   git hash of the source code. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3789: FILE: drivers/block/drbd/drbd_main.c:3732:
+	   git hash of the source code. */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "THIS_MODULE"
#3794: FILE: drivers/block/drbd/drbd_main.c:3737:
+		if (THIS_MODULE != NULL)

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000099869.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 7 errors, 166 warnings, 139 checks, 3747 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000099869.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
