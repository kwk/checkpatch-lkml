WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#40: 
This is a new network driver for Micrel KSZ8841/KSZ8842 PCI Ethernet chips.  The same driver can run both chips at the same time.  It supports IPv4 TCP hardware checksumming and so can use scatter/gather transmission.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#55: FILE: drivers/net/ksz884x.c:1:
+/**

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#59: FILE: drivers/net/ksz884x.c:5:
+ * ^ITristram Ha <Tristram.Ha@micrel.com>$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#88: FILE: drivers/net/ksz884x.c:34:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#714: FILE: drivers/net/ksz884x.c:660:
+/*
+#define STATIC_MAC_TABLE_ADDR		00-0000FFFF-FFFFFFFF

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#733: FILE: drivers/net/ksz884x.c:679:
+/*
+#define VLAN_TABLE_VID			00-00000000-00000FFF

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#748: FILE: drivers/net/ksz884x.c:694:
+/*
+#define DYNAMIC_MAC_TABLE_ADDR		00-0000FFFF-FFFFFFFF

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#776: FILE: drivers/net/ksz884x.c:722:
+/*
+#define MIB_COUNTER_VALUE		00-00000000-3FFFFFFF

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'port' may be better as '(port)' to avoid precedence issues
#814: FILE: drivers/net/ksz884x.c:760:
+#define HW_TO_DEV_PORT(port)		(port - 1)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#836: FILE: drivers/net/ksz884x.c:782:
+/*
+ * Hardware descriptor definitions

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1034: FILE: drivers/net/ksz884x.c:980:
+ * ^I^Imanipulation.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1036: FILE: drivers/net/ksz884x.c:982:
+ * ^I^Imemory buffer allocation information.$

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1073: FILE: drivers/net/ksz884x.c:1019:
+/*
+ * KSZ8842 switch definitions

CHECK:BIT_MACRO: Prefer using the BIT macro
#1126: FILE: drivers/net/ksz884x.c:1072:
+#define HOST_MASK			(1 << SWITCH_PORT_NUM)

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1225: FILE: drivers/net/ksz884x.c:1171:
+ * ^I^I(bit7 ~ bit2) field.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1227: FILE: drivers/net/ksz884x.c:1173:
+ * ^I^ITag priority field.$

CHECK:BIT_MACRO: Prefer using the BIT macro
#1273: FILE: drivers/net/ksz884x.c:1219:
+#define LINK_INT_WORKING		(1 << 0)

CHECK:BIT_MACRO: Prefer using the BIT macro
#1274: FILE: drivers/net/ksz884x.c:1220:
+#define SMALL_PACKET_TX_BUG		(1 << 1)

CHECK:BIT_MACRO: Prefer using the BIT macro
#1275: FILE: drivers/net/ksz884x.c:1221:
+#define HALF_DUPLEX_SIGNAL_BUG		(1 << 2)

CHECK:BIT_MACRO: Prefer using the BIT macro
#1276: FILE: drivers/net/ksz884x.c:1222:
+#define IPV6_CSUM_GEN_HACK		(1 << 3)

CHECK:BIT_MACRO: Prefer using the BIT macro
#1277: FILE: drivers/net/ksz884x.c:1223:
+#define RX_HUGE_FRAME			(1 << 4)

CHECK:BIT_MACRO: Prefer using the BIT macro
#1278: FILE: drivers/net/ksz884x.c:1224:
+#define STP_SUPPORT			(1 << 8)

CHECK:BIT_MACRO: Prefer using the BIT macro
#1281: FILE: drivers/net/ksz884x.c:1227:
+#define PAUSE_FLOW_CTRL			(1 << 0)

CHECK:BIT_MACRO: Prefer using the BIT macro
#1282: FILE: drivers/net/ksz884x.c:1228:
+#define FAST_AGING			(1 << 1)

WARNING:TYPO_SPELLING: 'interrup' may be misspelled - perhaps 'interrupt'?
#1298: FILE: drivers/net/ksz884x.c:1244:
+ * @intr_set:		Current interrup set.
              		        ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1305: FILE: drivers/net/ksz884x.c:1251:
+ * ^I^I^IThe maximum is defined by MAX_TX_HELD_SIZE.$

WARNING:TYPO_SPELLING: 'Overrided' may be misspelled - perhaps 'Overrode'?
#1307: FILE: drivers/net/ksz884x.c:1253:
+ * @override_addr:	Overrided MAC address.
                   	^^^^^^^^^

WARNING:TYPO_SPELLING: 'overrided' may be misspelled - perhaps 'overrode'?
#1310: FILE: drivers/net/ksz884x.c:1256:
+ * @mac_override:	Indication of MAC address overrided.
                  	                          ^^^^^^^^^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1378: FILE: drivers/net/ksz884x.c:1324:
+ * ^I^I^Iduplex, and 0 for auto, which normally results in full$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1379: FILE: drivers/net/ksz884x.c:1325:
+ * ^I^I^Iduplex.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1381: FILE: drivers/net/ksz884x.c:1327:
+ * ^I^I^I0 for auto, which normally results in 100 Mbit.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1383: FILE: drivers/net/ksz884x.c:1329:
+ * ^I^I^Iforce.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1385: FILE: drivers/net/ksz884x.c:1331:
+ * ^I^I^Icontrol, and PHY_FLOW_CTRL for flow control.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1386: FILE: drivers/net/ksz884x.c:1332:
+ * ^I^I^IPHY_TX_ONLY and PHY_RX_ONLY are not supported for 100$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1387: FILE: drivers/net/ksz884x.c:1333:
+ * ^I^I^IMbit PHY.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1468: FILE: drivers/net/ksz884x.c:1414:
+ * ^I^I^Ithe maximum is MAX_RX_BUF_SIZE.$

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#1483: FILE: drivers/net/ksz884x.c:1429:
+	spinlock_t hwlock;

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#1484: FILE: drivers/net/ksz884x.c:1430:
+	struct mutex lock;

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct dev_info *' should also have an identifier name
#1486: FILE: drivers/net/ksz884x.c:1432:
+	int (*dev_rcv)(struct dev_info *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:HOTPLUG_SECTION: Using __devinitdata is unnecessary
#1550: FILE: drivers/net/ksz884x.c:1496:
+static char version[] __devinitdata =

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1556: FILE: drivers/net/ksz884x.c:1502:
+/*
+ * Interrupt processing primary routines

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1600: FILE: drivers/net/ksz884x.c:1546:
+ * @hw: ^IThe hardware instance.$

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1655: FILE: drivers/net/ksz884x.c:1601:
+/*
+ * Hardware descriptor routines

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1694: FILE: drivers/net/ksz884x.c:1640:
+static inline void get_tx_pkt(struct ksz_desc_info *info,
+	struct ksz_desc **desc)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'hw' may be better as '(hw)' to avoid precedence issues
#1718: FILE: drivers/net/ksz884x.c:1664:
+#define HW_DELAY(hw, reg)			\
+	do {					\
+		u16 dummy;			\
+		dummy = readw(hw->io + reg);	\
+	} while (0)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'reg' may be better as '(reg)' to avoid precedence issues
#1718: FILE: drivers/net/ksz884x.c:1664:
+#define HW_DELAY(hw, reg)			\
+	do {					\
+		u16 dummy;			\
+		dummy = readw(hw->io + reg);	\
+	} while (0)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1762: FILE: drivers/net/ksz884x.c:1708:
+static void sw_w_table_64(struct ksz_hw *hw, int table, u16 addr, u32 data_hi,
+	u32 data_lo)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1782: FILE: drivers/net/ksz884x.c:1728:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1795: FILE: drivers/net/ksz884x.c:1741:
+static void sw_w_sta_mac_table(struct ksz_hw *hw, u16 addr, u8 *mac_addr,
+	u8 ports, int override, int valid, int use_fid, u8 fid)

CHECK:SPACING: No space is necessary after a cast
#1800: FILE: drivers/net/ksz884x.c:1746:
+	data_lo = ((u32) mac_addr[2] << 24) |

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: No space is necessary after a cast
#1801: FILE: drivers/net/ksz884x.c:1747:
+		((u32) mac_addr[3] << 16) |

CHECK:SPACING: No space is necessary after a cast
#1802: FILE: drivers/net/ksz884x.c:1748:
+		((u32) mac_addr[4] << 8) | mac_addr[5];

CHECK:SPACING: No space is necessary after a cast
#1803: FILE: drivers/net/ksz884x.c:1749:
+	data_hi = ((u32) mac_addr[0] << 8) | mac_addr[1];

CHECK:SPACING: No space is necessary after a cast
#1804: FILE: drivers/net/ksz884x.c:1750:
+	data_hi |= (u32) ports << STATIC_MAC_FWD_PORTS_SHIFT;

CHECK:SPACING: No space is necessary after a cast
#1810: FILE: drivers/net/ksz884x.c:1756:
+		data_hi |= (u32) fid << STATIC_MAC_FID_SHIFT;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1820: FILE: drivers/net/ksz884x.c:1766:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1832: FILE: drivers/net/ksz884x.c:1778:
+static int sw_r_vlan_table(struct ksz_hw *hw, u16 addr, u16 *vid, u8 *fid,
+	u8 *member)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1849: FILE: drivers/net/ksz884x.c:1795:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1888: FILE: drivers/net/ksz884x.c:1834:
+ * @hw: ^IThe hardware instance.$

CHECK:SPACING: No space is necessary after a cast
#1907: FILE: drivers/net/ksz884x.c:1853:
+		ctrl_addr = (u16) index;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1934: FILE: drivers/net/ksz884x.c:1880:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1950: FILE: drivers/net/ksz884x.c:1896:
+			port_r_mib_cnt(hw, port, mib->cnt_ptr,
+				&mib->counter[mib->cnt_ptr]);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1955: FILE: drivers/net/ksz884x.c:1901:
+		port_r_mib_pkt(hw, port, mib->dropped,
+			&mib->counter[PORT_COUNTER_NUM]);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1962: FILE: drivers/net/ksz884x.c:1908:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1976: FILE: drivers/net/ksz884x.c:1922:
+			port_r_mib_cnt(hw, port, mib->cnt_ptr,
+				&mib->counter[mib->cnt_ptr]);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1981: FILE: drivers/net/ksz884x.c:1927:
+		port_r_mib_pkt(hw, port, mib->dropped,
+			&mib->counter[PORT_COUNTER_NUM]);

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1987: FILE: drivers/net/ksz884x.c:1933:
+/*
+ * Port functions

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1992: FILE: drivers/net/ksz884x.c:1938:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2015: FILE: drivers/net/ksz884x.c:1961:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2024: FILE: drivers/net/ksz884x.c:1970:
+static void port_cfg(struct ksz_hw *hw, int port, int offset, u16 bits,
+	int set)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2041: FILE: drivers/net/ksz884x.c:1987:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2063: FILE: drivers/net/ksz884x.c:2009:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2072: FILE: drivers/net/ksz884x.c:2018:
+static void port_cfg_shift(struct ksz_hw *hw, int port, u32 addr, int shift,
+	int set)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2088: FILE: drivers/net/ksz884x.c:2034:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2106: FILE: drivers/net/ksz884x.c:2052:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2124: FILE: drivers/net/ksz884x.c:2070:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2142: FILE: drivers/net/ksz884x.c:2088:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2161: FILE: drivers/net/ksz884x.c:2107:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2185: FILE: drivers/net/ksz884x.c:2131:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_1_OFFSET, PORT_BROADCAST_STORM, set);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2202: FILE: drivers/net/ksz884x.c:2148:
+ * @hw: ^IThe hardware instance.$

CHECK:SPACING: No space is necessary after a cast
#2210: FILE: drivers/net/ksz884x.c:2156:
+	u32 value = ((u32) BROADCAST_STORM_VALUE * (u32) percent / 100);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2223: FILE: drivers/net/ksz884x.c:2169:
+ * @hw: ^IThe hardware instance.$

CHECK:SPACING: No space is necessary after a cast
#2238: FILE: drivers/net/ksz884x.c:2184:
+	*percent = (u8) num;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2243: FILE: drivers/net/ksz884x.c:2189:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2255: FILE: drivers/net/ksz884x.c:2201:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2268: FILE: drivers/net/ksz884x.c:2214:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2285: FILE: drivers/net/ksz884x.c:2231:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2303: FILE: drivers/net/ksz884x.c:2249:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2319: FILE: drivers/net/ksz884x.c:2265:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2343: FILE: drivers/net/ksz884x.c:2289:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_BACK_PRESSURE, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2349: FILE: drivers/net/ksz884x.c:2295:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_FORCE_FLOW_CTRL, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2369: FILE: drivers/net/ksz884x.c:2315:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_LEARN_DISABLE, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2375: FILE: drivers/net/ksz884x.c:2321:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_RX_ENABLE, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2381: FILE: drivers/net/ksz884x.c:2327:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_TX_ENABLE, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2403: FILE: drivers/net/ksz884x.c:2349:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_1_OFFSET, PORT_INSERT_TAG, insert);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2409: FILE: drivers/net/ksz884x.c:2355:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_1_OFFSET, PORT_REMOVE_TAG, remove);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2427: FILE: drivers/net/ksz884x.c:2373:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_DISCARD_NON_VID, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2433: FILE: drivers/net/ksz884x.c:2379:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_INGRESS_VLAN_FILTER, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2453: FILE: drivers/net/ksz884x.c:2399:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_MIRROR_SNIFFER, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2459: FILE: drivers/net/ksz884x.c:2405:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_MIRROR_RX, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2465: FILE: drivers/net/ksz884x.c:2411:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_MIRROR_TX, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2488: FILE: drivers/net/ksz884x.c:2434:
+	sw_cfg(hw, KS8842_SWITCH_CTRL_7_OFFSET,
+		SWITCH_UNK_DEF_PORT_ENABLE, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2512: FILE: drivers/net/ksz884x.c:2458:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_1_OFFSET, PORT_DIFFSERV_ENABLE, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2518: FILE: drivers/net/ksz884x.c:2464:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_1_OFFSET, PORT_802_1P_ENABLE, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2524: FILE: drivers/net/ksz884x.c:2470:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_2_OFFSET, PORT_USER_PRIORITY_CEILING, set);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2530: FILE: drivers/net/ksz884x.c:2476:
+	port_cfg(hw, p,
+		KS8842_PORT_CTRL_1_OFFSET, PORT_PRIO_QUEUE_ENABLE, set);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2559: FILE: drivers/net/ksz884x.c:2505:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2571: FILE: drivers/net/ksz884x.c:2517:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2583: FILE: drivers/net/ksz884x.c:2529:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2594: FILE: drivers/net/ksz884x.c:2540:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2610: FILE: drivers/net/ksz884x.c:2556:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2633: FILE: drivers/net/ksz884x.c:2579:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2646: FILE: drivers/net/ksz884x.c:2592:
+ * @hw: ^IThe hardware instance.$

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#2657: FILE: drivers/net/ksz884x.c:2603:
+	/*
+	 * Init all the 802.1p tag priority value to be assigned to different

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#2670: FILE: drivers/net/ksz884x.c:2616:
+	/*
+	 * Init all the DiffServ priority value to be assigned to priority

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2691: FILE: drivers/net/ksz884x.c:2637:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2708: FILE: drivers/net/ksz884x.c:2654:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2721: FILE: drivers/net/ksz884x.c:2667:
+		sw_r_vlan_table(hw, entry,
+			&sw->vlan_table[entry].vid,

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2734: FILE: drivers/net/ksz884x.c:2680:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2758: FILE: drivers/net/ksz884x.c:2704:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2775: FILE: drivers/net/ksz884x.c:2721:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2792: FILE: drivers/net/ksz884x.c:2738:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2838: FILE: drivers/net/ksz884x.c:2784:
+ * @hw: ^IThe hardware instance.$

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#2856: FILE: drivers/net/ksz884x.c:2802:
+/*
+ * No need to turn on transmit because of port direct mode.

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#2874: FILE: drivers/net/ksz884x.c:2820:
+/*
+ * Need to setup static MAC table with override to keep receiving BPDU

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2896: FILE: drivers/net/ksz884x.c:2842:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2908: FILE: drivers/net/ksz884x.c:2854:
+		sw_w_sta_mac_table(hw, i,
+			entry->mac_addr, entry->ports,

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2916: FILE: drivers/net/ksz884x.c:2862:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2935: FILE: drivers/net/ksz884x.c:2881:
+	sw_w_sta_mac_table(hw, STP_ENTRY,
+		entry->mac_addr, entry->ports,

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2942: FILE: drivers/net/ksz884x.c:2888:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2955: FILE: drivers/net/ksz884x.c:2901:
+		sw_w_sta_mac_table(hw, i,
+			entry->mac_addr, entry->ports,

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3032: FILE: drivers/net/ksz884x.c:2978:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3049: FILE: drivers/net/ksz884x.c:2995:
+ * @hw: ^IThe hardware instance.$

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#3065: FILE: drivers/net/ksz884x.c:3011:
+/*
+ * EEPROM access functions

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3178: FILE: drivers/net/ksz884x.c:3124:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3201: FILE: drivers/net/ksz884x.c:3147:
+ * @hw: ^IThe hardware instance.$

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#3259: FILE: drivers/net/ksz884x.c:3205:
+/*
+ * Link detection routines

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3302: FILE: drivers/net/ksz884x.c:3248:
+static void determine_flow_ctrl(struct ksz_hw *hw, struct ksz_port *port,
+	u16 local, u16 remote)

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#3310: FILE: drivers/net/ksz884x.c:3256:
+	rx = tx = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#3312: FILE: drivers/net/ksz884x.c:3258:
+		rx = tx = 1;

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#3315: FILE: drivers/net/ksz884x.c:3261:
+			rx = tx = 1;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3330: FILE: drivers/net/ksz884x.c:3276:
+static inline void port_cfg_change(struct ksz_hw *hw, struct ksz_port *port,
+	struct ksz_port_info *info, u16 link_status)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3333: FILE: drivers/net/ksz884x.c:3279:
+	if ((hw->features & HALF_DUPLEX_SIGNAL_BUG) &&
+			!(hw->overrides & PAUSE_FLOW_CTRL)) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3337: FILE: drivers/net/ksz884x.c:3283:
+		if (1 == info->duplex)

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3346: FILE: drivers/net/ksz884x.c:3292:
+ * @port: ^IThe port instance.$

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#3373: FILE: drivers/net/ksz884x.c:3319:
+		/*
+		 * Link status is changing all the time even when there is no

CHECK:SPACING: No space is necessary after a cast
#3378: FILE: drivers/net/ksz884x.c:3324:
+		local = (u8) data;

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#3387: FILE: drivers/net/ksz884x.c:3333:
+		if (status & PORT_STATUS_LINK_GOOD) {
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3402: FILE: drivers/net/ksz884x.c:3348:
+				hw_r_phy(hw, p, KS884X_PHY_AUTO_NEG_OFFSET,
+					&data);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3404: FILE: drivers/net/ksz884x.c:3350:
+				hw_r_phy(hw, p, KS884X_PHY_REMOTE_CAP_OFFSET,
+					&status);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3408: FILE: drivers/net/ksz884x.c:3354:
+					port_cfg_back_pressure(hw, p,
+						(1 == info->duplex));

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3408: FILE: drivers/net/ksz884x.c:3354:
+						(1 == info->duplex));

CHECK:SPACING: No space is necessary after a cast
#3423: FILE: drivers/net/ksz884x.c:3369:
+		hw->port_mib[p].state = (u8) info->state;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3436: FILE: drivers/net/ksz884x.c:3382:
+ * @port: ^IThe port instance.$

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3468: FILE: drivers/net/ksz884x.c:3414:
+			if (10 == port->speed)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3471: FILE: drivers/net/ksz884x.c:3417:
+			else if (100 == port->speed)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3474: FILE: drivers/net/ksz884x.c:3420:
+			if (1 == port->duplex)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3477: FILE: drivers/net/ksz884x.c:3423:
+			else if (2 == port->duplex)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3490: FILE: drivers/net/ksz884x.c:3436:
+ * @port: ^IThe port instance.$

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3508: FILE: drivers/net/ksz884x.c:3454:
+		if (10 == port->speed)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3510: FILE: drivers/net/ksz884x.c:3456:
+		else if (100 == port->speed)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3512: FILE: drivers/net/ksz884x.c:3458:
+		if (1 == port->duplex)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3514: FILE: drivers/net/ksz884x.c:3460:
+		else if (2 == port->duplex)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3528: FILE: drivers/net/ksz884x.c:3474:
+		port_cfg(hw, p,
+			KS884X_PORT_CTRL_4_OFFSET, PORT_POWER_DOWN, enable);

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#3532: FILE: drivers/net/ksz884x.c:3478:
+/*
+ * KSZ8841 power management functions

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3537: FILE: drivers/net/ksz884x.c:3483:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3557: FILE: drivers/net/ksz884x.c:3503:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3578: FILE: drivers/net/ksz884x.c:3524:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3602: FILE: drivers/net/ksz884x.c:3548:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3622: FILE: drivers/net/ksz884x.c:3568:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3632: FILE: drivers/net/ksz884x.c:3578:
+static void hw_set_wol_frame(struct ksz_hw *hw, int i, uint mask_size,
+	u8 *mask, uint frame_size, u8 *pattern)

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#3651: FILE: drivers/net/ksz884x.c:3597:
+	bits = len = from = to = 0;

CHECK:SPACING: No space is necessary after a cast
#3669: FILE: drivers/net/ksz884x.c:3615:
+	} while (from < (int) frame_size);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3683: FILE: drivers/net/ksz884x.c:3629:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3707: FILE: drivers/net/ksz884x.c:3653:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3721: FILE: drivers/net/ksz884x.c:3667:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3740: FILE: drivers/net/ksz884x.c:3686:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3756: FILE: drivers/net/ksz884x.c:3702:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3776: FILE: drivers/net/ksz884x.c:3722:
+ * @hw: ^IThe hardware instance.$

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3797: FILE: drivers/net/ksz884x.c:3743:
+	if (REG_CHIP_ID_41 == data)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3799: FILE: drivers/net/ksz884x.c:3745:
+	else if (REG_CHIP_ID_42 == data)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3807: FILE: drivers/net/ksz884x.c:3753:
+		if (1 == rc)

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3816: FILE: drivers/net/ksz884x.c:3762:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3833: FILE: drivers/net/ksz884x.c:3779:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3869: FILE: drivers/net/ksz884x.c:3815:
+ * @hw: ^IThe hardware instance.$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_alert([subsystem]dev, ... then dev_alert(dev, ... then pr_alert(...  to printk(KERN_ALERT ...
#3891: FILE: drivers/net/ksz884x.c:3837:
+		printk(KERN_ALERT "Hardware descriptor numbers not right!\n");

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#3923: FILE: drivers/net/ksz884x.c:3869:
+	desc_info->last = desc_info->next = 0;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3930: FILE: drivers/net/ksz884x.c:3876:
+ * @hw: ^IThe hardware instance.$

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#3947: FILE: drivers/net/ksz884x.c:3893:
+	info->last = info->next = 0;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3957: FILE: drivers/net/ksz884x.c:3903:
+ * @hw: ^IThe hardware instance.$

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#3973: FILE: drivers/net/ksz884x.c:3919:
+	if (0 == hw->rx_stop)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#3978: FILE: drivers/net/ksz884x.c:3924:
+/*
+ * hw_stop_rx - stop receiving

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3979: FILE: drivers/net/ksz884x.c:3925:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3992: FILE: drivers/net/ksz884x.c:3938:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4003: FILE: drivers/net/ksz884x.c:3949:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4014: FILE: drivers/net/ksz884x.c:3960:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4027: FILE: drivers/net/ksz884x.c:3973:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4040: FILE: drivers/net/ksz884x.c:3986:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4074: FILE: drivers/net/ksz884x.c:4020:
+ * @hw: ^IThe hardware instance.$

CHECK:SPACING: No space is necessary after a cast
#4101: FILE: drivers/net/ksz884x.c:4047:
+	u32 *addr1 = (u32 *) addr;

CHECK:SPACING: No space is necessary after a cast
#4102: FILE: drivers/net/ksz884x.c:4048:
+	u16 *addr2 = (u16 *) &addr[4];

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4109: FILE: drivers/net/ksz884x.c:4055:
+ * @hw: ^IThe hardware instance.$

WARNING:TYPO_SPELLING: 'overrided' may be misspelled - perhaps 'overrode'?
#4112: FILE: drivers/net/ksz884x.c:4058:
+ * overrided.
    ^^^^^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4120: FILE: drivers/net/ksz884x.c:4066:
+		writeb(hw->override_addr[MAC_ADDR_ORDER(i)],
+			hw->io + KS884X_ADDR_0_OFFSET + i);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4127: FILE: drivers/net/ksz884x.c:4073:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4143: FILE: drivers/net/ksz884x.c:4089:
+			memcpy(hw->perm_addr, DEFAULT_MAC_ADDRESS,
+				MAC_ADDR_LEN);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4145: FILE: drivers/net/ksz884x.c:4091:
+			memcpy(hw->override_addr, DEFAULT_MAC_ADDRESS,
+				MAC_ADDR_LEN);

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#4198: FILE: drivers/net/ksz884x.c:4144:
+		if (ADDITIONAL_ENTRIES == j && empty_addr(hw->address[i]))

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4226: FILE: drivers/net/ksz884x.c:4172:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4243: FILE: drivers/net/ksz884x.c:4189:
+ * @hw: ^IThe hardware instance.$

CHECK:SPACING: No space is necessary after a cast
#4261: FILE: drivers/net/ksz884x.c:4207:
+		hw->multi_bits[index] |= (u8) value;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4271: FILE: drivers/net/ksz884x.c:4217:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4292: FILE: drivers/net/ksz884x.c:4238:
+ * @hw: ^IThe hardware instance.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4313: FILE: drivers/net/ksz884x.c:4259:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4326: FILE: drivers/net/ksz884x.c:4272:
+			sw_cfg_port_base_vlan(hw, port,
+				HOST_MASK | (1 << port));

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#4345: FILE: drivers/net/ksz884x.c:4291:
+ * @hw: ^IThe hardware instance.$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4372: FILE: drivers/net/ksz884x.c:4318:
+	if (!sw_chk(hw, KS8842_SWITCH_CTRL_1_OFFSET,
+			SWITCH_TX_FLOW_CTRL | SWITCH_RX_FLOW_CTRL))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4409: FILE: drivers/net/ksz884x.c:4355:
+static void ksz_init_timer(struct ksz_timer_info *info, int period,
+	void (*function)(unsigned long), void *data)

CHECK:SPACING: No space is necessary after a cast
#4415: FILE: drivers/net/ksz884x.c:4361:
+	info->timer.data = (unsigned long) data;

CHECK:BRACES: braces {} should be used on all arms of this statement
#4422: FILE: drivers/net/ksz884x.c:4368:
+		if (info->cnt < info->max) {
[...]
+		} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#4425: FILE: drivers/net/ksz884x.c:4371:
+		} else

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*desc_info->ring)...) over kmalloc(sizeof(struct ksz_desc)...)
#4445: FILE: drivers/net/ksz884x.c:4391:
+	desc_info->ring = kmalloc(sizeof(struct ksz_desc) * desc_info->alloc,

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#4445: FILE: drivers/net/ksz884x.c:4391:
+	desc_info->ring = kmalloc(sizeof(struct ksz_desc) * desc_info->alloc,
+		GFP_KERNEL);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4446: FILE: drivers/net/ksz884x.c:4392:
+	desc_info->ring = kmalloc(sizeof(struct ksz_desc) * desc_info->alloc,
+		GFP_KERNEL);

CHECK:SPACING: No space is necessary after a cast
#4449: FILE: drivers/net/ksz884x.c:4395:
+	memset((void *) desc_info->ring, 0,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4450: FILE: drivers/net/ksz884x.c:4396:
+	memset((void *) desc_info->ring, 0,
+		sizeof(struct ksz_desc) * desc_info->alloc);

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#4476: FILE: drivers/net/ksz884x.c:4422:
+		pci_alloc_consistent(

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!adapter->desc_pool.alloc_virt"
#4479: FILE: drivers/net/ksz884x.c:4425:
+	if (adapter->desc_pool.alloc_virt == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:SPACING: No space is necessary after a cast
#4486: FILE: drivers/net/ksz884x.c:4432:
+	offset = (((ulong) adapter->desc_pool.alloc_virt % DESC_ALIGNMENT) ?

CHECK:SPACING: No space is necessary after a cast
#4488: FILE: drivers/net/ksz884x.c:4434:
+		((ulong) adapter->desc_pool.alloc_virt % DESC_ALIGNMENT)) : 0);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4516: FILE: drivers/net/ksz884x.c:4462:
+static void free_dma_buf(struct dev_info *adapter, struct ksz_dma_buf *dma_buf,
+	int direction)

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#4549: FILE: drivers/net/ksz884x.c:4495:
+			dma_buf->dma = pci_map_single(

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_alert([subsystem]dev, ... then dev_alert(dev, ... then pr_alert(...  to printk(KERN_ALERT ...
#4602: FILE: drivers/net/ksz884x.c:4548:
+		printk(KERN_ALERT

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#4633: FILE: drivers/net/ksz884x.c:4579:
+		pci_free_consistent(

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4657: FILE: drivers/net/ksz884x.c:4603:
+static void ksz_free_buffers(struct dev_info *adapter,
+	struct ksz_desc_info *desc_info, int direction)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4681: FILE: drivers/net/ksz884x.c:4627:
+	ksz_free_buffers(adapter, &adapter->hw.tx_desc_info,
+		PCI_DMA_TODEVICE);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4685: FILE: drivers/net/ksz884x.c:4631:
+	ksz_free_buffers(adapter, &adapter->hw.rx_desc_info,
+		PCI_DMA_FROMDEVICE);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4692: FILE: drivers/net/ksz884x.c:4638:
+static void get_mib_counters(struct ksz_hw *hw, int first, int cnt,
+	u64 *counter)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#4727: FILE: drivers/net/ksz884x.c:4673:
+	/*
+	 * KSZ8842 with multiple device interfaces needs to be told which port

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#4747: FILE: drivers/net/ksz884x.c:4693:
+		dma_buf->dma = pci_map_single(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#4766: FILE: drivers/net/ksz884x.c:4712:
+			dma_buf->dma = pci_map_single(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#4791: FILE: drivers/net/ksz884x.c:4737:
+		dma_buf->dma = pci_map_single(

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#4804: FILE: drivers/net/ksz884x.c:4750:
+	/*
+	 * The last descriptor holds the packet so that it can be returned to

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#4842: FILE: drivers/net/ksz884x.c:4788:
+				break;
+			else

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#4847: FILE: drivers/net/ksz884x.c:4793:
+		pci_unmap_single(

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4937: FILE: drivers/net/ksz884x.c:4883:
+				memset(&skb->data[org_skb->len], 0,
+					50 - org_skb->len);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'CHECKSUM_PARTIAL == skb->ip_summed'
#4949: FILE: drivers/net/ksz884x.c:4895:
+		if (left < num ||
+				((hw->features & IPV6_CSUM_GEN_HACK) &&
+				(CHECKSUM_PARTIAL == skb->ip_summed) &&
+				(ETH_P_IPV6 == htons(skb->protocol)))) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ETH_P_IPV6 == htons(skb->protocol)'
#4949: FILE: drivers/net/ksz884x.c:4895:
+		if (left < num ||
+				((hw->features & IPV6_CSUM_GEN_HACK) &&
+				(CHECKSUM_PARTIAL == skb->ip_summed) &&
+				(ETH_P_IPV6 == htons(skb->protocol)))) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#4950: FILE: drivers/net/ksz884x.c:4896:
+		if (left < num ||
+				((hw->features & IPV6_CSUM_GEN_HACK) &&

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#4951: FILE: drivers/net/ksz884x.c:4897:
+				(CHECKSUM_PARTIAL == skb->ip_summed) &&

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#4952: FILE: drivers/net/ksz884x.c:4898:
+				(ETH_P_IPV6 == htons(skb->protocol)))) {

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#4997: FILE: drivers/net/ksz884x.c:4943:
+		/*
+		 * Only reset the hardware if time between calls is long

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5017: FILE: drivers/net/ksz884x.c:4963:
+		hw_set_desc_base(hw,
+			hw->tx_desc_info.ring_phys,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5031: FILE: drivers/net/ksz884x.c:4977:
+				port_set_stp_state(hw, port,
+					STP_STATE_DISABLED);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5036: FILE: drivers/net/ksz884x.c:4982:
+					port_set_stp_state(hw, port,
+						STP_STATE_SIMPLE);

CHECK:SPACING: No space is necessary after a cast
#5055: FILE: drivers/net/ksz884x.c:5001:
+	iph = (struct iphdr *) skb_network_header(skb);

CHECK:SPACING: No space is necessary after a cast
#5059: FILE: drivers/net/ksz884x.c:5005:
+		iph = (struct iphdr *) skb_network_header(skb);

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#5067: FILE: drivers/net/ksz884x.c:5013:
+static inline int rx_proc(struct net_device *dev, struct ksz_hw* hw,

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5068: FILE: drivers/net/ksz884x.c:5014:
+static inline int rx_proc(struct net_device *dev, struct ksz_hw* hw,
+	struct ksz_desc *desc, union desc_stat status)

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#5081: FILE: drivers/net/ksz884x.c:5027:
+	pci_dma_sync_single_for_cpu(

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#5094: FILE: drivers/net/ksz884x.c:5040:
+		/*
+		 * Align socket buffer in 4-byte boundary for better

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5100: FILE: drivers/net/ksz884x.c:5046:
+		memcpy(skb_put(skb, packet_len),
+			dma_buf->skb->data, packet_len);

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#5234: FILE: drivers/net/ksz884x.c:5180:
+			/*
+			 * Receive without error.  With receive errors

CHECK:SPACING: No space is necessary after a cast
#5264: FILE: drivers/net/ksz884x.c:5210:
+	struct dev_info *hw_priv = (struct dev_info *) data;

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#5270: FILE: drivers/net/ksz884x.c:5216:
+	if (unlikely(!hw_priv->dev_rcv(hw_priv))) {
+

CHECK:SPACING: No space is necessary after a cast
#5286: FILE: drivers/net/ksz884x.c:5232:
+	struct dev_info *hw_priv = (struct dev_info *) data;

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#5302: FILE: drivers/net/ksz884x.c:5248:
+	if (0 == hw->rx_stop)

CHECK:BRACES: braces {} should be used on all arms of this statement
#5302: FILE: drivers/net/ksz884x.c:5248:
+	if (0 == hw->rx_stop)
[...]
+	else if (hw->rx_stop > 1) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#5311: FILE: drivers/net/ksz884x.c:5257:
+	} else

CHECK:SPACING: No space is necessary after a cast
#5328: FILE: drivers/net/ksz884x.c:5274:
+	struct net_device *dev = (struct net_device *) dev_id;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#5374: FILE: drivers/net/ksz884x.c:5320:
+			printk(KERN_INFO "Tx stopped\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#5377: FILE: drivers/net/ksz884x.c:5323:
+				printk(KERN_INFO "Tx disabled\n");

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#5388: FILE: drivers/net/ksz884x.c:5334:
+/*
+ * Linux network device functions

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#5416: FILE: drivers/net/ksz884x.c:5362:
+		if (STP_STATE_FORWARDING == sw->port_cfg[port].stp_state)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5543: FILE: drivers/net/ksz884x.c:5489:
+	hw_set_desc_base(hw,
+		hw->tx_desc_info.ring_phys, hw->rx_desc_info.ring_phys);

CHECK:SPACING: No space is necessary after a cast
#5574: FILE: drivers/net/ksz884x.c:5520:
+	memset((void *) port->counter, 0,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5575: FILE: drivers/net/ksz884x.c:5521:
+	memset((void *) port->counter, 0,
+		(sizeof(u64) * OID_COUNTER_LAST));

WARNING:JIFFIES_COMPARISON: Comparing jiffies is almost always wrong; prefer time_after, time_before and friends
#5582: FILE: drivers/net/ksz884x.c:5528:
+			if (next_jiffies < jiffies)

CHECK:BRACES: braces {} should be used on all arms of this statement
#5590: FILE: drivers/net/ksz884x.c:5536:
+		if (hw->ksz_switch)
[...]
+		else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#5592: FILE: drivers/net/ksz884x.c:5538:
+		else {

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#5602: FILE: drivers/net/ksz884x.c:5548:
+		/*
+		 * Initialize to invalid value so that link detection

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5629: FILE: drivers/net/ksz884x.c:5575:
+			ksz_start_timer(&hw_priv->mib_timer_info,
+				hw_priv->mib_timer_info.period);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5635: FILE: drivers/net/ksz884x.c:5581:
+	ksz_start_timer(&priv->monitor_timer_info,
+		priv->monitor_timer_info.period);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#5644: FILE: drivers/net/ksz884x.c:5590:
+		printk(KERN_INFO "%s link %s\n", dev->name,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5645: FILE: drivers/net/ksz884x.c:5591:
+		printk(KERN_INFO "%s link %s\n", dev->name,
+			(media_connected == priv->media_state ?

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#5701: FILE: drivers/net/ksz884x.c:5647:
+		priv->stats.rx_length_errors += (unsigned long)(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#5708: FILE: drivers/net/ksz884x.c:5654:
+		priv->stats.rx_frame_errors += (unsigned long)(

CHECK:BRACES: braces {} should be used on all arms of this statement
#5736: FILE: drivers/net/ksz884x.c:5682:
+	if (priv->port.first_port > 0)
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#5738: FILE: drivers/net/ksz884x.c:5684:
+	else {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5757: FILE: drivers/net/ksz884x.c:5703:
+static void dev_set_promiscuous(struct net_device *dev, struct dev_priv *priv,
+	struct ksz_hw *hw, int promiscuous)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#5773: FILE: drivers/net/ksz884x.c:5719:
+		/*
+		 * Port is not in promiscuous mode, meaning it is released

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5777: FILE: drivers/net/ksz884x.c:5723:
+		if ((hw->features & STP_SUPPORT) && !promiscuous &&
+				dev->br_port) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5792: FILE: drivers/net/ksz884x.c:5738:
+static void dev_set_multicast(struct dev_priv *priv, struct ksz_hw *hw,
+	int multicast)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#5839: FILE: drivers/net/ksz884x.c:5785:
+			if (MAX_MULTICAST_LIST != hw->multi_list_size) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5853: FILE: drivers/net/ksz884x.c:5799:
+			memcpy(hw->multi_list[i++], mc_ptr->dmi_addr,
+				MAC_ADDR_LEN);

CHECK:SPACING: No space is necessary after a cast
#5855: FILE: drivers/net/ksz884x.c:5801:
+		hw->multi_list_size = (u8) i;

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#5858: FILE: drivers/net/ksz884x.c:5804:
+		if (MAX_MULTICAST_LIST == hw->multi_list_size) {

WARNING:PREFER_FALLTHROUGH: Prefer 'fallthrough;' over fallthrough comment
#5932: FILE: drivers/net/ksz884x.c:5878:
+		/* Fallthrough... */

Use the `fallthrough;` pseudo keyword instead of
`/* fallthrough */` like comments.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5940: FILE: drivers/net/ksz884x.c:5886:
+			hw_r_phy(hw, port->linked->port_id, data->reg_num,
+				&data->val_out);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#5951: FILE: drivers/net/ksz884x.c:5897:
+			hw_w_phy(hw, port->linked->port_id, data->reg_num,
+				data->val_in);

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#5964: FILE: drivers/net/ksz884x.c:5910:
+/*
+ * MII support

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#6010: FILE: drivers/net/ksz884x.c:5956:
+/*
+ * ethtool support

CHECK:CAMELCASE: Avoid CamelCase: <ADVERTISED_10baseT_Half>
#6018: FILE: drivers/net/ksz884x.c:5964:
+	(ADVERTISED_10baseT_Half |	\

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <ADVERTISED_10baseT_Full>
#6019: FILE: drivers/net/ksz884x.c:5965:
+	ADVERTISED_10baseT_Full |	\

CHECK:CAMELCASE: Avoid CamelCase: <ADVERTISED_100baseT_Half>
#6020: FILE: drivers/net/ksz884x.c:5966:
+	ADVERTISED_100baseT_Half |	\

CHECK:CAMELCASE: Avoid CamelCase: <ADVERTISED_100baseT_Full>
#6021: FILE: drivers/net/ksz884x.c:5967:
+	ADVERTISED_100baseT_Full)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#6066: FILE: drivers/net/ksz884x.c:6012:
+	/*
+	 * ethtool utility does not change advertised setting if auto

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6071: FILE: drivers/net/ksz884x.c:6017:
+		if (10 == cmd->speed)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6075: FILE: drivers/net/ksz884x.c:6021:
+		else if (100 == cmd->speed)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6079: FILE: drivers/net/ksz884x.c:6025:
+		if (0 == cmd->duplex)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6083: FILE: drivers/net/ksz884x.c:6029:
+		else if (1 == cmd->duplex)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6090: FILE: drivers/net/ksz884x.c:6036:
+	if (cmd->autoneg &&
+			(cmd->advertising & ADVERTISED_ALL) ==

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6154: FILE: drivers/net/ksz884x.c:6100:
+static void netdev_get_drvinfo(struct net_device *dev,
+	struct ethtool_drvinfo *info)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6206: FILE: drivers/net/ksz884x.c:6152:
+static void netdev_get_regs(struct net_device *dev, struct ethtool_regs *regs,
+	void *ptr)

CHECK:SPACING: No space is necessary after a cast
#6211: FILE: drivers/net/ksz884x.c:6157:
+	int *buf = (int *) ptr;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6244: FILE: drivers/net/ksz884x.c:6190:
+static void netdev_get_wol(struct net_device *dev,
+	struct ethtool_wolinfo *wol)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6264: FILE: drivers/net/ksz884x.c:6210:
+static int netdev_set_wol(struct net_device *dev,
+	struct ethtool_wolinfo *wol)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6339: FILE: drivers/net/ksz884x.c:6285:
+static int netdev_get_eeprom(struct net_device *dev,
+	struct ethtool_eeprom *eeprom, u8 *data)

CHECK:SPACING: No space is necessary after a cast
#6343: FILE: drivers/net/ksz884x.c:6289:
+	u8 *eeprom_byte = (u8 *) eeprom_data;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6367: FILE: drivers/net/ksz884x.c:6313:
+static int netdev_set_eeprom(struct net_device *dev,
+	struct ethtool_eeprom *eeprom, u8 *data)

CHECK:SPACING: No space is necessary after a cast
#6372: FILE: drivers/net/ksz884x.c:6318:
+	u8 *eeprom_byte = (u8 *) eeprom_word;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6401: FILE: drivers/net/ksz884x.c:6347:
+static void netdev_get_pauseparam(struct net_device *dev,
+	struct ethtool_pauseparam *pause)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6434: FILE: drivers/net/ksz884x.c:6380:
+static int netdev_set_pauseparam(struct net_device *dev,
+	struct ethtool_pauseparam *pause)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6451: FILE: drivers/net/ksz884x.c:6397:
+			sw_cfg(hw, KS8842_SWITCH_CTRL_1_OFFSET,
+				SWITCH_RX_FLOW_CTRL, 1);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6453: FILE: drivers/net/ksz884x.c:6399:
+			sw_cfg(hw, KS8842_SWITCH_CTRL_1_OFFSET,
+				SWITCH_TX_FLOW_CTRL, 1);

CHECK:BRACES: braces {} should be used on all arms of this statement
#6458: FILE: drivers/net/ksz884x.c:6404:
+		if (hw->ksz_switch) {
[...]
+		} else
[...]

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6460: FILE: drivers/net/ksz884x.c:6406:
+			sw_cfg(hw, KS8842_SWITCH_CTRL_1_OFFSET,
+				SWITCH_RX_FLOW_CTRL, pause->rx_pause);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6462: FILE: drivers/net/ksz884x.c:6408:
+			sw_cfg(hw, KS8842_SWITCH_CTRL_1_OFFSET,
+				SWITCH_TX_FLOW_CTRL, pause->tx_pause);

CHECK:BRACES: Unbalanced braces around else statement
#6463: FILE: drivers/net/ksz884x.c:6409:
+		} else

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6479: FILE: drivers/net/ksz884x.c:6425:
+static void netdev_get_ringparam(struct net_device *dev,
+	struct ethtool_ringparam *ring)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6548: FILE: drivers/net/ksz884x.c:6494:
+	if (ETH_SS_STATS == stringset)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6550: FILE: drivers/net/ksz884x.c:6496:
+		memcpy(buf, &ethtool_stats_keys,
+			ETH_GSTRING_LEN * hw->mib_cnt);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6585: FILE: drivers/net/ksz884x.c:6531:
+static void netdev_get_ethtool_stats(struct net_device *dev,
+	struct ethtool_stats *stats, u64 *data)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6614: FILE: drivers/net/ksz884x.c:6560:
+	if (1 == port->mib_port_cnt && n < SWITCH_PORT_NUM) {

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#6616: FILE: drivers/net/ksz884x.c:6562:
+		rc = wait_event_interruptible_timeout(

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6618: FILE: drivers/net/ksz884x.c:6564:
+			2 == hw_priv->counter[p].read,

CHECK:BRACES: Unbalanced braces around else statement
#6620: FILE: drivers/net/ksz884x.c:6566:
+	} else

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6622: FILE: drivers/net/ksz884x.c:6568:
+			if (0 == i) {

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#6623: FILE: drivers/net/ksz884x.c:6569:
+				rc = wait_event_interruptible_timeout(

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6625: FILE: drivers/net/ksz884x.c:6571:
+					2 == hw_priv->counter[p].read,

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#6628: FILE: drivers/net/ksz884x.c:6574:
+				rc = wait_event_interruptible_timeout(

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6630: FILE: drivers/net/ksz884x.c:6576:
+					2 == hw_priv->counter[p].read,

WARNING:CONST_STRUCT: struct ethtool_ops should normally be const
#6699: FILE: drivers/net/ksz884x.c:6645:
+static struct ethtool_ops netdev_ethtool_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#6729: FILE: drivers/net/ksz884x.c:6675:
+/*
+ * Hardware monitoring

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6733: FILE: drivers/net/ksz884x.c:6679:
+static void update_link(struct net_device *dev, struct dev_priv *priv,
+	struct ksz_port *port)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#6743: FILE: drivers/net/ksz884x.c:6689:
+				printk(KERN_INFO "%s link %s\n", dev->name,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6744: FILE: drivers/net/ksz884x.c:6690:
+				printk(KERN_INFO "%s link %s\n", dev->name,
+					(media_connected == priv->media_state ?

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#6764: FILE: drivers/net/ksz884x.c:6710:
+		if (mib->cnt_ptr || 1 == hw_priv->counter[i].read) {
+

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6771: FILE: drivers/net/ksz884x.c:6717:
+			if (0 == mib->cnt_ptr) {

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#6773: FILE: drivers/net/ksz884x.c:6719:
+				wake_up_interruptible(

WARNING:JIFFIES_COMPARISON: Comparing jiffies is almost always wrong; prefer time_after, time_before and friends
#6776: FILE: drivers/net/ksz884x.c:6722:
+		} else if (jiffies >= hw_priv->counter[i].time) {

CHECK:SPACING: No space is necessary after a cast
#6795: FILE: drivers/net/ksz884x.c:6741:
+	struct dev_info *hw_priv = (struct dev_info *) ptr;

WARNING:JIFFIES_COMPARISON: Comparing jiffies is almost always wrong; prefer time_after, time_before and friends
#6801: FILE: drivers/net/ksz884x.c:6747:
+		if (hw_priv->pme_wait <= jiffies) {

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#6806: FILE: drivers/net/ksz884x.c:6752:
+	} else if (hw_chk_wol_pme_status(&hw_priv->hw)) {
+

CHECK:SPACING: No space is necessary after a cast
#6822: FILE: drivers/net/ksz884x.c:6768:
+	struct net_device *dev = (struct net_device *) ptr;

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#6836: FILE: drivers/net/ksz884x.c:6782:
+/*
+ * Linux network device interface functions

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#6847: FILE: drivers/net/ksz884x.c:6793:
+/*
+ * This enables multiple network device mode for KSZ8842, which contains a

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#6858: FILE: drivers/net/ksz884x.c:6804:
+/*
+ * As most users select multiple network device mode to use Spanning Tree

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#6873: FILE: drivers/net/ksz884x.c:6819:
+/*
+ * This enables fast aging in the KSZ8842 switch.  Not sure what situation

WARNING:TYPO_SPELLING: 'suport' may be misspelled - perhaps 'support'?
#6875: FILE: drivers/net/ksz884x.c:6821:
+ * STP suport is enabled.
        ^^^^^^

WARNING:TYPO_SPELLING: 'initalize' may be misspelled - perhaps 'initialize'?
#6880: FILE: drivers/net/ksz884x.c:6826:
+ * netdev_init - initalize network device.
                  ^^^^^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6893: FILE: drivers/net/ksz884x.c:6839:
+	ksz_init_timer(&priv->monitor_timer_info, 500 * HZ / 1000,
+		dev_monitor, dev);

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#6901: FILE: drivers/net/ksz884x.c:6847:
+	/*
+	 * Hardware does not really support IPv6 checksum generation, but

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#6917: FILE: drivers/net/ksz884x.c:6863:
+	priv->msg_enable = netif_msg_init(msg_enable,
+		(NETIF_MSG_DRV | NETIF_MSG_PROBE | NETIF_MSG_LINK));

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#6960: FILE: drivers/net/ksz884x.c:6906:
+	i = j = num = got_num = 0;

CHECK:BRACES: braces {} should be used on all arms of this statement
#6962: FILE: drivers/net/ksz884x.c:6908:
+		if (macaddr[i]) {
[...]
+		} else if (got_num)
[...]
+		else
[...]

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6978: FILE: drivers/net/ksz884x.c:6924:
+		if (2 == got_num) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6979: FILE: drivers/net/ksz884x.c:6925:
+			if (MAIN_PORT == port) {

CHECK:SPACING: No space is necessary after a cast
#6980: FILE: drivers/net/ksz884x.c:6926:
+				hw_priv->hw.override_addr[j++] = (u8) num;

CHECK:SPACING: No space is necessary after a cast
#6985: FILE: drivers/net/ksz884x.c:6931:
+					(u8) num;

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#6989: FILE: drivers/net/ksz884x.c:6935:
+			num = got_num = 0;

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6993: FILE: drivers/net/ksz884x.c:6939:
+	if (MAC_ADDR_LEN == j) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#6994: FILE: drivers/net/ksz884x.c:6940:
+		if (MAIN_PORT == port)

CHECK:SPACING: No space is necessary after a cast
#7010: FILE: drivers/net/ksz884x.c:6956:
+		sw->other_addr[5] = (u8) data[0];

CHECK:SPACING: No space is necessary after a cast
#7012: FILE: drivers/net/ksz884x.c:6958:
+		sw->other_addr[3] = (u8) data[1];

CHECK:SPACING: No space is necessary after a cast
#7014: FILE: drivers/net/ksz884x.c:6960:
+		sw->other_addr[1] = (u8) data[2];

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7024: FILE: drivers/net/ksz884x.c:6970:
+static int __init pcidev_init(struct pci_dev *pdev,
+	const struct pci_device_id *id)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7050: FILE: drivers/net/ksz884x.c:6996:
+	if (pci_set_dma_mask(pdev, DMA_BIT_MASK(32)) ||
+			pci_set_consistent_dma_mask(pdev, DMA_BIT_MASK(32)))

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*info)...) over kmalloc(sizeof(struct platform_info)...)
#7064: FILE: drivers/net/ksz884x.c:7010:
+	info = kmalloc(sizeof(struct platform_info), GFP_KERNEL);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_alert([subsystem]dev, ... then dev_alert(dev, ... then pr_alert(...  to printk(KERN_ALERT ...
#7081: FILE: drivers/net/ksz884x.c:7027:
+			printk(KERN_ALERT "chip not detected\n");

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#7100: FILE: drivers/net/ksz884x.c:7046:
+	if (2 == cnt) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#7113: FILE: drivers/net/ksz884x.c:7059:
+		if (1 == hw->dev_count) {

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*hw->ksz_switch)...) over kmalloc(sizeof(struct ksz_switch)...)
#7118: FILE: drivers/net/ksz884x.c:7064:
+		hw->ksz_switch = kmalloc(sizeof(struct ksz_switch), GFP_KERNEL);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7143: FILE: drivers/net/ksz884x.c:7089:
+	tasklet_init(&hw_priv->rx_tasklet, rx_proc_task,
+		(unsigned long) hw_priv);

CHECK:SPACING: No space is necessary after a cast
#7143: FILE: drivers/net/ksz884x.c:7089:
+		(unsigned long) hw_priv);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7145: FILE: drivers/net/ksz884x.c:7091:
+	tasklet_init(&hw_priv->tx_tasklet, tx_proc_task,
+		(unsigned long) hw_priv);

CHECK:SPACING: No space is necessary after a cast
#7145: FILE: drivers/net/ksz884x.c:7091:
+		(unsigned long) hw_priv);

WARNING:TYPO_SPELLING: 'overrided' may be misspelled - perhaps 'overrode'?
#7157: FILE: drivers/net/ksz884x.c:7103:
+	/* Read MAC address and initialize override address if not overrided. */
 	                                                           ^^^^^^^^^

CHECK:BRACES: braces {} should be used on all arms of this statement
#7169: FILE: drivers/net/ksz884x.c:7115:
+	if (hw->ksz_switch)
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#7171: FILE: drivers/net/ksz884x.c:7117:
+	else {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7180: FILE: drivers/net/ksz884x.c:7126:
+	ksz_init_timer(&hw_priv->mib_timer_info, 500 * HZ / 1000,
+		mib_monitor, hw_priv);

CHECK:SPACING: No space is necessary after a cast
#7207: FILE: drivers/net/ksz884x.c:7153:
+		dev->mem_start = (unsigned long) hw->io;

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#7210: FILE: drivers/net/ksz884x.c:7156:
+		if (MAIN_PORT == i)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7212: FILE: drivers/net/ksz884x.c:7158:
+			memcpy(dev->dev_addr, hw_priv->hw.override_addr,
+				MAC_ADDR_LEN);

CHECK:BRACES: Unbalanced braces around else statement
#7213: FILE: drivers/net/ksz884x.c:7159:
+		else {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7215: FILE: drivers/net/ksz884x.c:7161:
+			memcpy(dev->dev_addr, sw->other_addr,
+				MAC_ADDR_LEN);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7217: FILE: drivers/net/ksz884x.c:7163:
+			if (!memcmp(sw->other_addr, hw->override_addr,
+					MAC_ADDR_LEN))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#7265: FILE: drivers/net/ksz884x.c:7211:
+	release_mem_region(pci_resource_start(pdev, 0),
+		pci_resource_len(pdev, 0));

WARNING:STATIC_CONST_CHAR_ARRAY: static char array declaration should probably be static const char
#7337: FILE: drivers/net/ksz884x.c:7283:
+static char pcidev_name[] = "ksz884xp";

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000014045.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 1 errors, 193 warnings, 205 checks, 7335 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000014045.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
