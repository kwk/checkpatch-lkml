WARNING:COMMIT_MESSAGE: Missing commit description - Add an appropriate one

The patch is missing a commit description.  A brief
description of the changes made by the patch should be added.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#describe-your-changes

WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#46: FILE: drivers/w1/masters/Kconfig:38:
+config W1_DS1WM
+	tristate "Maxim DS1WM 1-wire busmaster"
+	depends on W1
+	help
+	  Say Y here to enable the DS1WM 1-wire driver, such as that
+	  in HP iPAQ devices like h5xxx, h2200, and ASIC3-based like
+	  hx4700.
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#67: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#72: FILE: drivers/w1/masters/ds1wm.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:INCLUDE_LINUX: Use #include <linux/io.h> instead of <asm/io.h>
#94: FILE: drivers/w1/masters/ds1wm.c:23:
+#include <asm/io.h>

CHECK:LINE_SPACING: Please don't use multiple blank lines
#99: FILE: drivers/w1/masters/ds1wm.c:28:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#106: FILE: drivers/w1/masters/ds1wm.c:35:
+#define DS1WM_CMD_1W_RESET  1 << 0	/* force reset on 1-wire bus */

CHECK:BIT_MACRO: Prefer using the BIT macro
#106: FILE: drivers/w1/masters/ds1wm.c:35:
+#define DS1WM_CMD_1W_RESET  1 << 0	/* force reset on 1-wire bus */

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#107: FILE: drivers/w1/masters/ds1wm.c:36:
+#define DS1WM_CMD_SRA	    1 << 1	/* enable Search ROM accelerator mode */

CHECK:BIT_MACRO: Prefer using the BIT macro
#107: FILE: drivers/w1/masters/ds1wm.c:36:
+#define DS1WM_CMD_SRA	    1 << 1	/* enable Search ROM accelerator mode */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#108: FILE: drivers/w1/masters/ds1wm.c:37:
+#define DS1WM_CMD_DQ_OUTPUT 1 << 2	/* write only - forces bus low */

CHECK:BIT_MACRO: Prefer using the BIT macro
#108: FILE: drivers/w1/masters/ds1wm.c:37:
+#define DS1WM_CMD_DQ_OUTPUT 1 << 2	/* write only - forces bus low */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#109: FILE: drivers/w1/masters/ds1wm.c:38:
+#define DS1WM_CMD_DQ_INPUT  1 << 3	/* read only - reflects state of bus */

CHECK:BIT_MACRO: Prefer using the BIT macro
#109: FILE: drivers/w1/masters/ds1wm.c:38:
+#define DS1WM_CMD_DQ_INPUT  1 << 3	/* read only - reflects state of bus */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#111: FILE: drivers/w1/masters/ds1wm.c:40:
+#define DS1WM_INT_PD	    1 << 0	/* presence detect */

CHECK:BIT_MACRO: Prefer using the BIT macro
#111: FILE: drivers/w1/masters/ds1wm.c:40:
+#define DS1WM_INT_PD	    1 << 0	/* presence detect */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#112: FILE: drivers/w1/masters/ds1wm.c:41:
+#define DS1WM_INT_PDR	    1 << 1	/* presence detect result */

CHECK:BIT_MACRO: Prefer using the BIT macro
#112: FILE: drivers/w1/masters/ds1wm.c:41:
+#define DS1WM_INT_PDR	    1 << 1	/* presence detect result */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#113: FILE: drivers/w1/masters/ds1wm.c:42:
+#define DS1WM_INT_TBE	    1 << 2	/* tx buffer empty */

CHECK:BIT_MACRO: Prefer using the BIT macro
#113: FILE: drivers/w1/masters/ds1wm.c:42:
+#define DS1WM_INT_TBE	    1 << 2	/* tx buffer empty */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#114: FILE: drivers/w1/masters/ds1wm.c:43:
+#define DS1WM_INT_TSRE	    1 << 3	/* tx shift register empty */

CHECK:BIT_MACRO: Prefer using the BIT macro
#114: FILE: drivers/w1/masters/ds1wm.c:43:
+#define DS1WM_INT_TSRE	    1 << 3	/* tx shift register empty */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#115: FILE: drivers/w1/masters/ds1wm.c:44:
+#define DS1WM_INT_RBF	    1 << 4	/* rx buffer full */

CHECK:BIT_MACRO: Prefer using the BIT macro
#115: FILE: drivers/w1/masters/ds1wm.c:44:
+#define DS1WM_INT_RBF	    1 << 4	/* rx buffer full */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#116: FILE: drivers/w1/masters/ds1wm.c:45:
+#define DS1WM_INT_RSRF	    1 << 5	/* rx shift register full */

CHECK:BIT_MACRO: Prefer using the BIT macro
#116: FILE: drivers/w1/masters/ds1wm.c:45:
+#define DS1WM_INT_RSRF	    1 << 5	/* rx shift register full */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#118: FILE: drivers/w1/masters/ds1wm.c:47:
+#define DS1WM_INTEN_EPD	    1 << 0	/* enable presence detect int */

CHECK:BIT_MACRO: Prefer using the BIT macro
#118: FILE: drivers/w1/masters/ds1wm.c:47:
+#define DS1WM_INTEN_EPD	    1 << 0	/* enable presence detect int */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#119: FILE: drivers/w1/masters/ds1wm.c:48:
+#define DS1WM_INTEN_IAS	    1 << 1	/* INTR active state */

CHECK:BIT_MACRO: Prefer using the BIT macro
#119: FILE: drivers/w1/masters/ds1wm.c:48:
+#define DS1WM_INTEN_IAS	    1 << 1	/* INTR active state */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#120: FILE: drivers/w1/masters/ds1wm.c:49:
+#define DS1WM_INTEN_ETBE    1 << 2	/* enable tx buffer empty int */

CHECK:BIT_MACRO: Prefer using the BIT macro
#120: FILE: drivers/w1/masters/ds1wm.c:49:
+#define DS1WM_INTEN_ETBE    1 << 2	/* enable tx buffer empty int */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#121: FILE: drivers/w1/masters/ds1wm.c:50:
+#define DS1WM_INTEN_ETMT    1 << 3	/* enable tx shift register empty int */

CHECK:BIT_MACRO: Prefer using the BIT macro
#121: FILE: drivers/w1/masters/ds1wm.c:50:
+#define DS1WM_INTEN_ETMT    1 << 3	/* enable tx shift register empty int */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#122: FILE: drivers/w1/masters/ds1wm.c:51:
+#define DS1WM_INTEN_ERBF    1 << 4	/* enable rx buffer full int */

CHECK:BIT_MACRO: Prefer using the BIT macro
#122: FILE: drivers/w1/masters/ds1wm.c:51:
+#define DS1WM_INTEN_ERBF    1 << 4	/* enable rx buffer full int */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#123: FILE: drivers/w1/masters/ds1wm.c:52:
+#define DS1WM_INTEN_ERSRF   1 << 5	/* enable rx shift register full int */

CHECK:BIT_MACRO: Prefer using the BIT macro
#123: FILE: drivers/w1/masters/ds1wm.c:52:
+#define DS1WM_INTEN_ERSRF   1 << 5	/* enable rx shift register full int */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#124: FILE: drivers/w1/masters/ds1wm.c:53:
+#define DS1WM_INTEN_DQO	    1 << 6	/* enable direct bus driving ops

CHECK:BIT_MACRO: Prefer using the BIT macro
#124: FILE: drivers/w1/masters/ds1wm.c:53:
+#define DS1WM_INTEN_DQO	    1 << 6	/* enable direct bus driving ops

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#125: FILE: drivers/w1/masters/ds1wm.c:54:
+#define DS1WM_INTEN_DQO	    1 << 6	/* enable direct bus driving ops
+					   (undocumented), Szabolcs Gyurko */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#125: FILE: drivers/w1/masters/ds1wm.c:54:
+					   (undocumented), Szabolcs Gyurko */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#127: FILE: drivers/w1/masters/ds1wm.c:56:
+
+

ERROR:CODE_INDENT: code indent should use tabs where possible
#174: FILE: drivers/w1/masters/ds1wm.c:103:
+        __raw_writeb(val, ds1wm_data->map + (reg << ds1wm_data->bus_shift));$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#174: FILE: drivers/w1/masters/ds1wm.c:103:
+        __raw_writeb(val, ds1wm_data->map + (reg << ds1wm_data->bus_shift));$

ERROR:CODE_INDENT: code indent should use tabs where possible
#179: FILE: drivers/w1/masters/ds1wm.c:108:
+        return __raw_readb(ds1wm_data->map + (reg << ds1wm_data->bus_shift));$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#179: FILE: drivers/w1/masters/ds1wm.c:108:
+        return __raw_readb(ds1wm_data->map + (reg << ds1wm_data->bus_shift));$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#182: FILE: drivers/w1/masters/ds1wm.c:111:
+
+

ERROR:CODE_INDENT: code indent should use tabs where possible
#221: FILE: drivers/w1/masters/ds1wm.c:150:
+                dev_dbg(&ds1wm_data->pdev->dev, "reset failed\n");$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#221: FILE: drivers/w1/masters/ds1wm.c:150:
+                dev_dbg(&ds1wm_data->pdev->dev, "reset failed\n");$

ERROR:CODE_INDENT: code indent should use tabs where possible
#222: FILE: drivers/w1/masters/ds1wm.c:151:
+                return 1;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#222: FILE: drivers/w1/masters/ds1wm.c:151:
+                return 1;$

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#232: FILE: drivers/w1/masters/ds1wm.c:161:
+	udelay(500);

usleep_range() should be preferred over udelay(). The proper way of
using usleep_range() is mentioned in the kernel docs.

See: https://www.kernel.org/doc/html/latest/timers/timers-howto.html#delays-information-on-the-various-kernel-delay-sleep-mechanisms

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#235: FILE: drivers/w1/masters/ds1wm.c:164:
+	ds1wm_write_register(ds1wm_data, DS1WM_INT_EN,
+		DS1WM_INTEN_ERBF | DS1WM_INTEN_ETMT | DS1WM_INTEN_EPD |

ERROR:CODE_INDENT: code indent should use tabs where possible
#239: FILE: drivers/w1/masters/ds1wm.c:168:
+                dev_dbg(&ds1wm_data->pdev->dev, "reset: no devices found\n");$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#239: FILE: drivers/w1/masters/ds1wm.c:168:
+                dev_dbg(&ds1wm_data->pdev->dev, "reset: no devices found\n");$

ERROR:CODE_INDENT: code indent should use tabs where possible
#240: FILE: drivers/w1/masters/ds1wm.c:169:
+                return 1;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#240: FILE: drivers/w1/masters/ds1wm.c:169:
+                return 1;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#241: FILE: drivers/w1/masters/ds1wm.c:170:
+        }$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#241: FILE: drivers/w1/masters/ds1wm.c:170:
+        }$

ERROR:CODE_INDENT: code indent should use tabs where possible
#243: FILE: drivers/w1/masters/ds1wm.c:172:
+        return 0;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#243: FILE: drivers/w1/masters/ds1wm.c:172:
+        return 0;$

WARNING:LINE_SPACING: Missing a blank line after declarations
#249: FILE: drivers/w1/masters/ds1wm.c:178:
+	DECLARE_COMPLETION(write_done);
+	ds1wm_data->write_complete = &write_done;

WARNING:LINE_SPACING: Missing a blank line after declarations
#262: FILE: drivers/w1/masters/ds1wm.c:191:
+	DECLARE_COMPLETION(read_done);
+	ds1wm_data->read_complete = &read_done;

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#275: FILE: drivers/w1/masters/ds1wm.c:204:
+	for (i = 0; i < ARRAY_SIZE (freq); i++)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#285: FILE: drivers/w1/masters/ds1wm.c:214:
+^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:MSLEEP: msleep < 20ms can sleep for up to 20ms; see Documentation/timers/timers-howto.rst
#300: FILE: drivers/w1/masters/ds1wm.c:229:
+	msleep(1);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#348: FILE: drivers/w1/masters/ds1wm.c:277:
+	 * See http://www.maxim-ic.com/appnotes.cfm/appnote_number/120. */

ERROR:TRAILING_WHITESPACE: trailing whitespace
#351: FILE: drivers/w1/masters/ds1wm.c:280:
+^I$

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#356: FILE: drivers/w1/masters/ds1wm.c:285:
+	for (rom_id = 0, i = 0; i < 16; i++) {
+

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:SPACING: No space is necessary after a cast
#371: FILE: drivers/w1/masters/ds1wm.c:300:
+		rom_id |= (unsigned long long) r << (i * 4);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#373: FILE: drivers/w1/masters/ds1wm.c:302:
+
+	}

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#401: FILE: drivers/w1/masters/ds1wm.c:330:
+	ds1wm_data = kzalloc(sizeof (*ds1wm_data), GFP_KERNEL);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#427: FILE: drivers/w1/masters/ds1wm.c:356:
+^I$

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#519: FILE: drivers/w1/masters/ds1wm.c:448:
+	printk("DS1WM w1 busmaster driver - (c) 2004 Szabolcs Gyurko\n");

WARNING:SPLIT_STRING: quoted string split across lines
#533: FILE: drivers/w1/masters/ds1wm.c:462:
+MODULE_AUTHOR("Szabolcs Gyurko <szabolcs.gyurko@tlt.hu>, "
+	      "Matt Reimer <mreimer@vpop.net>");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#541: FILE: include/linux/ds1wm.h:1:
+/* platform data for the DS1WM driver */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#548: FILE: include/linux/ds1wm.h:8:
+			     * while on hx4700 this is 1 */

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000441840.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 28 errors, 25 warnings, 25 checks, 494 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000441840.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
