ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#81: FILE: drivers/video/matrox/matroxfb_accel.c:127:
+	switch (minfo->fbcon.var.bits_per_pixel) {
[...]
+		case 16:	if (minfo->fbcon.var.green.length == 5)

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 40)
#108: FILE: drivers/video/matrox/matroxfb_accel.c:146:
+		case 16:	if (minfo->fbcon.var.green.length == 5)
 					maccess = 0xC0000001;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#108: FILE: drivers/video/matrox/matroxfb_accel.c:146:
+		case 16:	if (minfo->fbcon.var.green.length == 5)

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

WARNING:LONG_LINE: line length of 108 exceeds 100 columns
#166: FILE: drivers/video/matrox/matroxfb_accel.c:191:
+	minfo->accel.m_dwg_rect = M_DWG_TRAP | M_DWG_SOLID | M_DWG_ARZERO | M_DWG_SGNZERO | M_DWG_SHIFTZERO;

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#167: FILE: drivers/video/matrox/matroxfb_accel.c:192:
+	if (isMilleniumII(minfo)) minfo->accel.m_dwg_rect |= M_DWG_TRANSC;

CHECK:CAMELCASE: Avoid CamelCase: <isMilleniumII>
#167: FILE: drivers/video/matrox/matroxfb_accel.c:192:
+	if (isMilleniumII(minfo)) minfo->accel.m_dwg_rect |= M_DWG_TRANSC;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#177: FILE: drivers/video/matrox/matroxfb_accel.c:212:
+		start = sy*vxres+sx+curr_ydstorg(minfo);
 		          ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#177: FILE: drivers/video/matrox/matroxfb_accel.c:212:
+		start = sy*vxres+sx+curr_ydstorg(minfo);
 		                ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#177: FILE: drivers/video/matrox/matroxfb_accel.c:212:
+		start = sy*vxres+sx+curr_ydstorg(minfo);
 		                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#186: FILE: drivers/video/matrox/matroxfb_accel.c:220:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		         ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#186: FILE: drivers/video/matrox/matroxfb_accel.c:220:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		                ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#186: FILE: drivers/video/matrox/matroxfb_accel.c:220:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#186: FILE: drivers/video/matrox/matroxfb_accel.c:220:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		                         ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#186: FILE: drivers/video/matrox/matroxfb_accel.c:220:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		                            ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#195: FILE: drivers/video/matrox/matroxfb_accel.c:248:
+		start = sy*vxres+sx+curr_ydstorg(minfo);
 		          ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#195: FILE: drivers/video/matrox/matroxfb_accel.c:248:
+		start = sy*vxres+sx+curr_ydstorg(minfo);
 		                ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#195: FILE: drivers/video/matrox/matroxfb_accel.c:248:
+		start = sy*vxres+sx+curr_ydstorg(minfo);
 		                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#204: FILE: drivers/video/matrox/matroxfb_accel.c:256:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		         ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#204: FILE: drivers/video/matrox/matroxfb_accel.c:256:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		                ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#204: FILE: drivers/video/matrox/matroxfb_accel.c:256:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		                   ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#204: FILE: drivers/video/matrox/matroxfb_accel.c:256:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		                         ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#204: FILE: drivers/video/matrox/matroxfb_accel.c:256:
+		end = (sy+height-1)*vxres+sx+curr_ydstorg(minfo);
 		                            ^

WARNING:LONG_LINE: line length of 164 exceeds 100 columns
#213: FILE: drivers/video/matrox/matroxfb_accel.c:277:
+		matrox_accel_bmove_lin(PMINFO minfo->fbcon.var.xres_virtual >> 1, area->sy, area->sx >> 1, area->dy, area->dx >> 1, area->height, area->width >> 1);

WARNING:LONG_LINE: line length of 132 exceeds 100 columns
#220: FILE: drivers/video/matrox/matroxfb_accel.c:283:
+	matrox_accel_bmove(PMINFO minfo->fbcon.var.xres_virtual, area->sy, area->sx, area->dy, area->dx, area->height, area->width);

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'u_int32_t'
#249: FILE: drivers/video/matrox/matroxfb_accel.c:344:
+		u_int32_t step = minfo->fbcon.var.xres_virtual >> 1;

ERROR:SPACING: space required after that ',' (ctx:VxV)
#288: FILE: drivers/video/matrox/matroxfb_base.h:707:
+#define mga_outb(addr,val)	mga_writeb(minfo->mmio.vbase, (addr), (val))
                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#289: FILE: drivers/video/matrox/matroxfb_base.h:708:
+#define mga_outw(addr,val)	mga_writew(minfo->mmio.vbase, (addr), (val))
                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#290: FILE: drivers/video/matrox/matroxfb_base.h:709:
+#define mga_outl(addr,val)	mga_writel(minfo->mmio.vbase, (addr), (val))
                      ^

WARNING:TRAILING_SEMICOLON: macros should not use a trailing semicolon
#315: FILE: drivers/video/matrox/matroxfb_base.h:739:
+#define CRITBEGIN  spin_lock_irqsave(&minfo->lock.accel, critflags);

Macro definition should not end with a semicolon. The macro
invocation style should be consistent with function calls.
This can prevent any unexpected code paths::

  #define MAC do_something;

If this macro is used within a if else statement, like::

  if (some_condition)
          MAC;

  else
          do_something;

Then there would be a compilation error, because when the macro is
expanded there are two trailing semicolons, so the else branch gets
orphaned.

See: https://lore.kernel.org/lkml/1399671106.2912.21.camel@joe-AO725/

WARNING:TRAILING_SEMICOLON: macros should not use a trailing semicolon
#316: FILE: drivers/video/matrox/matroxfb_base.h:740:
+#define CRITEND	   spin_unlock_irqrestore(&minfo->lock.accel, critflags);

WARNING:LONG_LINE: line length of 109 exceeds 100 columns
#336: FILE: drivers/video/matrox/g450_pll.c:93:
+		n = ((tvco * (m+1) + minfo->features.pll.ref_freq) / (minfo->features.pll.ref_freq * 2)) - 2;

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#336: FILE: drivers/video/matrox/g450_pll.c:93:
+		n = ((tvco * (m+1) + minfo->features.pll.ref_freq) / (minfo->features.pll.ref_freq * 2)) - 2;
 		               ^

WARNING:LONG_LINE: line length of 106 exceeds 100 columns
#366: FILE: drivers/video/matrox/g450_pll.c:375:
+					pci_write_config_dword(minfo->pcidev, PCI_OPTION_REG, opt | 0x20);

CHECK:CAMELCASE: Avoid CamelCase: <DACclk>
#436: FILE: drivers/video/matrox/matroxfb_DAC1064.c:89:
+	minfo->hw.DACclk[0] = m;

CHECK:BRACES: braces {} should be used on all arms of this statement
#585: FILE: drivers/video/matrox/matroxfb_DAC1064.c:306:
+		if (minfo->outputs[1].src == MATROXFB_SRC_CRTC1) {
[...]
-		} else if (ACCESS_FBINFO(outputs[1]).src == MATROXFB_SRC_CRTC2) {
[...]
 			hw->DACreg[POS1064_XMISCCTRL] |= GX00_XMISCCTRL_MFC_MAFC | G400_XMISCCTRL_VDO_C2_MAFC12;
[...]
+		} else if (minfo->outputs[2].src == MATROXFB_SRC_CRTC1)
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:CAMELCASE: Avoid CamelCase: <outDAC1064>
#614: FILE: drivers/video/matrox/matroxfb_DAC1064.c:328:
+		outDAC1064(PMINFO 0x1F, minfo->devflags.dfp_type);

CHECK:CAMELCASE: Avoid CamelCase: <DACreg>
#646: FILE: drivers/video/matrox/matroxfb_DAC1064.c:364:
+	hw->DACreg[POS1064_XVREFCTRL] = minfo->features.DAC1064.xvrefctrl;

CHECK:CAMELCASE: Avoid CamelCase: <MXoptionReg>
#800: FILE: drivers/video/matrox/matroxfb_DAC1064.c:674:
+	pci_write_config_dword(minfo->pcidev, PCI_OPTION_REG, hw->MXoptionReg);

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#817: FILE: drivers/video/matrox/matroxfb_DAC1064.c:696:
+	pci_write_config_dword(minfo->pcidev, PCI_OPTION3_REG, minfo->values.reg.opt3 & ~0x00300C03);

WARNING:LONG_LINE: line length of 105 exceeds 100 columns
#868: FILE: drivers/video/matrox/matroxfb_DAC1064.c:735:
+	pci_write_config_dword(minfo->pcidev, PCI_MEMMISC_REG, minfo->values.reg.memmisc & ~0x80000000U);

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#873: FILE: drivers/video/matrox/matroxfb_DAC1064.c:739:
+	pci_write_config_dword(minfo->pcidev, PCI_MEMMISC_REG, minfo->values.reg.memmisc | 0x80000000U);

WARNING:LONG_LINE: line length of 103 exceeds 100 columns
#879: FILE: drivers/video/matrox/matroxfb_DAC1064.c:743:
+	if (minfo->values.memory.ddr && (!minfo->values.memory.emrswen || !minfo->values.memory.dll)) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#879: FILE: drivers/video/matrox/matroxfb_DAC1064.c:743:
+	if (minfo->values.memory.ddr && (!minfo->values.memory.emrswen || !minfo->values.memory.dll)) {
+		mga_outl(M_MEMRDBK, minfo->values.reg.memrdbk & ~0x1000);
 	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#898: FILE: drivers/video/matrox/matroxfb_DAC1064.c:757:
+	if (minfo->values.reg.mctlwtst != minfo->values.reg.mctlwtst_core) {
+		mga_outl(M_CTLWTST, minfo->values.reg.mctlwtst_core);
 	}

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#947: FILE: drivers/video/matrox/matroxfb_DAC1064.c:825:
+	if (minfo->devflags.g450dac) {
[...]
 	} else {
[...]

WARNING:BRACES: braces {} are not necessary for single statement blocks
#955: FILE: drivers/video/matrox/matroxfb_DAC1064.c:830:
+	if (!minfo->features.pll.ref_freq) {
+		minfo->features.pll.ref_freq	 = 27000;
 	}

CHECK:BRACES: braces {} should be used on all arms of this statement
#984: FILE: drivers/video/matrox/matroxfb_DAC1064.c:846:
+	if (minfo->devflags.g450dac) {
[...]
 	} else
[...]

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1063: FILE: drivers/video/matrox/matroxfb_DAC1064.c:906:
+		if (mga_readb(minfo->video.vbase, 0x0000) != 0xAA) {
 			hw->MXoptionReg &= ~0x1000;
 		}

WARNING:LONG_LINE: line length of 103 exceeds 100 columns
#1156: FILE: drivers/video/matrox/matroxfb_DAC1064.c:977:
+				pci_write_config_dword(minfo->pcidev, PCI_OPTION_REG, hw->MXoptionReg);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1174: FILE: drivers/video/matrox/matroxfb_DAC1064.c:991:
+		if (minfo->devflags.dfp_type == -1) {
+			minfo->devflags.dfp_type = inDAC1064(PMINFO 0x1F);
 		}

CHECK:CAMELCASE: Avoid CamelCase: <inDAC1064>
#1175: FILE: drivers/video/matrox/matroxfb_DAC1064.c:992:
+			minfo->devflags.dfp_type = inDAC1064(PMINFO 0x1F);

CHECK:CAMELCASE: Avoid CamelCase: <Ti3026_calcclock>
#1254: FILE: drivers/video/matrox/matroxfb_Ti3026.c:302:
+	f_pll = Ti3026_calcclock(PMINFO clk, minfo->max_pixel_clock, &pixin, &pixfeed, &pixpost);

CHECK:CAMELCASE: Avoid CamelCase: <Bpp>
#1263: FILE: drivers/video/matrox/matroxfb_Ti3026.c:312:
+		Bpp = minfo->curr.final_bppShift;

CHECK:CAMELCASE: Avoid CamelCase: <final_bppShift>
#1263: FILE: drivers/video/matrox/matroxfb_Ti3026.c:312:
+		Bpp = minfo->curr.final_bppShift;

CHECK:CAMELCASE: Avoid CamelCase: <isInterleave>
#1281: FILE: drivers/video/matrox/matroxfb_Ti3026.c:337:
+				if (isInterleave(minfo))

WARNING:LONG_LINE: line length of 111 exceeds 100 columns
#1308: FILE: drivers/video/matrox/matroxfb_Ti3026.c:365:
+	u_int8_t muxctrl = isInterleave(minfo) ? TVP3026_XMUXCTRL_MEMORY_64BIT : TVP3026_XMUXCTRL_MEMORY_32BIT;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'u_int8_t'
#1308: FILE: drivers/video/matrox/matroxfb_Ti3026.c:365:
+	u_int8_t muxctrl = isInterleave(minfo) ? TVP3026_XMUXCTRL_MEMORY_64BIT : TVP3026_XMUXCTRL_MEMORY_32BIT;

WARNING:LONG_LINE: line length of 244 exceeds 100 columns
#1324: FILE: drivers/video/matrox/matroxfb_Ti3026.c:386:
+			hw->DACreg[POS3026_XTRUECOLORCTRL] = (minfo->fbcon.var.green.length == 5) ? (TVP3026_XTRUECOLORCTRL_DIRECTCOLOR | TVP3026_XTRUECOLORCTRL_ORGB_1555) : (TVP3026_XTRUECOLORCTRL_DIRECTCOLOR | TVP3026_XTRUECOLORCTRL_RGB_565);

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#1345: FILE: drivers/video/matrox/matroxfb_Ti3026.c:429:
+	if (isInterleave(minfo)) hw->MXoptionReg |= 0x00001000;

WARNING:TYPO_SPELLING: 'millenium' may be misspelled - perhaps 'millennium'?
#1447: FILE: drivers/video/matrox/matroxfb_Ti3026.c:685:
+	minfo->millenium = 1;
 	       ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:CAMELCASE: Avoid CamelCase: <milleniumII>
#1448: FILE: drivers/video/matrox/matroxfb_Ti3026.c:686:
+	minfo->milleniumII = (minfo->pcidev->device != PCI_DEVICE_ID_MATROX_MIL);

CHECK:CAMELCASE: Avoid CamelCase: <inTi3026>
#1477: FILE: drivers/video/matrox/matroxfb_Ti3026.c:709:
+	minfo->accel.ramdac_rev = inTi3026(PMINFO TVP3026_XSILICONREV);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'info->fbcon.var.bits_per_pixel == minfo->fbcon.var.bits_per_pixel'
#1494: FILE: drivers/video/matrox/matroxfb_base.c:161:
+	if (info && (info->fbcon.var.bits_per_pixel == minfo->fbcon.var.bits_per_pixel)
+		 && (info->fbcon.var.xres_virtual == minfo->fbcon.var.xres_virtual)
+		 && (info->fbcon.var.green.length == minfo->fbcon.var.green.length)
 		 ) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'info->fbcon.var.xres_virtual == minfo->fbcon.var.xres_virtual'
#1494: FILE: drivers/video/matrox/matroxfb_base.c:161:
+	if (info && (info->fbcon.var.bits_per_pixel == minfo->fbcon.var.bits_per_pixel)
+		 && (info->fbcon.var.xres_virtual == minfo->fbcon.var.xres_virtual)
+		 && (info->fbcon.var.green.length == minfo->fbcon.var.green.length)
 		 ) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'info->fbcon.var.green.length == minfo->fbcon.var.green.length'
#1494: FILE: drivers/video/matrox/matroxfb_base.c:161:
+	if (info && (info->fbcon.var.bits_per_pixel == minfo->fbcon.var.bits_per_pixel)
+		 && (info->fbcon.var.xres_virtual == minfo->fbcon.var.xres_virtual)
+		 && (info->fbcon.var.green.length == minfo->fbcon.var.green.length)
 		 ) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1495: FILE: drivers/video/matrox/matroxfb_base.c:162:
+	if (info && (info->fbcon.var.bits_per_pixel == minfo->fbcon.var.bits_per_pixel)
+		 && (info->fbcon.var.xres_virtual == minfo->fbcon.var.xres_virtual)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1496: FILE: drivers/video/matrox/matroxfb_base.c:163:
+		 && (info->fbcon.var.xres_virtual == minfo->fbcon.var.xres_virtual)
+		 && (info->fbcon.var.green.length == minfo->fbcon.var.green.length)

WARNING:LONG_LINE: line length of 132 exceeds 100 columns
#1506: FILE: drivers/video/matrox/matroxfb_base.c:171:
+					mga_outl(0x3C28, pos + minfo->fbcon.var.xres_virtual * minfo->fbcon.var.bits_per_pixel / 8);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1598: FILE: drivers/video/matrox/matroxfb_base.c:277:
+			if (minfo->devflags.accelerator != FB_ACCEL_MATROX_MGAG400) {
 				return -ENODEV;
 			}

WARNING:LONG_LINE: line length of 134 exceeds 100 columns
#1623: FILE: drivers/video/matrox/matroxfb_base.c:322:
+	pos = (minfo->fbcon.var.yoffset * minfo->fbcon.var.xres_virtual + minfo->fbcon.var.xoffset) * minfo->curr.final_bppShift / 32;

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1625: FILE: drivers/video/matrox/matroxfb_base.c:324:
+	p0 = minfo->hw.CRTC[0x0D] = pos & 0xFF;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1626: FILE: drivers/video/matrox/matroxfb_base.c:325:
+	p1 = minfo->hw.CRTC[0x0C] = (pos & 0xFF00) >> 8;

WARNING:LONG_LINE: line length of 112 exceeds 100 columns
#1627: FILE: drivers/video/matrox/matroxfb_base.c:326:
+	p2 = minfo->hw.CRTCEXT[0] = (minfo->hw.CRTCEXT[0] & 0xB0) | ((pos >> 16) & 0x0F) | ((pos >> 14) & 0x40);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1627: FILE: drivers/video/matrox/matroxfb_base.c:326:
+	p2 = minfo->hw.CRTCEXT[0] = (minfo->hw.CRTCEXT[0] & 0xB0) | ((pos >> 16) & 0x0F) | ((pos >> 14) & 0x40);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1630: FILE: drivers/video/matrox/matroxfb_base.c:328:
+	p3 = minfo->hw.CRTCEXT[8] = pos >> 21;

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1690: FILE: drivers/video/matrox/matroxfb_base.c:395:
+	if (minfo->dead) {
 		return -ENXIO;
 	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1706: FILE: drivers/video/matrox/matroxfb_base.c:412:
+		if (0 == --minfo->userusecount) {
 			matroxfb_disable_irq(PMINFO2);
 		}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1711: FILE: drivers/video/matrox/matroxfb_base.c:416:
+	if (!(--minfo->usecount) && minfo->dead) {
 		matroxfb_remove(PMINFO 0);
 	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1737: FILE: drivers/video/matrox/matroxfb_base.c:470:
+	if (isInterleave(minfo)) {
 		rounding *= 2;
 	}

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#1756: FILE: drivers/video/matrox/matroxfb_base.c:551:
 	switch (bpp) {
+		case 4:	 if (!minfo->capable.cfb4) return -EINVAL;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#1758: FILE: drivers/video/matrox/matroxfb_base.c:552:
+		case 4:	 if (!minfo->capable.cfb4) return -EINVAL;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#1758: FILE: drivers/video/matrox/matroxfb_base.c:552:
+		case 4:	 if (!minfo->capable.cfb4) return -EINVAL;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'memlen > 0x400000'
#1776: FILE: drivers/video/matrox/matroxfb_base.c:576:
+	if (!minfo->capable.cross4MB && (memlen > 0x400000)) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1884: FILE: drivers/video/matrox/matroxfb_base.c:737:
+	if (minfo->dead) {
 		return -ENXIO;
 	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1893: FILE: drivers/video/matrox/matroxfb_base.c:756:
+	if (minfo->dead) {
 		return -ENXIO;
 	}

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#1929: FILE: drivers/video/matrox/matroxfb_base.c:780:
+		minfo->curr.final_bppShift = matroxfb_get_final_bppShift(PMINFO var->bits_per_pixel);

CHECK:CAMELCASE: Avoid CamelCase: <matroxfb_get_final_bppShift>
#1929: FILE: drivers/video/matrox/matroxfb_base.c:780:
+		minfo->curr.final_bppShift = matroxfb_get_final_bppShift(PMINFO var->bits_per_pixel);

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#1948: FILE: drivers/video/matrox/matroxfb_base.c:802:
+					minfo->outputs[out].output->compute(minfo->outputs[out].data, &mt);

CHECK:SPACING: spaces preferred around that '&' (ctx:WxV)
#1960: FILE: drivers/video/matrox/matroxfb_base.c:808:
+			minfo->hw_switch->init(PMINFO &mt);
 			                              ^

WARNING:LONG_LINE: line length of 114 exceeds 100 columns
#1961: FILE: drivers/video/matrox/matroxfb_base.c:809:
+			pos = (var->yoffset * var->xres_virtual + var->xoffset) * minfo->curr.final_bppShift / 32;

WARNING:LONG_LINE: line length of 102 exceeds 100 columns
#1979: FILE: drivers/video/matrox/matroxfb_base.c:822:
+					minfo->outputs[out].output->program(minfo->outputs[out].data);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2023: FILE: drivers/video/matrox/matroxfb_base.c:879:
+	if (minfo->dead) {
 		return -ENXIO;
 	}

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#2043: FILE: drivers/video/matrox/matroxfb_base.c:926:
+					val = oproc->verifymode(minfo->outputs[mom.output].data, mom.mode);

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2102: FILE: drivers/video/matrox/matroxfb_base.c:992:
+						if (!minfo->outputs[i].output)

Indentation with 6 or more tabs usually indicate overly indented
code.

It is suggested to refactor excessive indentation of
if/else/for/do/while/switch statements.

See: https://lore.kernel.org/lkml/1328311239.21255.24.camel@joe2Laptop/

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2105: FILE: drivers/video/matrox/matroxfb_base.c:994:
+						switch (minfo->outputs[i].src) {

WARNING:LONG_LINE: line length of 106 exceeds 100 columns
#2120: FILE: drivers/video/matrox/matroxfb_base.c:1008:
+							if (minfo->outputs[i].src == MATROXFB_SRC_CRTC2) {

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2120: FILE: drivers/video/matrox/matroxfb_base.c:1008:
+							if (minfo->outputs[i].src == MATROXFB_SRC_CRTC2) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2120: FILE: drivers/video/matrox/matroxfb_base.c:1008:
+							if (minfo->outputs[i].src == MATROXFB_SRC_CRTC2) {
 								return -EBUSY;
 							}

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2129: FILE: drivers/video/matrox/matroxfb_base.c:1017:
+						if (minfo->outputs[i].src != MATROXFB_SRC_CRTC1) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2147: FILE: drivers/video/matrox/matroxfb_base.c:1037:
+					if (minfo->outputs[i].src == MATROXFB_SRC_CRTC1) {
 						conn |= 1 << i;
 					}

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2158: FILE: drivers/video/matrox/matroxfb_base.c:1052:
+						switch (minfo->outputs[i].src) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2176: FILE: drivers/video/matrox/matroxfb_base.c:1076:
+					if (minfo->outputs[i].output) {
 						conn |= 1 << i;
 					}

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#2196: FILE: drivers/video/matrox/matroxfb_base.c:1108:
+				if (!minfo->outputs[1].output) {
[...]
-				} else if (ACCESS_FBINFO(outputs[1]).output->getqueryctrl) {
[...]
+				} else if (minfo->outputs[1].output->getqueryctrl) {
[...]

WARNING:LONG_LINE: line length of 117 exceeds 100 columns
#2201: FILE: drivers/video/matrox/matroxfb_base.c:1111:
+					err = minfo->outputs[1].output->getqueryctrl(minfo->outputs[1].data, &qctrl);

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#2217: FILE: drivers/video/matrox/matroxfb_base.c:1130:
+				if (!minfo->outputs[1].output) {
[...]
-				} else if (ACCESS_FBINFO(outputs[1]).output->getctrl) {
[...]
+				} else if (minfo->outputs[1].output->getctrl) {
[...]

WARNING:LONG_LINE: line length of 111 exceeds 100 columns
#2222: FILE: drivers/video/matrox/matroxfb_base.c:1133:
+					err = minfo->outputs[1].output->getctrl(minfo->outputs[1].data, &ctrl);

WARNING:BRACES: braces {} are not necessary for any arm of this statement
#2238: FILE: drivers/video/matrox/matroxfb_base.c:1153:
+				if (!minfo->outputs[1].output) {
[...]
-				} else if (ACCESS_FBINFO(outputs[1]).output->setctrl) {
[...]
+				} else if (minfo->outputs[1].output->setctrl) {
[...]

WARNING:LONG_LINE: line length of 111 exceeds 100 columns
#2243: FILE: drivers/video/matrox/matroxfb_base.c:1156:
+					err = minfo->outputs[1].output->setctrl(minfo->outputs[1].data, &ctrl);

CHECK:CAMELCASE: Avoid CamelCase: <isMillenium>
#2275: FILE: drivers/video/matrox/matroxfb_base.c:1322:
+	minfo->interleave = !(!isMillenium(minfo) || ((offs - 0x100000) & 0x3FFFFF));

CHECK:CAMELCASE: Avoid CamelCase: <accelID>
#2321: FILE: drivers/video/matrox/matroxfb_base.c:1607:
+	minfo->devflags.accelerator = b->base->accelID;

CHECK:CAMELCASE: Avoid CamelCase: <fbResource>
#2399: FILE: drivers/video/matrox/matroxfb_base.c:1653:
+		minfo->devflags.fbResource = PCI_BASE_ADDRESS_0;

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2453: FILE: drivers/video/matrox/matroxfb_base.c:1706:
+			if (!(mga_option & 0x20000000) && !minfo->devflags.nopciretry) {
 				printk(KERN_WARNING "matroxfb: Disabling PCI retries due to i82437 present\n");
 			}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2476: FILE: drivers/video/matrox/matroxfb_base.c:1723:
+	if (minfo->hw_switch->preinit(PMINFO2)) {
 		goto failVideoIO;
 	}

WARNING:LONG_LINE_COMMENT: line length of 109 exceeds 100 columns
#2541: FILE: drivers/video/matrox/matroxfb_base.c:1772:
+	minfo->fbcon.flags |= FBINFO_PARTIAL_PAN_OK | 	 /* Prefer panning for scroll under MC viewer/edit */

A comment starts before but extends beyond the maximum line length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2541: FILE: drivers/video/matrox/matroxfb_base.c:1772:
+^Iminfo->fbcon.flags |= FBINFO_PARTIAL_PAN_OK | ^I /* Prefer panning for scroll under MC viewer/edit */$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2557: FILE: drivers/video/matrox/matroxfb_base.c:1785:
+		fb_find_mode(&vesafb_defined, &minfo->fbcon, videomode[0] ? videomode : NULL,
 			NULL, 0, &defaultmode, vesafb_defined.bits_per_pixel);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2590: FILE: drivers/video/matrox/matroxfb_base.c:1894:
+	if (register_framebuffer(&minfo->fbcon) < 0) {
 		goto failVideoIO;
 	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2784: FILE: drivers/video/matrox/matroxfb_crtc2.c:268:
+		if (minfo->dead) {
 			return -ENXIO;
 		}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2798: FILE: drivers/video/matrox/matroxfb_crtc2.c:285:
+	if (minfo) {
+		err = minfo->fbops.fb_release(&minfo->fbcon, user);
 	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2815: FILE: drivers/video/matrox/matroxfb_crtc2.c:359:
+				if (minfo->outputs[out].output->compute) {
+					minfo->outputs[out].output->compute(minfo->outputs[out].data, &mt);
 				}

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#2816: FILE: drivers/video/matrox/matroxfb_crtc2.c:360:
+					minfo->outputs[out].output->compute(minfo->outputs[out].data, &mt);

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2886: FILE: drivers/video/matrox/matroxfb_crtc2.c:472:
+						if (!minfo->outputs[out].output)

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2889: FILE: drivers/video/matrox/matroxfb_crtc2.c:474:
+						switch (minfo->outputs[out].src) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'minfo->outputs[2].src == MATROXFB_SRC_CRTC1'
#2902: FILE: drivers/video/matrox/matroxfb_crtc2.c:486:
+					if ((minfo->outputs[2].src == MATROXFB_SRC_CRTC1) && tmp)

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2909: FILE: drivers/video/matrox/matroxfb_crtc2.c:492:
+						if (minfo->outputs[out].src != MATROXFB_SRC_CRTC2) {

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#2912: FILE: drivers/video/matrox/matroxfb_crtc2.c:494:
+							minfo->outputs[out].src = MATROXFB_SRC_CRTC2;

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2927: FILE: drivers/video/matrox/matroxfb_crtc2.c:512:
+					if (minfo->outputs[out].src == MATROXFB_SRC_CRTC2) {
 						conn |= 1 << out;
 					}

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#2938: FILE: drivers/video/matrox/matroxfb_crtc2.c:527:
+						switch (minfo->outputs[out].src) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#2950: FILE: drivers/video/matrox/matroxfb_crtc2.c:537:
+					if (minfo->outputs[2].src == MATROXFB_SRC_CRTC1) {
 						tmp = 0;
 					}

CHECK:BRACES: braces {} should be used on all arms of this statement
#2961: FILE: drivers/video/matrox/matroxfb_crtc2.c:614:
+	if (minfo->video.len_usable + mem <= minfo->video.len)
[...]
+	else if (minfo->video.len < mem) {
[...]
 	} else { /* check yres on first head... */
[...]

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#3059: FILE: drivers/video/matrox/matroxfb_g450.c:84:
+	return (int*)((char*)minfo + g450_controls[idx].control);

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#3059: FILE: drivers/video/matrox/matroxfb_g450.c:84:
+	return (int*)((char*)minfo + g450_controls[idx].control);

CHECK:CAMELCASE: Avoid CamelCase: <cve2_init_TVdata>
#3087: FILE: drivers/video/matrox/matroxfb_g450.c:518:
+		cve2_init_TVdata(minfo->outputs[1].mode, &minfo->hw.maven, &outd);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#3110: FILE: drivers/video/matrox/matroxfb_g450.c:532:
+			if (minfo->altout.tvo_params.testout) {
+				minfo->hw.maven.regs[0x05] |= 0x02;
 			}

CHECK:SPACING: spaces preferred around that '&' (ctx:WxV)
#3115: FILE: drivers/video/matrox/matroxfb_g450.c:536:
+		computeRegs(PMINFO &minfo->hw.maven, mt, outd);
 		                   ^

CHECK:CAMELCASE: Avoid CamelCase: <computeRegs>
#3115: FILE: drivers/video/matrox/matroxfb_g450.c:536:
+		computeRegs(PMINFO &minfo->hw.maven, mt, outd);

WARNING:BRACES: braces {} are not necessary for single statement blocks
#3125: FILE: drivers/video/matrox/matroxfb_g450.c:550:
+	if (minfo->outputs[1].mode != MATROXFB_OUTPUT_MODE_MONITOR) {
+		cve2_init_TV(PMINFO &minfo->hw.maven);
 	}

CHECK:SPACING: spaces preferred around that '&' (ctx:WxV)
#3126: FILE: drivers/video/matrox/matroxfb_g450.c:551:
+		cve2_init_TV(PMINFO &minfo->hw.maven);
 		                    ^

WARNING:LONG_LINE: line length of 106 exceeds 100 columns
#3360: FILE: drivers/video/matrox/matroxfb_misc.c:555:
+	minfo->limits.system.vcomax	= (bd->pins[41] == 0xFF) ? 230000 : ((bd->pins[41] + 100) * 1000);

WARNING:LONG_LINE: line length of 105 exceeds 100 columns
#3367: FILE: drivers/video/matrox/matroxfb_misc.c:560:
+	minfo->values.pll.system	= (bd->pins[43] == 0xFF) ? 50000 : ((bd->pins[43] + 100) * 1000);

WARNING:LONG_LINE: line length of 128 exceeds 100 columns
#3391: FILE: drivers/video/matrox/matroxfb_misc.c:576:
+	minfo->limits.system.vcomax	= (bd->pins[36] == 0xFF) ? 230000			: ((bd->pins[36] + 100) * 1000);

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3432: FILE: drivers/video/matrox/matroxfb_misc.c:602:
+	minfo->limits.pixel.vcomax	= (bd->pins[ 39] == 0xFF) ? 230000			: bd->pins[ 39] * 4000;

ERROR:SPACING: space prohibited after that open square bracket '['
#3432: FILE: drivers/video/matrox/matroxfb_misc.c:602:
+	minfo->limits.pixel.vcomax	= (bd->pins[ 39] == 0xFF) ? 230000			: bd->pins[ 39] * 4000;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3433: FILE: drivers/video/matrox/matroxfb_misc.c:603:
+	minfo->limits.system.vcomax	= (bd->pins[ 38] == 0xFF) ? minfo->limits.pixel.vcomax	: bd->pins[ 38] * 4000;

ERROR:SPACING: space prohibited after that open square bracket '['
#3433: FILE: drivers/video/matrox/matroxfb_misc.c:603:
+	minfo->limits.system.vcomax	= (bd->pins[ 38] == 0xFF) ? minfo->limits.pixel.vcomax	: bd->pins[ 38] * 4000;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3447: FILE: drivers/video/matrox/matroxfb_misc.c:613:
+	minfo->values.pll.system	= (bd->pins[ 65] == 0xFF) ? 200000 			: bd->pins[ 65] * 4000;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3447: FILE: drivers/video/matrox/matroxfb_misc.c:613:
+^Iminfo->values.pll.system^I= (bd->pins[ 65] == 0xFF) ? 200000 ^I^I^I: bd->pins[ 65] * 4000;$

ERROR:SPACING: space prohibited after that open square bracket '['
#3447: FILE: drivers/video/matrox/matroxfb_misc.c:613:
+	minfo->values.pll.system	= (bd->pins[ 65] == 0xFF) ? 200000 			: bd->pins[ 65] * 4000;

ERROR:SPACING: space prohibited after that open square bracket '['
#3448: FILE: drivers/video/matrox/matroxfb_misc.c:614:
+	minfo->features.pll.ref_freq	= (bd->pins[ 92] & 0x01) ? 14318 : 27000;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3496: FILE: drivers/video/matrox/matroxfb_misc.c:635:
+	minfo->limits.pixel.vcomax	= (bd->pins[ 38] == 0xFF) ? 600000			: bd->pins[ 38] * mult;

ERROR:SPACING: space prohibited after that open square bracket '['
#3496: FILE: drivers/video/matrox/matroxfb_misc.c:635:
+	minfo->limits.pixel.vcomax	= (bd->pins[ 38] == 0xFF) ? 600000			: bd->pins[ 38] * mult;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3497: FILE: drivers/video/matrox/matroxfb_misc.c:636:
+	minfo->limits.system.vcomax	= (bd->pins[ 36] == 0xFF) ? minfo->limits.pixel.vcomax	: bd->pins[ 36] * mult;

ERROR:SPACING: space prohibited after that open square bracket '['
#3497: FILE: drivers/video/matrox/matroxfb_misc.c:636:
+	minfo->limits.system.vcomax	= (bd->pins[ 36] == 0xFF) ? minfo->limits.pixel.vcomax	: bd->pins[ 36] * mult;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3498: FILE: drivers/video/matrox/matroxfb_misc.c:637:
+	minfo->limits.video.vcomax	= (bd->pins[ 37] == 0xFF) ? minfo->limits.system.vcomax	: bd->pins[ 37] * mult;

ERROR:SPACING: space prohibited after that open square bracket '['
#3498: FILE: drivers/video/matrox/matroxfb_misc.c:637:
+	minfo->limits.video.vcomax	= (bd->pins[ 37] == 0xFF) ? minfo->limits.system.vcomax	: bd->pins[ 37] * mult;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3499: FILE: drivers/video/matrox/matroxfb_misc.c:638:
+	minfo->limits.pixel.vcomin	= (bd->pins[123] == 0xFF) ? 256000			: bd->pins[123] * mult;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3500: FILE: drivers/video/matrox/matroxfb_misc.c:639:
+	minfo->limits.system.vcomin	= (bd->pins[121] == 0xFF) ? minfo->limits.pixel.vcomin	: bd->pins[121] * mult;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3501: FILE: drivers/video/matrox/matroxfb_misc.c:640:
+	minfo->limits.video.vcomin	= (bd->pins[122] == 0xFF) ? minfo->limits.system.vcomin	: bd->pins[122] * mult;

WARNING:LONG_LINE: line length of 119 exceeds 100 columns
#3503: FILE: drivers/video/matrox/matroxfb_misc.c:642:
+	minfo->values.pll.video		= (bd->pins[ 92] == 0xFF) ? 284000			: bd->pins[ 92] * 4000;

ERROR:SPACING: space prohibited after that open square bracket '['
#3503: FILE: drivers/video/matrox/matroxfb_misc.c:642:
+	minfo->values.pll.video		= (bd->pins[ 92] == 0xFF) ? 284000			: bd->pins[ 92] * 4000;

CHECK:SPACING: spaces preferred around that '&' (ctx:WxV)
#3620: FILE: drivers/video/matrox/matroxfb_misc.c:778:
+	matroxfb_set_limits(PMINFO &minfo->bios);
 	                           ^

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000078163.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 20 errors, 85 warnings, 56 checks, 3389 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000078163.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
