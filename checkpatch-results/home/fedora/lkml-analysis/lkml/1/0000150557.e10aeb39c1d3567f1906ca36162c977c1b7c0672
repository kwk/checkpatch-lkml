WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#52: FILE: drivers/net/Kconfig:966:
+config ETHOC
+	tristate "OpenCores 10/100 Mbps Ethernet MAC support"
+	depends on NET_ETHERNET
+	select PHYLIB
+	help
+	  Say Y here if you want to use the OpenCores 10/100 Mbps Ethernet MAC.
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#75: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#80: FILE: drivers/net/ethoc.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#81: FILE: drivers/net/ethoc.c:2:
+ * linux/drivers/net/ethoc.c

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

CHECK:BIT_MACRO: Prefer using the BIT macro
#124: FILE: drivers/net/ethoc.c:45:
+#define	MODER_RXEN	(1 <<  0) /* receive enable */

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

CHECK:BIT_MACRO: Prefer using the BIT macro
#125: FILE: drivers/net/ethoc.c:46:
+#define	MODER_TXEN	(1 <<  1) /* transmit enable */

CHECK:BIT_MACRO: Prefer using the BIT macro
#126: FILE: drivers/net/ethoc.c:47:
+#define	MODER_NOPRE	(1 <<  2) /* no preamble */

CHECK:BIT_MACRO: Prefer using the BIT macro
#127: FILE: drivers/net/ethoc.c:48:
+#define	MODER_BRO	(1 <<  3) /* broadcast address */

CHECK:BIT_MACRO: Prefer using the BIT macro
#128: FILE: drivers/net/ethoc.c:49:
+#define	MODER_IAM	(1 <<  4) /* individual address mode */

CHECK:BIT_MACRO: Prefer using the BIT macro
#129: FILE: drivers/net/ethoc.c:50:
+#define	MODER_PRO	(1 <<  5) /* promiscuous mode */

CHECK:BIT_MACRO: Prefer using the BIT macro
#130: FILE: drivers/net/ethoc.c:51:
+#define	MODER_IFG	(1 <<  6) /* interframe gap for incoming frames */

CHECK:BIT_MACRO: Prefer using the BIT macro
#131: FILE: drivers/net/ethoc.c:52:
+#define	MODER_LOOP	(1 <<  7) /* loopback */

CHECK:BIT_MACRO: Prefer using the BIT macro
#132: FILE: drivers/net/ethoc.c:53:
+#define	MODER_NBO	(1 <<  8) /* no back-off */

CHECK:BIT_MACRO: Prefer using the BIT macro
#133: FILE: drivers/net/ethoc.c:54:
+#define	MODER_EDE	(1 <<  9) /* excess defer enable */

CHECK:BIT_MACRO: Prefer using the BIT macro
#134: FILE: drivers/net/ethoc.c:55:
+#define	MODER_FULLD	(1 << 10) /* full duplex */

CHECK:BIT_MACRO: Prefer using the BIT macro
#135: FILE: drivers/net/ethoc.c:56:
+#define	MODER_RESET	(1 << 11) /* FIXME: reset (undocumented) */

CHECK:BIT_MACRO: Prefer using the BIT macro
#136: FILE: drivers/net/ethoc.c:57:
+#define	MODER_DCRC	(1 << 12) /* delayed CRC enable */

CHECK:BIT_MACRO: Prefer using the BIT macro
#137: FILE: drivers/net/ethoc.c:58:
+#define	MODER_CRC	(1 << 13) /* CRC enable */

CHECK:BIT_MACRO: Prefer using the BIT macro
#138: FILE: drivers/net/ethoc.c:59:
+#define	MODER_HUGE	(1 << 14) /* huge packets enable */

CHECK:BIT_MACRO: Prefer using the BIT macro
#139: FILE: drivers/net/ethoc.c:60:
+#define	MODER_PAD	(1 << 15) /* padding enabled */

CHECK:BIT_MACRO: Prefer using the BIT macro
#140: FILE: drivers/net/ethoc.c:61:
+#define	MODER_RSM	(1 << 16) /* receive small packets */

CHECK:BIT_MACRO: Prefer using the BIT macro
#143: FILE: drivers/net/ethoc.c:64:
+#define	INT_MASK_TXF	(1 << 0) /* transmit frame */

CHECK:BIT_MACRO: Prefer using the BIT macro
#144: FILE: drivers/net/ethoc.c:65:
+#define	INT_MASK_TXE	(1 << 1) /* transmit error */

CHECK:BIT_MACRO: Prefer using the BIT macro
#145: FILE: drivers/net/ethoc.c:66:
+#define	INT_MASK_RXF	(1 << 2) /* receive frame */

CHECK:BIT_MACRO: Prefer using the BIT macro
#146: FILE: drivers/net/ethoc.c:67:
+#define	INT_MASK_RXE	(1 << 3) /* receive error */

CHECK:BIT_MACRO: Prefer using the BIT macro
#147: FILE: drivers/net/ethoc.c:68:
+#define	INT_MASK_BUSY	(1 << 4)

CHECK:BIT_MACRO: Prefer using the BIT macro
#148: FILE: drivers/net/ethoc.c:69:
+#define	INT_MASK_TXC	(1 << 5) /* transmit control frame */

CHECK:BIT_MACRO: Prefer using the BIT macro
#149: FILE: drivers/net/ethoc.c:70:
+#define	INT_MASK_RXC	(1 << 6) /* receive control frame */

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'x' - possible side-effects?
#168: FILE: drivers/net/ethoc.c:89:
+#define	TX_BD_NUM_VAL(x)	(((x) <= 0x80) ? (x) : 0x80)

CHECK:BIT_MACRO: Prefer using the BIT macro
#171: FILE: drivers/net/ethoc.c:92:
+#define	CTRLMODER_PASSALL	(1 << 0) /* pass all receive frames */

CHECK:BIT_MACRO: Prefer using the BIT macro
#172: FILE: drivers/net/ethoc.c:93:
+#define	CTRLMODER_RXFLOW	(1 << 1) /* receive control flow */

CHECK:BIT_MACRO: Prefer using the BIT macro
#173: FILE: drivers/net/ethoc.c:94:
+#define	CTRLMODER_TXFLOW	(1 << 2) /* transmit control flow */

CHECK:BIT_MACRO: Prefer using the BIT macro
#177: FILE: drivers/net/ethoc.c:98:
+#define	MIIMODER_NOPRE		(1 << 8) /* no preamble */

CHECK:BIT_MACRO: Prefer using the BIT macro
#180: FILE: drivers/net/ethoc.c:101:
+#define	MIICOMMAND_SCAN		(1 << 0) /* scan status */

CHECK:BIT_MACRO: Prefer using the BIT macro
#181: FILE: drivers/net/ethoc.c:102:
+#define	MIICOMMAND_READ		(1 << 1) /* read status */

CHECK:BIT_MACRO: Prefer using the BIT macro
#182: FILE: drivers/net/ethoc.c:103:
+#define	MIICOMMAND_WRITE	(1 << 2) /* write control data */

CHECK:BIT_MACRO: Prefer using the BIT macro
#197: FILE: drivers/net/ethoc.c:118:
+#define	MIISTATUS_LINKFAIL	(1 << 0)

CHECK:BIT_MACRO: Prefer using the BIT macro
#198: FILE: drivers/net/ethoc.c:119:
+#define	MIISTATUS_BUSY		(1 << 1)

CHECK:BIT_MACRO: Prefer using the BIT macro
#199: FILE: drivers/net/ethoc.c:120:
+#define	MIISTATUS_INVALID	(1 << 2)

CHECK:BIT_MACRO: Prefer using the BIT macro
#202: FILE: drivers/net/ethoc.c:123:
+#define	TX_BD_CS		(1 <<  0) /* carrier sense lost */

CHECK:BIT_MACRO: Prefer using the BIT macro
#203: FILE: drivers/net/ethoc.c:124:
+#define	TX_BD_DF		(1 <<  1) /* defer indication */

CHECK:BIT_MACRO: Prefer using the BIT macro
#204: FILE: drivers/net/ethoc.c:125:
+#define	TX_BD_LC		(1 <<  2) /* late collision */

CHECK:BIT_MACRO: Prefer using the BIT macro
#205: FILE: drivers/net/ethoc.c:126:
+#define	TX_BD_RL		(1 <<  3) /* retransmission limit */

CHECK:BIT_MACRO: Prefer using the BIT macro
#208: FILE: drivers/net/ethoc.c:129:
+#define	TX_BD_UR		(1 <<  8) /* transmitter underrun */

CHECK:BIT_MACRO: Prefer using the BIT macro
#209: FILE: drivers/net/ethoc.c:130:
+#define	TX_BD_CRC		(1 << 11) /* TX CRC enable */

CHECK:BIT_MACRO: Prefer using the BIT macro
#210: FILE: drivers/net/ethoc.c:131:
+#define	TX_BD_PAD		(1 << 12) /* pad enable for short packets */

CHECK:BIT_MACRO: Prefer using the BIT macro
#211: FILE: drivers/net/ethoc.c:132:
+#define	TX_BD_WRAP		(1 << 13)

CHECK:BIT_MACRO: Prefer using the BIT macro
#212: FILE: drivers/net/ethoc.c:133:
+#define	TX_BD_IRQ		(1 << 14) /* interrupt request enable */

CHECK:BIT_MACRO: Prefer using the BIT macro
#213: FILE: drivers/net/ethoc.c:134:
+#define	TX_BD_READY		(1 << 15) /* TX buffer ready */

CHECK:BIT_MACRO: Prefer using the BIT macro
#221: FILE: drivers/net/ethoc.c:142:
+#define	RX_BD_LC	(1 <<  0) /* late collision */

CHECK:BIT_MACRO: Prefer using the BIT macro
#222: FILE: drivers/net/ethoc.c:143:
+#define	RX_BD_CRC	(1 <<  1) /* RX CRC error */

CHECK:BIT_MACRO: Prefer using the BIT macro
#223: FILE: drivers/net/ethoc.c:144:
+#define	RX_BD_SF	(1 <<  2) /* short frame */

CHECK:BIT_MACRO: Prefer using the BIT macro
#224: FILE: drivers/net/ethoc.c:145:
+#define	RX_BD_TL	(1 <<  3) /* too long */

CHECK:BIT_MACRO: Prefer using the BIT macro
#225: FILE: drivers/net/ethoc.c:146:
+#define	RX_BD_DN	(1 <<  4) /* dribble nibble */

CHECK:BIT_MACRO: Prefer using the BIT macro
#226: FILE: drivers/net/ethoc.c:147:
+#define	RX_BD_IS	(1 <<  5) /* invalid symbol */

CHECK:BIT_MACRO: Prefer using the BIT macro
#227: FILE: drivers/net/ethoc.c:148:
+#define	RX_BD_OR	(1 <<  6) /* receiver overrun */

CHECK:BIT_MACRO: Prefer using the BIT macro
#228: FILE: drivers/net/ethoc.c:149:
+#define	RX_BD_MISS	(1 <<  7)

CHECK:BIT_MACRO: Prefer using the BIT macro
#229: FILE: drivers/net/ethoc.c:150:
+#define	RX_BD_CF	(1 <<  8) /* control frame */

CHECK:BIT_MACRO: Prefer using the BIT macro
#230: FILE: drivers/net/ethoc.c:151:
+#define	RX_BD_WRAP	(1 << 13)

CHECK:BIT_MACRO: Prefer using the BIT macro
#231: FILE: drivers/net/ethoc.c:152:
+#define	RX_BD_IRQ	(1 << 14) /* interrupt request enable */

CHECK:BIT_MACRO: Prefer using the BIT macro
#232: FILE: drivers/net/ethoc.c:153:
+#define	RX_BD_EMPTY	(1 << 15)

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#262: FILE: drivers/net/ethoc.c:183:
+	spinlock_t rx_lock;

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#263: FILE: drivers/net/ethoc.c:184:
+	spinlock_t lock;

WARNING:LINE_SPACING: Missing a blank line after declarations
#290: FILE: drivers/net/ethoc.c:211:
+	loff_t offset = ETHOC_BD_BASE + (index * sizeof(struct ethoc_bd));
+	bd->stat = ethoc_read(dev, offset + 0);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#295: FILE: drivers/net/ethoc.c:216:
+static void ethoc_write_bd(struct ethoc *dev, int index,
+		const struct ethoc_bd *bd)

WARNING:LINE_SPACING: Missing a blank line after declarations
#298: FILE: drivers/net/ethoc.c:219:
+	loff_t offset = ETHOC_BD_BASE + (index * sizeof(struct ethoc_bd));
+	ethoc_write(dev, offset + 0, bd->stat);

WARNING:LINE_SPACING: Missing a blank line after declarations
#305: FILE: drivers/net/ethoc.c:226:
+	u32 imask = ethoc_read(dev, INT_MASK);
+	imask |= mask;

WARNING:LINE_SPACING: Missing a blank line after declarations
#312: FILE: drivers/net/ethoc.c:233:
+	u32 imask = ethoc_read(dev, INT_MASK);
+	imask &= ~mask;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#332: FILE: drivers/net/ethoc.c:253:
+static void ethoc_copy_from_io(struct sk_buff *dest, const void __iomem *src,
+		size_t count)

WARNING:LINE_SPACING: Missing a blank line after declarations
#344: FILE: drivers/net/ethoc.c:265:
+	u32 mode = ethoc_read(dev, MODER);
+	mode |= MODER_RXEN | MODER_TXEN;

WARNING:LINE_SPACING: Missing a blank line after declarations
#351: FILE: drivers/net/ethoc.c:272:
+	u32 mode = ethoc_read(dev, MODER);
+	mode &= ~(MODER_RXEN | MODER_TXEN);

WARNING:LINE_SPACING: Missing a blank line after declarations
#437: FILE: drivers/net/ethoc.c:358:
+		u32 status = ethoc_read(priv, MIISTATUS);
+		if (!(status & MIISTATUS_BUSY)) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#461: FILE: drivers/net/ethoc.c:382:
+		u32 stat = ethoc_read(priv, MIISTATUS);
+		if (!(stat & MIISTATUS_BUSY))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#506: FILE: drivers/net/ethoc.c:427:
+	phy = phy_connect(dev, phy->dev.bus_id, &ethoc_mdio_poll, 0,
+			PHY_INTERFACE_MODE_GMII);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#525: FILE: drivers/net/ethoc.c:446:
+	ret = request_irq(dev->irq, ethoc_interrupt, IRQF_SHARED,
+			dev->name, dev);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#553: FILE: drivers/net/ethoc.c:474:
+		dev_info(&dev->dev, "I/O: %08lx Memory: %08lx-%08lx\n",
+				dev->base_addr, dev->mem_start, dev->mem_end);

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#604: FILE: drivers/net/ethoc.c:525:
+	return -ENOSYS;

ENOSYS means that a nonexistent system call was called.
Earlier, it was wrongly used for things like invalid operations on
otherwise valid syscalls.  This should be avoided in new code.

See: https://lore.kernel.org/lkml/5eb299021dec23c1a48fa7d9f2c8b794e967766d.1408730669.git.luto@amacapital.net/

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#610: FILE: drivers/net/ethoc.c:531:
+	return -ENOSYS;

WARNING:LINE_SPACING: Missing a blank line after declarations
#700: FILE: drivers/net/ethoc.c:621:
+			int bit = ethoc_get_multicast_bit(mc);
+			hash[bit >> 5] |= 1 << (bit & 0x1f);

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#710: FILE: drivers/net/ethoc.c:631:
+	return -ENOSYS;

WARNING:LINE_SPACING: Missing a blank line after declarations
#717: FILE: drivers/net/ethoc.c:638:
+	u32 pending = ethoc_read(priv, INT_SOURCE);
+	if (likely(pending))

WARNING:LINE_SPACING: Missing a blank line after declarations
#724: FILE: drivers/net/ethoc.c:645:
+	struct ethoc *priv = netdev_priv(dev);
+	return &priv->stats;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#786: FILE: drivers/net/ethoc.c:707:
+static unsigned int ethoc_update_rx_stats(struct ethoc *dev,
+		struct ethoc_bd *bd)

WARNING:LINE_SPACING: Missing a blank line after declarations
#849: FILE: drivers/net/ethoc.c:770:
+			struct sk_buff *skb = netdev_alloc_skb(dev, size);
+			if (likely(skb)) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#851: FILE: drivers/net/ethoc.c:772:
+				void *src = priv->membase + bd.addr;
+				ethoc_copy_from_io(skb, src, size);

WARNING:SPLIT_STRING: quoted string split across lines
#860: FILE: drivers/net/ethoc.c:781:
+					dev_warn(&dev->dev, "low on memory - "
+							"packet dropped\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1003: FILE: drivers/net/ethoc.c:924:
+	mmio = devm_request_mem_region(&pdev->dev, res->start,
+			res->end - res->start + 1, res->name);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1021: FILE: drivers/net/ethoc.c:942:
+	mem = devm_request_mem_region(&pdev->dev, res->start,
+			res->end - res->start + 1, res->name);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1046: FILE: drivers/net/ethoc.c:967:
+	priv->iobase = devm_ioremap_nocache(&pdev->dev, netdev->base_addr,
+			mmio->end - mmio->start + 1);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1054: FILE: drivers/net/ethoc.c:975:
+	priv->membase = devm_ioremap_nocache(&pdev->dev, netdev->mem_start,
+			mem->end - mem->start + 1);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1070: FILE: drivers/net/ethoc.c:991:
+	 * current MAC from the controller. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1075: FILE: drivers/net/ethoc.c:996:
+	 * program a random one. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1091: FILE: drivers/net/ethoc.c:1012:
+	snprintf(priv->mdio->id, MII_BUS_ID_SIZE, "%s-%d",
+			priv->mdio->name, pdev->id);

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#1194: FILE: drivers/net/ethoc.c:1115:
+	return -ENOSYS;

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#1199: FILE: drivers/net/ethoc.c:1120:
+	return -ENOSYS;

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1239: FILE: include/net/ethoc.h:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#1240: FILE: include/net/ethoc.h:2:
+ * linux/include/net/ethoc.h

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000150557.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 27 warnings, 70 checks, 1195 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000150557.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
