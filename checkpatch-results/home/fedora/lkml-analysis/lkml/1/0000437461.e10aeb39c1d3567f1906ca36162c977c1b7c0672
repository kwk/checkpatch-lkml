WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#43: FILE: drivers/scsi/atari_NCR5380.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'x' - possible side-effects?
#97: FILE: drivers/scsi/atari_NCR5380.c:80:
+#define LIST(x, y)						\
+	do {							\
+		printk("LINE:%d   Adding %p to %p\n",		\
+		       __LINE__, (void*)(x), (void*)(y));	\
+		if ((x) == (y))					\
+			udelay(5);				\
+	} while (0)

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'y' - possible side-effects?
#97: FILE: drivers/scsi/atari_NCR5380.c:80:
+#define LIST(x, y)						\
+	do {							\
+		printk("LINE:%d   Adding %p to %p\n",		\
+		       __LINE__, (void*)(x), (void*)(y));	\
+		if ((x) == (y))					\
+			udelay(5);				\
+	} while (0)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#99: FILE: drivers/scsi/atari_NCR5380.c:82:
+		printk("LINE:%d   Adding %p to %p\n",		\

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#100: FILE: drivers/scsi/atari_NCR5380.c:83:
+		       __LINE__, (void*)(x), (void*)(y));	\

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#100: FILE: drivers/scsi/atari_NCR5380.c:83:
+		       __LINE__, (void*)(x), (void*)(y));	\

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'x' - possible side-effects?
#104: FILE: drivers/scsi/atari_NCR5380.c:87:
+#define REMOVE(w, x, y, z)					\
+	do {							\
+		printk("LINE:%d   Removing: %p->%p  %p->%p \n",	\
+		       __LINE__, (void*)(w), (void*)(x),	\
+		       (void*)(y), (void*)(z));			\
+		if ((x) == (y))					\
+			udelay(5);				\
+	} while (0)

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'y' - possible side-effects?
#104: FILE: drivers/scsi/atari_NCR5380.c:87:
+#define REMOVE(w, x, y, z)					\
+	do {							\
+		printk("LINE:%d   Removing: %p->%p  %p->%p \n",	\
+		       __LINE__, (void*)(w), (void*)(x),	\
+		       (void*)(y), (void*)(z));			\
+		if ((x) == (y))					\
+			udelay(5);				\
+	} while (0)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#106: FILE: drivers/scsi/atari_NCR5380.c:89:
+		printk("LINE:%d   Removing: %p->%p  %p->%p \n",	\

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#106: FILE: drivers/scsi/atari_NCR5380.c:89:
+		printk("LINE:%d   Removing: %p->%p  %p->%p \n",	\

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#107: FILE: drivers/scsi/atari_NCR5380.c:90:
+		       __LINE__, (void*)(w), (void*)(x),	\

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#107: FILE: drivers/scsi/atari_NCR5380.c:90:
+		       __LINE__, (void*)(w), (void*)(x),	\

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#108: FILE: drivers/scsi/atari_NCR5380.c:91:
+		       (void*)(y), (void*)(z));			\

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#108: FILE: drivers/scsi/atari_NCR5380.c:91:
+		       (void*)(y), (void*)(z));			\

WARNING:TYPO_SPELLING: 'datas' may be misspelled - perhaps 'data'?
#199: FILE: drivers/scsi/atari_NCR5380.c:169:
+ * to datas (ie, on the same track) were considered, however these
       ^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:CAMELCASE: Avoid CamelCase: <TagAlloc>
#309: FILE: drivers/scsi/atari_NCR5380.c:328:
+static TAG_ALLOC TagAlloc[8][8];	/* 8 targets and 8 LUNs */

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <Scsi_Cmnd>
#361: FILE: drivers/scsi/atari_NCR5380.c:361:
+static int is_lun_busy(Scsi_Cmnd *cmd, int should_be_tagged)

WARNING:SPLIT_STRING: quoted string split across lines
#432: FILE: drivers/scsi/atari_NCR5380.c:397:
+		TAG_PRINTK("scsi%d: target %d lun %d now allocated by untagged "
+			   "command\n", H_NO(cmd), cmd->device->id, cmd->device->lun);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#440: FILE: drivers/scsi/atari_NCR5380.c:405:
+		TAG_PRINTK("scsi%d: using tag %d for target %d lun %d "
+			   "(now %d tags in use)\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#478: FILE: drivers/scsi/atari_NCR5380.c:425:
+		printk(KERN_NOTICE "scsi%d: trying to free bad tag %d!\n",

WARNING:LINE_SPACING: Missing a blank line after declarations
#482: FILE: drivers/scsi/atari_NCR5380.c:429:
+		TAG_ALLOC *ta = &TagAlloc[cmd->device->id][cmd->device->lun];
+		clear_bit(cmd->tag, ta->allocated);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:CAMELCASE: Avoid CamelCase: <SCp>
#534: FILE: drivers/scsi/atari_NCR5380.c:473:
+	unsigned long oldlen = cmd->SCp.this_residual;

CHECK:CAMELCASE: Avoid CamelCase: <initialize_SCp>
#585: FILE: drivers/scsi/atari_NCR5380.c:507:
+static inline void initialize_SCp(Scsi_Cmnd *cmd)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#660: FILE: drivers/scsi/atari_NCR5380.c:545:
+	{ICR_ASSERT_RST, "ASSERT RST"},{ICR_ASSERT_ACK, "ASSERT ACK"},
 	                              ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required after that ',' (ctx:VxV)
#667: FILE: drivers/scsi/atari_NCR5380.c:552:
+	"MODE PARITY INTR"}, {MR_ENABLE_EOP_INTR,"MODE EOP INTR"},
 	                                        ^

CHECK:CAMELCASE: Avoid CamelCase: <Scsi_Host>
#707: FILE: drivers/scsi/atari_NCR5380.c:566:
+static void NCR5380_print(struct Scsi_Host *instance)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#719: FILE: drivers/scsi/atari_NCR5380.c:578:
+	printk("STATUS_REG: %02x ", status);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#722: FILE: drivers/scsi/atari_NCR5380.c:581:
+			printk(",%s", signals[i].name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#723: FILE: drivers/scsi/atari_NCR5380.c:582:
+	printk("\nBASR: %02x ", basr);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#726: FILE: drivers/scsi/atari_NCR5380.c:585:
+			printk(",%s", basrs[i].name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#727: FILE: drivers/scsi/atari_NCR5380.c:586:
+	printk("\nICR: %02x ", icr);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#730: FILE: drivers/scsi/atari_NCR5380.c:589:
+			printk(",%s", icrs[i].name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#731: FILE: drivers/scsi/atari_NCR5380.c:590:
+	printk("\nMODE: %02x ", mr);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#734: FILE: drivers/scsi/atari_NCR5380.c:593:
+			printk(",%s", mrs[i].name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#735: FILE: drivers/scsi/atari_NCR5380.c:594:
+	printk("\n");

CHECK:BRACES: braces {} should be used on all arms of this statement
#775: FILE: drivers/scsi/atari_NCR5380.c:620:
+	if (!(status & SR_REQ))
[...]
+	else {
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#776: FILE: drivers/scsi/atari_NCR5380.c:621:
+		printk(KERN_DEBUG "scsi%d: REQ not asserted, phase unknown.\n", HOSTNO);

CHECK:BRACES: Unbalanced braces around else statement
#777: FILE: drivers/scsi/atari_NCR5380.c:622:
+	else {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#781: FILE: drivers/scsi/atari_NCR5380.c:626:
+		printk(KERN_DEBUG "scsi%d: phase %s\n", HOSTNO, phases[i].name);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#793: FILE: drivers/scsi/atari_NCR5380.c:636:
+};
+static inline void NCR5380_print_phase(struct Scsi_Host *instance)

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#812: FILE: drivers/scsi/atari_NCR5380.c:658:
+static volatile int main_running;

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#829: FILE: drivers/scsi/atari_NCR5380.c:665:
+		/* If in interrupt and NCR5380_main() not already running,
+		   queue it on the 'immediate' task queue, to be processed

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#831: FILE: drivers/scsi/atari_NCR5380.c:667:
+		   finished. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#835: FILE: drivers/scsi/atari_NCR5380.c:671:
+	/* else: nothing to do: the running NCR5380_main() will pick up
+	   any newly queued command. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#835: FILE: drivers/scsi/atari_NCR5380.c:671:
+	   any newly queued command. */

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#847: FILE: drivers/scsi/atari_NCR5380.c:677:
+	static int done = 0;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

WARNING:LINE_SPACING: Missing a blank line after declarations
#848: FILE: drivers/scsi/atari_NCR5380.c:678:
+	static int done = 0;
+	if (!done) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#855: FILE: drivers/scsi/atari_NCR5380.c:684:
 
+

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#869: FILE: drivers/scsi/atari_NCR5380.c:696:
+	printk(" generic options"

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#888: FILE: drivers/scsi/atari_NCR5380.c:710:
+	printk(" generic release=%d", NCR5380_PUBLIC_RELEASE);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#928: FILE: drivers/scsi/atari_NCR5380.c:733:
+		printk("NCR5380_print_status: no memory for print buffer\n");

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'NCR5380_print_status', this function's name, in a string
#928: FILE: drivers/scsi/atari_NCR5380.c:733:
+		printk("NCR5380_print_status: no memory for print buffer\n");

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#933: FILE: drivers/scsi/atari_NCR5380.c:738:
+	printk("\n%s\n", pr_bfr);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#984: FILE: drivers/scsi/atari_NCR5380.c:758:
+#define SPRINTF(fmt,args...)							\
                    ^

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'fmt' - possible side-effects?
#984: FILE: drivers/scsi/atari_NCR5380.c:758:
+#define SPRINTF(fmt,args...)							\
+	do {									\
+		if (pos + strlen(fmt) + 20 /* slop */ < buffer + length)	\
+			pos += sprintf(pos, fmt , ## args);			\
+	} while(0)

ERROR:SPACING: space prohibited before that ',' (ctx:WxW)
#987: FILE: drivers/scsi/atari_NCR5380.c:761:
+			pos += sprintf(pos, fmt , ## args);			\
 			                        ^

ERROR:SPACING: space required before the open parenthesis '('
#988: FILE: drivers/scsi/atari_NCR5380.c:762:
+	} while(0)

CHECK:CAMELCASE: Avoid CamelCase: <lprint_Scsi_Cmnd>
#989: FILE: drivers/scsi/atari_NCR5380.c:763:
+static char *lprint_Scsi_Cmnd(Scsi_Cmnd *cmd, char *pos, char *buffer, int length);

WARNING:TYPO_SPELLING: 'inout' may be misspelled - perhaps 'input'?
#992: FILE: drivers/scsi/atari_NCR5380.c:766:
+			     char **start, off_t offset, int length, int inout)
 			                                                 ^^^^^

WARNING:TYPO_SPELLING: 'inout' may be misspelled - perhaps 'input'?
#1009: FILE: drivers/scsi/atari_NCR5380.c:783:
+	if (inout)			/* Has data been written to the file ? */
 	    ^^^^^

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#1010: FILE: drivers/scsi/atari_NCR5380.c:784:
+		return -ENOSYS;		/* Currently this is a no-op */

ENOSYS means that a nonexistent system call was called.
Earlier, it was wrongly used for things like invalid operations on
otherwise valid syscalls.  This should be avoided in new code.

See: https://lore.kernel.org/lkml/5eb299021dec23c1a48fa7d9f2c8b794e967766d.1408730669.git.luto@amacapital.net/

CHECK:SPACING: No space is necessary after a cast
#1028: FILE: drivers/scsi/atari_NCR5380.c:794:
+		pos = lprint_Scsi_Cmnd((Scsi_Cmnd *) hostdata->connected,

CHECK:SPACING: No space is necessary after a cast
#1047: FILE: drivers/scsi/atari_NCR5380.c:805:
+	for (ptr = (Scsi_Cmnd *) hostdata->disconnected_queue; ptr;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1080: FILE: drivers/scsi/atari_NCR5380.c:824:
+	unsigned char *command;
+	SPRINTF("scsi%d: destination target %d, lun %d\n",

WARNING:LINE_SPACING: Missing a blank line after declarations
#1114: FILE: drivers/scsi/atari_NCR5380.c:851:
+	int i;
+	SETUP_HOSTDATA(instance);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'instance->cmd_per_lun > 1'
#1170: FILE: drivers/scsi/atari_NCR5380.c:881:
+	if ((instance->cmd_per_lun > 1) || (instance->can_queue > 1))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'instance->can_queue > 1'
#1170: FILE: drivers/scsi/atari_NCR5380.c:881:
+	if ((instance->cmd_per_lun > 1) || (instance->can_queue > 1))

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1171: FILE: drivers/scsi/atari_NCR5380.c:882:
+		printk("scsi%d: WARNING : support for multiple outstanding commands enabled\n"

CHECK:CAMELCASE: Avoid CamelCase: <SCset>
#1228: FILE: drivers/scsi/atari_NCR5380.c:915:
+	if (!timer_pending(&SCset->eh_timeout))

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#1300: FILE: drivers/scsi/atari_NCR5380.c:964:
+		printk(KERN_NOTICE "scsi%d: WRITE attempted with NO_WRITE debugging flag set\n",

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'cmd->cmnd[0] == REQUEST_SENSE'
#1468: FILE: drivers/scsi/atari_NCR5380.c:1035:
+	if (!(hostdata->issue_queue) || (cmd->cmnd[0] == REQUEST_SENSE)) {

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1583: FILE: drivers/scsi/atari_NCR5380.c:1102:
+	/* Tell int handlers main() is now already executing.  Note that
+	   no races are possible here. If an int comes in before

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1586: FILE: drivers/scsi/atari_NCR5380.c:1105:
+	   won't find any work left to do. */

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 36)
#1592: FILE: drivers/scsi/atari_NCR5380.c:1111:
+	do {
[...]
+				    ) {

CHECK:SPACING: No space is necessary after a cast
#1608: FILE: drivers/scsi/atari_NCR5380.c:1122:
+			for (tmp = (Scsi_Cmnd *) hostdata->issue_queue, prev = NULL;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'tmp == prev'
#1612: FILE: drivers/scsi/atari_NCR5380.c:1126:
+			if ((tmp == prev) && tmp)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1613: FILE: drivers/scsi/atari_NCR5380.c:1127:
+				printk(" LOOP\n");

CHECK:SPACING: No space is necessary after a cast
#1618: FILE: drivers/scsi/atari_NCR5380.c:1130:
+			for (tmp = (Scsi_Cmnd *) hostdata->issue_queue,

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1631: FILE: drivers/scsi/atari_NCR5380.c:1135:
+					printk("MAIN tmp=%p   target=%d   busy=%d lun=%d\n",

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#1632: FILE: drivers/scsi/atari_NCR5380.c:1136:
+					       tmp, tmp->device->id, hostdata->busy[tmp->device->id],

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1637: FILE: drivers/scsi/atari_NCR5380.c:1141:
+				if (

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (32, 36)
#1637: FILE: drivers/scsi/atari_NCR5380.c:1141:
+				if (
[...]
+				    ) {

ERROR:SPACING: space prohibited after that open parenthesis '('
#1640: FILE: drivers/scsi/atari_NCR5380.c:1143:
+				    !is_lun_busy( tmp, tmp->cmnd[0] != REQUEST_SENSE)

WARNING:TYPO_SPELLING: 'reenable' may be misspelled - perhaps 're-enable'?
#1693: FILE: drivers/scsi/atari_NCR5380.c:1160:
+					/* reenable interrupts after finding one */
 					   ^^^^^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#1703: FILE: drivers/scsi/atari_NCR5380.c:1170:
+					MAIN_PRINTK("scsi%d: main(): command for target %d "
+						    "lun %d removed from issue_queue\n",

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'tmp->cmnd[0] == REQUEST_SENSE'
#1731: FILE: drivers/scsi/atari_NCR5380.c:1185:
+					if (!NCR5380_select(instance, tmp,
+					    (tmp->cmnd[0] == REQUEST_SENSE) ? TAG_NONE :
+					    TAG_NEXT)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1732: FILE: drivers/scsi/atari_NCR5380.c:1186:
+					if (!NCR5380_select(instance, tmp,
+					    (tmp->cmnd[0] == REQUEST_SENSE) ? TAG_NONE :

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#1738: FILE: drivers/scsi/atari_NCR5380.c:1192:
+						break;
+					} else {

WARNING:SPLIT_STRING: quoted string split across lines
#1762: FILE: drivers/scsi/atari_NCR5380.c:1203:
+						MAIN_PRINTK("scsi%d: main(): select() failed, "
+							    "returned to issue_queue\n", HOSTNO);

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#1763: FILE: drivers/scsi/atari_NCR5380.c:1204:
+						if (hostdata->connected)

Indentation with 6 or more tabs usually indicate overly indented
code.

It is suggested to refactor excessive indentation of
if/else/for/do/while/switch statements.

See: https://lore.kernel.org/lkml/1328311239.21255.24.camel@joe2Laptop/

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1773: FILE: drivers/scsi/atari_NCR5380.c:1213:
 #ifdef REAL_DMA
+		    && !hostdata->dma_len

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1801: FILE: drivers/scsi/atari_NCR5380.c:1226:
+	/* Better allow ints _after_ 'main_running' has been cleared, else
+	   an interrupt could believe we'll pick up the work it left for

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1802: FILE: drivers/scsi/atari_NCR5380.c:1227:
+	   us, but we won't see it anymore here... */

WARNING:TYPO_SPELLING: 'transfered' may be misspelled - perhaps 'transferred'?
#1877: FILE: drivers/scsi/atari_NCR5380.c:1247:
+	int transfered, saved_data = 0, overrun = 0, cnt, toPIO;
 	    ^^^^^^^^^^

CHECK:CAMELCASE: Avoid CamelCase: <toPIO>
#1877: FILE: drivers/scsi/atari_NCR5380.c:1247:
+	int transfered, saved_data = 0, overrun = 0, cnt, toPIO;

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#1879: FILE: drivers/scsi/atari_NCR5380.c:1249:
+	volatile int *count;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1882: FILE: drivers/scsi/atari_NCR5380.c:1252:
+		printk(KERN_WARNING "scsi%d: received end of DMA interrupt with "

WARNING:SPLIT_STRING: quoted string split across lines
#1883: FILE: drivers/scsi/atari_NCR5380.c:1253:
+		printk(KERN_WARNING "scsi%d: received end of DMA interrupt with "
+		       "no connected cmd\n", HOSTNO);

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#1890: FILE: drivers/scsi/atari_NCR5380.c:1260:
+			udelay(10);

usleep_range() should be preferred over udelay(). The proper way of
using usleep_range() is mentioned in the kernel docs.

See: https://www.kernel.org/doc/html/latest/timers/timers-howto.html#delays-information-on-the-various-kernel-delay-sleep-mechanisms

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1892: FILE: drivers/scsi/atari_NCR5380.c:1262:
+			     (BASR_PHASE_MATCH|BASR_ACK)) ==
 			                      ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1893: FILE: drivers/scsi/atari_NCR5380.c:1263:
+			    (BASR_PHASE_MATCH|BASR_ACK)) {
 			                     ^

WARNING:TYPO_SPELLING: 'transfered' may be misspelled - perhaps 'transferred'?
#1909: FILE: drivers/scsi/atari_NCR5380.c:1279:
+	transfered = hostdata->dma_len - NCR5380_dma_residual(instance);
 	^^^^^^^^^^

WARNING:TYPO_SPELLING: 'transfered' may be misspelled - perhaps 'transferred'?
#1914: FILE: drivers/scsi/atari_NCR5380.c:1284:
+	*data += transfered;
 	         ^^^^^^^^^^

WARNING:TYPO_SPELLING: 'transfered' may be misspelled - perhaps 'transferred'?
#1915: FILE: drivers/scsi/atari_NCR5380.c:1285:
+	*count -= transfered;
 	          ^^^^^^^^^^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1919: FILE: drivers/scsi/atari_NCR5380.c:1289:
+			cnt = toPIO = atari_read_overruns;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1997: FILE: drivers/scsi/atari_NCR5380.c:1331:
+		if ((NCR5380_read(STATUS_REG) & (SR_SEL|SR_IO)) == (SR_SEL|SR_IO)) {
 		                                       ^

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#1997: FILE: drivers/scsi/atari_NCR5380.c:1331:
+		if ((NCR5380_read(STATUS_REG) & (SR_SEL|SR_IO)) == (SR_SEL|SR_IO)) {
 		                                                          ^

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#2040: FILE: drivers/scsi/atari_NCR5380.c:1359:
+			     !(basr & BASR_PHASE_MATCH))) {
+

ERROR:SPACING: space prohibited after that open parenthesis '('
#2042: FILE: drivers/scsi/atari_NCR5380.c:1361:
+				NCR5380_dma_complete( instance );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#2042: FILE: drivers/scsi/atari_NCR5380.c:1361:
+				NCR5380_dma_complete( instance );

CHECK:BRACES: Unbalanced braces around else statement
#2045: FILE: drivers/scsi/atari_NCR5380.c:1364:
+			} else

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#2074: FILE: drivers/scsi/atari_NCR5380.c:1369:
+					printk(KERN_NOTICE "scsi%d: unknown interrupt, "

WARNING:SPLIT_STRING: quoted string split across lines
#2075: FILE: drivers/scsi/atari_NCR5380.c:1370:
+					printk(KERN_NOTICE "scsi%d: unknown interrupt, "
+					       "BASR 0x%x, MR 0x%x, SR 0x%x\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#2083: FILE: drivers/scsi/atari_NCR5380.c:1378:
+		printk(KERN_NOTICE "scsi%d: interrupt without IRQ bit set in BASR, "

WARNING:SPLIT_STRING: quoted string split across lines
#2084: FILE: drivers/scsi/atari_NCR5380.c:1379:
+		printk(KERN_NOTICE "scsi%d: interrupt without IRQ bit set in BASR, "
+		       "BASR 0x%X, MR 0x%X, SR 0x%x\n", HOSTNO, basr,

ERROR:POINTER_LOCATION: "foo* bar" should be "foo *bar"
#2099: FILE: drivers/scsi/atari_NCR5380.c:1393:
+static void collect_stats(struct NCR5380_hostdata* hostdata, Scsi_Cmnd *cmd)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2259: FILE: drivers/scsi/atari_NCR5380.c:1486:
+		unsigned long timeout = jiffies + 2*NCR_TIMEOUT;
 		                                   ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#2276: FILE: drivers/scsi/atari_NCR5380.c:1492:
+			printk("scsi : arbitration timeout at %d\n", __LINE__);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2361: FILE: drivers/scsi/atari_NCR5380.c:1531:
+	/* after/during arbitration, BSY should be asserted.
+	   IBM DPES-31080 Version S31Q works now */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2361: FILE: drivers/scsi/atari_NCR5380.c:1531:
+	   IBM DPES-31080 Version S31Q works now */

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#2384: FILE: drivers/scsi/atari_NCR5380.c:1552:
+	udelay(15);

ERROR:SPACING: space prohibited before that close parenthesis ')'
#2414: FILE: drivers/scsi/atari_NCR5380.c:1579:
+		      ICR_ASSERT_DATA | ICR_ASSERT_ATN | ICR_ASSERT_SEL ));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2580: FILE: drivers/scsi/atari_NCR5380.c:1653:
+		printk(KERN_ERR "scsi%d: reselection after won arbitration?\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2622: FILE: drivers/scsi/atari_NCR5380.c:1676:
+			printk(KERN_ERR "scsi%d: weirdness\n", HOSTNO);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#2624: FILE: drivers/scsi/atari_NCR5380.c:1678:
+				printk(KERN_NOTICE "\trestart select\n");

CHECK:BRACES: braces {} should be used on all arms of this statement
#2705: FILE: drivers/scsi/atari_NCR5380.c:1723:
+	if (cmd->tag != TAG_NONE) {
[...]
+	} else
[...]

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2706: FILE: drivers/scsi/atari_NCR5380.c:1724:
+		tmp[1] = hostdata->last_message = SIMPLE_QUEUE_TAG;

CHECK:BRACES: Unbalanced braces around else statement
#2709: FILE: drivers/scsi/atari_NCR5380.c:1727:
+	} else

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#3134: FILE: drivers/scsi/atari_NCR5380.c:1971:
+	if ((tmp = (NCR5380_read(STATUS_REG) & PHASE_MASK)) != p) {

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

CHECK:BRACES: braces {} should be used on all arms of this statement
#3200: FILE: drivers/scsi/atari_NCR5380.c:2000:
+	if (p & SR_IO)
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#3202: FILE: drivers/scsi/atari_NCR5380.c:2002:
+	else {

CHECK:SPACING: No space is necessary after a cast
#3305: FILE: drivers/scsi/atari_NCR5380.c:2050:
+	Scsi_Cmnd *cmd = (Scsi_Cmnd *) hostdata->connected;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'phase != PHASE_MSGOUT'
#3331: FILE: drivers/scsi/atari_NCR5380.c:2062:
+			if (sink && (phase != PHASE_MSGOUT)) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#3360: FILE: drivers/scsi/atari_NCR5380.c:2078:
+				printk("scsi%d: NDEBUG_NO_DATAOUT set, attempted DATAOUT "

WARNING:SPLIT_STRING: quoted string split across lines
#3361: FILE: drivers/scsi/atari_NCR5380.c:2079:
+				printk("scsi%d: NDEBUG_NO_DATAOUT set, attempted DATAOUT "
+				       "aborted\n", HOSTNO);

WARNING:TYPO_SPELLING: 'borken' may be misspelled - perhaps 'broken'?
#3427: FILE: drivers/scsi/atari_NCR5380.c:2123:
+				if (!cmd->device->borken &&
 				                  ^^^^^^

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#3427: FILE: drivers/scsi/atari_NCR5380.c:2123:
+				if (!cmd->device->borken &&

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#3428: FILE: drivers/scsi/atari_NCR5380.c:2124:
+				    (transfersize = NCR5380_dma_xfer_len(instance,cmd,phase)) > 31) {

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3428: FILE: drivers/scsi/atari_NCR5380.c:2124:
+				    (transfersize = NCR5380_dma_xfer_len(instance,cmd,phase)) > 31) {
 				                                                 ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3428: FILE: drivers/scsi/atari_NCR5380.c:2124:
+				    (transfersize = NCR5380_dma_xfer_len(instance,cmd,phase)) > 31) {
 				                                                     ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#3432: FILE: drivers/scsi/atari_NCR5380.c:2128:
+					if (NCR5380_transfer_dma(instance, &phase,
+					    &len, (unsigned char **)&cmd->SCp.ptr)) {

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3436: FILE: drivers/scsi/atari_NCR5380.c:2132:
+						 * polled-IO. */

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#3437: FILE: drivers/scsi/atari_NCR5380.c:2133:
+						printk(KERN_NOTICE "scsi%d: switching target %d "

WARNING:SPLIT_STRING: quoted string split across lines
#3438: FILE: drivers/scsi/atari_NCR5380.c:2134:
+						printk(KERN_NOTICE "scsi%d: switching target %d "
+							   "lun %d to slow handshake\n", HOSTNO,

WARNING:TYPO_SPELLING: 'borken' may be misspelled - perhaps 'broken'?
#3440: FILE: drivers/scsi/atari_NCR5380.c:2136:
+						cmd->device->borken = 1;
 						             ^^^^^^

WARNING:LONG_LINE_COMMENT: line length of 108 exceeds 100 columns
#3447: FILE: drivers/scsi/atari_NCR5380.c:2143:
+						/* XXX - need to source or sink data here, as appropriate */

A comment starts before but extends beyond the maximum line length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

CHECK:BRACES: Unbalanced braces around else statement
#3470: FILE: drivers/scsi/atari_NCR5380.c:2156:
+				} else

CHECK:CAMELCASE: Avoid CamelCase: <Message>
#3503: FILE: drivers/scsi/atari_NCR5380.c:2167:
+				cmd->SCp.Message = tmp;

WARNING:LONG_LINE: line length of 109 exceeds 100 columns
#3556: FILE: drivers/scsi/atari_NCR5380.c:2187:
+						   "complete.\n", HOSTNO, cmd->device->id, cmd->device->lun);

WARNING:SPLIT_STRING: quoted string split across lines
#3556: FILE: drivers/scsi/atari_NCR5380.c:2187:
+					LNK_PRINTK("scsi%d: target %d lun %d linked command "
+						   "complete.\n", HOSTNO, cmd->device->id, cmd->device->lun);

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (40, 49)
#3566: FILE: drivers/scsi/atari_NCR5380.c:2197:
+					if (!cmd->next_link) {
+						 printk(KERN_NOTICE "scsi%d: target %d lun %d "

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#3567: FILE: drivers/scsi/atari_NCR5380.c:2198:
+						 printk(KERN_NOTICE "scsi%d: target %d lun %d "

WARNING:SPLIT_STRING: quoted string split across lines
#3568: FILE: drivers/scsi/atari_NCR5380.c:2199:
+						 printk(KERN_NOTICE "scsi%d: target %d lun %d "
+							"linked command complete, no next_link\n",

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3577: FILE: drivers/scsi/atari_NCR5380.c:2208:
+					 * and don't free it! */

CHECK:CAMELCASE: Avoid CamelCase: <Status>
#3579: FILE: drivers/scsi/atari_NCR5380.c:2210:
+					cmd->result = cmd->SCp.Status | (cmd->SCp.Message << 8);

WARNING:SPLIT_STRING: quoted string split across lines
#3581: FILE: drivers/scsi/atari_NCR5380.c:2212:
+					LNK_PRINTK("scsi%d: target %d lun %d linked request "
+						   "done, calling scsi_done().\n",

WARNING:LONG_LINE: line length of 108 exceeds 100 columns
#3611: FILE: drivers/scsi/atari_NCR5380.c:2229:
+						  "completed\n", HOSTNO, cmd->device->id, cmd->device->lun);

WARNING:SPLIT_STRING: quoted string split across lines
#3611: FILE: drivers/scsi/atari_NCR5380.c:2229:
+					QU_PRINTK("scsi%d: command for target %d, lun %d "
+						  "completed\n", HOSTNO, cmd->device->id, cmd->device->lun);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3640: FILE: drivers/scsi/atari_NCR5380.c:2240:
+						/* ++Andreas: the mid level code knows about
+						   QUEUE_FULL now. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3640: FILE: drivers/scsi/atari_NCR5380.c:2240:
+						   QUEUE_FULL now. */

WARNING:LONG_LINE: line length of 109 exceeds 100 columns
#3641: FILE: drivers/scsi/atari_NCR5380.c:2241:
+						TAG_ALLOC *ta = &TagAlloc[cmd->device->id][cmd->device->lun];

WARNING:LINE_SPACING: Missing a blank line after declarations
#3642: FILE: drivers/scsi/atari_NCR5380.c:2242:
+						TAG_ALLOC *ta = &TagAlloc[cmd->device->id][cmd->device->lun];
+						TAG_PRINTK("scsi%d: target %d lun %d returned "

WARNING:SPLIT_STRING: quoted string split across lines
#3643: FILE: drivers/scsi/atari_NCR5380.c:2243:
+						TAG_PRINTK("scsi%d: target %d lun %d returned "
+							   "QUEUE_FULL after %d commands\n",

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#3644: FILE: drivers/scsi/atari_NCR5380.c:2244:
+							   HOSTNO, cmd->device->id, cmd->device->lun,

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#3646: FILE: drivers/scsi/atari_NCR5380.c:2246:
+						if (ta->queue_size > ta->nr_allocated)

WARNING:PREFER_FALLTHROUGH: Prefer 'fallthrough;' over fallthrough comment
#3709: FILE: drivers/scsi/atari_NCR5380.c:2265:
+					 * case is success, where we fall through and leave the

Use the `fallthrough;` pseudo keyword instead of
`/* fallthrough */` like comments.

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#3716: FILE: drivers/scsi/atari_NCR5380.c:2272:
+						cmd->result = cmd->SCp.Status | (cmd->SCp.Message << 8);

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#3718: FILE: drivers/scsi/atari_NCR5380.c:2274:
+						cmd->result = (cmd->result & 0x00ffff) | (DID_ERROR << 16);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'cmd->cmnd[0] != REQUEST_SENSE'
#3729: FILE: drivers/scsi/atari_NCR5380.c:2277:
+					if ((cmd->cmnd[0] != REQUEST_SENSE) &&
+					    (status_byte(cmd->SCp.Status) == CHECK_CONDITION)) {

WARNING:LONG_LINE: line length of 106 exceeds 100 columns
#3731: FILE: drivers/scsi/atari_NCR5380.c:2279:
+						ASEN_PRINTK("scsi%d: performing request sense\n", HOSTNO);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3742: FILE: drivers/scsi/atari_NCR5380.c:2290:
+						/* this is initialized from initialize_SCp
+						cmd->SCp.buffer = NULL;

CHECK:SPACING: No space is necessary after a cast
#3745: FILE: drivers/scsi/atari_NCR5380.c:2293:
+						cmd->request_buffer = (char *) cmd->sense_buffer;

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3749: FILE: drivers/scsi/atari_NCR5380.c:2297:
+						LIST(cmd,hostdata->issue_queue);
 						        ^

CHECK:SPACING: No space is necessary after a cast
#3751: FILE: drivers/scsi/atari_NCR5380.c:2299:
+						hostdata->issue_queue = (Scsi_Cmnd *) cmd;

WARNING:SPLIT_STRING: quoted string split across lines
#3754: FILE: drivers/scsi/atari_NCR5380.c:2302:
+						QU_PRINTK("scsi%d: REQUEST SENSE added to head of "
+							  "issue queue\n", H_NO(cmd));

CHECK:BRACES: Unbalanced braces around else statement
#3755: FILE: drivers/scsi/atari_NCR5380.c:2303:
+					} else

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#3950: FILE: drivers/scsi/atari_NCR5380.c:2319:
+					while ((NCR5380_read(STATUS_REG) & SR_BSY) && !hostdata->connected)

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#3976: FILE: drivers/scsi/atari_NCR5380.c:2345:
+						hostdata->busy[cmd->device->id] |= (1 << cmd->device->lun);

WARNING:SPLIT_STRING: quoted string split across lines
#3979: FILE: drivers/scsi/atari_NCR5380.c:2348:
+						TAG_PRINTK("scsi%d: target %d lun %d rejected "
+							   "QUEUE_TAG message; tagged queuing "

WARNING:SPLIT_STRING: quoted string split across lines
#3980: FILE: drivers/scsi/atari_NCR5380.c:2349:
+							   "QUEUE_TAG message; tagged queuing "
+							   "disabled\n",

WARNING:LONG_LINE: line length of 102 exceeds 100 columns
#3981: FILE: drivers/scsi/atari_NCR5380.c:2350:
+							   HOSTNO, cmd->device->id, cmd->device->lun);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#3990: FILE: drivers/scsi/atari_NCR5380.c:2359:
+					LIST(cmd,hostdata->disconnected_queue);
 					        ^

WARNING:SPLIT_STRING: quoted string split across lines
#3996: FILE: drivers/scsi/atari_NCR5380.c:2365:
+					QU_PRINTK("scsi%d: command for target %d lun %d was "
+						  "moved from connected to the "

WARNING:SPLIT_STRING: quoted string split across lines
#3997: FILE: drivers/scsi/atari_NCR5380.c:2366:
+						  "moved from connected to the "
+						  "disconnected_queue\n", HOSTNO,

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#4008: FILE: drivers/scsi/atari_NCR5380.c:2377:
+					while ((NCR5380_read(STATUS_REG) & SR_BSY) && !hostdata->connected)

WARNING:LONG_LINE_COMMENT: line length of 102 exceeds 100 columns
#4012: FILE: drivers/scsi/atari_NCR5380.c:2381:
+					 * The SCSI data pointer is *IMPLICITLY* saved on a disconnect

WARNING:LONG_LINE_COMMENT: line length of 102 exceeds 100 columns
#4038: FILE: drivers/scsi/atari_NCR5380.c:2407:
+					 * Start the extended message buffer with the EXTENDED_MESSAGE

WARNING:LONG_LINE_STRING: line length of 101 exceeds 100 columns
#4063: FILE: drivers/scsi/atari_NCR5380.c:2432:
+						EXT_PRINTK("scsi%d: message received, residual %d\n",

A string starts before but extends beyond the maximum line length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#4066: FILE: drivers/scsi/atari_NCR5380.c:2435:
+						switch (extended_msg[2]) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#4074: FILE: drivers/scsi/atari_NCR5380.c:2443:
+						printk(KERN_NOTICE "scsi%d: error receiving "

WARNING:SPLIT_STRING: quoted string split across lines
#4075: FILE: drivers/scsi/atari_NCR5380.c:2444:
+						printk(KERN_NOTICE "scsi%d: error receiving "
+						       "extended message\n", HOSTNO);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#4078: FILE: drivers/scsi/atari_NCR5380.c:2447:
+						printk(KERN_NOTICE "scsi%d: extended message "

WARNING:SPLIT_STRING: quoted string split across lines
#4079: FILE: drivers/scsi/atari_NCR5380.c:2448:
+						printk(KERN_NOTICE "scsi%d: extended message "
+							   "code %02x length %d is too long\n",

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#4080: FILE: drivers/scsi/atari_NCR5380.c:2449:
+							   HOSTNO, extended_msg[2], extended_msg[1]);

WARNING:PREFER_FALLTHROUGH: Prefer 'fallthrough;' over fallthrough comment
#4083: FILE: drivers/scsi/atari_NCR5380.c:2452:
+					/* Fall through to reject message */

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#4091: FILE: drivers/scsi/atari_NCR5380.c:2460:
+						printk(KERN_DEBUG "scsi%d: rejecting message ", HOSTNO);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4091: FILE: drivers/scsi/atari_NCR5380.c:2460:
+						printk(KERN_DEBUG "scsi%d: rejecting message ", HOSTNO);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#4093: FILE: drivers/scsi/atari_NCR5380.c:2462:
+						printk("\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4095: FILE: drivers/scsi/atari_NCR5380.c:2464:
+						printk(KERN_DEBUG "scsi%d: rejecting unknown "

WARNING:SPLIT_STRING: quoted string split across lines
#4096: FILE: drivers/scsi/atari_NCR5380.c:2465:
+						printk(KERN_DEBUG "scsi%d: rejecting unknown "
+						       "message %02x from target %d, lun %d\n",

WARNING:LONG_LINE: line length of 103 exceeds 100 columns
#4097: FILE: drivers/scsi/atari_NCR5380.c:2466:
+						       HOSTNO, tmp, cmd->device->id, cmd->device->lun);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4099: FILE: drivers/scsi/atari_NCR5380.c:2468:
+						printk(KERN_DEBUG "scsi%d: rejecting unknown "

WARNING:SPLIT_STRING: quoted string split across lines
#4100: FILE: drivers/scsi/atari_NCR5380.c:2469:
+						printk(KERN_DEBUG "scsi%d: rejecting unknown "
+						       "extended message "

WARNING:SPLIT_STRING: quoted string split across lines
#4101: FILE: drivers/scsi/atari_NCR5380.c:2470:
+						       "extended message "
+						       "code %02x, length %d from target %d, lun %d\n",

CHECK:LINE_SPACING: Please don't use multiple blank lines
#4105: FILE: drivers/scsi/atari_NCR5380.c:2474:
+
+

WARNING:LONG_LINE: line length of 104 exceeds 100 columns
#4107: FILE: drivers/scsi/atari_NCR5380.c:2476:
+					NCR5380_write(INITIATOR_COMMAND_REG, ICR_BASE | ICR_ASSERT_ATN);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#4186: FILE: drivers/scsi/atari_NCR5380.c:2520:
+				printk("scsi%d: unknown phase\n", HOSTNO);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#4317: FILE: drivers/scsi/atari_NCR5380.c:2593:
+		printk(KERN_DEBUG "scsi%d: expecting IDENTIFY message, got ", HOSTNO);

WARNING:SPLIT_STRING: quoted string split across lines
#4365: FILE: drivers/scsi/atari_NCR5380.c:2615:
+		TAG_PRINTK("scsi%d: target mask %02x, lun %d sent tag %d at "
+			   "reselection\n", HOSTNO, target_mask, lun, tag);

CHECK:SPACING: No space is necessary after a cast
#4374: FILE: drivers/scsi/atari_NCR5380.c:2624:
+	for (tmp = (Scsi_Cmnd *) hostdata->disconnected_queue, prev = NULL;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'lun == tmp->device->lun'
#4376: FILE: drivers/scsi/atari_NCR5380.c:2626:
+		if ((target_mask == (1 << tmp->device->id)) && (lun == tmp->device->lun)
 #ifdef SUPPORT_TAGS
+		    && (tag == tmp->tag)
 #endif
+		    ) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'tag == tmp->tag'
#4376: FILE: drivers/scsi/atari_NCR5380.c:2626:
+		if ((target_mask == (1 << tmp->device->id)) && (lun == tmp->device->lun)
 #ifdef SUPPORT_TAGS
+		    && (tag == tmp->tag)
 #endif
+		    ) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#4379: FILE: drivers/scsi/atari_NCR5380.c:2628:
 #ifdef SUPPORT_TAGS
+		    && (tag == tmp->tag)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#4414: FILE: drivers/scsi/atari_NCR5380.c:2646:
+		printk(KERN_WARNING "scsi%d: warning: target bitmask %02x lun %d "

WARNING:LINE_SPACING: Missing a blank line after declarations
#4507: FILE: drivers/scsi/atari_NCR5380.c:2695:
+	struct Scsi_Host *instance = cmd->device->host;
+	SETUP_HOSTDATA(instance);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#4511: FILE: drivers/scsi/atari_NCR5380.c:2699:
+	printk(KERN_NOTICE "scsi%d: aborting command\n", HOSTNO);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4519: FILE: drivers/scsi/atari_NCR5380.c:2707:
+		printk(KERN_ERR "scsi%d: !!BINGO!! Falcon has no lock in NCR5380_abort\n",

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'NCR5380_abort', this function's name, in a string
#4519: FILE: drivers/scsi/atari_NCR5380.c:2707:
+		printk(KERN_ERR "scsi%d: !!BINGO!! Falcon has no lock in NCR5380_abort\n",

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#4593: FILE: drivers/scsi/atari_NCR5380.c:2754:
+			return SCSI_ABORT_SUCCESS;
+		} else {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#4595: FILE: drivers/scsi/atari_NCR5380.c:2756:
+			printk("scsi%d: abort of connected command failed!\n", HOSTNO);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around hostdata->issue_queue
#4706: FILE: drivers/scsi/atari_NCR5380.c:2766:
+	for (prev = (Scsi_Cmnd **)&(hostdata->issue_queue),

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#4718: FILE: drivers/scsi/atari_NCR5380.c:2778:
+			 * yet... */

CHECK:SPACING: No space is necessary after a cast
#4767: FILE: drivers/scsi/atari_NCR5380.c:2827:
+	for (tmp = (Scsi_Cmnd *) hostdata->disconnected_queue; tmp;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around hostdata->disconnected_queue
#4781: FILE: drivers/scsi/atari_NCR5380.c:2841:
+			for (prev = (Scsi_Cmnd **)&(hostdata->disconnected_queue),

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#4836: FILE: drivers/scsi/atari_NCR5380.c:2878:
+	printk(KERN_INFO "scsi%d: warning : SCSI command probably completed successfully\n"

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#4918: FILE: drivers/scsi/atari_NCR5380.c:2910:
+		printk(KERN_ERR "scsi%d: !!BINGO!! Falcon has no lock in NCR5380_reset\n",

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#4928: FILE: drivers/scsi/atari_NCR5380.c:2920:
+	udelay(40);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#4935: FILE: drivers/scsi/atari_NCR5380.c:2927:
+	 * through anymore ... */

WARNING:IF_1: Consider removing the #if 1 and its #endif
#4938: FILE: drivers/scsi/atari_NCR5380.c:2930:
+#if 1	/* XXX Should now be done by midlevel code, but it's broken XXX */

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#5004: FILE: drivers/scsi/atari_NCR5380.c:2960:
+	if ((cmd = connected)) {

WARNING:TYPO_SPELLING: 'resetted' may be misspelled - perhaps 'reset'?
#5047: FILE: drivers/scsi/atari_NCR5380.c:3002:
+	 * Conclusion: either scsi.c disables timeout for all resetted commands
 	                                                      ^^^^^^^^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#5254: FILE: drivers/scsi/atari_scsi.c:298:
+			printk("SCSI DMA bus error -- bad DMA programming!\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#5262: FILE: drivers/scsi/atari_scsi.c:305:
+		printk("SCSI DMA intr ?? -- this shouldn't happen!\n");

WARNING:LONG_LINE: line length of 105 exceeds 100 columns
#5290: FILE: drivers/scsi/atari_scsi.c:344:
+		atari_dma_residual = HOSTDATA_DMALEN - (SCSI_DMA_READ_P(dma_addr) - atari_dma_startaddr);

CHECK:BRACES: Unbalanced braces around else statement
#5383: FILE: drivers/scsi/atari_scsi.c:446:
+	} else

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#5511: FILE: drivers/scsi/atari_scsi.c:653:
+			printk(KERN_ERR "atari_scsi_detect: can't allocate ST-RAM "

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'atari_scsi_detect', this function's name, in a string
#5511: FILE: drivers/scsi/atari_scsi.c:653:
+			printk(KERN_ERR "atari_scsi_detect: can't allocate ST-RAM "

WARNING:SPLIT_STRING: quoted string split across lines
#5512: FILE: drivers/scsi/atari_scsi.c:654:
+			printk(KERN_ERR "atari_scsi_detect: can't allocate ST-RAM "
+					"double buffer\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!instance"
#5524: FILE: drivers/scsi/atari_scsi.c:662:
+	if (instance == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#5572: FILE: drivers/scsi/atari_scsi.c:755:
+	printk("\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#5598: FILE: drivers/scsi/atari_scsi.c:779:
+		printk("atari_scsi_setup: no arguments!\n");

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'atari_scsi_setup', this function's name, in a string
#5598: FILE: drivers/scsi/atari_scsi.c:779:
+		printk("atari_scsi_setup: no arguments!\n");

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#5607: FILE: drivers/scsi/atari_scsi.c:805:
+			printk("atari_scsi_setup: invalid host ID %d !\n", ints[4]);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'atari_scsi_setup', this function's name, in a string
#5607: FILE: drivers/scsi/atari_scsi.c:805:
+			printk("atari_scsi_setup: invalid host ID %d !\n", ints[4]);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#5657: FILE: drivers/scsi/atari_scsi.c:854:
 
+

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#5670: FILE: drivers/scsi/atari_scsi.c:865:
+	printk("Atari SCSI: resetting the SCSI bus...");

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#5683: FILE: drivers/scsi/atari_scsi.c:874:
+	udelay(50);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#5695: FILE: drivers/scsi/atari_scsi.c:883:
+	printk(" done\n");

CHECK:BRACES: Unbalanced braces around else statement
#5815: FILE: drivers/scsi/atari_scsi.c:992:
+	} else

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000437461.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 24 errors, 157 warnings, 68 checks, 5819 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000437461.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
