CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#71: FILE: fs/ecryptfs/crypto.c:1742:
+	if ((crypt_stat && (crypt_stat->flags & ECRYPTFS_ENCFN_USE_MOUNT_FNEK))
+	    || (mount_crypt_stat && (mount_crypt_stat->flags

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#76: FILE: fs/ecryptfs/crypto.c:1747:
+		rc = ecryptfs_write_tag_70_packet(

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#82: FILE: fs/ecryptfs/crypto.c:1753:
+			printk(KERN_ERR "%s: Error attempting to get packet "

WARNING:SPLIT_STRING: quoted string split across lines
#83: FILE: fs/ecryptfs/crypto.c:1754:
+			printk(KERN_ERR "%s: Error attempting to get packet "
+			       "size for tag 72; rc = [%d]\n", __func__,

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#91: FILE: fs/ecryptfs/crypto.c:1762:
+			printk(KERN_ERR "%s: Out of memory whilst attempting "

WARNING:SPLIT_STRING: quoted string split across lines
#92: FILE: fs/ecryptfs/crypto.c:1763:
+			printk(KERN_ERR "%s: Out of memory whilst attempting "
+			       "to kmalloc [%Zd] bytes\n", __func__,

WARNING:PRINTF_Z: %Zd is non-standard C, use %zd
#92: FILE: fs/ecryptfs/crypto.c:1763:
+			       "to kmalloc [%Zd] bytes\n", __func__,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#105: FILE: fs/ecryptfs/crypto.c:1776:
+			printk(KERN_ERR "%s: Error attempting to generate "

WARNING:SPLIT_STRING: quoted string split across lines
#106: FILE: fs/ecryptfs/crypto.c:1777:
+			printk(KERN_ERR "%s: Error attempting to generate "
+			       "tag 70 packet; rc = [%d]\n", __func__,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#115: FILE: fs/ecryptfs/crypto.c:1786:
+		printk(KERN_ERR "%s: No support for requested filename "

WARNING:SPLIT_STRING: quoted string split across lines
#116: FILE: fs/ecryptfs/crypto.c:1787:
+		printk(KERN_ERR "%s: No support for requested filename "
+		       "encryption method in this release\n", __func__);

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#117: FILE: fs/ecryptfs/crypto.c:1788:
+		rc = -ENOTSUPP;

ENOTSUPP is not a standard error code and should be avoided in new patches.
EOPNOTSUPP should be used instead.

See: https://lore.kernel.org/netdev/20200510182252.GA411829@lunn.ch/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#138: FILE: fs/ecryptfs/crypto.c:1809:
+						 * messages */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:SPLIT_STRING: quoted string split across lines
#155: FILE: fs/ecryptfs/crypto.c:2009:
+static unsigned char *portable_filename_chars = ("-.0123456789ABCD"
+						 "EFGHIJKLMNOPQRST"

WARNING:MISSING_SPACE: break quoted strings at a space character
#155: FILE: fs/ecryptfs/crypto.c:2009:
+static unsigned char *portable_filename_chars = ("-.0123456789ABCD"
+						 "EFGHIJKLMNOPQRST"

WARNING:SPLIT_STRING: quoted string split across lines
#156: FILE: fs/ecryptfs/crypto.c:2010:
+						 "EFGHIJKLMNOPQRST"
+						 "UVWXYZabcdefghij"

WARNING:MISSING_SPACE: break quoted strings at a space character
#156: FILE: fs/ecryptfs/crypto.c:2010:
+						 "EFGHIJKLMNOPQRST"
+						 "UVWXYZabcdefghij"

WARNING:SPLIT_STRING: quoted string split across lines
#157: FILE: fs/ecryptfs/crypto.c:2011:
+						 "UVWXYZabcdefghij"
+						 "klmnopqrstuvwxyz");

WARNING:MISSING_SPACE: break quoted strings at a space character
#157: FILE: fs/ecryptfs/crypto.c:2011:
+						 "UVWXYZabcdefghij"
+						 "klmnopqrstuvwxyz");

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#160: FILE: fs/ecryptfs/crypto.c:2014:
+ * at the front here */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dst"
#250: FILE: fs/ecryptfs/crypto.c:2104:
+	if (dst == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:TYPO_SPELLING: 'encypted' may be misspelled - perhaps 'encrypted'?
#293: FILE: fs/ecryptfs/crypto.c:2147:
+ * @encoded_name: The encypted name
                       ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#303: FILE: fs/ecryptfs/crypto.c:2157:
+int ecryptfs_encrypt_and_encode_filename(

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#316: FILE: fs/ecryptfs/crypto.c:2170:
+	if ((crypt_stat && (crypt_stat->flags & ECRYPTFS_ENCRYPT_FILENAMES))
+	    || (mount_crypt_stat && (mount_crypt_stat->flags

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#322: FILE: fs/ecryptfs/crypto.c:2176:
+			printk(KERN_ERR "%s: Out of memory whilst attempting "

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#322: FILE: fs/ecryptfs/crypto.c:2176:
+		if (!filename) {
+			printk(KERN_ERR "%s: Out of memory whilst attempting "

WARNING:SPLIT_STRING: quoted string split across lines
#323: FILE: fs/ecryptfs/crypto.c:2177:
+			printk(KERN_ERR "%s: Out of memory whilst attempting "
+			       "to kzalloc [%d] bytes\n", __func__,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#333: FILE: fs/ecryptfs/crypto.c:2187:
+			printk(KERN_ERR "%s: Error attempting to encrypt "

WARNING:SPLIT_STRING: quoted string split across lines
#334: FILE: fs/ecryptfs/crypto.c:2188:
+			printk(KERN_ERR "%s: Error attempting to encrypt "
+			       "filename; rc = [%d]\n", __func__, rc);

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#338: FILE: fs/ecryptfs/crypto.c:2192:
+		ecryptfs_encode_for_filename(

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#344: FILE: fs/ecryptfs/crypto.c:2198:
+				    & ECRYPTFS_ENCFN_USE_MOUNT_FNEK))
+		    || (mount_crypt_stat

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#345: FILE: fs/ecryptfs/crypto.c:2199:
+		    || (mount_crypt_stat
+			&& (mount_crypt_stat->flags

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#356: FILE: fs/ecryptfs/crypto.c:2210:
+			printk(KERN_ERR "%s: Out of memory whilst attempting "

WARNING:SPLIT_STRING: quoted string split across lines
#357: FILE: fs/ecryptfs/crypto.c:2211:
+			printk(KERN_ERR "%s: Out of memory whilst attempting "
+			       "to kzalloc [%d] bytes\n", __func__,

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#366: FILE: fs/ecryptfs/crypto.c:2220:
+				    & ECRYPTFS_ENCFN_USE_MOUNT_FNEK))
+		    || (mount_crypt_stat

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#367: FILE: fs/ecryptfs/crypto.c:2221:
+		    || (mount_crypt_stat
+			&& (mount_crypt_stat->flags

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#372: FILE: fs/ecryptfs/crypto.c:2226:
+			ecryptfs_encode_for_filename(

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#384: FILE: fs/ecryptfs/crypto.c:2238:
+			rc = -ENOTSUPP;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#387: FILE: fs/ecryptfs/crypto.c:2241:
+			printk(KERN_ERR "%s: Error attempting to encode "

WARNING:SPLIT_STRING: quoted string split across lines
#388: FILE: fs/ecryptfs/crypto.c:2242:
+			printk(KERN_ERR "%s: Error attempting to encode "
+			       "encrypted filename; rc = [%d]\n", __func__,

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'name_size > ECRYPTFS_FNEK_ENCRYPTED_FILENAME_PREFIX_SIZE'
#427: FILE: fs/ecryptfs/crypto.c:2281:
+	if ((name_size > ECRYPTFS_FNEK_ENCRYPTED_FILENAME_PREFIX_SIZE)
+	    && (strncmp(name, ECRYPTFS_FNEK_ENCRYPTED_FILENAME_PREFIX,
+			ECRYPTFS_FNEK_ENCRYPTED_FILENAME_PREFIX_SIZE) == 0)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#428: FILE: fs/ecryptfs/crypto.c:2282:
+	if ((name_size > ECRYPTFS_FNEK_ENCRYPTED_FILENAME_PREFIX_SIZE)
+	    && (strncmp(name, ECRYPTFS_FNEK_ENCRYPTED_FILENAME_PREFIX,

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#431: FILE: fs/ecryptfs/crypto.c:2285:
+			&ecryptfs_superblock_to_private(

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#441: FILE: fs/ecryptfs/crypto.c:2295:
+			printk(KERN_ERR "%s: Error attempting to decode "

WARNING:SPLIT_STRING: quoted string split across lines
#442: FILE: fs/ecryptfs/crypto.c:2296:
+			printk(KERN_ERR "%s: Error attempting to decode "
+			       "filename; rc = [%d]\n", __func__, rc);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#450: FILE: fs/ecryptfs/crypto.c:2304:
+			printk(KERN_ERR "%s: Out of memory whilst attempting "

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#450: FILE: fs/ecryptfs/crypto.c:2304:
+		if (!decoded_name) {
+			printk(KERN_ERR "%s: Out of memory whilst attempting "

WARNING:SPLIT_STRING: quoted string split across lines
#451: FILE: fs/ecryptfs/crypto.c:2305:
+			printk(KERN_ERR "%s: Out of memory whilst attempting "
+			       "to kmalloc [%Zd] bytes\n", __func__,

WARNING:PRINTF_Z: %Zd is non-standard C, use %zd
#451: FILE: fs/ecryptfs/crypto.c:2305:
+			       "to kmalloc [%Zd] bytes\n", __func__,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#460: FILE: fs/ecryptfs/crypto.c:2314:
+			printk(KERN_ERR "%s: Error attempting to decode "

WARNING:SPLIT_STRING: quoted string split across lines
#461: FILE: fs/ecryptfs/crypto.c:2315:
+			printk(KERN_ERR "%s: Error attempting to decode "
+			       "filename; rc = [%d]\n", __func__, rc);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#474: FILE: fs/ecryptfs/crypto.c:2328:
+			printk(KERN_INFO "%s: Could not parse tag 70 packet "

WARNING:SPLIT_STRING: quoted string split across lines
#475: FILE: fs/ecryptfs/crypto.c:2329:
+			printk(KERN_INFO "%s: Could not parse tag 70 packet "
+			       "from filename; copying through filename "

WARNING:SPLIT_STRING: quoted string split across lines
#476: FILE: fs/ecryptfs/crypto.c:2330:
+			       "from filename; copying through filename "
+			       "as-is\n", __func__);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000208307.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 40 warnings, 14 checks, 442 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000208307.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
