WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#31: 
- remove the "!= NULL" chuck from the pointer validity tests since the short

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#361: FILE: drivers/ide/ide-tape.c:529:
+static int idetape_chrdev_release(struct inode *inode, struct file *filp);
                                                                     ^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#377: FILE: drivers/ide/ide-tape.c:543:
+static void idetape_input_buffers(ide_drive_t *drive, idetape_pc_t *pc,
+		uint bcount)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#386: FILE: drivers/ide/ide-tape.c:550:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#387: FILE: drivers/ide/ide-tape.c:551:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#394: FILE: drivers/ide/ide-tape.c:556:
+		count = min((uint)(bh->b_size - atomic_read(&bh->b_count)),
+				bcount);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#396: FILE: drivers/ide/ide-tape.c:558:
+		HWIF(drive)->atapi_input_bytes(drive,
+				bh->b_data + atomic_read(&bh->b_count), count);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#406: FILE: drivers/ide/ide-tape.c:571:
+static void idetape_output_buffers(ide_drive_t *drive, idetape_pc_t *pc,
+		uint bcount)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#415: FILE: drivers/ide/ide-tape.c:578:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#416: FILE: drivers/ide/ide-tape.c:579:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#447: FILE: drivers/ide/ide-tape.c:608:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#448: FILE: drivers/ide/ide-tape.c:609:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#530: FILE: drivers/ide/ide-tape.c:797:
+			printk(KERN_ERR

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#534: FILE: drivers/ide/ide-tape.c:800:
+			printk(KERN_ERR

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#557: FILE: drivers/ide/ide-tape.c:847:
+	case 0:	error = IDETAPE_ERROR_GENERAL; break;

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#558: FILE: drivers/ide/ide-tape.c:848:
+	case 1: error = 0; break;

WARNING:TYPO_SPELLING: 'uptodate' may be misspelled - perhaps 'up-to-date'?
#559: FILE: drivers/ide/ide-tape.c:849:
+	default: error = uptodate;
 	                 ^^^^^^^^

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#559: FILE: drivers/ide/ide-tape.c:849:
+	default: error = uptodate;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#571: FILE: drivers/ide/ide-tape.c:875:
+					idetape_abort_pipeline(drive,
+							active_stage);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#604: FILE: drivers/ide/ide-tape.c:930:
+		printk(KERN_ERR "ide-tape: Error in REQUEST SENSE itself"

WARNING:SPLIT_STRING: quoted string split across lines
#605: FILE: drivers/ide/ide-tape.c:931:
+		printk(KERN_ERR "ide-tape: Error in REQUEST SENSE itself"
+				" - Aborting request!\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#649: FILE: drivers/ide/ide-tape.c:968:
+static void idetape_queue_pc_head(ide_drive_t *drive, idetape_pc_t *pc,
+		struct request *rq)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#756: FILE: drivers/ide/ide-tape.c:1244:
+		printk(KERN_ERR "ide-tape: Strange, packet command initiated"

WARNING:SPLIT_STRING: quoted string split across lines
#757: FILE: drivers/ide/ide-tape.c:1245:
+		printk(KERN_ERR "ide-tape: Strange, packet command initiated"
+				" yet DRQ isn't asserted\n");

WARNING:SPLIT_STRING: quoted string split across lines
#766: FILE: drivers/ide/ide-tape.c:1288:
 		printk(KERN_ERR "ide-tape: possible ide-tape.c bug - "
+			"two request sense in serial were issued\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#861: FILE: drivers/ide/ide-tape.c:1508:
+static void idetape_create_read_cmd(idetape_tape_t *tape, idetape_pc_t *pc,
+		uint len, struct idetape_bh *bh)

CHECK:SPACING: No space is necessary after a cast
#866: FILE: drivers/ide/ide-tape.c:1512:
+	put_unaligned(cpu_to_be32(len), (uint *) &pc->c[1]);

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#882: FILE: drivers/ide/ide-tape.c:1525:
+static void idetape_create_read_buffer_cmd(idetape_tape_t *tape,
+		idetape_pc_t *pc, struct idetape_bh *bh)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#897: FILE: drivers/ide/ide-tape.c:1548:
+static void idetape_create_write_cmd(idetape_tape_t *tape, idetape_pc_t *pc,
+		uint len, struct idetape_bh *bh)

CHECK:SPACING: No space is necessary after a cast
#902: FILE: drivers/ide/ide-tape.c:1552:
+	put_unaligned(cpu_to_be32(len), (uint *) &pc->c[1]);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#970: FILE: drivers/ide/ide-tape.c:1669:
+		idetape_create_read_buffer_cmd(tape, pc,
 				(struct idetape_bh *)rq->special);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1010: FILE: drivers/ide/ide-tape.c:1714:
+static idetape_stage_t *__idetape_kmalloc_stage(idetape_tape_t *tape, int full,
+		int clear)

CHECK:SPACING: No space is necessary after a cast
#1029: FILE: drivers/ide/ide-tape.c:1731:
+	bh->b_data = (char *) __get_free_page(GFP_KERNEL);

CHECK:SPACING: No space is necessary after a cast
#1040: FILE: drivers/ide/ide-tape.c:1741:
+		b_data = (char *) __get_free_page(GFP_KERNEL);

WARNING:TABSTOP: Statements should start on a tabstop
#1041: FILE: drivers/ide/ide-tape.c:1742:
+		 if (!b_data)

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*bh)...) over kmalloc(sizeof(struct idetape_bh)...)
#1053: FILE: drivers/ide/ide-tape.c:1761:
+		bh = kmalloc(sizeof(struct idetape_bh), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:SPACING: No space is necessary after a cast
#1055: FILE: drivers/ide/ide-tape.c:1763:
+			free_page((ulong) b_data);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1082: FILE: drivers/ide/ide-tape.c:1797:
+static int idetape_copy_stage_from_user(idetape_tape_t *tape,
+		idetape_stage_t *stage, const char __user *buf, int n)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1092: FILE: drivers/ide/ide-tape.c:1805:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1093: FILE: drivers/ide/ide-tape.c:1806:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1099: FILE: drivers/ide/ide-tape.c:1810:
+		count = min((uint)(bh->b_size - atomic_read(&bh->b_count)),
+				(uint)n);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1101: FILE: drivers/ide/ide-tape.c:1812:
+		if (copy_from_user(bh->b_data + atomic_read(&bh->b_count), buf,
+				count))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1113: FILE: drivers/ide/ide-tape.c:1829:
+static int idetape_copy_stage_to_user(idetape_tape_t *tape, char __user *buf,
+		idetape_stage_t *stage, int n)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1123: FILE: drivers/ide/ide-tape.c:1837:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1124: FILE: drivers/ide/ide-tape.c:1838:
+			printk(KERN_ERR "ide-tape: bh == NULL in %s\n",
+					__func__);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1209: FILE: drivers/ide/ide-tape.c:1917:
+		printk(KERN_ERR "ide-tape: bug: Trying to sleep on non-valid"

WARNING:SPLIT_STRING: quoted string split across lines
#1210: FILE: drivers/ide/ide-tape.c:1918:
+		printk(KERN_ERR "ide-tape: bug: Trying to sleep on non-valid"
+				" request\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1229: FILE: drivers/ide/ide-tape.c:1970:
+static void idetape_create_write_filemark_cmd(ide_drive_t *drive,
+		idetape_pc_t *pc, int write_filemark)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1280: FILE: drivers/ide/ide-tape.c:2017:
+static void idetape_create_load_unload_cmd(ide_drive_t *drive, idetape_pc_t *pc,
+		int cmd)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1307: FILE: drivers/ide/ide-tape.c:2040:
 		if ((tape->sense_key == 2 && tape->asc == 4 && tape->ascq == 2)
+		    || (tape->asc == 0x3A)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1313: FILE: drivers/ide/ide-tape.c:2045:
+			idetape_create_load_unload_cmd(drive, &pc,
+					IDETAPE_LU_LOAD_MASK);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1362: FILE: drivers/ide/ide-tape.c:2099:
+static void idetape_create_locate_cmd(ide_drive_t *drive, idetape_pc_t *pc,
+		uint block, u8 partition, int skip)

CHECK:SPACING: No space is necessary after a cast
#1368: FILE: drivers/ide/ide-tape.c:2104:
+	put_unaligned(cpu_to_be32(block), (uint *) &pc->c[3]);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1376: FILE: drivers/ide/ide-tape.c:2111:
+static int idetape_create_prevent_cmd(ide_drive_t *drive, idetape_pc_t *pc,
+		int prevent)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1434: FILE: drivers/ide/ide-tape.c:2183:
+static int idetape_position_tape(ide_drive_t *drive, uint block, u8 partition,
+		int skip)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1456: FILE: drivers/ide/ide-tape.c:2212:
+			printk(KERN_INFO "ide-tape: %s: position_tape failed in"

WARNING:SPLIT_STRING: quoted string split across lines
#1457: FILE: drivers/ide/ide-tape.c:2213:
+			printk(KERN_INFO "ide-tape: %s: position_tape failed in"
+					" %s\n", tape->name, __func__);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1471: FILE: drivers/ide/ide-tape.c:2224:
+static int idetape_queue_rw_tail(ide_drive_t *drive, int cmd, int blocks,
+		struct idetape_bh *bh)

CHECK:SPACING: No space is necessary after a cast
#1536: FILE: drivers/ide/ide-tape.c:2299:
+	put_unaligned(cpu_to_be32(count), (uint *) &pc->c[1]);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1654: FILE: drivers/ide/ide-tape.c:2422:
+		printk(KERN_ERR "ide-tape: bug: Trying to empty write pipeline,"

WARNING:SPLIT_STRING: quoted string split across lines
#1655: FILE: drivers/ide/ide-tape.c:2423:
+		printk(KERN_ERR "ide-tape: bug: Trying to empty write pipeline,"
+				" but we are not writing.\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1672: FILE: drivers/ide/ide-tape.c:2445:
+					printk(KERN_INFO "ide-tape: bug,"

WARNING:SPLIT_STRING: quoted string split across lines
#1673: FILE: drivers/ide/ide-tape.c:2446:
+					printk(KERN_INFO "ide-tape: bug,"
+							" bh NULL\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1681: FILE: drivers/ide/ide-tape.c:2452:
+				memset(bh->b_data + atomic_read(&bh->b_count),
+						0, min);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1714: FILE: drivers/ide/ide-tape.c:2477:
+	if (tape->first_stage || tape->next_stage || tape->last_stage ||
+			tape->nr_stages) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1715: FILE: drivers/ide/ide-tape.c:2478:
+		printk(KERN_ERR "ide-tape: ide-tape pipeline bug,"

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1745: FILE: drivers/ide/ide-tape.c:2517:
+			printk(KERN_ERR "ide-tape: merge_stage_sz should be"

WARNING:SPLIT_STRING: quoted string split across lines
#1746: FILE: drivers/ide/ide-tape.c:2518:
+			printk(KERN_ERR "ide-tape: merge_stage_sz should be"
+					" 0 now\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1770: FILE: drivers/ide/ide-tape.c:2535:
+			bytes_read = idetape_queue_rw_tail(drive,
+				REQ_IDETAPE_READ, 0, tape->merge_stage->bh);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1844: FILE: drivers/ide/ide-tape.c:2620:
+		printk(KERN_ERR "ide-tape: bug: trying to return more bytes"

WARNING:SPLIT_STRING: quoted string split across lines
#1845: FILE: drivers/ide/ide-tape.c:2621:
+		printk(KERN_ERR "ide-tape: bug: trying to return more bytes"
+				" than requested\n");

WARNING:MINMAX: min() should probably be min_t(uint, count, bh->b_size)
#1869: FILE: drivers/ide/ide-tape.c:2641:
+			atomic_set(&bh->b_count, min(count, (uint)bh->b_size));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1876: FILE: drivers/ide/ide-tape.c:2647:
+		idetape_queue_rw_tail(drive, REQ_IDETAPE_WRITE, blocks,
+				tape->merge_stage->bh);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1950: FILE: drivers/ide/ide-tape.c:2719:
+		if (copy_from_user(&config, argp,
+					sizeof(struct idetape_config)))

CHECK:SPACING: No space is necessary after a cast
#1956: FILE: drivers/ide/ide-tape.c:2725:
+		config.dsc_rw_frequency = (int) tape->best_dsc_rw_freq;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1959: FILE: drivers/ide/ide-tape.c:2728:
+		if (copy_to_user(argp, &config,
+					sizeof(struct idetape_config)))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1985: FILE: drivers/ide/ide-tape.c:2747:
+static int idetape_space_over_filemarks(ide_drive_t *drive, short mt_op,
+		int mt_count)

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#2066: FILE: drivers/ide/ide-tape.c:2805:
+		idetape_create_space_cmd(&pc, mt_count-count,
 		                                      ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2067: FILE: drivers/ide/ide-tape.c:2806:
+		idetape_create_space_cmd(&pc, mt_count-count,
+				IDETAPE_SPACE_OVER_FILEMARK);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2068: FILE: drivers/ide/ide-tape.c:2807:
+		return (idetape_queue_pc_tail(drive, &pc));

return is not a function and as such doesn't need parentheses::

  return (bar);

can simply be::

  return bar;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2074: FILE: drivers/ide/ide-tape.c:2813:
+		retval = idetape_space_over_filemarks(drive, MTFSF,
+				mt_count-count);

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#2074: FILE: drivers/ide/ide-tape.c:2813:
+				mt_count-count);
 				        ^

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#2077: FILE: drivers/ide/ide-tape.c:2816:
+		count = (MTBSFM == mt_op ? 1 : -1);

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2078: FILE: drivers/ide/ide-tape.c:2817:
+		return (idetape_space_over_filemarks(drive, MTFSF, count));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2080: FILE: drivers/ide/ide-tape.c:2819:
+		printk(KERN_ERR "ide-tape: MTIO operation %d not"

WARNING:SPLIT_STRING: quoted string split across lines
#2081: FILE: drivers/ide/ide-tape.c:2820:
+		printk(KERN_ERR "ide-tape: MTIO operation %d not"
+				" supported\n", mt_op);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2117: FILE: drivers/ide/ide-tape.c:2841:
+static ssize_t idetape_chrdev_read(struct file *file, char __user *buf,
 				    size_t count, loff_t *ppos)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2132: FILE: drivers/ide/ide-tape.c:2865:
+		if (idetape_copy_stage_to_user(tape, buf, tape->merge_stage,
+					actually_read))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2145: FILE: drivers/ide/ide-tape.c:2876:
+		if (idetape_copy_stage_to_user(tape, buf, tape->merge_stage,
+					bytes_read))

WARNING:MINMAX: min() should probably be min_t(ulong, count, bytes_read)
#2155: FILE: drivers/ide/ide-tape.c:2886:
+		temp = min((ulong)count, (ulong)bytes_read);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2157: FILE: drivers/ide/ide-tape.c:2888:
+		if (idetape_copy_stage_to_user(tape, buf, tape->merge_stage,
+						temp))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2167: FILE: drivers/ide/ide-tape.c:2905:
+static ssize_t idetape_chrdev_write(struct file *file, const char __user *buf,
 				     size_t count, loff_t *ppos)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2207: FILE: drivers/ide/ide-tape.c:2958:
+			printk(KERN_ERR "ide-tape: bug: merge buf too big\n");

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 32)
#2214: FILE: drivers/ide/ide-tape.c:2963:
+		if (idetape_copy_stage_from_user(tape, tape->merge_stage, buf,
[...]
 				ret = -EFAULT;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2215: FILE: drivers/ide/ide-tape.c:2964:
+		if (idetape_copy_stage_from_user(tape, tape->merge_stage, buf,
+						actually_written))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2235: FILE: drivers/ide/ide-tape.c:2981:
+		if (idetape_copy_stage_from_user(tape, tape->merge_stage, buf,
+						tape->stage_sz))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2251: FILE: drivers/ide/ide-tape.c:2993:
+		if (idetape_copy_stage_from_user(tape, tape->merge_stage, buf,
+						count))

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2293: FILE: drivers/ide/ide-tape.c:3044:
+		return (idetape_space_over_filemarks(drive, mt_op, mt_count));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2329: FILE: drivers/ide/ide-tape.c:3067:
+		idetape_create_load_unload_cmd(drive, &pc,
+				IDETAPE_LU_LOAD_MASK);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2330: FILE: drivers/ide/ide-tape.c:3068:
+		return (idetape_queue_pc_tail(drive, &pc));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2344: FILE: drivers/ide/ide-tape.c:3082:
+		idetape_create_load_unload_cmd(drive, &pc,
+				!IDETAPE_LU_LOAD_MASK);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2351: FILE: drivers/ide/ide-tape.c:3089:
+		return (idetape_flush_tape_buffers(drive));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2355: FILE: drivers/ide/ide-tape.c:3093:
+		idetape_create_load_unload_cmd(drive, &pc,
+			IDETAPE_LU_RETENSION_MASK | IDETAPE_LU_LOAD_MASK);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2356: FILE: drivers/ide/ide-tape.c:3094:
+		return (idetape_queue_pc_tail(drive, &pc));

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2359: FILE: drivers/ide/ide-tape.c:3097:
+		return (idetape_queue_pc_tail(drive, &pc));

CHECK:SPACING: No space is necessary after a cast
#2361: FILE: drivers/ide/ide-tape.c:3099:
+		(void) idetape_rewind_tape(drive);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2363: FILE: drivers/ide/ide-tape.c:3101:
+		return (idetape_queue_pc_tail(drive, &pc));

CHECK:BRACES: braces {} should be used on all arms of this statement
#2365: FILE: drivers/ide/ide-tape.c:3103:
+		if (mt_count) {
[...]
+		} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2367: FILE: drivers/ide/ide-tape.c:3105:
+			if (mt_count < tape->blk_sz ||
+					mt_count % tape->blk_sz)

CHECK:BRACES: Unbalanced braces around else statement
#2371: FILE: drivers/ide/ide-tape.c:3109:
+		} else

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#2380: FILE: drivers/ide/ide-tape.c:3118:
+		return (idetape_position_tape(drive, 0, mt_count, 0));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2469: FILE: drivers/ide/ide-tape.c:3138:
+		printk(KERN_ERR "ide-tape: MTIO operation %d not "

WARNING:SPLIT_STRING: quoted string split across lines
#2470: FILE: drivers/ide/ide-tape.c:3139:
+		printk(KERN_ERR "ide-tape: MTIO operation %d not "
+			"supported\n", mt_op);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2515: FILE: drivers/ide/ide-tape.c:3179:
+		return (idetape_mtioctop(drive, mtop.mt_op,
+					mtop.mt_count));

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#2561: FILE: drivers/ide/ide-tape.c:3234:
+static int idetape_chrdev_open(struct inode *inode, struct file *filp)
                                                                  ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#2610: FILE: drivers/ide/ide-tape.c:3337:
+static int idetape_chrdev_release(struct inode *inode, struct file *filp)
                                                                     ^^^^

CHECK:BRACES: braces {} should be used on all arms of this statement
#2652: FILE: drivers/ide/ide-tape.c:3394:
+	if (gcw.protocol != 2)
[...]
 	else if (gcw.device_type != 1)
[...]
+				gcw.device_type);
[...]
 		printk(KERN_ERR "ide-tape: The removable flag is not set\n");
[...]
-			printk(KERN_ERR "ide-tape: Sorry, padding to 16 bytes is still not supported\n");
[...]

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2653: FILE: drivers/ide/ide-tape.c:3395:
+		printk(KERN_ERR "ide-tape: Protocol %d is not ATAPI\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2654: FILE: drivers/ide/ide-tape.c:3396:
+		printk(KERN_ERR "ide-tape: Protocol %d is not ATAPI\n",
+				gcw.protocol);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2657: FILE: drivers/ide/ide-tape.c:3398:
+		printk(KERN_ERR "ide-tape: Device type %d is not set to tape\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2658: FILE: drivers/ide/ide-tape.c:3399:
+		printk(KERN_ERR "ide-tape: Device type %d is not set to tape\n",
+				gcw.device_type);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2663: FILE: drivers/ide/ide-tape.c:3403:
+		printk(KERN_ERR "ide-tape: Packet size of %d is not 12 bytes"

WARNING:SPLIT_STRING: quoted string split across lines
#2664: FILE: drivers/ide/ide-tape.c:3404:
+		printk(KERN_ERR "ide-tape: Packet size of %d is not 12 bytes"
+				" long\n", gcw.packet_size);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2667: FILE: drivers/ide/ide-tape.c:3406:
+			printk(KERN_ERR "ide-tape: Sorry, padding to 16 bytes"

WARNING:SPLIT_STRING: quoted string split across lines
#2668: FILE: drivers/ide/ide-tape.c:3407:
+			printk(KERN_ERR "ide-tape: Sorry, padding to 16 bytes"
+					" is still not supported\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2884: FILE: drivers/ide/ide-tape.c:3774:
+		printk(KERN_ERR "ide-tape: %s: not supported by this version of"

WARNING:SPLIT_STRING: quoted string split across lines
#2885: FILE: drivers/ide/ide-tape.c:3775:
+		printk(KERN_ERR "ide-tape: %s: not supported by this version of"
+				" the driver\n", drive->name);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#2890: FILE: drivers/ide/ide-tape.c:3779:
+		printk("ide-tape: passing drive %s to ide-scsi emulation.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2891: FILE: drivers/ide/ide-tape.c:3780:
+		printk("ide-tape: passing drive %s to ide-scsi emulation.\n",
+				drive->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#2901: FILE: drivers/ide/ide-tape.c:3784:
+		printk(KERN_WARNING "ide-tape: Use drive %s with ide-scsi"

WARNING:SPLIT_STRING: quoted string split across lines
#2902: FILE: drivers/ide/ide-tape.c:3785:
+		printk(KERN_WARNING "ide-tape: Use drive %s with ide-scsi"
+				" emulation and osst.\n", drive->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#2903: FILE: drivers/ide/ide-tape.c:3786:
+		printk(KERN_WARNING "ide-tape: OnStream support will be removed"

WARNING:SPLIT_STRING: quoted string split across lines
#2904: FILE: drivers/ide/ide-tape.c:3787:
+		printk(KERN_WARNING "ide-tape: OnStream support will be removed"
+				" soon from ide-tape!\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2908: FILE: drivers/ide/ide-tape.c:3791:
+		printk(KERN_ERR "ide-tape: %s: Can't allocate a tape struct\n",

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2908: FILE: drivers/ide/ide-tape.c:3791:
+	if (!tape) {
+		printk(KERN_ERR "ide-tape: %s: Can't allocate a tape struct\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2909: FILE: drivers/ide/ide-tape.c:3792:
+		printk(KERN_ERR "ide-tape: %s: Can't allocate a tape struct\n",
+				drive->name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2944: FILE: drivers/ide/ide-tape.c:3859:
+		printk(KERN_ERR "ide-tape: Failed to register character device"

WARNING:SPLIT_STRING: quoted string split across lines
#2945: FILE: drivers/ide/ide-tape.c:3860:
+		printk(KERN_ERR "ide-tape: Failed to register character device"
+				" interface\n");

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000331090.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 12 errors, 57 warnings, 69 checks, 2774 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000331090.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
