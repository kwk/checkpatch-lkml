WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#40: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#45: FILE: fs/aufs/debug.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#65: FILE: fs/aufs/debug.c:21:
+		printk("%s" fmt, au_plevel, ##arg); \

CHECK:CAMELCASE: Avoid CamelCase: <AuSize_NHASH>
#77: FILE: fs/aufs/debug.c:33:
+	for (i = 0; i < AuSize_NHASH; i++) {

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#121: FILE: fs/aufs/debug.c:77:
+	BUILD_BUG_ON(sizeof(inode->i_blocks) != sizeof(unsigned long)
+		     && sizeof(inode->i_blocks) != sizeof(u64));

WARNING:SPLIT_STRING: quoted string split across lines
#128: FILE: fs/aufs/debug.c:84:
+	dpri("i%d: i%lu, %s, cnt %d, nl %u, 0%o, sz %llu, blk %llu,"
+	     " ct %lld, np %lu, st 0x%lx, f 0x%x, g %x%s%.*s\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:CAMELCASE: Avoid CamelCase: <AuDLNPair>
#173: FILE: fs/aufs/debug.c:129:
+	     AuDLNPair(dentry->d_parent), AuDLNPair(dentry),

WARNING:LINE_SPACING: Missing a blank line after declarations
#178: FILE: fs/aufs/debug.c:134:
+		struct au_iinfo *iinfo = au_ii(dentry->d_inode);
+		if (iinfo)

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#217: FILE: fs/aufs/debug.c:173:
+	if (bindex < 0
+	    && file->f_dentry

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#218: FILE: fs/aufs/debug.c:174:
+	    && file->f_dentry
+	    && au_test_aufs(file->f_dentry->d_sb)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#219: FILE: fs/aufs/debug.c:175:
+	    && au_test_aufs(file->f_dentry->d_sb)
+	    && au_fi(file))

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#257: FILE: fs/aufs/debug.c:213:
+	if (!br || IS_ERR(br)

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#258: FILE: fs/aufs/debug.c:214:
+	if (!br || IS_ERR(br)
+	    || !(mnt = br->br_mnt) || IS_ERR(mnt)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#259: FILE: fs/aufs/debug.c:215:
+	    || !(mnt = br->br_mnt) || IS_ERR(mnt)
+	    || !(sb = mnt->mnt_sb) || IS_ERR(sb)) {

WARNING:SPLIT_STRING: quoted string split across lines
#265: FILE: fs/aufs/debug.c:221:
+	dpri("s%d: {perm 0x%x, cnt %d, wbr %p}, "
+	     "%s, dev 0x%02x%02x, flags 0x%lx, cnt(BIAS) %d, active %d, "

WARNING:SPLIT_STRING: quoted string split across lines
#266: FILE: fs/aufs/debug.c:222:
+	     "%s, dev 0x%02x%02x, flags 0x%lx, cnt(BIAS) %d, active %d, "
+	     "xino %d\n",

CHECK:CAMELCASE: Avoid CamelCase: <AuBit>
#324: FILE: fs/aufs/debug.c:280:
+#define AuBit(name)	if (ia->ia_valid & ATTR_ ## name) \

ERROR:MULTISTATEMENT_MACRO_USE_DO_WHILE: Macros starting with if should be enclosed by a do - while loop to avoid possible if/else logic defects
#324: FILE: fs/aufs/debug.c:280:
+#define AuBit(name)	if (ia->ia_valid & ATTR_ ## name) \
+				dpri(#name "\n")

Macros with multiple statements should be enclosed in a
do - while block.  Same should also be the case for macros
starting with `if` to avoid logic defects::

  #define macrofun(a, b, c)                 \
    do {                                    \
            if (a == 5)                     \
                    do_this(b, c);          \
    } while (0)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#macros-enums-and-rtl

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#349: FILE: fs/aufs/debug.c:305:
+void au_dbg_verify_dir_parent(struct dentry *dentry, unsigned int sigen)
                                                                   ^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:CAMELCASE: Avoid CamelCase: <AuDebugOn>
#354: FILE: fs/aufs/debug.c:310:
+	AuDebugOn(!S_ISDIR(dentry->d_inode->i_mode)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#355: FILE: fs/aufs/debug.c:311:
+	AuDebugOn(!S_ISDIR(dentry->d_inode->i_mode)
+		  || IS_ROOT(dentry)

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#356: FILE: fs/aufs/debug.c:312:
+		  || au_digen(parent) != sigen);
 		                         ^^^^^

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#356: FILE: fs/aufs/debug.c:312:
+		  || IS_ROOT(dentry)
+		  || au_digen(parent) != sigen);

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#360: FILE: fs/aufs/debug.c:316:
+void au_dbg_verify_nondir_parent(struct dentry *dentry, unsigned int sigen)
                                                                      ^^^^^

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#366: FILE: fs/aufs/debug.c:322:
+		  || au_digen(parent) != sigen);
 		                         ^^^^^

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#366: FILE: fs/aufs/debug.c:322:
+	AuDebugOn(S_ISDIR(dentry->d_inode->i_mode)
+		  || au_digen(parent) != sigen);

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#370: FILE: fs/aufs/debug.c:326:
+void au_dbg_verify_gen(struct dentry *parent, unsigned int sigen)
                                                            ^^^^^

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#385: FILE: fs/aufs/debug.c:341:
+			AuDebugOn(au_digen(dentries[j]) != sigen);
 			                                   ^^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#408: FILE: fs/aufs/debug.c:364:
+		BUG();

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:CAMELCASE: Avoid CamelCase: <AuForceNoPlink>
#416: FILE: fs/aufs/debug.c:372:
+#ifdef AuForceNoPlink

CHECK:CAMELCASE: Avoid CamelCase: <AuForceNoXino>
#419: FILE: fs/aufs/debug.c:375:
+#ifdef AuForceNoXino

CHECK:CAMELCASE: Avoid CamelCase: <AuForceNoRefrof>
#422: FILE: fs/aufs/debug.c:378:
+#ifdef AuForceNoRefrof

CHECK:CAMELCASE: Avoid CamelCase: <AuForceHinotify>
#425: FILE: fs/aufs/debug.c:381:
+#ifdef AuForceHinotify

CHECK:CAMELCASE: Avoid CamelCase: <AuWarn>
#442: FILE: fs/aufs/debug.c:398:
+	AuWarn("CONFIG_4KSTACKS is defined.\n");

CHECK:CAMELCASE: Avoid CamelCase: <AuForceNoBrs>
#445: FILE: fs/aufs/debug.c:401:
+#ifdef AuForceNoBrs

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#457: FILE: fs/aufs/debug.h:1:
+/*

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#483: FILE: fs/aufs/debug.h:27:
+#define AuDebugOn(a)		BUG_ON(a)

WARNING:MEMORY_BARRIER: memory barrier without comment
#488: FILE: fs/aufs/debug.h:32:
+	smp_mb();

WARNING:MEMORY_BARRIER: memory barrier without comment
#496: FILE: fs/aufs/debug.h:40:
+	smp_mb();

CHECK:CAMELCASE: Avoid CamelCase: <AuDpri>
#512: FILE: fs/aufs/debug.h:56:
+#define AuDpri(lvl, fmt, arg...) \

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#513: FILE: fs/aufs/debug.h:57:
+	printk(lvl AUFS_NAME " %s:%d:%s[%d]: " fmt, \

CHECK:CAMELCASE: Avoid CamelCase: <AuDbg>
#515: FILE: fs/aufs/debug.h:59:
+#define AuDbg(fmt, arg...) do { \

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#519: FILE: fs/aufs/debug.h:63:
+#define AuLabel(l) ^I^IAuDbg(#l "\n")$

CHECK:CAMELCASE: Avoid CamelCase: <AuLabel>
#519: FILE: fs/aufs/debug.h:63:
+#define AuLabel(l) 		AuDbg(#l "\n")

CHECK:CAMELCASE: Avoid CamelCase: <AuInfo>
#520: FILE: fs/aufs/debug.h:64:
+#define AuInfo(fmt, arg...)	AuDpri(KERN_INFO, fmt, ##arg)

CHECK:CAMELCASE: Avoid CamelCase: <AuErr>
#522: FILE: fs/aufs/debug.h:66:
+#define AuErr(fmt, arg...)	AuDpri(KERN_ERR, fmt, ##arg)

CHECK:CAMELCASE: Avoid CamelCase: <AuIOErr>
#523: FILE: fs/aufs/debug.h:67:
+#define AuIOErr(fmt, arg...)	AuErr("I/O Error, " fmt, ##arg)

CHECK:CAMELCASE: Avoid CamelCase: <AuWarn1>
#524: FILE: fs/aufs/debug.h:68:
+#define AuWarn1(fmt, arg...) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuErr1>
#530: FILE: fs/aufs/debug.h:74:
+#define AuErr1(fmt, arg...) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuIOErr1>
#536: FILE: fs/aufs/debug.h:80:
+#define AuIOErr1(fmt, arg...) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuUnsupportMsg>
#542: FILE: fs/aufs/debug.h:86:
+#define AuUnsupportMsg	"This operation is not supported." \

CHECK:CAMELCASE: Avoid CamelCase: <AuUnsupport>
#544: FILE: fs/aufs/debug.h:88:
+#define AuUnsupport(fmt, args...) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuTraceErr>
#549: FILE: fs/aufs/debug.h:93:
+#define AuTraceErr(e) do { \

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'e' - possible side-effects?
#549: FILE: fs/aufs/debug.h:93:
+#define AuTraceErr(e) do { \
+	if (unlikely((e) < 0)) \
+		AuDbg("err %d\n", (int)(e)); \
+} while (0)

CHECK:CAMELCASE: Avoid CamelCase: <AuTraceErrPtr>
#554: FILE: fs/aufs/debug.h:98:
+#define AuTraceErrPtr(p) do { \

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'p' - possible side-effects?
#554: FILE: fs/aufs/debug.h:98:
+#define AuTraceErrPtr(p) do { \
+	if (IS_ERR(p)) \
+		AuDbg("err %ld\n", PTR_ERR(p)); \
+} while (0)

CHECK:CAMELCASE: Avoid CamelCase: <AuLNPair>
#560: FILE: fs/aufs/debug.h:104:
+#define AuLNPair(qstr)		(qstr)->len, (qstr)->name

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#560: FILE: fs/aufs/debug.h:104:
+#define AuLNPair(qstr)		(qstr)->len, (qstr)->name

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'qstr' - possible side-effects?
#560: FILE: fs/aufs/debug.h:104:
+#define AuLNPair(qstr)		(qstr)->len, (qstr)->name

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#575: FILE: fs/aufs/debug.h:119:
+void au_dpri_file(struct file *filp);
                                ^^^^

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#581: FILE: fs/aufs/debug.h:125:
+void au_dbg_verify_dir_parent(struct dentry *dentry, unsigned int sigen);
                                                                   ^^^^^

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#582: FILE: fs/aufs/debug.h:126:
+void au_dbg_verify_nondir_parent(struct dentry *dentry, unsigned int sigen);
                                                                      ^^^^^

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#583: FILE: fs/aufs/debug.h:127:
+void au_dbg_verify_gen(struct dentry *parent, unsigned int sigen);
                                                            ^^^^^

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgWhlist>
#589: FILE: fs/aufs/debug.h:133:
+#define AuDbgWhlist(w) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgVdir>
#594: FILE: fs/aufs/debug.h:138:
+#define AuDbgVdir(v) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgInode>
#599: FILE: fs/aufs/debug.h:143:
+#define AuDbgInode(i) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgDentry>
#604: FILE: fs/aufs/debug.h:148:
+#define AuDbgDentry(d) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgFile>
#609: FILE: fs/aufs/debug.h:153:
+#define AuDbgFile(f) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgSb>
#614: FILE: fs/aufs/debug.h:158:
+#define AuDbgSb(sb) do { \

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgSleep>
#619: FILE: fs/aufs/debug.h:163:
+#define AuDbgSleep(sec) do { \

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'sec' - possible side-effects?
#619: FILE: fs/aufs/debug.h:163:
+#define AuDbgSleep(sec) do { \
+	AuDbg("sleep %d sec\n", sec); \
+	ssleep(sec); \
+} while (0)

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgSleepJiffy>
#624: FILE: fs/aufs/debug.h:168:
+#define AuDbgSleepJiffy(jiffy) do { \

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'jiffy' - possible side-effects?
#624: FILE: fs/aufs/debug.h:168:
+#define AuDbgSleepJiffy(jiffy) do { \
+	AuDbg("sleep %d jiffies\n", jiffy); \
+	au_dbg_sleep_jiffy(jiffy); \
+} while (0)

CHECK:CAMELCASE: Avoid CamelCase: <AuDbgIAttr>
#629: FILE: fs/aufs/debug.h:173:
+#define AuDbgIAttr(ia) do { \

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'ia' - possible side-effects?
#629: FILE: fs/aufs/debug.h:173:
+#define AuDbgIAttr(ia) do { \
+	AuDbg("ia_valid 0x%x\n", (ia)->ia_valid); \
+	au_dbg_iattr(ia); \
+} while (0)

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#635: FILE: fs/aufs/debug.h:179:
+					    unsigned int sigen)
 					                 ^^^^^

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#639: FILE: fs/aufs/debug.h:183:
+}
+static inline void au_dbg_verify_nondir_parent(struct dentry *dentry,

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#640: FILE: fs/aufs/debug.h:184:
+					   unsigned int sigen)
 					                ^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#640: FILE: fs/aufs/debug.h:184:
+static inline void au_dbg_verify_nondir_parent(struct dentry *dentry,
+					   unsigned int sigen)

WARNING:TYPO_SPELLING: 'sigen' may be misspelled - perhaps 'sign'?
#644: FILE: fs/aufs/debug.h:188:
+static inline void au_dbg_verify_gen(struct dentry *parent, unsigned int sigen)
                                                                          ^^^^^

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#644: FILE: fs/aufs/debug.h:188:
+}
+static inline void au_dbg_verify_gen(struct dentry *parent, unsigned int sigen)

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#648: FILE: fs/aufs/debug.h:192:
+}
+static inline void au_dbg_verify_hf(struct au_finfo *finfo)

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#652: FILE: fs/aufs/debug.h:196:
+}
+static inline void au_dbg_verify_kthread(void)

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#661: FILE: fs/aufs/debug.h:205:
+}
+static inline void au_debug_sbinfo_init(struct au_sbinfo *sbinfo)

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#665: FILE: fs/aufs/debug.h:209:
+}
+#define AuDbgWhlist(w)		do {} while (0)

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#696: FILE: fs/aufs/debug.h:240:
+}
+#define au_sysrq_fin()		do {} while (0)

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#708: FILE: fs/aufs/sysrq.c:1:
+/*

WARNING:TYPO_SPELLING: 'hanlder' may be misspelled - perhaps 'handler'?
#718: FILE: fs/aufs/sysrq.c:11:
+ * magic sysrq hanlder
                ^^^^^^^

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#747: FILE: fs/aufs/sysrq.c:40:
+#if 0

WARNING:LINE_SPACING: Missing a blank line after declarations
#749: FILE: fs/aufs/sysrq.c:42:
+	struct inode *i;
+	pr_warning(AUFS_NAME ": isolated inode\n");

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#767: FILE: fs/aufs/sysrq.c:60:
+module_param_named(sysrq, aufs_sysrq_key, charp, S_IRUGO);

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

WARNING:LINE_SPACING: Missing a blank line after declarations
#810: FILE: fs/aufs/sysrq.c:103:
+	int err;
+	err = unregister_sysrq_key(*aufs_sysrq_key, &au_sysrq_op);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000154202.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 3 errors, 33 warnings, 56 checks, 757 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000154202.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
