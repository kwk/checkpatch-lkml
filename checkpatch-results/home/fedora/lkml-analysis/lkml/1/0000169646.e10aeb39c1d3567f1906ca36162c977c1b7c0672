WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#60: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#65: FILE: drivers/staging/pohmelfs/net.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#167: FILE: drivers/staging/pohmelfs/net.c:103:
+	BUG_ON(!size);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#181: FILE: drivers/staging/pohmelfs/net.c:117:
+	err = kernel_recvmsg(st->socket, &msg, &iov, 1, iov.iov_len,
+			msg.msg_flags);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#183: FILE: drivers/staging/pohmelfs/net.c:119:
+		printk("%s: failed to recv data: size: %llu, err: %d.\n", __func__, size, err);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'st->read_socket == st->socket'
#225: FILE: drivers/staging/pohmelfs/net.c:161:
+		if (st->socket && (st->read_socket == st->socket) && (revents & POLLIN)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:BRACES: braces {} should be used on all arms of this statement
#227: FILE: drivers/staging/pohmelfs/net.c:163:
+			if (err > 0) {
[...]
+			} else if (err == 0)
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#236: FILE: drivers/staging/pohmelfs/net.c:172:
+			printk("%s: revents: %x, socket: %p, size: %u, err: %d.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#237: FILE: drivers/staging/pohmelfs/net.c:173:
+			printk("%s: revents: %x, socket: %p, size: %u, err: %d.\n",
+					__func__, revents, st->socket, size, err);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#258: FILE: drivers/staging/pohmelfs/net.c:194:
+			printk("%s: socket: %p, read_socket: %p, revents: %x, rev_error: %d, "

WARNING:SPLIT_STRING: quoted string split across lines
#259: FILE: drivers/staging/pohmelfs/net.c:195:
+			printk("%s: socket: %p, read_socket: %p, revents: %x, rev_error: %d, "
+					"should_stop: %d, size: %u, err: %d.\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

ERROR:TRAILING_WHITESPACE: trailing whitespace
#271: FILE: drivers/staging/pohmelfs/net.c:207:
+^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#275: FILE: drivers/staging/pohmelfs/net.c:211:
+^I$

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#284: FILE: drivers/staging/pohmelfs/net.c:220:
+struct netfs_poll_helper
+{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#285: FILE: drivers/staging/pohmelfs/net.c:221:
+^Ipoll_table ^I^Ipt;$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#289: FILE: drivers/staging/pohmelfs/net.c:225:
+static int netfs_queue_wake(wait_queue_t *wait, unsigned mode, int sync, void *key)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#298: FILE: drivers/staging/pohmelfs/net.c:234:
+static void netfs_queue_func(struct file *file, wait_queue_head_t *whead,
+				 poll_table *pt)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#349: FILE: drivers/staging/pohmelfs/net.c:285:
+		printk("%s: failed to find inode: id: %llu.\n", __func__, cmd->id);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#356: FILE: drivers/staging/pohmelfs/net.c:292:
+		printk("%s: failed to find/lock page: page: %p, id: %llu, start: %llu, index: %llu.\n",

WARNING:LONG_LINE: line length of 101 exceeds 100 columns
#357: FILE: drivers/staging/pohmelfs/net.c:293:
+				__func__, page, cmd->id, cmd->start, cmd->start >> PAGE_CACHE_SHIFT);

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#357: FILE: drivers/staging/pohmelfs/net.c:293:
+		printk("%s: failed to find/lock page: page: %p, id: %llu, start: %llu, index: %llu.\n",
+				__func__, page, cmd->id, cmd->start, cmd->start >> PAGE_CACHE_SHIFT);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#418: FILE: drivers/staging/pohmelfs/net.c:354:
+static int pohmelfs_check_name(struct pohmelfs_inode *parent, struct qstr *str,
+		struct netfs_inode_info *info)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#465: FILE: drivers/staging/pohmelfs/net.c:401:
+		printk("%s: failed to find inode: id: %llu.\n", __func__, cmd->id);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#506: FILE: drivers/staging/pohmelfs/net.c:442:
+		dprintk("%s: parent: %llu, ino: %llu, name: '%s', hash: %x, len: %u, mode: %o.\n",
+				__func__, parent->ino, info->ino, str.name, str.hash, str.len,

WARNING:LONG_LINE: line length of 107 exceeds 100 columns
#532: FILE: drivers/staging/pohmelfs/net.c:468:
+	printk("%s: parent: %llu, ino: %llu, cmd_id: %llu.\n", __func__, parent->ino, cmd->start, cmd->id);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#532: FILE: drivers/staging/pohmelfs/net.c:468:
+	printk("%s: parent: %llu, ino: %llu, cmd_id: %llu.\n", __func__, parent->ino, cmd->start, cmd->id);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#555: FILE: drivers/staging/pohmelfs/net.c:491:
+		printk("%s: lookup response: id: %llu, start: %llu, size: %u.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#556: FILE: drivers/staging/pohmelfs/net.c:492:
+		printk("%s: lookup response: id: %llu, start: %llu, size: %u.\n",
+				__func__, cmd->id, cmd->start, cmd->size);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#568: FILE: drivers/staging/pohmelfs/net.c:504:
+		printk("%s: broken lookup response: id: %llu, start: %llu, size: %u.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#569: FILE: drivers/staging/pohmelfs/net.c:505:
+		printk("%s: broken lookup response: id: %llu, start: %llu, size: %u.\n",
+				__func__, cmd->id, cmd->start, cmd->size);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#588: FILE: drivers/staging/pohmelfs/net.c:524:
+	dprintk("%s: parent: %llu, ino: %llu, name: '%s', start: %llu.\n",
+			__func__, parent->ino, info->ino, name, cmd->start);

CHECK:BRACES: braces {} should be used on all arms of this statement
#590: FILE: drivers/staging/pohmelfs/net.c:526:
+	if (cmd->start)
[...]
+	else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#592: FILE: drivers/staging/pohmelfs/net.c:528:
+	else {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#623: FILE: drivers/staging/pohmelfs/net.c:559:
+	printk("%s: inode: %p, id: %llu, start: %llu, size: %u, err: %d.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#624: FILE: drivers/staging/pohmelfs/net.c:560:
+	printk("%s: inode: %p, id: %llu, start: %llu, size: %u, err: %d.\n",
+			__func__, inode, cmd->id, cmd->start, cmd->size, err);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#640: FILE: drivers/staging/pohmelfs/net.c:576:
+		printk("%s: failed to find inode: id: %llu, start: %llu.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#641: FILE: drivers/staging/pohmelfs/net.c:577:
+		printk("%s: failed to find inode: id: %llu, start: %llu.\n",
+				__func__, cmd->id, cmd->start);

WARNING:UNSPECIFIED_INT: Prefer 'signed int' to bare use of 'signed'
#697: FILE: drivers/staging/pohmelfs/net.c:633:
+	short err = (signed)cmd->ext;

WARNING:LINE_SPACING: Missing a blank line after declarations
#711: FILE: drivers/staging/pohmelfs/net.c:647:
+		int check = pohmelfs_ftrans_check(cmd->start);
+		printk("%s: failed to find transaction: start: %llu: id: %llu, size: %u, ext: %u, double: %d.\n",

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#711: FILE: drivers/staging/pohmelfs/net.c:647:
+		printk("%s: failed to find transaction: start: %llu: id: %llu, size: %u, ext: %u, double: %d.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#712: FILE: drivers/staging/pohmelfs/net.c:648:
+		printk("%s: failed to find transaction: start: %llu: id: %llu, size: %u, ext: %u, double: %d.\n",
+				__func__, cmd->start, cmd->id, cmd->size, cmd->ext, check);

WARNING:LONG_LINE: line length of 112 exceeds 100 columns
#733: FILE: drivers/staging/pohmelfs/net.c:669:
+	dprintk("%s: st: %p, id: %llu, start: %llu, size: %u.\n", __func__, st, cmd->id, cmd->start, cmd->size);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#737: FILE: drivers/staging/pohmelfs/net.c:673:
+		printk("%s: failed to find inode: id: %llu.\n", __func__, cmd->id);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#776: FILE: drivers/staging/pohmelfs/net.c:712:
+		printk(KERN_INFO "Mounting POHMELFS (%d) read-only.\n", psb->idx);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#780: FILE: drivers/staging/pohmelfs/net.c:716:
+		printk(KERN_INFO "Mounting POHMELFS (%d) "

WARNING:SPLIT_STRING: quoted string split across lines
#781: FILE: drivers/staging/pohmelfs/net.c:717:
+		printk(KERN_INFO "Mounting POHMELFS (%d) "
+			"with extended attributes support.\n", psb->idx);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#814: FILE: drivers/staging/pohmelfs/net.c:750:
+	dprintk("%s: cipher '%s': %s, hash: '%s': %s.\n",
+			__func__,

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#815: FILE: drivers/staging/pohmelfs/net.c:751:
+			psb->cipher_string, (cap->cipher_strlen)?"SUPPORTED":"NOT SUPPORTED",
 			                                        ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#815: FILE: drivers/staging/pohmelfs/net.c:751:
+			psb->cipher_string, (cap->cipher_strlen)?"SUPPORTED":"NOT SUPPORTED",
 			                                                    ^

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#816: FILE: drivers/staging/pohmelfs/net.c:752:
+			psb->hash_string, (cap->hash_strlen)?"SUPPORTED":"NOT SUPPORTED");
 			                                    ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#816: FILE: drivers/staging/pohmelfs/net.c:752:
+			psb->hash_string, (cap->hash_strlen)?"SUPPORTED":"NOT SUPPORTED");
 			                                                ^

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#820: FILE: drivers/staging/pohmelfs/net.c:756:
+			err = -ENOTSUPP;

ENOTSUPP is not a standard error code and should be avoided in new patches.
EOPNOTSUPP should be used instead.

See: https://lore.kernel.org/netdev/20200510182252.GA411829@lunn.ch/

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#828: FILE: drivers/staging/pohmelfs/net.c:764:
+			err = -ENOTSUPP;

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#849: FILE: drivers/staging/pohmelfs/net.c:785:
+	switch (cmd->id) {
+		case POHMELFS_CRYPTO_CAPABILITIES:
[...]
+		case POHMELFS_ROOT_CAPABILITIES:
[...]
+		default:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#876: FILE: drivers/staging/pohmelfs/net.c:812:
+		__func__, cmd->id, (m)?m->gen:0, error);
 		                      ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#876: FILE: drivers/staging/pohmelfs/net.c:812:
+		__func__, cmd->id, (m)?m->gen:0, error);
 		                             ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#879: FILE: drivers/staging/pohmelfs/net.c:815:
+		printk("%s: failed to find getxattr cache entry: id: %llu.\n", __func__, cmd->id);

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#926: FILE: drivers/staging/pohmelfs/net.c:862:
+		__func__, cmd->id, (m)?m->gen:0, err);
 		                      ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#926: FILE: drivers/staging/pohmelfs/net.c:862:
+		__func__, cmd->id, (m)?m->gen:0, err);
 		                             ^

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#930: FILE: drivers/staging/pohmelfs/net.c:866:
+		printk("%s: failed to find data lock response: id: %llu.\n", __func__, cmd->id);

ERROR:INLINE_LOCATION: inline keyword should sit between storage class and type
#944: FILE: drivers/staging/pohmelfs/net.c:880:
+static void __inline__ netfs_state_reset(struct netfs_state *st)

The inline keyword should sit between storage class and type.

For example, the following segment::

  inline static int example_function(void)
  {
          ...
  }

should be::

  static inline int example_function(void)
  {
          ...
  }

WARNING:INLINE: plain inline is preferred over __inline__
#944: FILE: drivers/staging/pohmelfs/net.c:880:
+static void __inline__ netfs_state_reset(struct netfs_state *st)

WARNING:SPLIT_STRING: quoted string split across lines
#984: FILE: drivers/staging/pohmelfs/net.c:920:
+		dprintk("%s: cmd: %u, id: %llu, start: %llu, size: %u, "
+				"ext: %u, csize: %u, cpad: %u.\n",

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#991: FILE: drivers/staging/pohmelfs/net.c:927:
+			if (unlikely(cmd->csize > e->size/2)) {
 			                                 ^

WARNING:SPLIT_STRING: quoted string split across lines
#998: FILE: drivers/staging/pohmelfs/net.c:934:
+				dprintk("%s: cmd: cmd: %u, id: %llu, start: %llu, size: %u, "
+						"csize: %u != digest size %u.\n",

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#1017: FILE: drivers/staging/pohmelfs/net.c:953:
+				for (i=0; i<cmd->csize; ++i) {
 				      ^

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#1017: FILE: drivers/staging/pohmelfs/net.c:953:
+				for (i=0; i<cmd->csize; ++i) {
 				           ^

WARNING:BRACES: braces {} are not necessary for single statement blocks
#1017: FILE: drivers/staging/pohmelfs/net.c:953:
+				for (i=0; i<cmd->csize; ++i) {
+					printk("%02x ", hash[i]);
+				}

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1018: FILE: drivers/staging/pohmelfs/net.c:954:
+					printk("%02x ", hash[i]);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1020: FILE: drivers/staging/pohmelfs/net.c:956:
+				printk("\n");

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'cmd->size > st->size'
#1029: FILE: drivers/staging/pohmelfs/net.c:965:
+		if (unlikely((cmd->size > st->size) && (cmd->cmd != NETFS_XATTR_GET))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'cmd->cmd != NETFS_XATTR_GET'
#1029: FILE: drivers/staging/pohmelfs/net.c:965:
+		if (unlikely((cmd->size > st->size) && (cmd->cmd != NETFS_XATTR_GET))) {

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#1034: FILE: drivers/staging/pohmelfs/net.c:970:
+		switch (cmd->cmd) {
+			case NETFS_READ_PAGE:
[...]
+			case NETFS_READDIR:
[...]
+			case NETFS_LOOKUP:
[...]
+			case NETFS_CREATE:
[...]
+			case NETFS_REMOVE:
[...]
+			case NETFS_TRANS:
[...]
+			case NETFS_PAGE_CACHE:
[...]
+			case NETFS_CAPABILITIES:
[...]
+			case NETFS_LOCK:
[...]
+			case NETFS_XATTR_GET:
[...]
+			default:

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1066: FILE: drivers/staging/pohmelfs/net.c:1002:
+				printk("%s: wrong cmd: %u, id: %llu, start: %llu, size: %u, ext: %u.\n",

WARNING:LONG_LINE: line length of 102 exceeds 100 columns
#1067: FILE: drivers/staging/pohmelfs/net.c:1003:
+					__func__, cmd->cmd, cmd->id, cmd->start, cmd->size, cmd->ext);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1067: FILE: drivers/staging/pohmelfs/net.c:1003:
+				printk("%s: wrong cmd: %u, id: %llu, start: %llu, size: %u, ext: %u.\n",
+					__func__, cmd->cmd, cmd->id, cmd->start, cmd->size, cmd->ext);

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1086: FILE: drivers/staging/pohmelfs/net.c:1022:
+		printk("%s: failed to create a socket: family: %d, type: %d, proto: %d, err: %d.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1087: FILE: drivers/staging/pohmelfs/net.c:1023:
+		printk("%s: failed to create a socket: family: %d, type: %d, proto: %d, err: %d.\n",
+				__func__, ctl->addr.sa_family, ctl->type, ctl->proto, err);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1092: FILE: drivers/staging/pohmelfs/net.c:1028:
+	st->socket->sk->sk_sndtimeo = st->socket->sk->sk_rcvtimeo = msecs_to_jiffies(60000);

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1096: FILE: drivers/staging/pohmelfs/net.c:1032:
+		printk("%s: failed to connect to server: idx: %u, err: %d.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1097: FILE: drivers/staging/pohmelfs/net.c:1033:
+		printk("%s: failed to connect to server: idx: %u, err: %d.\n",
+				__func__, st->psb->idx, err);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1100: FILE: drivers/staging/pohmelfs/net.c:1036:
+	st->socket->sk->sk_sndtimeo = st->socket->sk->sk_rcvtimeo = msecs_to_jiffies(60000);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1108: FILE: drivers/staging/pohmelfs/net.c:1044:
+		struct sockaddr_in *sin = (struct sockaddr_in *)&ctl->addr;
+		printk(KERN_INFO "%s: (re)connected to peer %u.%u.%u.%u:%d.\n", __func__,

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1108: FILE: drivers/staging/pohmelfs/net.c:1044:
+		printk(KERN_INFO "%s: (re)connected to peer %u.%u.%u.%u:%d.\n", __func__,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1109: FILE: drivers/staging/pohmelfs/net.c:1045:
+		printk(KERN_INFO "%s: (re)connected to peer %u.%u.%u.%u:%d.\n", __func__,
+			NIPQUAD(sin->sin_addr.s_addr), ntohs(sin->sin_port));

WARNING:LINE_SPACING: Missing a blank line after declarations
#1112: FILE: drivers/staging/pohmelfs/net.c:1048:
+		struct sockaddr_in6 *sin = (struct sockaddr_in6 *)&ctl->addr;
+		printk(KERN_INFO "%s: (re)connected to peer "

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#1112: FILE: drivers/staging/pohmelfs/net.c:1048:
+		printk(KERN_INFO "%s: (re)connected to peer "

WARNING:SPLIT_STRING: quoted string split across lines
#1113: FILE: drivers/staging/pohmelfs/net.c:1049:
+		printk(KERN_INFO "%s: (re)connected to peer "
+			"%pi6:%d",

WARNING:LINE_SPACING: Missing a blank line after declarations
#1134: FILE: drivers/staging/pohmelfs/net.c:1070:
+			struct sockaddr_in *sin = (struct sockaddr_in *)&st->ctl.addr;
+			printk("%s: disconnected from peer %u.%u.%u.%u:%d.\n", __func__,

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1134: FILE: drivers/staging/pohmelfs/net.c:1070:
+			printk("%s: disconnected from peer %u.%u.%u.%u:%d.\n", __func__,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1135: FILE: drivers/staging/pohmelfs/net.c:1071:
+			printk("%s: disconnected from peer %u.%u.%u.%u:%d.\n", __func__,
+				NIPQUAD(sin->sin_addr.s_addr), ntohs(sin->sin_port));

WARNING:LINE_SPACING: Missing a blank line after declarations
#1138: FILE: drivers/staging/pohmelfs/net.c:1074:
+			struct sockaddr_in6 *sin = (struct sockaddr_in6 *)&st->ctl.addr;
+			printk("%s: disconnected from peer "

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#1138: FILE: drivers/staging/pohmelfs/net.c:1074:
+			printk("%s: disconnected from peer "

WARNING:SPLIT_STRING: quoted string split across lines
#1139: FILE: drivers/staging/pohmelfs/net.c:1075:
+			printk("%s: disconnected from peer "
+				"%pi6:%d",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1188: FILE: drivers/staging/pohmelfs/net.c:1124:
+	dprintk("%s: conf: %p, st: %p, socket: %p.\n",
+			__func__, conf, st, st->socket);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#1200: FILE: drivers/staging/pohmelfs/net.c:1136:
+
+}

CHECK:BRACES: braces {} should be used on all arms of this statement
#1273: FILE: drivers/staging/pohmelfs/net.c:1209:
+	if (!list_empty(&psb->state_list)) {
[...]
+	} else
[...]

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1276: FILE: drivers/staging/pohmelfs/net.c:1212:
+			psb->active_state = list_entry(c->config_entry.next,
+				struct pohmelfs_config, config_entry);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1279: FILE: drivers/staging/pohmelfs/net.c:1215:
+			psb->active_state = list_entry(psb->state_list.next,
+				struct pohmelfs_config, config_entry);

CHECK:BRACES: Unbalanced braces around else statement
#1285: FILE: drivers/staging/pohmelfs/net.c:1221:
+	} else

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1297: FILE: drivers/staging/pohmelfs/net.c:1233:
+		if (pohmelfs_config_check(c, psb->idx)) {
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1305: FILE: drivers/staging/pohmelfs/net.c:1241:
+^I$

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1317: FILE: drivers/staging/pohmelfs/netfs.h:1:
+/*

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1344: FILE: drivers/staging/pohmelfs/netfs.h:28:
+
+

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1350: FILE: drivers/staging/pohmelfs/netfs.h:34:
+struct netfs_cmd
+{

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#1375: FILE: drivers/staging/pohmelfs/netfs.h:59:
+#define NETFS_TRANS_SINGLE_DST		(1<<0)
                               		  ^

CHECK:BIT_MACRO: Prefer using the BIT macro
#1375: FILE: drivers/staging/pohmelfs/netfs.h:59:
+#define NETFS_TRANS_SINGLE_DST		(1<<0)

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1415: FILE: drivers/staging/pohmelfs/netfs.h:99:
+struct saddr
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1426: FILE: drivers/staging/pohmelfs/netfs.h:110:
+struct pohmelfs_crypto
+{

WARNING:LONG_LINE_COMMENT: line length of 102 exceeds 100 columns
#1428: FILE: drivers/staging/pohmelfs/netfs.h:112:
+	unsigned short		strlen;		/* Size of the attached crypto string including 0-byte

A comment starts before but extends beyond the maximum line length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1429: FILE: drivers/staging/pohmelfs/netfs.h:113:
+						 * "cbc(aes)" for example */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1439: FILE: drivers/staging/pohmelfs/netfs.h:123:
+struct pohmelfs_ctl
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1452: FILE: drivers/staging/pohmelfs/netfs.h:136:
+struct pohmelfs_cn_ack
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1465: FILE: drivers/staging/pohmelfs/netfs.h:149:
+struct netfs_inode_info
+{

WARNING:TYPO_SPELLING: 'informaion' may be misspelled - perhaps 'information'?
#1507: FILE: drivers/staging/pohmelfs/netfs.h:191:
+ * root informaion (used/available size, number of objects, permissions)
         ^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#1515: FILE: drivers/staging/pohmelfs/netfs.h:199:
+#define POHMELFS_FLAGS_RO		(1<<0)
                          		  ^

CHECK:BIT_MACRO: Prefer using the BIT macro
#1515: FILE: drivers/staging/pohmelfs/netfs.h:199:
+#define POHMELFS_FLAGS_RO		(1<<0)

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#1517: FILE: drivers/staging/pohmelfs/netfs.h:201:
+#define POHMELFS_FLAGS_XATTR		(1<<1)
                             		  ^

CHECK:BIT_MACRO: Prefer using the BIT macro
#1517: FILE: drivers/staging/pohmelfs/netfs.h:201:
+#define POHMELFS_FLAGS_XATTR		(1<<1)

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1520: FILE: drivers/staging/pohmelfs/netfs.h:204:
+struct netfs_root_capabilities
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1535: FILE: drivers/staging/pohmelfs/netfs.h:219:
+struct netfs_crypto_capabilities
+{

WARNING:LONG_LINE_COMMENT: line length of 108 exceeds 100 columns
#1536: FILE: drivers/staging/pohmelfs/netfs.h:220:
+	unsigned short		hash_strlen;	/* Hash string length, like "hmac(sha1) including 0 byte "*/

CHECK:SPACING: spaces preferred around that '<<' (ctx:VxV)
#1549: FILE: drivers/staging/pohmelfs/netfs.h:233:
+	POHMELFS_LOCK_GRAB	= (1<<15),
 	                  	    ^

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1556: FILE: drivers/staging/pohmelfs/netfs.h:240:
+struct netfs_lock
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1583: FILE: drivers/staging/pohmelfs/netfs.h:267:
+struct pohmelfs_name
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1601: FILE: drivers/staging/pohmelfs/netfs.h:285:
+struct pohmelfs_inode
+{

WARNING:LONG_LINE_COMMENT: line length of 118 exceeds 100 columns
#1603: FILE: drivers/staging/pohmelfs/netfs.h:287:
+							 * Objects which are not bound to dentry require to be dropped

WARNING:LONG_LINE_COMMENT: line length of 104 exceeds 100 columns
#1606: FILE: drivers/staging/pohmelfs/netfs.h:290:
+	struct rb_root		hash_root;		/* The same, but indexed by name hash and len */

WARNING:LONG_LINE_COMMENT: line length of 119 exceeds 100 columns
#1609: FILE: drivers/staging/pohmelfs/netfs.h:293:
+	struct list_head	sync_create_list;	/* List of created but not yet synced to the server children */

WARNING:LONG_LINE_COMMENT: line length of 101 exceeds 100 columns
#1613: FILE: drivers/staging/pohmelfs/netfs.h:297:
+	int			lock_type;		/* How this inode is locked: read or write */

WARNING:LONG_LINE_COMMENT: line length of 120 exceeds 100 columns
#1620: FILE: drivers/staging/pohmelfs/netfs.h:304:
+	u64			total_len;		/* Total length of all children names, used to create offsets */

WARNING:NEW_TYPEDEFS: do not add new typedefs
#1626: FILE: drivers/staging/pohmelfs/netfs.h:310:
+typedef int (* netfs_trans_complete_t)(struct page **pages, unsigned int page_num,

ERROR:SPACING: space prohibited after that '*' (ctx:BxW)
#1626: FILE: drivers/staging/pohmelfs/netfs.h:310:
+typedef int (* netfs_trans_complete_t)(struct page **pages, unsigned int page_num,
              ^

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1633: FILE: drivers/staging/pohmelfs/netfs.h:317:
+struct netfs_trans
+{

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1700: FILE: drivers/staging/pohmelfs/netfs.h:384:
+^I$

WARNING:UNSPECIFIED_INT: Prefer 'signed int' to bare use of 'signed'
#1721: FILE: drivers/staging/pohmelfs/netfs.h:405:
+	return (signed)(t->total_size - t->iovec.iov_len);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1730: FILE: drivers/staging/pohmelfs/netfs.h:414:
+struct netfs_trans *netfs_trans_alloc(struct pohmelfs_sb *psb, unsigned int size,
+		unsigned int flags, unsigned int nr);

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1741: FILE: drivers/staging/pohmelfs/netfs.h:425:
+struct netfs_trans_dst
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1771: FILE: drivers/staging/pohmelfs/netfs.h:455:
+struct pohmelfs_crypto_engine
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1789: FILE: drivers/staging/pohmelfs/netfs.h:473:
+struct pohmelfs_crypto_thread
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1812: FILE: drivers/staging/pohmelfs/netfs.h:496:
+struct netfs_state
+{

WARNING:LONG_LINE_COMMENT: line length of 113 exceeds 100 columns
#1813: FILE: drivers/staging/pohmelfs/netfs.h:497:
+	struct mutex		__state_lock;		/* Can not allow to use the same socket simultaneously */

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1815: FILE: drivers/staging/pohmelfs/netfs.h:499:
+^Istruct netfs_cmd ^Icmd;^I^I^I/* Cached command */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1826: FILE: drivers/staging/pohmelfs/netfs.h:510:
+^Iwait_queue_t ^I^Iwait;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1827: FILE: drivers/staging/pohmelfs/netfs.h:511:
+^Iwait_queue_head_t ^I*whead;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1828: FILE: drivers/staging/pohmelfs/netfs.h:512:
+^Iwait_queue_head_t ^Ithread_wait;$

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#1830: FILE: drivers/staging/pohmelfs/netfs.h:514:
+	struct mutex		trans_lock;

WARNING:LONG_LINE_COMMENT: line length of 118 exceeds 100 columns
#1837: FILE: drivers/staging/pohmelfs/netfs.h:521:
+							 * Used to determine if between lock drops socket was changed.

WARNING:LONG_LINE_COMMENT: line length of 105 exceeds 100 columns
#1838: FILE: drivers/staging/pohmelfs/netfs.h:522:
+							 * Never used to read data or any kind of access.

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1863: FILE: drivers/staging/pohmelfs/netfs.h:547:
+	BUG_ON(!mutex_is_locked(&st->__state_send_lock));

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1875: FILE: drivers/staging/pohmelfs/netfs.h:559:
+	BUG_ON(!mutex_is_locked(&st->__state_lock));

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#1895: FILE: drivers/staging/pohmelfs/netfs.h:579:
+struct pohmelfs_sb
+{

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#1897: FILE: drivers/staging/pohmelfs/netfs.h:581:
+	struct mutex		mcache_lock;

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#1914: FILE: drivers/staging/pohmelfs/netfs.h:598:
+	struct mutex		crypto_thread_lock;

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#1927: FILE: drivers/staging/pohmelfs/netfs.h:611:
+	spinlock_t		ino_lock;

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#1934: FILE: drivers/staging/pohmelfs/netfs.h:618:
+	struct mutex		state_lock;

ERROR:TRAILING_WHITESPACE: trailing whitespace
#1941: FILE: drivers/staging/pohmelfs/netfs.h:625:
+^I$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1941: FILE: drivers/staging/pohmelfs/netfs.h:625:
+
+	

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1947: FILE: drivers/staging/pohmelfs/netfs.h:631:
+^Istruct delayed_work ^Idwork;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1948: FILE: drivers/staging/pohmelfs/netfs.h:632:
+^Istruct delayed_work ^Idrop_dwork;$

WARNING:TYPO_SPELLING: 'perfrom' may be misspelled - perhaps 'perform'?
#1970: FILE: drivers/staging/pohmelfs/netfs.h:654:
+	 * Controls whether to perfrom crypto processing or not.
 	                       ^^^^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1993: FILE: drivers/staging/pohmelfs/netfs.h:677:
+static inline void netfs_trans_update(struct netfs_cmd *cmd,
+		struct netfs_trans *t, unsigned int size)

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#2033: FILE: drivers/staging/pohmelfs/netfs.h:717:
+struct pohmelfs_config
+{

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#2040: FILE: drivers/staging/pohmelfs/netfs.h:724:
+struct pohmelfs_config_group
+{

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2103: FILE: drivers/staging/pohmelfs/netfs.h:787:
+struct pohmelfs_inode *pohmelfs_create_entry_local(struct pohmelfs_sb *psb,
+	struct pohmelfs_inode *parent, struct qstr *str, u64 start, int mode);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2111: FILE: drivers/staging/pohmelfs/netfs.h:795:
+struct pohmelfs_inode *pohmelfs_new_inode(struct pohmelfs_sb *psb,
+		struct pohmelfs_inode *parent, struct qstr *str,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2118: FILE: drivers/staging/pohmelfs/netfs.h:802:
+int pohmelfs_meta_command(struct pohmelfs_inode *pi, unsigned int cmd_op, unsigned int flags,
+		netfs_trans_complete_t complete, void *priv, u64 start);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2120: FILE: drivers/staging/pohmelfs/netfs.h:804:
+int pohmelfs_meta_command_data(struct pohmelfs_inode *pi, u64 id, unsigned int cmd_op, char *addon,
+		unsigned int flags, netfs_trans_complete_t complete, void *priv, u64 start);

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#2129: FILE: drivers/staging/pohmelfs/netfs.h:813:
+struct pohmelfs_crypto_completion
+{

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2142: FILE: drivers/staging/pohmelfs/netfs.h:826:
+int pohmelfs_crypto_process_input_data(struct pohmelfs_crypto_engine *e, u64 iv,
+		void *data, struct page *page, unsigned int size);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2144: FILE: drivers/staging/pohmelfs/netfs.h:828:
+int pohmelfs_crypto_process_input_page(struct pohmelfs_crypto_engine *e,
+		struct page *page, unsigned int size, u64 iv);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'type == POHMELFS_READ_LOCK'
#2165: FILE: drivers/staging/pohmelfs/netfs.h:849:
+		if ((type == POHMELFS_READ_LOCK) && (pi->lock_type == POHMELFS_WRITE_LOCK))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'pi->lock_type == POHMELFS_WRITE_LOCK'
#2165: FILE: drivers/staging/pohmelfs/netfs.h:849:
+		if ((type == POHMELFS_READ_LOCK) && (pi->lock_type == POHMELFS_WRITE_LOCK))

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#2181: FILE: drivers/staging/pohmelfs/netfs.h:865:
+#define dprintka(f, a...) printk(f, ##a)

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#2182: FILE: drivers/staging/pohmelfs/netfs.h:866:
+#define dprintk(f, a...) printk("%d: " f, task_pid_vnr(current), ##a)

ERROR:OPEN_BRACE: open brace '{' following struct go on the same line
#2206: FILE: drivers/staging/pohmelfs/netfs.h:890:
+struct pohmelfs_mcache
+{

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2223: FILE: drivers/staging/pohmelfs/netfs.h:907:
+struct pohmelfs_mcache *pohmelfs_mcache_alloc(struct pohmelfs_sb *psb, u64 start,
+		unsigned int size, void *data);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2234: FILE: drivers/staging/pohmelfs/netfs.h:918:
+static inline void pohmelfs_mcache_put(struct pohmelfs_sb *psb,
+		struct pohmelfs_mcache *m)

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000169646.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 33 errors, 77 warnings, 68 checks, 2178 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000169646.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
