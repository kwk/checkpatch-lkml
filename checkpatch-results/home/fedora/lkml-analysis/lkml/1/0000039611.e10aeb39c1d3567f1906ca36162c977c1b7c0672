WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#61: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#66: FILE: fs/ceph/osd_client.c:1:
+#include "ceph_debug.h"

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:STATIC_CONST: Move const after static - use 'static const struct ceph_connection_operations '
#81: FILE: fs/ceph/osd_client.c:16:
+const static struct ceph_connection_operations osd_con_ops;

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#127: FILE: fs/ceph/osd_client.c:62:
+		dout(" skipping last %llu, final file extent %llu~%llu\n",
 		^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#137: FILE: fs/ceph/osd_client.c:72:
+	dout("calc_layout %s (%d) %llu~%llu (%d pages)\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'calc_layout', this function's name, in a string
#137: FILE: fs/ceph/osd_client.c:72:
+	dout("calc_layout %s (%d) %llu~%llu (%d pages)\n",

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#141: FILE: fs/ceph/osd_client.c:76:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#147: FILE: fs/ceph/osd_client.c:82:
+	dout("osdc put_request %p %d -> %d\n", req, atomic_read(&req->r_ref),
 	^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#148: FILE: fs/ceph/osd_client.c:83:
+	     atomic_read(&req->r_ref)-1);
 	                             ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#149: FILE: fs/ceph/osd_client.c:84:
+	BUG_ON(atomic_read(&req->r_ref) <= 0);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#196: FILE: fs/ceph/osd_client.c:131:
+	size_t msg_size = sizeof(*head) + num_op*sizeof(*op);
 	                                        ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req"
#206: FILE: fs/ceph/osd_client.c:141:
+	if (req == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:SPACING: spaces preferred around that '|' (ctx:VxV)
#223: FILE: fs/ceph/osd_client.c:158:
+	WARN_ON((flags & (CEPH_OSD_FLAG_READ|CEPH_OSD_FLAG_WRITE)) == 0);
 	                                    ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#275: FILE: fs/ceph/osd_client.c:210:
+		prevofs = le64_to_cpu((op-1)->extent.offset);
 		                         ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#277: FILE: fs/ceph/osd_client.c:212:
+						      (off-prevofs));
 						          ^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#292: FILE: fs/ceph/osd_client.c:227:
+	BUG_ON(p > msg->front.iov_base + msg->front.iov_len);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#314: FILE: fs/ceph/osd_client.c:249:
+			BUG();

CHECK:LINE_SPACING: Please don't use multiple blank lines
#361: FILE: fs/ceph/osd_client.c:296:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#372: FILE: fs/ceph/osd_client.c:307:
+	dout("osd_reset osd%d\n", osd->o_osd);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osd_reset', this function's name, in a string
#372: FILE: fs/ceph/osd_client.c:307:
+	dout("osd_reset osd%d\n", osd->o_osd);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#407: FILE: fs/ceph/osd_client.c:342:
+		dout("get_osd %p %d -> %d\n", osd, atomic_read(&osd->o_ref)-1,
 		^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#407: FILE: fs/ceph/osd_client.c:342:
+		dout("get_osd %p %d -> %d\n", osd, atomic_read(&osd->o_ref)-1,
 		                                                           ^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'get_osd', this function's name, in a string
#407: FILE: fs/ceph/osd_client.c:342:
+		dout("get_osd %p %d -> %d\n", osd, atomic_read(&osd->o_ref)-1,

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#410: FILE: fs/ceph/osd_client.c:345:
+		return osd;
+	} else {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#411: FILE: fs/ceph/osd_client.c:346:
+		dout("get_osd %p FAIL\n", osd);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'get_osd', this function's name, in a string
#411: FILE: fs/ceph/osd_client.c:346:
+		dout("get_osd %p FAIL\n", osd);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#418: FILE: fs/ceph/osd_client.c:353:
+	dout("put_osd %p %d -> %d\n", osd, atomic_read(&osd->o_ref),
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'put_osd', this function's name, in a string
#418: FILE: fs/ceph/osd_client.c:353:
+	dout("put_osd %p %d -> %d\n", osd, atomic_read(&osd->o_ref),

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#429: FILE: fs/ceph/osd_client.c:364:
+	dout("remove_osd %p\n", osd);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'remove_osd', this function's name, in a string
#429: FILE: fs/ceph/osd_client.c:364:
+	dout("remove_osd %p\n", osd);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#430: FILE: fs/ceph/osd_client.c:365:
+	BUG_ON(!list_empty(&osd->o_requests));

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#443: FILE: fs/ceph/osd_client.c:378:
+	dout("reset_osd %p osd%d\n", osd, osd->o_osd);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'reset_osd', this function's name, in a string
#443: FILE: fs/ceph/osd_client.c:378:
+	dout("reset_osd %p osd%d\n", osd, osd->o_osd);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#468: FILE: fs/ceph/osd_client.c:403:
+			BUG();

CHECK:LINE_SPACING: Please don't use multiple blank lines
#492: FILE: fs/ceph/osd_client.c:427:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#506: FILE: fs/ceph/osd_client.c:441:
+	dout("register_request %p tid %lld\n", req, req->r_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'register_request', this function's name, in a string
#506: FILE: fs/ceph/osd_client.c:441:
+	dout("register_request %p tid %lld\n", req, req->r_tid);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#512: FILE: fs/ceph/osd_client.c:447:
+		jiffies + osdc->client->mount_args->osd_timeout*HZ;
 		                                               ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#516: FILE: fs/ceph/osd_client.c:451:
+		dout("  timeout on tid %llu at %lu\n", req->r_tid,
 		^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#519: FILE: fs/ceph/osd_client.c:454:
+		schedule_delayed_work(&osdc->timeout_work,
+		      round_jiffies_relative(req->r_timeout_stamp - jiffies));

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#530: FILE: fs/ceph/osd_client.c:465:
+	dout("__unregister_request %p tid %lld\n", req, req->r_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using '__unregister_request', this function's name, in a string
#530: FILE: fs/ceph/osd_client.c:465:
+	dout("__unregister_request %p tid %lld\n", req, req->r_tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#548: FILE: fs/ceph/osd_client.c:483:
+			dout("no requests, canceling timeout\n");
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#555: FILE: fs/ceph/osd_client.c:490:
+			dout("rescheduled timeout on tid %llu at %lu\n",
 			^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#558: FILE: fs/ceph/osd_client.c:493:
+			schedule_delayed_work(&osdc->timeout_work,
+			      round_jiffies_relative(req->r_timeout_stamp -

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#593: FILE: fs/ceph/osd_client.c:528:
+	dout("map_osds %p tid %lld\n", req, req->r_tid);
 	^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_osd"
#603: FILE: fs/ceph/osd_client.c:538:
+	    (req->r_osd == NULL && o == -1))

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#606: FILE: fs/ceph/osd_client.c:541:
+	dout("map_osds tid %llu pgid %d.%x osd%d (was osd%d)\n",
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#633: FILE: fs/ceph/osd_client.c:568:
+		dout("map_osds osd %p is osd%d\n", req->r_osd, o);
 		^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_osd"
#663: FILE: fs/ceph/osd_client.c:598:
+	if (req->r_osd == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#664: FILE: fs/ceph/osd_client.c:599:
+		dout("send_request %p no up osds in pg\n", req);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#669: FILE: fs/ceph/osd_client.c:604:
+	dout("send_request %p tid %llu to osd%d flags %d\n",
 	^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#677: FILE: fs/ceph/osd_client.c:612:
+	req->r_timeout_stamp = jiffies+osdc->client->mount_args->osd_timeout*HZ;
 	                              ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#677: FILE: fs/ceph/osd_client.c:612:
+	req->r_timeout_stamp = jiffies+osdc->client->mount_args->osd_timeout*HZ;
 	                                                                    ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#704: FILE: fs/ceph/osd_client.c:639:
+	dout("timeout\n");
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#716: FILE: fs/ceph/osd_client.c:651:
+			dout("osdc resending prev failed %lld\n", req->r_tid);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#719: FILE: fs/ceph/osd_client.c:654:
+				dout("osdc failed again on %lld\n", req->r_tid);
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#734: FILE: fs/ceph/osd_client.c:669:
+		dout(" tid %llu (at least) timed out on osd%d\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#768: FILE: fs/ceph/osd_client.c:703:
+	dout("handle_reply %p tid %llu\n", msg, tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'handle_reply', this function's name, in a string
#768: FILE: fs/ceph/osd_client.c:703:
+	dout("handle_reply %p tid %llu\n", msg, tid);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req"
#773: FILE: fs/ceph/osd_client.c:708:
+	if (req == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#774: FILE: fs/ceph/osd_client.c:709:
+		dout("handle_reply tid %llu dne\n", tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dne' may be misspelled - perhaps 'done'?
#774: FILE: fs/ceph/osd_client.c:709:
+		dout("handle_reply tid %llu dne\n", tid);
 		                            ^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'handle_reply', this function's name, in a string
#774: FILE: fs/ceph/osd_client.c:709:
+		dout("handle_reply tid %llu dne\n", tid);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#792: FILE: fs/ceph/osd_client.c:727:
+		unsigned bytes;

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#796: FILE: fs/ceph/osd_client.c:731:
+		dout("handle_reply result %d bytes %d\n", req->r_result,
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'handle_reply', this function's name, in a string
#796: FILE: fs/ceph/osd_client.c:731:
+		dout("handle_reply result %d bytes %d\n", req->r_result,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#806: FILE: fs/ceph/osd_client.c:741:
+		dout("handle_reply tid %llu dup ack\n", tid);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'handle_reply', this function's name, in a string
#806: FILE: fs/ceph/osd_client.c:741:
+		dout("handle_reply tid %llu dup ack\n", tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#811: FILE: fs/ceph/osd_client.c:746:
+	dout("handle_reply tid %llu flags %d\n", tid, flags);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'handle_reply', this function's name, in a string
#811: FILE: fs/ceph/osd_client.c:746:
+	dout("handle_reply tid %llu flags %d\n", tid, flags);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#841: FILE: fs/ceph/osd_client.c:776:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#861: FILE: fs/ceph/osd_client.c:796:
+	dout("kick_requests osd%d\n", kickosd ? kickosd->o_osd : -1);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'kick_requests', this function's name, in a string
#861: FILE: fs/ceph/osd_client.c:796:
+	dout("kick_requests osd%d\n", kickosd ? kickosd->o_osd : -1);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#881: FILE: fs/ceph/osd_client.c:816:
+			dout(" r_resend set on tid %llu\n", req->r_tid);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#900: FILE: fs/ceph/osd_client.c:835:
+			dout(" setting r_resend on %llu\n", req->r_tid);
 			^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_osd"
#904: FILE: fs/ceph/osd_client.c:839:
+		if (req->r_osd == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#905: FILE: fs/ceph/osd_client.c:840:
+			dout("tid %llu maps to no valid osd\n", req->r_tid);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#911: FILE: fs/ceph/osd_client.c:846:
+		dout("kicking %p tid %llu osd%d\n", req, req->r_tid,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#916: FILE: fs/ceph/osd_client.c:851:
+			dout(" setting r_resend on %llu\n", req->r_tid);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#923: FILE: fs/ceph/osd_client.c:858:
+		dout("%d requests for down osds, need new map\n", needmap);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#944: FILE: fs/ceph/osd_client.c:879:
+	dout("handle_map have %u\n", osdc->osdmap ? osdc->osdmap->epoch : 0);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#958: FILE: fs/ceph/osd_client.c:893:
+	dout(" %d inc maps\n", nr_maps);
 	^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#960: FILE: fs/ceph/osd_client.c:895:
+		ceph_decode_need(&p, end, 2*sizeof(u32), bad);
 		                           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#965: FILE: fs/ceph/osd_client.c:900:
+		if (osdc->osdmap && osdc->osdmap->epoch+1 == epoch) {
 		                                       ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#966: FILE: fs/ceph/osd_client.c:901:
+			dout("applying incremental map %u len %d\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#980: FILE: fs/ceph/osd_client.c:915:
+			dout("ignoring incremental map %u len %d\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#991: FILE: fs/ceph/osd_client.c:926:
+	dout(" %d full maps\n", nr_maps);
 	^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#993: FILE: fs/ceph/osd_client.c:928:
+		ceph_decode_need(&p, end, 2*sizeof(u32), bad);
 		                           ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#998: FILE: fs/ceph/osd_client.c:933:
+			dout("skipping non-latest full map %u len %d\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1001: FILE: fs/ceph/osd_client.c:936:
+			dout("skipping full map %u len %d, "
 			^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#1002: FILE: fs/ceph/osd_client.c:937:
+			dout("skipping full map %u len %d, "
+			     "older than our %u\n", epoch, maplen,

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1005: FILE: fs/ceph/osd_client.c:940:
+			dout("taking full map %u len %d\n", epoch, maplen);
 			^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1006: FILE: fs/ceph/osd_client.c:941:
+			newmap = osdmap_decode(&p, p+maplen);
 			                            ^

WARNING:RETURN_VOID: void function return statements are not generally useful
#1032: FILE: fs/ceph/osd_client.c:967:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1034: FILE: fs/ceph/osd_client.c:969:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1056: FILE: fs/ceph/osd_client.c:991:
+	dout("prepare_pages on msg %p want %d\n", m, want);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'prepare_pages', this function's name, in a string
#1056: FILE: fs/ceph/osd_client.c:991:
+	dout("prepare_pages on msg %p want %d\n", m, want);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1064: FILE: fs/ceph/osd_client.c:999:
+		dout("prepare_pages unknown tid %llu\n", tid);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'prepare_pages', this function's name, in a string
#1064: FILE: fs/ceph/osd_client.c:999:
+		dout("prepare_pages unknown tid %llu\n", tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1067: FILE: fs/ceph/osd_client.c:1002:
+	dout("prepare_pages tid %llu has %d pages, want %d\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'prepare_pages', this function's name, in a string
#1067: FILE: fs/ceph/osd_client.c:1002:
+	dout("prepare_pages tid %llu has %d pages, want %d\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1107: FILE: fs/ceph/osd_client.c:1042:
+				dout("osdc_start_request failed send, "
 				^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#1108: FILE: fs/ceph/osd_client.c:1043:
+				dout("osdc_start_request failed send, "
+				     " marking %lld\n", req->r_tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1134: FILE: fs/ceph/osd_client.c:1069:
+		dout("wait_request tid %llu timed out\n", req->r_tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1138: FILE: fs/ceph/osd_client.c:1073:
+	dout("wait_request tid %llu result %d\n", req->r_tid, req->r_result);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1165: FILE: fs/ceph/osd_client.c:1100:
+		dout("sync waiting on tid %llu (last is %llu)\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1172: FILE: fs/ceph/osd_client.c:1107:
+	dout("sync done (thru tid %llu)\n", last_tid);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1182: FILE: fs/ceph/osd_client.c:1117:
+	dout("init\n");
 	^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1198: FILE: fs/ceph/osd_client.c:1133:
+	osdc->req_mempool = mempool_create_kmalloc_pool(10,
+					sizeof(struct ceph_osd_request));

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1243: FILE: fs/ceph/osd_client.c:1178:
+	dout("readpages on ino %llx.%llx on %llu~%llu\n", vino.ino,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1257: FILE: fs/ceph/osd_client.c:1192:
+	dout("readpages  final extent is %llu~%llu (%d pages)\n",
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1265: FILE: fs/ceph/osd_client.c:1200:
+	dout("readpages result %d\n", rc);
 	^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1284: FILE: fs/ceph/osd_client.c:1219:
+	BUG_ON(vino.snap != CEPH_NOSNAP);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1298: FILE: fs/ceph/osd_client.c:1233:
+	dout("writepages %llu~%llu (%d pages)\n", off, len,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1308: FILE: fs/ceph/osd_client.c:1243:
+	dout("writepages result %d\n", rc);
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1361: FILE: fs/ceph/osd_client.c:1296:
+	struct ceph_osd *osd = con->private;
+	if (get_osd(osd))

WARNING:LINE_SPACING: Missing a blank line after declarations
#1369: FILE: fs/ceph/osd_client.c:1304:
+	struct ceph_osd *osd = con->private;
+	put_osd(osd);

ERROR:CODE_INDENT: code indent should use tabs where possible
#1376: FILE: fs/ceph/osd_client.c:1311:
+^I                  void **buf, int *len, int *proto,$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1376: FILE: fs/ceph/osd_client.c:1311:
+static int get_authorizer(struct ceph_connection *con,
+	                  void **buf, int *len, int *proto,

ERROR:CODE_INDENT: code indent should use tabs where possible
#1377: FILE: fs/ceph/osd_client.c:1312:
+^I                  void **reply_buf, int *reply_len, int force_new)$

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!o->o_authorizer"
#1388: FILE: fs/ceph/osd_client.c:1323:
+	if (o->o_authorizer == NULL) {

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1389: FILE: fs/ceph/osd_client.c:1324:
+		ret = ac->ops->create_authorizer(

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 16)
#1396: FILE: fs/ceph/osd_client.c:1331:
+		if (ret)
+		return ret;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1408: FILE: fs/ceph/osd_client.c:1343:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1418: FILE: fs/ceph/osd_client.c:1353:
+
+

WARNING:STATIC_CONST: Move const after static - use 'static const struct ceph_connection_operations '
#1419: FILE: fs/ceph/osd_client.c:1354:
+const static struct ceph_connection_operations osd_con_ops = {

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1436: FILE: fs/ceph/osd_client.h:1:
+#ifndef _FS_CEPH_OSD_CLIENT_H

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1494: FILE: fs/ceph/osd_client.h:59:
+^Istruct inode *r_inode;         ^I      /* for use by callbacks */$

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1504: FILE: fs/ceph/osd_client.h:69:
+	unsigned          r_num_pages;        /* size of page array (follows) */

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#1518: FILE: fs/ceph/osd_client.h:83:
+	struct mutex           request_mutex;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1526: FILE: fs/ceph/osd_client.h:91:
+^Istruct dentry ^I       *debugfs_file;$

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1535: FILE: fs/ceph/osd_client.h:100:
+extern int ceph_osdc_init(struct ceph_osd_client *osdc,

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1537: FILE: fs/ceph/osd_client.h:102:
+extern void ceph_osdc_stop(struct ceph_osd_client *osdc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1539: FILE: fs/ceph/osd_client.h:104:
+extern void ceph_osdc_handle_reply(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1541: FILE: fs/ceph/osd_client.h:106:
+extern void ceph_osdc_handle_map(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1544: FILE: fs/ceph/osd_client.h:109:
+extern struct ceph_osd_request *ceph_osdc_new_request(struct ceph_osd_client *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_osd_client *' should also have an identifier name
#1544: FILE: fs/ceph/osd_client.h:109:
+extern struct ceph_osd_request *ceph_osdc_new_request(struct ceph_osd_client *,

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1545: FILE: fs/ceph/osd_client.h:110:
+extern struct ceph_osd_request *ceph_osdc_new_request(struct ceph_osd_client *,
+				      struct ceph_file_layout *layout,

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1558: FILE: fs/ceph/osd_client.h:123:
+}
+extern void ceph_osdc_put_request(struct ceph_osd_request *req);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1558: FILE: fs/ceph/osd_client.h:123:
+extern void ceph_osdc_put_request(struct ceph_osd_request *req);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1560: FILE: fs/ceph/osd_client.h:125:
+extern int ceph_osdc_start_request(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1563: FILE: fs/ceph/osd_client.h:128:
+extern int ceph_osdc_wait_request(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1565: FILE: fs/ceph/osd_client.h:130:
+extern void ceph_osdc_sync(struct ceph_osd_client *osdc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1567: FILE: fs/ceph/osd_client.h:132:
+extern int ceph_osdc_readpages(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1574: FILE: fs/ceph/osd_client.h:139:
+extern int ceph_osdc_writepages(struct ceph_osd_client *osdc,

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1592: FILE: fs/ceph/osdmap.c:1:
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1629: FILE: fs/ceph/osdmap.c:38:
+static int calc_bits_of(unsigned t)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1632: FILE: fs/ceph/osdmap.c:41:
+	int b = 0;
+	while (t) {

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1644: FILE: fs/ceph/osdmap.c:53:
+	pi->pg_num_mask = (1 << calc_bits_of(le32_to_cpu(pi->v.pg_num)-1)) - 1;
 	                                                              ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1646: FILE: fs/ceph/osdmap.c:55:
+		(1 << calc_bits_of(le32_to_cpu(pi->v.pgp_num)-1)) - 1;
 		                                             ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1648: FILE: fs/ceph/osdmap.c:57:
+		(1 << calc_bits_of(le32_to_cpu(pi->v.lpg_num)-1)) - 1;
 		                                             ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1650: FILE: fs/ceph/osdmap.c:59:
+		(1 << calc_bits_of(le32_to_cpu(pi->v.lpgp_num)-1)) - 1;
 		                                              ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1659: FILE: fs/ceph/osdmap.c:68:
+	dout("crush_decode_uniform_bucket %p to %p\n", *p, end);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode_uniform_bucket', this function's name, in a string
#1659: FILE: fs/ceph/osdmap.c:68:
+	dout("crush_decode_uniform_bucket %p to %p\n", *p, end);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1660: FILE: fs/ceph/osdmap.c:69:
+	ceph_decode_need(p, end, (1+b->h.size) * sizeof(u32), bad);
 	                           ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1671: FILE: fs/ceph/osdmap.c:80:
+	dout("crush_decode_list_bucket %p to %p\n", *p, end);
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1671: FILE: fs/ceph/osdmap.c:80:
+	int j;
+	dout("crush_decode_list_bucket %p to %p\n", *p, end);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode_list_bucket', this function's name, in a string
#1671: FILE: fs/ceph/osdmap.c:80:
+	dout("crush_decode_list_bucket %p to %p\n", *p, end);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->item_weights"
#1673: FILE: fs/ceph/osdmap.c:82:
+	if (b->item_weights == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->sum_weights"
#1676: FILE: fs/ceph/osdmap.c:85:
+	if (b->sum_weights == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1692: FILE: fs/ceph/osdmap.c:101:
+	dout("crush_decode_tree_bucket %p to %p\n", *p, end);
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1692: FILE: fs/ceph/osdmap.c:101:
+	int j;
+	dout("crush_decode_tree_bucket %p to %p\n", *p, end);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode_tree_bucket', this function's name, in a string
#1692: FILE: fs/ceph/osdmap.c:101:
+	dout("crush_decode_tree_bucket %p to %p\n", *p, end);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->node_weights"
#1695: FILE: fs/ceph/osdmap.c:104:
+	if (b->node_weights == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1709: FILE: fs/ceph/osdmap.c:118:
+	dout("crush_decode_straw_bucket %p to %p\n", *p, end);
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1709: FILE: fs/ceph/osdmap.c:118:
+	int j;
+	dout("crush_decode_straw_bucket %p to %p\n", *p, end);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode_straw_bucket', this function's name, in a string
#1709: FILE: fs/ceph/osdmap.c:118:
+	dout("crush_decode_straw_bucket %p to %p\n", *p, end);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->item_weights"
#1711: FILE: fs/ceph/osdmap.c:120:
+	if (b->item_weights == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->straws"
#1714: FILE: fs/ceph/osdmap.c:123:
+	if (b->straws == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1735: FILE: fs/ceph/osdmap.c:144:
+	dout("crush_decode %p to %p len %d\n", *p, end, (int)(end - *p));
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1735: FILE: fs/ceph/osdmap.c:144:
+	dout("crush_decode %p to %p len %d\n", *p, end, (int)(end - *p));

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c"
#1738: FILE: fs/ceph/osdmap.c:147:
+	if (c == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1741: FILE: fs/ceph/osdmap.c:150:
+	ceph_decode_need(p, end, 4*sizeof(u32), bad);
 	                          ^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1744: FILE: fs/ceph/osdmap.c:153:
+		pr_err("crush_decode magic %x != current %x\n",

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1745: FILE: fs/ceph/osdmap.c:154:
+		       (unsigned)magic, (unsigned)CRUSH_MAGIC);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1745: FILE: fs/ceph/osdmap.c:154:
+		       (unsigned)magic, (unsigned)CRUSH_MAGIC);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c->device_parents"
#1753: FILE: fs/ceph/osdmap.c:162:
+	if (c->device_parents == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c->bucket_parents"
#1756: FILE: fs/ceph/osdmap.c:165:
+	if (c->bucket_parents == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c->buckets"
#1760: FILE: fs/ceph/osdmap.c:169:
+	if (c->buckets == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c->rules"
#1763: FILE: fs/ceph/osdmap.c:172:
+	if (c->rules == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1777: FILE: fs/ceph/osdmap.c:186:
+		dout("crush_decode bucket %d off %x %p to %p\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1777: FILE: fs/ceph/osdmap.c:186:
+		dout("crush_decode bucket %d off %x %p to %p\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1778: FILE: fs/ceph/osdmap.c:187:
+		     i, (int)(*p-start), *p, end);
 		                ^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1796: FILE: fs/ceph/osdmap.c:205:
+		BUG_ON(size == 0);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1797: FILE: fs/ceph/osdmap.c:206:
+		b = c->buckets[i] = kzalloc(size, GFP_NOFS);

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b"
#1798: FILE: fs/ceph/osdmap.c:207:
+		if (b == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1801: FILE: fs/ceph/osdmap.c:210:
+		ceph_decode_need(p, end, 4*sizeof(u32), bad);
 		                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1809: FILE: fs/ceph/osdmap.c:218:
+		dout("crush_decode bucket size %d off %x %p to %p\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1809: FILE: fs/ceph/osdmap.c:218:
+		dout("crush_decode bucket size %d off %x %p to %p\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1810: FILE: fs/ceph/osdmap.c:219:
+		     b->size, (int)(*p-start), *p, end);
 		                      ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->items"
#1813: FILE: fs/ceph/osdmap.c:222:
+		if (b->items == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->perm"
#1816: FILE: fs/ceph/osdmap.c:225:
+		if (b->perm == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1820: FILE: fs/ceph/osdmap.c:229:
+		ceph_decode_need(p, end, b->size*sizeof(u32), bad);
 		                                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1827: FILE: fs/ceph/osdmap.c:236:
+			err = crush_decode_uniform_bucket(p, end,
+				  (struct crush_bucket_uniform *)b);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1833: FILE: fs/ceph/osdmap.c:242:
+			err = crush_decode_list_bucket(p, end,
+			       (struct crush_bucket_list *)b);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1839: FILE: fs/ceph/osdmap.c:248:
+			err = crush_decode_tree_bucket(p, end,
+				(struct crush_bucket_tree *)b);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1845: FILE: fs/ceph/osdmap.c:254:
+			err = crush_decode_straw_bucket(p, end,
+				(struct crush_bucket_straw *)b);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1853: FILE: fs/ceph/osdmap.c:262:
+	dout("rule vec is %p\n", c->rules);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1860: FILE: fs/ceph/osdmap.c:269:
+			dout("crush_decode NO rule %d off %x %p to %p\n",
 			^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1860: FILE: fs/ceph/osdmap.c:269:
+			dout("crush_decode NO rule %d off %x %p to %p\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1861: FILE: fs/ceph/osdmap.c:270:
+			     i, (int)(*p-start), *p, end);
 			                ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1866: FILE: fs/ceph/osdmap.c:275:
+		dout("crush_decode rule %d off %x %p to %p\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1866: FILE: fs/ceph/osdmap.c:275:
+		dout("crush_decode rule %d off %x %p to %p\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1867: FILE: fs/ceph/osdmap.c:276:
+		     i, (int)(*p-start), *p, end);
 		                ^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1875: FILE: fs/ceph/osdmap.c:284:
+		r = c->rules[i] = kmalloc(sizeof(*r) +

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1876: FILE: fs/ceph/osdmap.c:285:
+					  yes*sizeof(struct crush_rule_step),
 					     ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!r"
#1878: FILE: fs/ceph/osdmap.c:287:
+		if (r == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1880: FILE: fs/ceph/osdmap.c:289:
+		dout(" rule %d is at %p\n", i, r);
 		^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1883: FILE: fs/ceph/osdmap.c:292:
+		ceph_decode_need(p, end, r->len*3*sizeof(u32), bad);
 		                               ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1883: FILE: fs/ceph/osdmap.c:292:
+		ceph_decode_need(p, end, r->len*3*sizeof(u32), bad);
 		                                 ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1893: FILE: fs/ceph/osdmap.c:302:
+	dout("crush_decode success\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1893: FILE: fs/ceph/osdmap.c:302:
+	dout("crush_decode success\n");

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1899: FILE: fs/ceph/osdmap.c:308:
+	dout("crush_decode fail %d\n", err);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1899: FILE: fs/ceph/osdmap.c:308:
+	dout("crush_decode fail %d\n", err);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1904: FILE: fs/ceph/osdmap.c:313:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1910: FILE: fs/ceph/osdmap.c:319:
+	dout("osdmap_destroy %p\n", map);
 	^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!state"
#1934: FILE: fs/ceph/osdmap.c:343:
+	if (state == NULL || addr == NULL || weight == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!addr"
#1934: FILE: fs/ceph/osdmap.c:343:
+	if (state == NULL || addr == NULL || weight == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!weight"
#1934: FILE: fs/ceph/osdmap.c:343:
+	if (state == NULL || addr == NULL || weight == NULL) {

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1943: FILE: fs/ceph/osdmap.c:352:
+		memcpy(state, map->osd_state, map->max_osd*sizeof(*state));
 		                                          ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1944: FILE: fs/ceph/osdmap.c:353:
+		memcpy(addr, map->osd_addr, map->max_osd*sizeof(*addr));
 		                                        ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1945: FILE: fs/ceph/osdmap.c:354:
+		memcpy(weight, map->osd_weight, map->max_osd*sizeof(*weight));
 		                                            ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2009: FILE: fs/ceph/osdmap.c:418:
+	dout("osdmap_decode %p to %p len %d\n", *p, end, (int)(end - *p));
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#2009: FILE: fs/ceph/osdmap.c:418:
+	dout("osdmap_decode %p to %p len %d\n", *p, end, (int)(end - *p));

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!map"
#2012: FILE: fs/ceph/osdmap.c:421:
+	if (map == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2018: FILE: fs/ceph/osdmap.c:427:
+	ceph_decode_need(p, end, 2*sizeof(u64)+6*sizeof(u32), bad);
 	                          ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2018: FILE: fs/ceph/osdmap.c:427:
+	ceph_decode_need(p, end, 2*sizeof(u64)+6*sizeof(u32), bad);
 	                                      ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2018: FILE: fs/ceph/osdmap.c:427:
+	ceph_decode_need(p, end, 2*sizeof(u64)+6*sizeof(u32), bad);
 	                                        ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2033: FILE: fs/ceph/osdmap.c:442:
+		ceph_decode_need(p, end, 4+sizeof(map->pg_pool->v), bad);
 		                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2053: FILE: fs/ceph/osdmap.c:462:
+	dout("osdmap_decode max_osd = %d\n", map->max_osd);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#2053: FILE: fs/ceph/osdmap.c:462:
+	dout("osdmap_decode max_osd = %d\n", map->max_osd);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2057: FILE: fs/ceph/osdmap.c:466:
+	ceph_decode_need(p, end, 3*sizeof(u32) +
 	                          ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2058: FILE: fs/ceph/osdmap.c:467:
+			 map->max_osd*(1 + sizeof(*map->osd_weight) +
 			             ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2068: FILE: fs/ceph/osdmap.c:477:
+	ceph_decode_copy(p, map->osd_addr, map->max_osd*sizeof(*map->osd_addr));
 	                                               ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2083: FILE: fs/ceph/osdmap.c:492:
+		pg = kmalloc(sizeof(*pg) + n*sizeof(u32), GFP_NOFS);
 		                            ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2096: FILE: fs/ceph/osdmap.c:505:
+		dout(" added pg_temp %llx len %d\n", *(u64 *)&pgid, len);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2101: FILE: fs/ceph/osdmap.c:510:
+	dout("osdmap_decode crush len %d from off 0x%x\n", len,
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#2101: FILE: fs/ceph/osdmap.c:510:
+	dout("osdmap_decode crush len %d from off 0x%x\n", len,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2115: FILE: fs/ceph/osdmap.c:524:
+	dout("osdmap_decode done %p %p\n", *p, end);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#2115: FILE: fs/ceph/osdmap.c:524:
+	dout("osdmap_decode done %p %p\n", *p, end);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2119: FILE: fs/ceph/osdmap.c:528:
+	dout("osdmap_decode fail\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#2119: FILE: fs/ceph/osdmap.c:528:
+	dout("osdmap_decode fail\n");

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2145: FILE: fs/ceph/osdmap.c:554:
+	ceph_decode_need(p, end, sizeof(fsid)+sizeof(modified)+2*sizeof(u32),
 	                                     ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2145: FILE: fs/ceph/osdmap.c:554:
+	ceph_decode_need(p, end, sizeof(fsid)+sizeof(modified)+2*sizeof(u32),
 	                                                      ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2145: FILE: fs/ceph/osdmap.c:554:
+	ceph_decode_need(p, end, sizeof(fsid)+sizeof(modified)+2*sizeof(u32),
 	                                                        ^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2149: FILE: fs/ceph/osdmap.c:558:
+	BUG_ON(epoch != map->epoch+1);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2149: FILE: fs/ceph/osdmap.c:558:
+	BUG_ON(epoch != map->epoch+1);
 	                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2156: FILE: fs/ceph/osdmap.c:565:
+		dout("apply_incremental full map len %d, %p to %p\n",
 		^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2158: FILE: fs/ceph/osdmap.c:567:
+		newmap = osdmap_decode(p, min(*p+len, end));
 		                                ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2165: FILE: fs/ceph/osdmap.c:574:
+		dout("apply_incremental new crush map len %d, %p to %p\n",
 		^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2167: FILE: fs/ceph/osdmap.c:576:
+		newcrush = crush_decode(*p, min(*p+len, end));
 		                                  ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2176: FILE: fs/ceph/osdmap.c:585:
+	ceph_decode_need(p, end, 5*sizeof(u32), bad);
 	                          ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2211: FILE: fs/ceph/osdmap.c:620:
+			map->num_pools = pool+1;
 			                     ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#2228: FILE: fs/ceph/osdmap.c:637:
+		struct ceph_entity_addr addr;
+		ceph_decode_32_safe(p, end, osd, bad);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2232: FILE: fs/ceph/osdmap.c:641:
+		BUG_ON(osd >= map->max_osd);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2241: FILE: fs/ceph/osdmap.c:650:
+		u32 osd;
+		ceph_decode_32_safe(p, end, osd, bad);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2252: FILE: fs/ceph/osdmap.c:661:
+		u32 osd, off;
+		ceph_decode_need(p, end, sizeof(u32)*2, bad);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2252: FILE: fs/ceph/osdmap.c:661:
+		ceph_decode_need(p, end, sizeof(u32)*2, bad);
 		                                    ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2256: FILE: fs/ceph/osdmap.c:665:
+		pr_info("osd%d weight 0x%x %s\n", osd, off,
+		     off == CEPH_OSD_IN ? "(in)" :

WARNING:LINE_SPACING: Missing a blank line after declarations
#2270: FILE: fs/ceph/osdmap.c:679:
+		u32 pglen;
+		ceph_decode_need(p, end, sizeof(u64) + sizeof(u32), bad);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2278: FILE: fs/ceph/osdmap.c:687:
+			struct rb_node *cur = rbp;
+			rbp = rb_next(rbp);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2279: FILE: fs/ceph/osdmap.c:688:
+			dout(" removed pg_temp %llx\n",
 			^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2287: FILE: fs/ceph/osdmap.c:696:
+			ceph_decode_need(p, end, pglen*sizeof(u32), bad);
 			                              ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2288: FILE: fs/ceph/osdmap.c:697:
+			pg = kmalloc(sizeof(*pg) + sizeof(u32)*pglen, GFP_NOFS);
 			                                      ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2300: FILE: fs/ceph/osdmap.c:709:
+			dout(" added pg_temp %llx len %d\n", *(u64 *)&pgid,
 			^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#2306: FILE: fs/ceph/osdmap.c:715:
+		struct rb_node *cur = rbp;
+		rbp = rb_next(rbp);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2307: FILE: fs/ceph/osdmap.c:716:
+		dout(" removed pg_temp %llx\n",
 		^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2325: FILE: fs/ceph/osdmap.c:734:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2327: FILE: fs/ceph/osdmap.c:736:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2348: FILE: fs/ceph/osdmap.c:757:
+	dout("mapping %llu~%llu  osize %u fl_su %u\n", off, *plen,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2351: FILE: fs/ceph/osdmap.c:760:
+	dout("osize %u / su %u = su_per_object %u\n", osize, su,
 	^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2354: FILE: fs/ceph/osdmap.c:763:
+	BUG_ON((su & ~PAGE_MASK) != 0);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2359: FILE: fs/ceph/osdmap.c:768:
+	dout("off %llu / su %u = bl %u\n", off, su, bl);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2366: FILE: fs/ceph/osdmap.c:775:
+	dout("objset %u * sc %u = ono %u\n", objsetno, sc, (unsigned)*ono);
 	^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2366: FILE: fs/ceph/osdmap.c:775:
+	dout("objset %u * sc %u = ono %u\n", objsetno, sc, (unsigned)*ono);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2381: FILE: fs/ceph/osdmap.c:790:
+	dout(" obj extent %llu~%llu\n", *oxoff, *oxlen);
 	^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2393: FILE: fs/ceph/osdmap.c:802:
+	unsigned num, num_mask;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2398: FILE: fs/ceph/osdmap.c:807:
+	unsigned ps;

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2418: FILE: fs/ceph/osdmap.c:827:
+		dout("calc_object_layout '%s' pgid %d.%xp%d\n", oid, poolid, ps,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2421: FILE: fs/ceph/osdmap.c:830:
+		dout("calc_object_layout '%s' pgid %d.%x\n", oid, poolid, ps);
 		^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2439: FILE: fs/ceph/osdmap.c:848:
+	unsigned poolid, ps, pps;

CHECK:BRACES: braces {} should be used on all arms of this statement
#2447: FILE: fs/ceph/osdmap.c:856:
+		if (c < 0)
[...]
+		else if (c > 0)
[...]
+		else {
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#2451: FILE: fs/ceph/osdmap.c:860:
+		else {

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2504: FILE: fs/ceph/osdmap.c:913:
+			return osds[i];
+			break;

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2514: FILE: fs/ceph/osdmap.h:1:
+#ifndef _FS_CEPH_OSDMAP_H

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2565: FILE: fs/ceph/osdmap.h:52:
+	 * the list of osds that store+replicate them. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2584: FILE: fs/ceph/osdmap.h:71:
+static inline unsigned ceph_file_layout_stripe_width(struct ceph_file_layout *l)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2591: FILE: fs/ceph/osdmap.h:78:
+static inline unsigned ceph_file_layout_period(struct ceph_file_layout *l)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2597: FILE: fs/ceph/osdmap.h:84:
+
+

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2608: FILE: fs/ceph/osdmap.h:95:
+extern char *ceph_osdmap_state_str(char *str, int len, int state);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2618: FILE: fs/ceph/osdmap.h:105:
+extern struct ceph_osdmap *osdmap_decode(void **p, void *end);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2619: FILE: fs/ceph/osdmap.h:106:
+extern struct ceph_osdmap *osdmap_apply_incremental(void **p, void *end,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2620: FILE: fs/ceph/osdmap.h:107:
+extern struct ceph_osdmap *osdmap_apply_incremental(void **p, void *end,
+					    struct ceph_osdmap *map,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2622: FILE: fs/ceph/osdmap.h:109:
+extern void ceph_osdmap_destroy(struct ceph_osdmap *map);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2625: FILE: fs/ceph/osdmap.h:112:
+extern void ceph_calc_file_object_mapping(struct ceph_file_layout *layout,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2630: FILE: fs/ceph/osdmap.h:117:
+extern int ceph_calc_object_layout(struct ceph_object_layout *ol,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2634: FILE: fs/ceph/osdmap.h:121:
+extern int ceph_calc_pg_primary(struct ceph_osdmap *osdmap,

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000039611.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 2 errors, 175 warnings, 121 checks, 2554 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000039611.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
