CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'qp' may be better as '(qp)' to avoid precedence issues
#90: FILE: drivers/infiniband/hw/ehca/ehca_classes.h:157:
+#define IS_SRQ(qp) (qp->ext_type == EQPT_SRQ)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'qp' may be better as '(qp)' to avoid precedence issues
#91: FILE: drivers/infiniband/hw/ehca/ehca_classes.h:158:
+#define HAS_SQ(qp) (qp->ext_type != EQPT_SRQ)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'qp' may be better as '(qp)' to avoid precedence issues
#92: FILE: drivers/infiniband/hw/ehca/ehca_classes.h:159:
+#define HAS_RQ(qp) (qp->ext_type != EQPT_SRQBASE)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#129: FILE: drivers/infiniband/hw/ehca/ehca_classes_pSeries.h:231:
+#define MQPCB_MASK_CURR_SRQ_LIMIT               EHCA_BMASK_IBM(49,49)
                                                                  ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required after that ',' (ctx:VxV)
#130: FILE: drivers/infiniband/hw/ehca/ehca_classes_pSeries.h:232:
+#define MQPCB_CURR_SRQ_LIMIT                    EHCA_BMASK_IBM(16,31)
                                                                  ^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#272: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:406:
+		parms.ext_type = EQPT_SRQBASE;
 		^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#273: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:407:
+		parms.srq_qpn = my_srq->real_qp_num;
 		^^^^^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#274: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:408:
+		parms.srq_token = my_srq->token;
 		^^^^^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#284: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:418:
+		parms.ext_type = EQPT_SRQ;
 		^^^^^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#285: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:419:
+		parms.srq_limit = srq_init_attr->attr.srq_limit;
 		^^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#288: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:422:
+			ehca_err(pd->device, "no more than three SGEs "
+				 "supported for SRQ  pd=%p  max_sge=%x",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#302: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:469:
+	my_qp->ext_type = parms.ext_type;
 	                  ^^^^^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#324: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:521:
+		parms.send_cq_handle = my_qp->send_cq->ipz_cq_handle;
 		^^^^^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#326: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:523:
+		parms.recv_cq_handle = my_qp->recv_cq->ipz_cq_handle;
 		^^^^^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#335: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:538:
+	ib_qp_num = my_qp->real_qp_num = parms.real_qp_num;
 	                                 ^^^^^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#335: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:538:
+	ib_qp_num = my_qp->real_qp_num = parms.real_qp_num;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#361: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:597:
+		ret = init_qp_queue(

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#364: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:600:
+			parms.nr_sq_pages, swqe_size,
 			^^^^^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#365: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:601:
+			parms.act_nr_send_sges);
 			^^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#368: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:604:
+			ehca_err(pd->device, "Couldn't initialize squeue "
+				 "and pages  ret=%x", ret);

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#381: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:610:
+		ret = init_qp_queue(

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#383: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:612:
+			H_SUCCESS, parms.nr_rq_pages, rwqe_size,
 			           ^^^^^

WARNING:TYPO_SPELLING: 'parms' may be misspelled - perhaps 'params'?
#384: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:613:
+			parms.act_nr_recv_sges);
 			^^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#387: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:616:
+			ehca_err(pd->device, "Couldn't initialize rqueue "
+				 "and pages ret=%x", ret);

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#505: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:722:
+	return IS_ERR(ret) ? (struct ib_qp*)ret : &ret->ib_qp;

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#536: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:753:
+		return (struct ib_srq*)my_qp;

WARNING:SPLIT_STRING: quoted string split across lines
#546: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:763:
+		ehca_err(pd->device, "Could not get zeroed page for mqpcb "
+			 "ehca_qp=%p qp_num=%x ", my_qp, my_qp->real_qp_num);

WARNING:SPLIT_STRING: quoted string split across lines
#561: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:778:
+		ehca_err(pd->device, "Could not modify SRQ to INIT"
+			 "ehca_qp=%p qp_num=%x hret=%lx",

WARNING:MISSING_SPACE: break quoted strings at a space character
#561: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:778:
+		ehca_err(pd->device, "Could not modify SRQ to INIT"
+			 "ehca_qp=%p qp_num=%x hret=%lx",

WARNING:SPLIT_STRING: quoted string split across lines
#575: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:792:
+		ehca_err(pd->device, "Could not enable SRQ"
+			 "ehca_qp=%p qp_num=%x hret=%lx",

WARNING:MISSING_SPACE: break quoted strings at a space character
#575: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:792:
+		ehca_err(pd->device, "Could not enable SRQ"
+			 "ehca_qp=%p qp_num=%x hret=%lx",

WARNING:SPLIT_STRING: quoted string split across lines
#589: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:806:
+		ehca_err(pd->device, "Could not modify SRQ to RTR"
+			 "ehca_qp=%p qp_num=%x hret=%lx",

WARNING:MISSING_SPACE: break quoted strings at a space character
#589: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:806:
+		ehca_err(pd->device, "Could not modify SRQ to RTR"
+			 "ehca_qp=%p qp_num=%x hret=%lx",

WARNING:LINE_SPACING: Missing a blank line after declarations
#631: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1523:
+	u32 cur_pid = current->tgid;
+	if (my_pd->ib_pd.uobject && my_pd->ib_pd.uobject->context &&

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPLIT_STRING: quoted string split across lines
#641: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1533:
+		ehca_err(ibsrq->device, "Could not get zeroed page for mqpcb "
+			 "ehca_qp=%p qp_num=%x ", my_qp, my_qp->real_qp_num);

WARNING:SPLIT_STRING: quoted string split across lines
#660: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1552:
+		ehca_err(ibsrq->device, "invalid attribute mask bits set  "
+			 "attr_mask=%x", attr_mask);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#666: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1558:
+		ehca_dmp(mqpcb, 4*70, "qp_num=%x", my_qp->real_qp_num);
 		                 ^

WARNING:SPLIT_STRING: quoted string split across lines
#675: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1567:
+		ehca_err(ibsrq->device, "hipz_h_modify_qp() failed rc=%lx "
+			 "ehca_qp=%p qp_num=%x",

ERROR:SPACING: space required after that ',' (ctx:VxV)
#706: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1598:
+		ehca_err(srq->device,"Out of memory for qpcb "
 		                    ^

WARNING:SPLIT_STRING: quoted string split across lines
#707: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1599:
+		ehca_err(srq->device,"Out of memory for qpcb "
+			 "ehca_qp=%p qp_num=%x", my_qp, my_qp->real_qp_num);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#716: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1608:
+		ehca_err(srq->device,"hipz_h_query_qp() failed "
 		                    ^

WARNING:SPLIT_STRING: quoted string split across lines
#717: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1609:
+		ehca_err(srq->device,"hipz_h_query_qp() failed "
+			 "ehca_qp=%p qp_num=%x h_ret=%lx",

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#723: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1615:
+	srq_attr->srq_limit = EHCA_BMASK_GET(

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#727: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1619:
+		ehca_dmp(qpcb, 4*70, "qp_num=%x", my_qp->real_qp_num);
 		                ^

WARNING:SPLIT_STRING: quoted string split across lines
#757: FILE: drivers/infiniband/hw/ehca/ehca_qp.c:1645:
+			ehca_err(dev, "Resources still referenced in "
+				 "user space qp_num=%x", qp_num);

WARNING:SPLIT_STRING: quoted string split across lines
#881: FILE: drivers/infiniband/hw/ehca/ehca_reqs.c:450:
+				ehca_err(dev, "Too many posted WQEs "
+					 "qp_num=%x", my_qp->real_qp_num);

WARNING:SPLIT_STRING: quoted string split across lines
#892: FILE: drivers/infiniband/hw/ehca/ehca_reqs.c:466:
+				ehca_err(dev, "Could not write WQE "
+					 "qp_num=%x", my_qp->real_qp_num);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#1026: FILE: drivers/infiniband/hw/ehca/hipz_hw.h:166:
+#define QPX_AAELOG_RESET_SRQ_LIMIT EHCA_BMASK_IBM(3,3)
                                                    ^

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000408989.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 7 errors, 32 warnings, 9 checks, 902 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000408989.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
