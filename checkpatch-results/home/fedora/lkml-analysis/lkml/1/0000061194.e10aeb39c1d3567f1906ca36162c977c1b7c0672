WARNING:EMAIL_SUBJECT: A patch subject line should describe the change not the tool that found it
#17: 
Subject: checkpatch is not detecting bad whitespacing when using macros on

Naming the tool that found the issue is not very useful in the
subject line.  A good subject line summarizes the change that
the patch brings.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#describe-your-changes

WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#38: 
cx23888-ir-part2_2.patch has no obvious style problems and is ready for submission.

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#52: 
#126: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:123:

Commit log lines starting with a '#' are ignored by git as
comments.  To solve this problem addition of a single space
infront of the log line is enough.

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#56: 
#131: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:128:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#60: 
#134: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:131:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#64: 
#138: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:135:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#68: 
#316: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:285:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#72: 
#794: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:763:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#76: 
#796: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:765:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#80: 
#811: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:780:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#84: 
#860: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:829:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#88: 
#953: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:922:

WARNING:COMMIT_COMMENT_SYMBOL: Commit log lines starting with '#' are dropped by git as comments
#92: 
#955: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:924:

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#221: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:111:
+#define CX23888_IR_REFCLK_FREQ	(CX23888_VIDCLK_FREQ/2)
                               	                    ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#233: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:123:
+	struct mutex rx_params_lock;

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#238: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:128:
+	spinlock_t rx_kfifo_lock;

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#241: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:131:
+	struct mutex tx_params_lock;

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#245: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:135:
+	spinlock_t tx_kfifo_lock;

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#307: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:169:
+ * ^I(0xffff + 1) * 1000 / 108/2 MHz = 1,213,629.629... ns$

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#312: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:174:
+	if (d > RXCLK_RCD+1)
 	                 ^

CHECK:SPACING: No space is necessary after a cast
#318: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:180:
+	return (u16) d;

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#323: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:185:
+	return count_to_clock_divider(

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#324: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:186:
+		  DIV_ROUND_CLOSEST(CX23888_IR_REFCLK_FREQ/1000000 * ns, 1000));
 		                                          ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#331: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:193:
+				 CX23888_IR_REFCLK_FREQ/1000000);
 				                       ^

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#336: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:198:
+	return count_to_clock_divider(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#348: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:210:
+	return count_to_clock_divider(

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#363: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:225:
+ * ^I0xffff * 1000 / 108/2 MHz = 1,213,611.11... ns$

CHECK:SPACING: No space is necessary after a cast
#372: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:234:
+	return (u16) d;

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#377: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:239:
+	return count_to_lpf_count(

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#378: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:240:
+		  DIV_ROUND_CLOSEST(CX23888_IR_REFCLK_FREQ/1000000 * ns, 1000));
 		                                          ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#384: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:246:
+	return DIV_ROUND_CLOSEST(count * 1000, CX23888_IR_REFCLK_FREQ/1000000);
 	                                                             ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#390: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:252:
+	return DIV_ROUND_CLOSEST(count, CX23888_IR_REFCLK_FREQ/1000000);
 	                                                      ^

WARNING:REPEATED_WORD: Possible repeated word: 'of'
#400: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:262:
+	 * Resolution is the duration of 1 tick of the readable portion of
+	 * of the pulse width counter as read from the FIFO.  The two lsb's are

CHECK:SPACING: No space is necessary after a cast
#403: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:265:
+	return DIV_ROUND_CLOSEST((1 << 2)  * ((u32) divider + 1) * 1000,

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#404: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:266:
+				 CX23888_IR_REFCLK_FREQ/1000000);
 				                       ^

CHECK:SPACING: No space is necessary after a cast
#416: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:278:
+	n = (((u64) count << 2) | 0x3) * (divider + 1) * 1000; /* millicycles */

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#417: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:279:
+	rem = do_div(n, CX23888_IR_REFCLK_FREQ/1000000);       /* / MHz => ns */
 	                                      ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#418: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:280:
+	if (rem >= CX23888_IR_REFCLK_FREQ/1000000/2)
 	                                 ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#418: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:280:
+	if (rem >= CX23888_IR_REFCLK_FREQ/1000000/2)
 	                                         ^

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#423: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:285:
+#if 0

WARNING:TYPO_SPELLING: 'accessable' may be misspelled - perhaps 'accessible'?
#432: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:294:
+	 * The 2 lsb's of the pulse width timer count are not accessable, hence
 	                                                      ^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:SPACING: No space is necessary after a cast
#435: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:297:
+	n = ((u64) ns) * CX23888_IR_REFCLK_FREQ/1000000; /* millicycles */

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#435: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:297:
+	n = ((u64) ns) * CX23888_IR_REFCLK_FREQ/1000000; /* millicycles */
 	                                       ^

CHECK:SPACING: No space is necessary after a cast
#436: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:298:
+	d = (1 << 2) * ((u32) divider + 1) * 1000; /* millicycles/count */

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#438: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:300:
+	if (rem >= d/2)
 	            ^

CHECK:SPACING: No space is necessary after a cast
#445: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:307:
+	return (u16) n;

CHECK:SPACING: No space is necessary after a cast
#458: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:320:
+	n = (((u64) count << 2) | 0x3) * (divider + 1);  /* cycles      */

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#459: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:321:
+	rem = do_div(n, CX23888_IR_REFCLK_FREQ/1000000); /* / MHz => us */
 	                                      ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#460: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:322:
+	if (rem >= CX23888_IR_REFCLK_FREQ/1000000/2)
 	                                 ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#460: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:322:
+	if (rem >= CX23888_IR_REFCLK_FREQ/1000000/2)
 	                                         ^

CHECK:SPACING: No space is necessary after a cast
#462: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:324:
+	return (unsigned int) n;

CHECK:SPACING: No space is necessary after a cast
#477: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:339:
+	clocks = CX23888_IR_REFCLK_FREQ/1000000 * (u64) ns; /* millicycles    */

WARNING:LINE_SPACING: Missing a blank line after declarations
#477: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:339:
+	u32 rem;
+	clocks = CX23888_IR_REFCLK_FREQ/1000000 * (u64) ns; /* millicycles    */

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#477: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:339:
+	clocks = CX23888_IR_REFCLK_FREQ/1000000 * (u64) ns; /* millicycles    */
 	                               ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#479: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:341:
+	if (rem >= 1000/2)
 	               ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#491: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:353:
+	if (count > RXCLK_RCD+1)
 	                     ^

CHECK:SPACING: No space is necessary after a cast
#497: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:359:
+	return (u16) count;

CHECK:SPACING: No space is necessary after a cast
#622: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:484:
+	return (u32) pulse_width_count_to_ns(FIFO_RXTX, *divider);

CHECK:SPACING: No space is necessary after a cast
#635: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:497:
+	return (u32) pulse_width_count_to_ns(FIFO_RXTX, *divider);

WARNING:LINE_SPACING: Missing a blank line after declarations
#645: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:507:
+	u32 n;
+	n = DIV_ROUND_CLOSEST(duty_cycle * 100, 625); /* 16ths of 100% */

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#651: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:513:
+	return DIV_ROUND_CLOSEST((n+1) * 100, 16);
 	                           ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#660: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:522:
+	u32 count = ns_to_lpf_count(min_width_ns);
+	cx23888_ir_write4(dev, CX23888_IR_FILTR_REG, count);

WARNING:TYPO_SPELLING: 'Reuqest' may be misspelled - perhaps 'Request'?
#704: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:566:
+	rse = irqen & IRQEN_RSE; /* Rx FIFO Service Reuqest IRQ Enable */
 	                                            ^^^^^^^

CHECK:SPACING: No space is necessary after a cast
#761: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:623:
+				      (unsigned char *) rx_data, j);

WARNING:TYPO_SPELLING: 'reseting' may be misspelled - perhaps 'resetting'?
#792: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:654:
+		/* Clear STATS_ROR & STATS_RTO as needed by reseting hardware */
 		                                            ^^^^^^^^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#797: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:659:
+	if (kfifo_len(state->rx_kfifo) >= CX23888_IR_RX_KFIFO_SIZE/2)
 	                                                          ^

CHECK:SPACING: No space is necessary after a cast
#810: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:672:
+	bool invert = (bool) atomic_read(&state->rx_invert);

CHECK:SPACING: No space is necessary after a cast
#811: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:673:
+	u16 divider = (u16) atomic_read(&state->rxclk_divider);

CHECK:SPACING: No space is necessary after a cast
#828: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:690:
+	for (p = (u32 *) buf, i = 0; i < n; p++, i++) {

CHECK:SPACING: No space is necessary after a cast
#839: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:701:
+		v = (u32) pulse_width_count_to_ns((u16) (*p & FIFO_RXTX),

WARNING:LINE_SPACING: Missing a blank line after declarations
#856: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:718:
+	struct cx23888_ir_state *state = to_state(sd);
+	mutex_lock(&state->rx_params_lock);

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#895: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:757:
+		return -ENOSYS;

ENOSYS means that a nonexistent system call was called.
Earlier, it was wrongly used for things like invalid operations on
otherwise valid syscalls.  This should be avoided in new code.

See: https://lore.kernel.org/lkml/5eb299021dec23c1a48fa7d9f2c8b794e967766d.1408730669.git.luto@amacapital.net/

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#901: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:763:
+	o->mode = p->mode = V4L2_SUBDEV_IR_MODE_PULSE_WIDTH;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#903: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:765:
+	o->bytes_per_data_element = p->bytes_per_data_element = sizeof(u32);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#918: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:780:
+		o->duty_cycle = p->duty_cycle = 50;

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#967: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:829:
+#if 0

CHECK:SPACING: No space is necessary after a cast
#978: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:840:
+	u32 *ns_pulse = (u32 *) buf;

CHECK:SPACING: No space is necessary after a cast
#985: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:847:
+	n = min(n, (unsigned int) count);

WARNING:MINMAX: min() should probably be min_t(unsigned int, n, count)
#985: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:847:
+	n = min(n, (unsigned int) count);

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#992: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:854:
+		for (j = 0; j < FIFO_TX_DEPTH/2 && i < n; j++) {
 		                             ^

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#994: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:856:
+			fifo_pulse[j] = ns_to_pulse_width_count(

CHECK:SPACING: No space is necessary after a cast
#1002: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:864:
+		kfifo_put(state->tx_kfifo, (u8 *) fifo_pulse, j * sizeof(u32));

WARNING:LINE_SPACING: Missing a blank line after declarations
#1017: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:879:
+	struct cx23888_ir_state *state = to_state(sd);
+	mutex_lock(&state->tx_params_lock);

WARNING:ENOSYS: ENOSYS means 'invalid syscall nr' and nothing else
#1054: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:916:
+		return -ENOSYS;

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1060: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:922:
+	o->mode = p->mode = V4L2_SUBDEV_IR_MODE_PULSE_WIDTH;

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1062: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:924:
+	o->bytes_per_data_element = p->bytes_per_data_element = sizeof(u32);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1108: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:970:
+
+

WARNING:SPLIT_STRING: quoted string split across lines
#1187: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:1046:
+		v4l2_info(sd, "\tNext carrier edge window:          16 clocks "
+			  "-%1d/+%1d, %u to %u Hz\n", i, j,

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#1192: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:1051:
+		v4l2_info(sd, "\tMax measurable pulse width:        %u us, "
+			  "%llu ns\n",

WARNING:SPLIT_STRING: quoted string split across lines
#1200: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:1059:
+		v4l2_info(sd, "\tMin acceptable pulse width (LPF):  %u us, "
+			  "%u ns\n",

WARNING:SPLIT_STRING: quoted string split across lines
#1236: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:1095:
+		v4l2_info(sd, "\tMax pulse width:                   %u us, "
+			  "%llu ns\n",

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!state->rx_kfifo"
#1318: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:1238:
+	if (state->rx_kfifo == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!state->tx_kfifo"
#1324: FILE: linux/drivers/media/video/cx23885/cx23888-ir.c:1244:
+	if (state->tx_kfifo == NULL) {

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000061194.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 33 warnings, 60 checks, 1237 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000061194.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
