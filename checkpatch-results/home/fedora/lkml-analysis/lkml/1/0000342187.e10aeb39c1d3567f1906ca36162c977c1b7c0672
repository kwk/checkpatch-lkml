CHECK:LINE_SPACING: Please don't use multiple blank lines
#69: FILE: arch/cris/arch-v32/drivers/sync_serial.c:35:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#79: FILE: arch/cris/arch-v32/drivers/sync_serial.c:67:
+#define NBR_IN_DESCR (IN_BUFFER_SIZE/IN_DESCR_SIZE)
                                     ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#81: FILE: arch/cris/arch-v32/drivers/sync_serial.c:69:
+#define OUT_BUFFER_SIZE 1024*8
                             ^

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#81: FILE: arch/cris/arch-v32/drivers/sync_serial.c:69:
+#define OUT_BUFFER_SIZE 1024*8

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#104: FILE: arch/cris/arch-v32/drivers/sync_serial.c:106:
+	volatile unsigned char *volatile readp;

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#106: FILE: arch/cris/arch-v32/drivers/sync_serial.c:108:
+	volatile unsigned char *volatile writep;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#118: FILE: arch/cris/arch-v32/drivers/sync_serial.c:120:
+	 * transfer is active */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#130: FILE: arch/cris/arch-v32/drivers/sync_serial.c:131:
+	 * or current position in out_buffer if not using DMA. */

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __aligned(16) over __attribute__((__aligned__(16)))
#136: FILE: arch/cris/arch-v32/drivers/sync_serial.c:137:
+	dma_descr_data in_descr[NBR_IN_DESCR] __attribute__ ((__aligned__(16)));

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __aligned(16) over __attribute__((__aligned__(16)))
#140: FILE: arch/cris/arch-v32/drivers/sync_serial.c:140:
+		__attribute__ ((__aligned__(16)));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#248: FILE: arch/cris/arch-v32/drivers/sync_serial.c:262:
+	if (register_chrdev(SYNC_SERIAL_MAJOR, "sync serial",
+			&sync_serial_fops) < 0) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#249: FILE: arch/cris/arch-v32/drivers/sync_serial.c:263:
+		printk(KERN_WARNING

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#260: FILE: arch/cris/arch-v32/drivers/sync_serial.c:271:
+		printk(KERN_WARNING

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#273: FILE: arch/cris/arch-v32/drivers/sync_serial.c:281:
+		printk(KERN_WARNING

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#283: FILE: arch/cris/arch-v32/drivers/sync_serial.c:290:
+	printk(KERN_INFO "ETRAX FS synchronous serial port driver\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#285: FILE: arch/cris/arch-v32/drivers/sync_serial.c:292:
+	printk(KERN_INFO "Artpec-3 synchronous serial port driver\n");

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: __always_unused or __maybe_unused is preferred over __attribute__((__unused__))
#294: FILE: arch/cris/arch-v32/drivers/sync_serial.c:300:
+	int __attribute__((unused)) i;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#302: FILE: arch/cris/arch-v32/drivers/sync_serial.c:307:
+	DEBUG(printk(KERN_DEBUG "Init sync serial port %d\n", portnbr));

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#319: FILE: arch/cris/arch-v32/drivers/sync_serial.c:323:
+	port->prev_rx_desc = &port->in_descr[NBR_IN_DESCR-1];
 	                                                 ^

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#327: FILE: arch/cris/arch-v32/drivers/sync_serial.c:354:
+#if 0

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#350: FILE: arch/cris/arch-v32/drivers/sync_serial.c:378:
+			(dma_descr_data *)virt_to_phys(&port->out_descr[i+1]);
 			                                                 ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#354: FILE: arch/cris/arch-v32/drivers/sync_serial.c:382:
+	port->out_descr[NBR_OUT_DESCR-1].next =
 	                             ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#359: FILE: arch/cris/arch-v32/drivers/sync_serial.c:387:
+	port->prev_tr_descr = &port->out_descr[NBR_OUT_DESCR-1];
 	                                                    ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#395: FILE: arch/cris/arch-v32/drivers/sync_serial.c:440:
+	DEBUG(printk(KERN_DEBUG "Open sync serial port %d\n", dev));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#401: FILE: arch/cris/arch-v32/drivers/sync_serial.c:444:
+		DEBUG(printk(KERN_DEBUG "Invalid minor %d\n", dev));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#409: FILE: arch/cris/arch-v32/drivers/sync_serial.c:451:
+		DEBUG(printk(KERN_DEBUG "Device is busy.. \n"));

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#409: FILE: arch/cris/arch-v32/drivers/sync_serial.c:451:
+		DEBUG(printk(KERN_DEBUG "Device is busy.. \n"));

CHECK:LINE_SPACING: Please don't use multiple blank lines
#413: FILE: arch/cris/arch-v32/drivers/sync_serial.c:455:
+
+

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#499: FILE: arch/cris/arch-v32/drivers/sync_serial.c:515:
+				} else if (crisv32_request_dma(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#514: FILE: arch/cris/arch-v32/drivers/sync_serial.c:525:
+				} else if (crisv32_request_dma(

CHECK:CAMELCASE: Avoid CamelCase: <FREQ_256kHz>
#671: FILE: arch/cris/arch-v32/drivers/sync_serial.c:698:
+					(1 << (freq - FREQ_256kHz)) - 1;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:BRACES: braces {} should be used on all arms of this statement
#832: FILE: arch/cris/arch-v32/drivers/sync_serial.c:814:
+		if (arg & NORMAL_SYNC) {
[...]
 		else if (arg & EARLY_SYNC)
[...]
+			frm_cfg.rec_delay = frm_cfg.tr_delay = 0;
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#838: FILE: arch/cris/arch-v32/drivers/sync_serial.c:819:
+			frm_cfg.rec_delay = frm_cfg.tr_delay = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:BRACES: braces {} should be used on all arms of this statement
#852: FILE: arch/cris/arch-v32/drivers/sync_serial.c:840:
+		if (arg & WORD_SIZE_8) {
[...]
+			dma_w_size = regk_dma_set_w_size1;
[...]
 			rec_cfg.sample_size = tr_cfg.sample_size = 11;
[...]

CHECK:LINE_SPACING: Please don't use multiple blank lines
#905: FILE: arch/cris/arch-v32/drivers/sync_serial.c:945:
 
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#909: FILE: arch/cris/arch-v32/drivers/sync_serial.c:949:
+		int en = gen_cfg.en;
+		gen_cfg.en = 0;

WARNING:TYPO_SPELLING: 'stoped' may be misspelled - perhaps 'stopped'?
#911: FILE: arch/cris/arch-v32/drivers/sync_serial.c:951:
+		/* ##### Should DMA be stoped before we change dma size? */
 		                       ^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#971: FILE: arch/cris/arch-v32/drivers/sync_serial.c:992:
+	DEBUGWRITE(printk(KERN_DEBUG "W d%d c %lu a: %p c: %p\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#998: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1006:
+		DEBUGWRITE(printk(KERN_DEBUG "sser%d full\n", dev));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1033: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1029:
+	DEBUGOUTBUF(printk(KERN_DEBUG "%-4d + %-4d = %-4d     %p %p %p\n",

WARNING:LINE_SPACING: Missing a blank line after declarations
#1101: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1057:
+		reg_sser_rw_intr_mask intr_mask;
+		intr_mask = REG_RD(sser, port->regi_sser, rw_intr_mask);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1112: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1068:
+		DEBUGWRITE(printk(KERN_DEBUG "w d%d c %lu  %08x\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1128: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1081:
+	DEBUGWRITE(printk(KERN_DEBUG "w d%d c %lu\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1155: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1127:
+		DEBUGREAD(printk(KERN_DEBUG "&"));

WARNING:TABSTOP: Statements should start on a tabstop
#1181: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1174:
+		 if (port->out_rd_ptr >= port->out_buffer + OUT_BUFFER_SIZE)

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (17, 25)
#1181: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1174:
+		 if (port->out_rd_ptr >= port->out_buffer + OUT_BUFFER_SIZE)
+			 port->out_rd_ptr = port->out_buffer;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1190: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1180:
+		int data = (*port->out_rd_ptr++) << 8;
+		data |= *port->out_rd_ptr++;

CHECK:SPACING: No space is necessary after a cast
#1259: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1223:
+	port->active_tr_descr->buf = (char *) virt_to_phys((char *) data);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1266: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1230:
+	DEBUGTRDMA(printk(KERN_DEBUG "Inserting eolr:%p eol@:%p\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1267: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1231:
+	DEBUGTRDMA(printk(KERN_DEBUG "Inserting eolr:%p eol@:%p\n",
+		port->prev_tr_descr, port->active_tr_descr));

CHECK:SPACING: No space is necessary after a cast
#1269: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1233:
+	port->active_tr_descr = phys_to_virt((int) port->active_tr_descr->next);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1283: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1245:
+		DMA_START_CONTEXT(port->regi_dmaout,
+			virt_to_phys((char *)&port->out_context));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1287: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1249:
+		DEBUGTRDMA(printk(KERN_DEBUG "dma s\n"););

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1290: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1252:
+		DEBUGTRDMA(printk(KERN_DEBUG "dma c\n"););

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1389: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1320:
+			 * datapointers forward. */

WARNING:LINE_SPACING: Missing a blank line after declarations
#1391: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1322:
+			int sent;
+			sent = port->catch_tr_descr->after -

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1393: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1324:
+			DEBUGTXINT(printk(KERN_DEBUG "%-4d - %-4d = %-4d\t"

CHECK:SPACING: No space is necessary after a cast
#1401: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1332:
+				phys_to_virt((int) port->catch_tr_descr->next);

CHECK:SPACING: No space is necessary after a cast
#1403: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1334:
+				phys_to_virt((int) port->catch_tr_descr->buf);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1417: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1348:
+				DEBUGOUTBUF(printk(KERN_DEBUG

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1423: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1354:
+				port->catch_tr_descr = phys_to_virt(

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1434: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1364:
+			DEBUGOUTBUF(printk(KERN_DEBUG

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1443: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1373:
+			 * may already be writing data there. */

CHECK:SPACING: No space is necessary after a cast
#1445: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1375:
+				phys_to_virt((int) port->catch_tr_descr->after);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1452: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1382:
+			DEBUGTXINT(printk(KERN_DEBUG

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_crit([subsystem]dev, ... then dev_crit(dev, ... then pr_crit(...  to printk(KERN_CRIT ...
#1457: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1387:
+				printk(KERN_CRIT "sync_ser: buffer not "

WARNING:SPLIT_STRING: quoted string split across lines
#1458: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1388:
+				printk(KERN_CRIT "sync_ser: buffer not "
+					"empty after eol.\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#1489: FILE: arch/cris/arch-v32/drivers/sync_serial.c:1422:
+				DEBUGRXINT(printk(KERN_DEBUG "!"));

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000342187.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 1 errors, 43 warnings, 24 checks, 1461 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000342187.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
