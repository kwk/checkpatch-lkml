WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#55: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#60: FILE: drivers/gpio/gpio-switch.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#107: FILE: drivers/gpio/gpio-switch.c:48:
+ * in sysfs access? */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#130: FILE: drivers/gpio/gpio-switch.c:71:
+		BUG();

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#145: FILE: drivers/gpio/gpio-switch.c:86:
+		BUG();

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "str"
#155: FILE: drivers/gpio/gpio-switch.c:96:
+	if (str != NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#157: FILE: drivers/gpio/gpio-switch.c:98:
+		dev_info(sw->dev, "(GPIO %d) is now %s\n", sw->gpio,
+			str[state]);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#172: FILE: drivers/gpio/gpio-switch.c:113:
+static ssize_t gpio_sw_state_store(struct device *dev,
+				struct device_attribute *attr,

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#188: FILE: drivers/gpio/gpio-switch.c:129:
+		sw->state = enable = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#190: FILE: drivers/gpio/gpio-switch.c:131:
+		sw->state = enable = 1;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#202: FILE: drivers/gpio/gpio-switch.c:143:
+static ssize_t gpio_sw_state_show(struct device *dev,
+				struct device_attribute *attr,

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'gpio_sw_state_show' to 'state_show' 'gpio_sw_state_store' to 'state_store'
#211: FILE: drivers/gpio/gpio-switch.c:152:
+}

The function names used in DEVICE_ATTR is unusual.
Typically, the store and show functions are used with <attr>_store and
<attr>_show, where <attr> is a named attribute variable of the device.

Consider the following examples::

  static DEVICE_ATTR(type, 0444, type_show, NULL);
  static DEVICE_ATTR(power, 0644, power_show, power_store);

The function names should preferably follow the above pattern.

See: https://www.kernel.org/doc/html/latest/driver-api/driver-model/device.html#attributes

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO | S_IWUSR' are not preferred. Consider using octal permissions '0644'.
#213: FILE: drivers/gpio/gpio-switch.c:154:
+static DEVICE_ATTR(state, S_IRUGO | S_IWUSR, gpio_sw_state_show,

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#217: FILE: drivers/gpio/gpio-switch.c:158:
+static ssize_t gpio_sw_type_show(struct device *dev,
+				struct device_attribute *attr, char *buf)

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'gpio_sw_type_show' to 'type_show'
#222: FILE: drivers/gpio/gpio-switch.c:163:
+}

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#224: FILE: drivers/gpio/gpio-switch.c:165:
+static DEVICE_ATTR(type, S_IRUGO, gpio_sw_type_show, NULL);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#227: FILE: drivers/gpio/gpio-switch.c:168:
+static ssize_t gpio_sw_direction_show(struct device *dev,
+				struct device_attribute *attr, char *buf)

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'gpio_sw_direction_show' to 'direction_show'
#235: FILE: drivers/gpio/gpio-switch.c:176:
+}

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#237: FILE: drivers/gpio/gpio-switch.c:178:
+static DEVICE_ATTR(direction, S_IRUGO, gpio_sw_direction_show, NULL);

CHECK:SPACING: No space is necessary after a cast
#275: FILE: drivers/gpio/gpio-switch.c:216:
+	struct gpio_sw *sw = (struct gpio_sw *) arg;

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "sw->notify"
#290: FILE: drivers/gpio/gpio-switch.c:231:
+	if (sw->notify != NULL)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#380: FILE: drivers/gpio/gpio-switch.c:321:
+		if ((gpio < 0 || sw->gpio != gpio) &&
+			(name == NULL || strcmp(sw->name, name) != 0))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!name"
#380: FILE: drivers/gpio/gpio-switch.c:321:
+			(name == NULL || strcmp(sw->name, name) != 0))

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!name"
#383: FILE: drivers/gpio/gpio-switch.c:324:
+		if (gpio < 0 || name == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "sw->notify"
#409: FILE: drivers/gpio/gpio-switch.c:350:
+	if (sw->notify != NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "find_switch"
#454: FILE: drivers/gpio/gpio-switch.c:395:
+	if (find_switch(sw->gpio, sw->name) != NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!drvdata"
#460: FILE: drivers/gpio/gpio-switch.c:401:
+	if (drvdata == NULL) {

WARNING:STRLCPY: Prefer strscpy over strlcpy - see: https://lore.kernel.org/r/CAHk-=wgfRnXz0W3D37d01q3JFkr_i_uTL=V6A6G1oUZcprmknw@mail.gmail.com/
#465: FILE: drivers/gpio/gpio-switch.c:406:
+	strlcpy(drvdata->name, sw->name, sizeof(drvdata->name));

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#493: FILE: drivers/gpio/gpio-switch.c:434:
+void gpio_switch_free(unsigned gpio)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "sw"
#499: FILE: drivers/gpio/gpio-switch.c:440:
+	if (sw != NULL) {

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#507: FILE: drivers/gpio/gpio-switch.c:448:
+static int add_switches(const struct gpio_switch **switches, unsigned count)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#509: FILE: drivers/gpio/gpio-switch.c:450:
+	unsigned i;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "pdata"
#534: FILE: drivers/gpio/gpio-switch.c:475:
+	if (pdata != NULL) {

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#575: FILE: drivers/gpio/gpio-switch.c:516:
+	 * been registered already, which isn't the way to go. */

WARNING:SPLIT_STRING: quoted string split across lines
#590: FILE: drivers/gpio/gpio-switch.c:531:
+MODULE_AUTHOR("Juha Yrjölä <juha.yrjola@nokia.com>, "
+	"Paul Mundt <paul.mundt@nokia.com, "

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:SPLIT_STRING: quoted string split across lines
#591: FILE: drivers/gpio/gpio-switch.c:532:
+	"Paul Mundt <paul.mundt@nokia.com, "
+	"Jani Nikula <ext-jani.1.nikula@nokia.com>");

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#600: FILE: include/linux/gpio-switch.h:1:
+/*

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#640: FILE: include/linux/gpio-switch.h:41:
+	 * inactive state to active state. */

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#652: FILE: include/linux/gpio-switch.h:53:
+	unsigned count;

WARNING:PREFER_IS_ENABLED: Prefer IS_ENABLED(<FOO>) to CONFIG_<FOO> || CONFIG_<FOO>_MODULE
#655: FILE: include/linux/gpio-switch.h:56:
+#if defined(CONFIG_GPIO_SWITCH) || defined(CONFIG_GPIO_SWITCH_MODULE)

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#657: FILE: include/linux/gpio-switch.h:58:
+extern int gpio_switch_request(const struct gpio_switch *sw);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#658: FILE: include/linux/gpio-switch.h:59:
+extern void gpio_switch_free(unsigned gpio);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#658: FILE: include/linux/gpio-switch.h:59:
+extern void gpio_switch_free(unsigned gpio);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#667: FILE: include/linux/gpio-switch.h:68:
+static inline void gpio_switch_free(unsigned gpio)

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000152013.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 24 warnings, 20 checks, 608 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000152013.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
