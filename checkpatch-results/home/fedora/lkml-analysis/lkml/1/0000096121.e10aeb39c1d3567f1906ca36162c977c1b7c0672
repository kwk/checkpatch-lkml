WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#67: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#72: FILE: fs/ceph/mds_client.c:1:
+

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:LINE_SPACING: Please don't use multiple blank lines
#102: FILE: fs/ceph/mds_client.c:31:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#152: FILE: fs/ceph/mds_client.c:81:
+			sizeof(u32)*le32_to_cpu(info->dirfrag->ndist);
 			           ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#194: FILE: fs/ceph/mds_client.c:123:
+		sizeof(u32)*le32_to_cpu(info->dir_dir->ndist);
 		           ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!info->dir_in"
#212: FILE: fs/ceph/mds_client.c:141:
+	if (info->dir_in == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#222: FILE: fs/ceph/mds_client.c:151:
+		ceph_decode_need(p, end, sizeof(u32)*2, bad);
 		                                    ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#227: FILE: fs/ceph/mds_client.c:156:
+		dout(20, "parsed dir dname '%.*s'\n", info->dir_dname_len[i],
 		^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#269: FILE: fs/ceph/mds_client.c:198:
+		err = parse_reply_info_trace(&p, p+len, info);
 		                                  ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#277: FILE: fs/ceph/mds_client.c:206:
+		err = parse_reply_info_dir(&p, p+len, info);
 		                                ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#304: FILE: fs/ceph/mds_client.c:233:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#322: FILE: fs/ceph/mds_client.c:251:
+	dout(30, "get_session %p %d -> %d\n", s,
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'get_session', this function's name, in a string
#322: FILE: fs/ceph/mds_client.c:251:
+	dout(30, "get_session %p %d -> %d\n", s,

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#323: FILE: fs/ceph/mds_client.c:252:
+	     atomic_read(&s->s_ref), atomic_read(&s->s_ref)+1);
 	                                                   ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#330: FILE: fs/ceph/mds_client.c:259:
+	dout(30, "put_session %p %d -> %d\n", s,
 	^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#331: FILE: fs/ceph/mds_client.c:260:
+	     atomic_read(&s->s_ref), atomic_read(&s->s_ref)-1);
 	                                                   ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!mdsc->sessions[mds]"
#344: FILE: fs/ceph/mds_client.c:273:
+	if (mds >= mdsc->max_sessions || mdsc->sessions[mds] == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#347: FILE: fs/ceph/mds_client.c:276:
+	dout(30, "lookup_mds_session %p %d -> %d\n", session,
 	^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#348: FILE: fs/ceph/mds_client.c:277:
+	     atomic_read(&session->s_ref), atomic_read(&session->s_ref)+1);
 	                                                               ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#353: FILE: fs/ceph/mds_client.c:282:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#384: FILE: fs/ceph/mds_client.c:313:
+	dout(10, "register_session mds%d\n", mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'register_session', this function's name, in a string
#384: FILE: fs/ceph/mds_client.c:313:
+	dout(10, "register_session mds%d\n", mds);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#386: FILE: fs/ceph/mds_client.c:315:
+		int newmax = 1 << get_count_order(mds+1);
 		                                     ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#389: FILE: fs/ceph/mds_client.c:318:
+		dout(50, "register_session realloc to %d\n", newmax);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'register_session', this function's name, in a string
#389: FILE: fs/ceph/mds_client.c:318:
+		dout(50, "register_session realloc to %d\n", newmax);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#390: FILE: fs/ceph/mds_client.c:319:
+		sa = kzalloc(newmax * sizeof(void *), GFP_NOFS);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!sa"
#391: FILE: fs/ceph/mds_client.c:320:
+		if (sa == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#411: FILE: fs/ceph/mds_client.c:340:
+	dout(10, "unregister_session mds%d %p\n", mds, mdsc->sessions[mds]);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'unregister_session', this function's name, in a string
#411: FILE: fs/ceph/mds_client.c:340:
+	dout(10, "unregister_session mds%d %p\n", mds, mdsc->sessions[mds]);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#431: FILE: fs/ceph/mds_client.c:360:
+	dout(10, "put_request %p %d -> %d\n", req,
 	^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#432: FILE: fs/ceph/mds_client.c:361:
+	     atomic_read(&req->r_ref), atomic_read(&req->r_ref)-1);
 	                                                       ^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#443: FILE: fs/ceph/mds_client.c:372:
+			iput(req->r_inode);
 			^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#449: FILE: fs/ceph/mds_client.c:378:
+			iput(req->r_target_inode);
 			^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#471: FILE: fs/ceph/mds_client.c:400:
+static struct ceph_mds_request *__lookup_request(struct ceph_mds_client *mdsc,
+					     u64 tid)

WARNING:LINE_SPACING: Missing a blank line after declarations
#474: FILE: fs/ceph/mds_client.c:403:
+	struct ceph_mds_request *req;
+	req = radix_tree_lookup(&mdsc->request_tree, tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#492: FILE: fs/ceph/mds_client.c:421:
+	dout(30, "__register_request %p tid %lld\n", req, req->r_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using '__register_request', this function's name, in a string
#492: FILE: fs/ceph/mds_client.c:421:
+	dout(30, "__register_request %p tid %lld\n", req, req->r_tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#509: FILE: fs/ceph/mds_client.c:438:
+	dout(30, "__unregister_request %p tid %lld\n", req, req->r_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using '__unregister_request', this function's name, in a string
#509: FILE: fs/ceph/mds_client.c:438:
+	dout(30, "__unregister_request %p tid %lld\n", req, req->r_tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#553: FILE: fs/ceph/mds_client.c:482:
+		dout(20, "choose_mds using resend_mds mds%d\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#585: FILE: fs/ceph/mds_client.c:514:
+					dout(20, "choose_mds %p %llx.%llx "
 					^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#586: FILE: fs/ceph/mds_client.c:515:
+					dout(20, "choose_mds %p %llx.%llx "
+					     "frag %u mds%d (%d/%d)\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#595: FILE: fs/ceph/mds_client.c:524:
+				 * look for the authoritative mds. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#600: FILE: fs/ceph/mds_client.c:529:
+					dout(20, "choose_mds %p %llx.%llx "
 					^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#601: FILE: fs/ceph/mds_client.c:530:
+					dout(20, "choose_mds %p %llx.%llx "
+					     "frag %u mds%d (auth)\n",

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#613: FILE: fs/ceph/mds_client.c:542:
+		 * for the child's dentry name */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#622: FILE: fs/ceph/mds_client.c:551:
+	dout(20, "choose_mds chose random mds%d\n", mds);
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#626: FILE: fs/ceph/mds_client.c:555:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#661: FILE: fs/ceph/mds_client.c:590:
+	dout(10, "open_session to mds%d (%s)\n", mds,
 	^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#703: FILE: fs/ceph/mds_client.c:632:
+static int iterate_session_caps(struct ceph_mds_session *session,
+				 int (*cb)(struct inode *, struct ceph_cap *,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#704: FILE: fs/ceph/mds_client.c:633:
+				 int (*cb)(struct inode *, struct ceph_cap *,
+					    void *), void *arg)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#710: FILE: fs/ceph/mds_client.c:639:
+	dout(10, "iterate_session_caps %p mds%d\n", session, session->s_mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'iterate_session_caps', this function's name, in a string
#710: FILE: fs/ceph/mds_client.c:639:
+	dout(10, "iterate_session_caps %p mds%d\n", session, session->s_mds);

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#718: FILE: fs/ceph/mds_client.c:647:
+		iput(inode);
 		^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#729: FILE: fs/ceph/mds_client.c:658:
+static int remove_session_caps_cb(struct inode *inode, struct ceph_cap *cap,
+				   void *arg)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#732: FILE: fs/ceph/mds_client.c:661:
+	dout(10, "removing cap %p, ci is %p, inode is %p\n",
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#732: FILE: fs/ceph/mds_client.c:661:
+	struct ceph_inode_info *ci = ceph_inode(inode);
+	dout(10, "removing cap %p, ci is %p, inode is %p\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#743: FILE: fs/ceph/mds_client.c:672:
+	dout(10, "remove_session_caps on %p\n", session);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'remove_session_caps', this function's name, in a string
#743: FILE: fs/ceph/mds_client.c:672:
+	dout(10, "remove_session_caps on %p\n", session);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#746: FILE: fs/ceph/mds_client.c:675:
+	BUG_ON(session->s_nr_caps > 0);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#764: FILE: fs/ceph/mds_client.c:693:
+		dout(0, "failed to reconnect %p cap %p (gen %d < session %d)\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#775: FILE: fs/ceph/mds_client.c:704:
+	dout(10, "wake_up_session_caps %p mds%d\n", session, session->s_mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wake_up_session_caps', this function's name, in a string
#775: FILE: fs/ceph/mds_client.c:704:
+	dout(10, "wake_up_session_caps %p mds%d\n", session, session->s_mds);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#793: FILE: fs/ceph/mds_client.c:722:
+		dout(1, "mds%d session caps stale\n", session->s_mds);
 		^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#796: FILE: fs/ceph/mds_client.c:725:
+	 * with its clients. */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#799: FILE: fs/ceph/mds_client.c:728:
+		dout(10, "send_renew_caps ignoring mds%d (%s)\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'send_renew_caps', this function's name, in a string
#799: FILE: fs/ceph/mds_client.c:728:
+		dout(10, "send_renew_caps ignoring mds%d (%s)\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#804: FILE: fs/ceph/mds_client.c:733:
+	dout(10, "send_renew_caps to mds%d (%s)\n", session->s_mds,
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'send_renew_caps', this function's name, in a string
#804: FILE: fs/ceph/mds_client.c:733:
+	dout(10, "send_renew_caps to mds%d (%s)\n", session->s_mds,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#805: FILE: fs/ceph/mds_client.c:734:
+	dout(10, "send_renew_caps to mds%d (%s)\n", session->s_mds,
+		ceph_mds_state_name(state));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#818: FILE: fs/ceph/mds_client.c:747:
+static void renewed_caps(struct ceph_mds_client *mdsc,
+		  struct ceph_mds_session *session, int is_renew)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#828: FILE: fs/ceph/mds_client.c:757:
+		mdsc->mdsmap->m_session_timeout*HZ;
 		                               ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#832: FILE: fs/ceph/mds_client.c:761:
+			dout(1, "mds%d caps renewed\n", session->s_mds);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#835: FILE: fs/ceph/mds_client.c:764:
+			dout(1, "mds%d caps still stale\n", session->s_mds);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#838: FILE: fs/ceph/mds_client.c:767:
+	dout(10, "renewed_caps mds%d ttl now %lu, was %s, now %s\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'renewed_caps', this function's name, in a string
#838: FILE: fs/ceph/mds_client.c:767:
+	dout(10, "renewed_caps mds%d ttl now %lu, was %s, now %s\n",

CHECK:LINE_SPACING: Please don't use multiple blank lines
#847: FILE: fs/ceph/mds_client.c:776:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#854: FILE: fs/ceph/mds_client.c:783:
+	dout(10, "request_close_session mds%d state %s seq %lld\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'request_close_session', this function's name, in a string
#854: FILE: fs/ceph/mds_client.c:783:
+	dout(10, "request_close_session mds%d state %s seq %lld\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#870: FILE: fs/ceph/mds_client.c:799:
+static int __close_session(struct ceph_mds_client *mdsc,
+			 struct ceph_mds_session *session)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#895: FILE: fs/ceph/mds_client.c:824:
+	dout(20, "trim_caps_cb %p cap %p mine %s oissued %s used %s\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'trim_caps_cb', this function's name, in a string
#895: FILE: fs/ceph/mds_client.c:824:
+	dout(20, "trim_caps_cb %p cap %p mine %s oissued %s used %s\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#911: FILE: fs/ceph/mds_client.c:840:
+		dout(20, "trim_caps_cb %p cap %p  pruned, count now %d\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'trim_caps_cb', this function's name, in a string
#911: FILE: fs/ceph/mds_client.c:840:
+		dout(20, "trim_caps_cb %p cap %p  pruned, count now %d\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#927: FILE: fs/ceph/mds_client.c:856:
+	dout(10, "trim_caps mds%d start: %d / %d, trim %d\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'trim_caps', this function's name, in a string
#927: FILE: fs/ceph/mds_client.c:856:
+	dout(10, "trim_caps mds%d start: %d / %d, trim %d\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#932: FILE: fs/ceph/mds_client.c:861:
+		dout(10, "trim_caps mds%d done: %d / %d, trimmed %d\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'trim_caps', this function's name, in a string
#932: FILE: fs/ceph/mds_client.c:861:
+		dout(10, "trim_caps mds%d done: %d / %d, trimmed %d\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#973: FILE: fs/ceph/mds_client.c:902:
+		dout(10, "add_cap_releases %p msg %p now %d\n", session, msg,
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'add_cap_releases', this function's name, in a string
#973: FILE: fs/ceph/mds_client.c:902:
+		dout(10, "add_cap_releases %p msg %p now %d\n", session, msg,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#989: FILE: fs/ceph/mds_client.c:918:
+			dout(10, " queueing non-full %p (%d)\n", msg,
 			^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#992: FILE: fs/ceph/mds_client.c:921:
+			list_move_tail(&msg->list_head,
+				      &session->s_cap_releases_done);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1007: FILE: fs/ceph/mds_client.c:936:
+static void send_cap_releases(struct ceph_mds_client *mdsc,
+		       struct ceph_mds_session *session)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1011: FILE: fs/ceph/mds_client.c:940:
+	dout(10, "send_cap_releases mds%d\n", session->s_mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'send_cap_releases', this function's name, in a string
#1011: FILE: fs/ceph/mds_client.c:940:
+	dout(10, "send_cap_releases mds%d\n", session->s_mds);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1017: FILE: fs/ceph/mds_client.c:946:
+		msg = list_first_entry(&session->s_cap_releases_done,
+				 struct ceph_msg, list_head);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1021: FILE: fs/ceph/mds_client.c:950:
+		dout(10, "send_cap_releases mds%d %p\n", session->s_mds, msg);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'send_cap_releases', this function's name, in a string
#1021: FILE: fs/ceph/mds_client.c:950:
+		dout(10, "send_cap_releases mds%d %p\n", session->s_mds, msg);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1061: FILE: fs/ceph/mds_client.c:990:
+	struct ceph_mds_request *first;
+	if (radix_tree_gang_lookup(&mdsc->request_tree,

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dentry"
#1084: FILE: fs/ceph/mds_client.c:1013:
+	if (dentry == NULL)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1091: FILE: fs/ceph/mds_client.c:1020:
+		struct inode *inode = temp->d_inode;
+		if (inode && ceph_snap(inode) == CEPH_SNAPDIR)

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#1096: FILE: fs/ceph/mds_client.c:1025:
+			break;
+		else

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!temp"
#1099: FILE: fs/ceph/mds_client.c:1028:
+		if (temp == NULL) {

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1107: FILE: fs/ceph/mds_client.c:1036:
+	path = kmalloc(len+1, GFP_NOFS);
 	                  ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!path"
#1108: FILE: fs/ceph/mds_client.c:1037:
+	if (path == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1116: FILE: fs/ceph/mds_client.c:1045:
+			dout(50, "build_path_dentry path+%d: %p SNAPDIR\n",
 			^^^^

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#1121: FILE: fs/ceph/mds_client.c:1050:
+			break;
+		} else {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1127: FILE: fs/ceph/mds_client.c:1056:
+			dout(50, "build_path_dentry path+%d: %p '%.*s'\n",
 			^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!temp"
#1133: FILE: fs/ceph/mds_client.c:1062:
+		if (temp == NULL) {

WARNING:SPLIT_STRING: quoted string split across lines
#1141: FILE: fs/ceph/mds_client.c:1070:
+		derr(1, "did not end path lookup where expected, "
+		     "namelen is %d, pos is %d\n", len, pos);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1143: FILE: fs/ceph/mds_client.c:1072:
+		/* presumably this is only possible if racing with a
+		   rename of one of the parent directories (we can not

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1145: FILE: fs/ceph/mds_client.c:1074:
+		   retrying should be harmless) */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1152: FILE: fs/ceph/mds_client.c:1081:
+	dout(10, "build_path_dentry on %p %d built %llx '%.*s'\n",
 	^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1200: FILE: fs/ceph/mds_client.c:1129:
+static int set_request_path_attr(struct inode *rinode, struct dentry *rdentry,
+				  const char *rpath, u64 rino,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1208: FILE: fs/ceph/mds_client.c:1137:
+		dout(10, " inode %p %llx.%llx\n", rinode, ceph_ino(rinode),
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1212: FILE: fs/ceph/mds_client.c:1141:
+		dout(10, " dentry %p %llx/%.*s\n", rdentry, *ino, *pathlen,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1218: FILE: fs/ceph/mds_client.c:1147:
+		dout(10, " path %.*s\n", *pathlen, rpath);
 		^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1244: FILE: fs/ceph/mds_client.c:1173:
+	ret = set_request_path_attr(req->r_inode, req->r_dentry,
+			      req->r_path1, req->r_ino1.ino,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1252: FILE: fs/ceph/mds_client.c:1181:
+	ret = set_request_path_attr(NULL, req->r_old_dentry,
+			      req->r_path2, req->r_ino2.ino,

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1260: FILE: fs/ceph/mds_client.c:1189:
+		pathlen1 + pathlen2 + 2*(sizeof(u32) + sizeof(u64));
 		                       ^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1306: FILE: fs/ceph/mds_client.c:1235:
+	BUG_ON(p > end);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1350: FILE: fs/ceph/mds_client.c:1279:
+	dout(10, "prepare_send_request %p tid %lld %s (attempt %d)\n", req,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1376: FILE: fs/ceph/mds_client.c:1305:
+	dout(20, " r_locked_dir = %p\n", req->r_locked_dir);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1400: FILE: fs/ceph/mds_client.c:1329:
+		dout(10, "do_request timed out\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1408: FILE: fs/ceph/mds_client.c:1337:
+		dout(30, "do_request no mds or not active, waiting for map\n");
 		^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1411: FILE: fs/ceph/mds_client.c:1340:
+					 mdsc->mdsmap->m_epoch+1);
 					                      ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1419: FILE: fs/ceph/mds_client.c:1348:
+	dout(30, "do_request mds%d session %p state %s\n", mds, session,
 	^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1427: FILE: fs/ceph/mds_client.c:1356:
+					 mdsc->mdsmap->m_epoch+1);
 					                      ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1477: FILE: fs/ceph/mds_client.c:1406:
+	dout(20, "kick_requests mds%d\n", mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'kick_requests', this function's name, in a string
#1477: FILE: fs/ceph/mds_client.c:1406:
+	dout(20, "kick_requests mds%d\n", mds);

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1483: FILE: fs/ceph/mds_client.c:1412:
+		nexttid = reqs[got-1]->r_tid + 1;
 		                  ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1491: FILE: fs/ceph/mds_client.c:1420:
+				dout(10, " kicking tid %llu\n", reqs[i]->r_tid);
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1502: FILE: fs/ceph/mds_client.c:1431:
+	dout(30, "submit_request on %p\n", req);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1519: FILE: fs/ceph/mds_client.c:1448:
+	dout(30, "do_request on %p\n", req);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1565: FILE: fs/ceph/mds_client.c:1494:
+	dout(30, "do_request %p done, result %d\n", req, err);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1597: FILE: fs/ceph/mds_client.c:1526:
+		dout(1, "handle_reply on unknown tid %llu\n", tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1601: FILE: fs/ceph/mds_client.c:1530:
+	dout(10, "handle_reply %p\n", req);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1607: FILE: fs/ceph/mds_client.c:1536:
+		dout(0, "got a dup %s reply on %llu from mds%d\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1626: FILE: fs/ceph/mds_client.c:1555:
+			dout(10, "got safe reply %llu, mds%d\n", tid, mds);
 			^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1627: FILE: fs/ceph/mds_client.c:1556:
+			BUG_ON(req->r_session == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_session"
#1627: FILE: fs/ceph/mds_client.c:1556:
+			BUG_ON(req->r_session == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_session"
#1642: FILE: fs/ceph/mds_client.c:1571:
+	if (req->r_session == NULL) {

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1648: FILE: fs/ceph/mds_client.c:1577:
+	BUG_ON(req->r_reply);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1667: FILE: fs/ceph/mds_client.c:1596:
+	dout(10, "handle_reply tid %lld result %d\n", tid, result);
 	^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1689: FILE: fs/ceph/mds_client.c:1618:
+		ceph_update_snap_trace(mdsc, rinfo->snapblob,
+			       rinfo->snapblob + rinfo->snapblob_len,

WARNING:RETURN_VOID: void function return statements are not generally useful
#1722: FILE: fs/ceph/mds_client.c:1651:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1724: FILE: fs/ceph/mds_client.c:1653:
+
+

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1746: FILE: fs/ceph/mds_client.c:1675:
+	ceph_decode_need(&p, end, sizeof(u64)+2*sizeof(u32), bad);
 	                                     ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1746: FILE: fs/ceph/mds_client.c:1675:
+	ceph_decode_need(&p, end, sizeof(u64)+2*sizeof(u32), bad);
 	                                       ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1755: FILE: fs/ceph/mds_client.c:1684:
+		dout(10, "forward %llu dne\n", tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dne' may be misspelled - perhaps 'done'?
#1755: FILE: fs/ceph/mds_client.c:1684:
+		dout(10, "forward %llu dne\n", tid);
 		                       ^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1760: FILE: fs/ceph/mds_client.c:1689:
+		dout(10, "forward %llu to mds%d - old seq %d <= %d\n",
 		^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1766: FILE: fs/ceph/mds_client.c:1695:
+		 * forwarded our message for us. */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1767: FILE: fs/ceph/mds_client.c:1696:
+		dout(10, "forward %llu to mds%d (mds%d fwded)\n", tid, next_mds,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1776: FILE: fs/ceph/mds_client.c:1705:
+		dout(10, "forward %llu to mds%d (we resend)\n", tid, next_mds);
 		^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1818: FILE: fs/ceph/mds_client.c:1747:
+		session->s_ttl = jiffies + HZ*mdsc->mdsmap->m_session_autoclose;
 		                             ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1823: FILE: fs/ceph/mds_client.c:1752:
+			dout(10, "handle_session no session for mds%d\n", mds);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1826: FILE: fs/ceph/mds_client.c:1755:
+		dout(10, "handle_session creating session for mds%d\n", mds);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1832: FILE: fs/ceph/mds_client.c:1761:
+	dout(2, "handle_session mds%d %s %p state %s seq %llu\n",
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1857: FILE: fs/ceph/mds_client.c:1786:
+		dout(1, "mds%d caps went stale, renewing\n", session->s_mds);
 		^^^^

WARNING:RETURN_VOID: void function return statements are not generally useful
#1887: FILE: fs/ceph/mds_client.c:1816:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1889: FILE: fs/ceph/mds_client.c:1818:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1899: FILE: fs/ceph/mds_client.c:1828:
+	dout(10, "replay_unsafe_requests mds%d\n", session->s_mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'replay_unsafe_requests', this function's name, in a string
#1899: FILE: fs/ceph/mds_client.c:1828:
+	dout(10, "replay_unsafe_requests mds%d\n", session->s_mds);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1919: FILE: fs/ceph/mds_client.c:1848:
+static int encode_caps_cb(struct inode *inode, struct ceph_cap *cap,
+				    void *arg)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around data->pp
#1924: FILE: fs/ceph/mds_client.c:1853:
+	void *p = *(data->pp);

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1933: FILE: fs/ceph/mds_client.c:1862:
+	dout(10, " adding %p ino %llx.%llx cap %p %lld %s\n",
 	^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1944: FILE: fs/ceph/mds_client.c:1873:
+			BUG_ON(err);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1950: FILE: fs/ceph/mds_client.c:1879:
+	ceph_decode_need(&p, end, pathlen+4, needmore);
 	                                 ^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1956: FILE: fs/ceph/mds_client.c:1885:
+	BUG_ON(p > end);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around data->pp
#1973: FILE: fs/ceph/mds_client.c:1902:
+	*(data->pp) = p;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1979: FILE: fs/ceph/mds_client.c:1908:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2005: FILE: fs/ceph/mds_client.c:1934:
+	dout(1, "reconnect to recovering mds%d\n", mds);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2024: FILE: fs/ceph/mds_client.c:1953:
+		dout(40, "estimating i need %d bytes for %d caps\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2027: FILE: fs/ceph/mds_client.c:1956:
+		dout(20, "no session for mds%d, will send short reconnect\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2049: FILE: fs/ceph/mds_client.c:1978:
+	dout(10, "session %p state %s\n", session,
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#2082: FILE: fs/ceph/mds_client.c:2011:
+		struct ceph_mds_snaprealm_reconnect *sr_rec;
+		got = radix_tree_gang_lookup(&mdsc->snap_realms,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2087: FILE: fs/ceph/mds_client.c:2016:
+		dout(10, " adding snap realm %llx seq %lld parent %llx\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2103: FILE: fs/ceph/mds_client.c:2032:
+	dout(10, "final len was %u (guessed %d)\n",
 	^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2104: FILE: fs/ceph/mds_client.c:2033:
+	     (unsigned)reply->front.iov_len, len);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2127: FILE: fs/ceph/mds_client.c:2056:
+	newlen = (len * (session->s_nr_caps+3)) / (num_caps + 1);
 	                                   ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2128: FILE: fs/ceph/mds_client.c:2057:
+	dout(30, "i guessed %d, and did %d of %d caps, retrying with %d\n",
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2135: FILE: fs/ceph/mds_client.c:2064:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2145: FILE: fs/ceph/mds_client.c:2074:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2161: FILE: fs/ceph/mds_client.c:2090:
+	dout(20, "check_new_map new %u old %u\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'check_new_map', this function's name, in a string
#2161: FILE: fs/ceph/mds_client.c:2090:
+	dout(20, "check_new_map new %u old %u\n",

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!mdsc->sessions[i]"
#2165: FILE: fs/ceph/mds_client.c:2094:
+		if (mdsc->sessions[i] == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2171: FILE: fs/ceph/mds_client.c:2100:
+		dout(20, "check_new_map mds%d state %s -> %s (session %s)\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'check_new_map', this function's name, in a string
#2171: FILE: fs/ceph/mds_client.c:2100:
+		dout(20, "check_new_map mds%d state %s -> %s (session %s)\n",

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2180: FILE: fs/ceph/mds_client.c:2109:
+			 * socket. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2186: FILE: fs/ceph/mds_client.c:2115:
+				 * out now */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2220: FILE: fs/ceph/mds_client.c:2149:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2255: FILE: fs/ceph/mds_client.c:2184:
+	dout(10, "handle_lease from mds%d\n", mds);
 	^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2265: FILE: fs/ceph/mds_client.c:2194:
+	if (dname.len != get_unaligned_le32(h+1))
 	                                     ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2282: FILE: fs/ceph/mds_client.c:2211:
+	dout(20, "handle_lease '%s', mask %d, ino %llx %p\n",
 	^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!inode"
#2284: FILE: fs/ceph/mds_client.c:2213:
+	if (inode == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2285: FILE: fs/ceph/mds_client.c:2214:
+		dout(10, "handle_lease no inode %llx\n", vino.ino);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2293: FILE: fs/ceph/mds_client.c:2222:
+		dout(10, "no parent dentry on inode %p\n", inode);
 		^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#2343: FILE: fs/ceph/mds_client.c:2272:
+	iput(inode);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2349: FILE: fs/ceph/mds_client.c:2278:
+	dout(0, "corrupt lease message\n");
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2362: FILE: fs/ceph/mds_client.c:2291:
+	dout(30, "lease_send_msg inode %p dentry %p %s to mds%d\n",
 	^^^^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2374: FILE: fs/ceph/mds_client.c:2303:
+	lease->first = lease->last = cpu_to_le64(ceph_vino(inode).snap);

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2400: FILE: fs/ceph/mds_client.c:2329:
+	BUG_ON(inode == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!inode"
#2400: FILE: fs/ceph/mds_client.c:2329:
+	BUG_ON(inode == NULL);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2401: FILE: fs/ceph/mds_client.c:2330:
+	BUG_ON(dentry == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dentry"
#2401: FILE: fs/ceph/mds_client.c:2330:
+	BUG_ON(dentry == NULL);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2402: FILE: fs/ceph/mds_client.c:2331:
+	BUG_ON(mask != CEPH_LOCK_DN);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2411: FILE: fs/ceph/mds_client.c:2340:
+		dout(10, "lease_release inode %p dentry %p -- "
 		^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#2412: FILE: fs/ceph/mds_client.c:2341:
+		dout(10, "lease_release inode %p dentry %p -- "
+		     "no lease on %d\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2424: FILE: fs/ceph/mds_client.c:2353:
+	dout(10, "lease_release inode %p dentry %p mask %d to mds%d\n",
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2430: FILE: fs/ceph/mds_client.c:2359:
+
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2437: FILE: fs/ceph/mds_client.c:2366:
+	unsigned hz = round_jiffies_relative(HZ * delay);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2438: FILE: fs/ceph/mds_client.c:2367:
+	unsigned hz = round_jiffies_relative(HZ * delay);
+	schedule_delayed_work(&mdsc->delayed_work, hz);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2450: FILE: fs/ceph/mds_client.c:2379:
+	dout(30, "delayed_work\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'delayed_work', this function's name, in a string
#2450: FILE: fs/ceph/mds_client.c:2379:
+	dout(30, "delayed_work\n");

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2455: FILE: fs/ceph/mds_client.c:2384:
+	renew_caps = time_after_eq(jiffies, HZ*renew_interval +
 	                                      ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#2462: FILE: fs/ceph/mds_client.c:2391:
+		struct ceph_mds_session *s = __ceph_lookup_mds_session(mdsc, i);
+		if (s == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!s"
#2462: FILE: fs/ceph/mds_client.c:2391:
+		if (s == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2465: FILE: fs/ceph/mds_client.c:2394:
+			dout(10, "resending session close request for mds%d\n",
 			^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#2473: FILE: fs/ceph/mds_client.c:2402:
+			derr(1, "mds%d session probably timed out, "
+			     "requesting mds map\n", s->s_mds);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2501: FILE: fs/ceph/mds_client.c:2430:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2541: FILE: fs/ceph/mds_client.c:2470:
+	dout(10, "drop_leases\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'drop_leases', this function's name, in a string
#2541: FILE: fs/ceph/mds_client.c:2470:
+	dout(10, "drop_leases\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2545: FILE: fs/ceph/mds_client.c:2474:
+		struct ceph_mds_session *s = __ceph_lookup_mds_session(mdsc, i);
+		if (!s)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2568: FILE: fs/ceph/mds_client.c:2497:
+		dout(10, "wait_requests waiting for requests\n");
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_requests', this function's name, in a string
#2568: FILE: fs/ceph/mds_client.c:2497:
+		dout(10, "wait_requests waiting for requests\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2570: FILE: fs/ceph/mds_client.c:2499:
+		wait_for_completion_timeout(&mdsc->safe_umount_waiters,
+				    client->mount_args.mount_timeout * HZ);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2576: FILE: fs/ceph/mds_client.c:2505:
+			dout(10, "wait_requests timed out on tid %llu\n",
 			^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_requests', this function's name, in a string
#2576: FILE: fs/ceph/mds_client.c:2505:
+			dout(10, "wait_requests timed out on tid %llu\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2583: FILE: fs/ceph/mds_client.c:2512:
+	dout(10, "wait_requests done\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_requests', this function's name, in a string
#2583: FILE: fs/ceph/mds_client.c:2512:
+	dout(10, "wait_requests done\n");

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2592: FILE: fs/ceph/mds_client.c:2521:
+	dout(10, "pre_umount\n");
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2609: FILE: fs/ceph/mds_client.c:2538:
+	dout(10, "check_cap_flush want %lld\n", want_flush_seq);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'check_cap_flush', this function's name, in a string
#2609: FILE: fs/ceph/mds_client.c:2538:
+	dout(10, "check_cap_flush want %lld\n", want_flush_seq);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2629: FILE: fs/ceph/mds_client.c:2558:
+				dout(10, "check_cap_flush still flushing %p "
 				^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'check_cap_flush', this function's name, in a string
#2629: FILE: fs/ceph/mds_client.c:2558:
+				dout(10, "check_cap_flush still flushing %p "

WARNING:SPLIT_STRING: quoted string split across lines
#2630: FILE: fs/ceph/mds_client.c:2559:
+				dout(10, "check_cap_flush still flushing %p "
+				     "seq %lld <= %lld to mds%d\n", inode,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2646: FILE: fs/ceph/mds_client.c:2575:
+	dout(10, "check_cap_flush ok, flushed thru %lld\n", want_flush_seq);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'check_cap_flush', this function's name, in a string
#2646: FILE: fs/ceph/mds_client.c:2575:
+	dout(10, "check_cap_flush ok, flushed thru %lld\n", want_flush_seq);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2660: FILE: fs/ceph/mds_client.c:2589:
+	dout(10, "wait_unsafe_requests want %lld\n", want_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_unsafe_requests', this function's name, in a string
#2660: FILE: fs/ceph/mds_client.c:2589:
+	dout(10, "wait_unsafe_requests want %lld\n", want_tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2675: FILE: fs/ceph/mds_client.c:2604:
+		dout(10, "wait_unsafe_requests  wait on %llu (want %llu)\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_unsafe_requests', this function's name, in a string
#2675: FILE: fs/ceph/mds_client.c:2604:
+		dout(10, "wait_unsafe_requests  wait on %llu (want %llu)\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2682: FILE: fs/ceph/mds_client.c:2611:
+	dout(10, "wait_unsafe_requests done\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_unsafe_requests', this function's name, in a string
#2682: FILE: fs/ceph/mds_client.c:2611:
+	dout(10, "wait_unsafe_requests done\n");

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2689: FILE: fs/ceph/mds_client.c:2618:
+	dout(10, "sync\n");
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2694: FILE: fs/ceph/mds_client.c:2623:
+	dout(10, "sync want tid %lld flush_seq %lld\n", want_tid, want_flush);
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2702: FILE: fs/ceph/mds_client.c:2631:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2714: FILE: fs/ceph/mds_client.c:2643:
+	dout(10, "close_sessions\n");
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2721: FILE: fs/ceph/mds_client.c:2650:
+		dout(10, "closing sessions\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2741: FILE: fs/ceph/mds_client.c:2670:
+		dout(10, "waiting for sessions to close\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2770: FILE: fs/ceph/mds_client.c:2699:
+	dout(10, "stopped\n");
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2775: FILE: fs/ceph/mds_client.c:2704:
+	dout(10, "stop\n");
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2782: FILE: fs/ceph/mds_client.c:2711:
+
+

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2796: FILE: fs/ceph/mds_client.c:2725:
+	ceph_decode_need(&p, end, sizeof(fsid)+2*sizeof(u32), bad);
 	                                      ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2796: FILE: fs/ceph/mds_client.c:2725:
+	ceph_decode_need(&p, end, sizeof(fsid)+2*sizeof(u32), bad);
 	                                        ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2804: FILE: fs/ceph/mds_client.c:2733:
+	dout(2, "handle_map epoch %u len %d\n", epoch, (int)maplen);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2810: FILE: fs/ceph/mds_client.c:2739:
+		dout(2, "handle_map epoch %u <= our %u\n",
 		^^^^

WARNING:RETURN_VOID: void function return statements are not generally useful
#2843: FILE: fs/ceph/mds_client.c:2772:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2845: FILE: fs/ceph/mds_client.c:2774:
+
+

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2853: FILE: fs/ceph/mds_client.h:1:
+#ifndef _FS_CEPH_MDS_CLIENT_H

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2944: FILE: fs/ceph/mds_client.h:92:
+	/* encoded blob describing snapshot contexts for certain
+	   operations (e.g., open) */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2944: FILE: fs/ceph/mds_client.h:92:
+	   operations (e.g., open) */

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_request *' should also have an identifier name
#3005: FILE: fs/ceph/mds_client.h:153:
+	ssize_t (*show)(struct ceph_mds_request *,

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_request_attr *' should also have an identifier name
#3005: FILE: fs/ceph/mds_client.h:153:
+	ssize_t (*show)(struct ceph_mds_request *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'char *' should also have an identifier name
#3005: FILE: fs/ceph/mds_client.h:153:
+	ssize_t (*show)(struct ceph_mds_request *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_request *' should also have an identifier name
#3008: FILE: fs/ceph/mds_client.h:156:
+	ssize_t (*store)(struct ceph_mds_request *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_request_attr *' should also have an identifier name
#3008: FILE: fs/ceph/mds_client.h:156:
+	ssize_t (*store)(struct ceph_mds_request *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'const char *' should also have an identifier name
#3008: FILE: fs/ceph/mds_client.h:156:
+	ssize_t (*store)(struct ceph_mds_request *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'size_t' should also have an identifier name
#3008: FILE: fs/ceph/mds_client.h:156:
+	ssize_t (*store)(struct ceph_mds_request *,

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3047: FILE: fs/ceph/mds_client.h:195:
+	unsigned long r_request_started; /* start time for mds request only,
+					    used to measure lease durations */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3047: FILE: fs/ceph/mds_client.h:195:
+					    used to measure lease durations */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3059: FILE: fs/ceph/mds_client.h:207:
+	 * the reply handler */

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#3127: FILE: fs/ceph/mds_client.h:275:
+^Istruct dentry ^I^I*debugfs_file;$

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#3129: FILE: fs/ceph/mds_client.h:277:
+	spinlock_t		dentry_lru_lock;

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3134: FILE: fs/ceph/mds_client.h:282:
+extern const char *ceph_mds_op_name(int op);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3136: FILE: fs/ceph/mds_client.h:284:
+extern struct ceph_mds_session *__ceph_lookup_mds_session(struct ceph_mds_client *, int mds);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_client *' should also have an identifier name
#3136: FILE: fs/ceph/mds_client.h:284:
+extern struct ceph_mds_session *__ceph_lookup_mds_session(struct ceph_mds_client *, int mds);

ERROR:INLINE_LOCATION: inline keyword should sit between storage class and type
#3138: FILE: fs/ceph/mds_client.h:286:
+inline static struct ceph_mds_session *

The inline keyword should sit between storage class and type.

For example, the following segment::

  inline static int example_function(void)
  {
          ...
  }

should be::

  static inline int example_function(void)
  {
          ...
  }

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3153: FILE: fs/ceph/mds_client.h:301:
+extern void ceph_put_mds_session(struct ceph_mds_session *s);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3155: FILE: fs/ceph/mds_client.h:303:
+extern void ceph_send_msg_mds(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3158: FILE: fs/ceph/mds_client.h:306:
+extern void ceph_mdsc_init(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3160: FILE: fs/ceph/mds_client.h:308:
+extern void ceph_mdsc_close_sessions(struct ceph_mds_client *mdsc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3161: FILE: fs/ceph/mds_client.h:309:
+extern void ceph_mdsc_stop(struct ceph_mds_client *mdsc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3163: FILE: fs/ceph/mds_client.h:311:
+extern void ceph_mdsc_sync(struct ceph_mds_client *mdsc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3165: FILE: fs/ceph/mds_client.h:313:
+extern void ceph_mdsc_handle_map(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3167: FILE: fs/ceph/mds_client.h:315:
+extern void ceph_mdsc_handle_session(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3169: FILE: fs/ceph/mds_client.h:317:
+extern void ceph_mdsc_handle_reply(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3171: FILE: fs/ceph/mds_client.h:319:
+extern void ceph_mdsc_handle_forward(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3174: FILE: fs/ceph/mds_client.h:322:
+extern void ceph_mdsc_handle_lease(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3177: FILE: fs/ceph/mds_client.h:325:
+extern void ceph_mdsc_lease_release(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3183: FILE: fs/ceph/mds_client.h:331:
+extern void ceph_mdsc_submit_request(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3185: FILE: fs/ceph/mds_client.h:333:
+extern int ceph_mdsc_do_request(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3188: FILE: fs/ceph/mds_client.h:336:
+extern void ceph_mdsc_put_request(struct ceph_mds_request *req);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3190: FILE: fs/ceph/mds_client.h:338:
+extern void ceph_mdsc_pre_umount(struct ceph_mds_client *mdsc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3192: FILE: fs/ceph/mds_client.h:340:
+extern void ceph_mdsc_handle_reset(struct ceph_mds_client *mdsc, int mds);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3194: FILE: fs/ceph/mds_client.h:342:
+extern struct ceph_mds_request *ceph_mdsc_get_listener_req(struct inode *inode,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3196: FILE: fs/ceph/mds_client.h:344:
+extern char *ceph_mdsc_build_path(struct dentry *dentry, int *plen, u64 *base,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3199: FILE: fs/ceph/mds_client.h:347:
+extern void __ceph_mdsc_drop_dentry_lease(struct dentry *dentry);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3200: FILE: fs/ceph/mds_client.h:348:
+extern void ceph_mdsc_lease_send_msg(struct ceph_mds_client *mdsc, int mds,

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#3212: FILE: fs/ceph/mdsmap.c:1:
+#include <linux/bug.h>

CHECK:LINE_SPACING: Please don't use multiple blank lines
#3229: FILE: fs/ceph/mdsmap.c:18:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!m"
#3268: FILE: fs/ceph/mdsmap.c:57:
+	if (m == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3271: FILE: fs/ceph/mdsmap.c:60:
+	ceph_decode_need(p, end, 8*sizeof(u32), bad);
 	                          ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3280: FILE: fs/ceph/mdsmap.c:69:
+	m->m_addr = kzalloc(m->m_max_mds*sizeof(*m->m_addr), GFP_NOFS);
 	                                ^

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#3280: FILE: fs/ceph/mdsmap.c:69:
+	m->m_addr = kzalloc(m->m_max_mds*sizeof(*m->m_addr), GFP_NOFS);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3281: FILE: fs/ceph/mdsmap.c:70:
+	m->m_state = kzalloc(m->m_max_mds*sizeof(*m->m_state), GFP_NOFS);
 	                                 ^

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#3281: FILE: fs/ceph/mdsmap.c:70:
+	m->m_state = kzalloc(m->m_max_mds*sizeof(*m->m_state), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!m->m_addr"
#3282: FILE: fs/ceph/mdsmap.c:71:
+	if (m->m_addr == NULL || m->m_state == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!m->m_state"
#3282: FILE: fs/ceph/mdsmap.c:71:
+	if (m->m_addr == NULL || m->m_state == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3297: FILE: fs/ceph/mdsmap.c:86:
+		ceph_decode_need(p, end, 6*sizeof(u32) + sizeof(addr) +
 		                          ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3304: FILE: fs/ceph/mdsmap.c:93:
+		*p += sizeof(struct ceph_timespec) + 2*sizeof(u32);
 		                                      ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#3305: FILE: fs/ceph/mdsmap.c:94:
+		dout(10, "mdsmap_decode %d/%d mds%d.%d %u.%u.%u.%u:%u %s\n",
 		^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#3306: FILE: fs/ceph/mdsmap.c:95:
+		     i+1, n, mds, inc, IPQUADPORT(addr.ipaddr),
 		      ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3317: FILE: fs/ceph/mdsmap.c:106:
+	m->m_data_pg_pools = kmalloc(sizeof(u32)*n, GFP_NOFS);
 	                                        ^

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#3317: FILE: fs/ceph/mdsmap.c:106:
+	m->m_data_pg_pools = kmalloc(sizeof(u32)*n, GFP_NOFS);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#3320: FILE: fs/ceph/mdsmap.c:109:
+	ceph_decode_need(p, end, sizeof(u32)*(n+1), bad);
 	                                    ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#3320: FILE: fs/ceph/mdsmap.c:109:
+	ceph_decode_need(p, end, sizeof(u32)*(n+1), bad);
 	                                       ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#3326: FILE: fs/ceph/mdsmap.c:115:
+	dout(30, "mdsmap_decode success epoch %u\n", m->m_epoch);
 	^^^^

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#3350: FILE: fs/ceph/mdsmap.h:1:
+#ifndef _FS_CEPH_MDSMAP_H

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#3384: FILE: fs/ceph/mdsmap.h:35:
+	BUG_ON(w < 0);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3390: FILE: fs/ceph/mdsmap.h:41:
+extern int ceph_mdsmap_get_random_mds(struct ceph_mdsmap *m);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3391: FILE: fs/ceph/mdsmap.h:42:
+extern struct ceph_mdsmap *ceph_mdsmap_decode(void **p, void *end);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3392: FILE: fs/ceph/mdsmap.h:43:
+extern void ceph_mdsmap_destroy(struct ceph_mdsmap *m);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000096121.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 1 errors, 209 warnings, 114 checks, 3305 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000096121.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
