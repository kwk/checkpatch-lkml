CHECK:ARCH_INCLUDE_LINUX: Consider using #include <linux/pgtable.h> instead of <asm/pgtable.h>
#118: FILE: arch/x86_64/kernel/early_printk.c:14:
+#include <asm/pgtable.h>

Whenever asm/file.h is included and linux/file.h exists, a
conversion can be made when linux/file.h includes asm/file.h.
However this is not always the case (See signal.h).
This message type is emitted only for includes from arch/.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#130: FILE: arch/x86_64/kernel/early_printk.c:168:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#134: FILE: arch/x86_64/kernel/early_printk.c:172:
+static unsigned dbgp_endpoint_out;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#183: FILE: arch/x86_64/kernel/early_printk.c:221:
+	unsigned ctrl;

WARNING:LINE_SPACING: Missing a blank line after declarations
#184: FILE: arch/x86_64/kernel/early_printk.c:222:
+	unsigned ctrl;
+	for (;;) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#200: FILE: arch/x86_64/kernel/early_printk.c:238:
+	int i;
+	while (ms--) {

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#211: FILE: arch/x86_64/kernel/early_printk.c:249:
+static int dbgp_wait_until_done(unsigned ctrl)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#213: FILE: arch/x86_64/kernel/early_printk.c:251:
+	unsigned pids, lpid;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'lpid == USB_PID_NAK'
#228: FILE: arch/x86_64/kernel/early_printk.c:266:
+	if ((lpid == USB_PID_NAK) || (lpid == USB_PID_NYET))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'lpid == USB_PID_NYET'
#228: FILE: arch/x86_64/kernel/early_printk.c:266:
+	if ((lpid == USB_PID_NAK) || (lpid == USB_PID_NYET))

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#241: FILE: arch/x86_64/kernel/early_printk.c:279:
+	unsigned lo, hi;

WARNING:LINE_SPACING: Missing a blank line after declarations
#243: FILE: arch/x86_64/kernel/early_printk.c:281:
+	int i;
+	lo = hi = 0;

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#243: FILE: arch/x86_64/kernel/early_printk.c:281:
+	lo = hi = 0;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#245: FILE: arch/x86_64/kernel/early_printk.c:283:
+		lo |= bytes[i] << (8*i);
 		                    ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#247: FILE: arch/x86_64/kernel/early_printk.c:285:
+		hi |= bytes[i] << (8*(i - 4));
 		                    ^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#255: FILE: arch/x86_64/kernel/early_printk.c:293:
+	unsigned lo, hi;

WARNING:LINE_SPACING: Missing a blank line after declarations
#257: FILE: arch/x86_64/kernel/early_printk.c:295:
+	int i;
+	lo = readl(&ehci_debug->data03);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#260: FILE: arch/x86_64/kernel/early_printk.c:298:
+		bytes[i] = (lo >> (8*i)) & 0xff;
 		                    ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#262: FILE: arch/x86_64/kernel/early_printk.c:300:
+		bytes[i] = (hi >> (8*(i - 4))) & 0xff;
 		                    ^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#265: FILE: arch/x86_64/kernel/early_printk.c:303:
+static int dbgp_bulk_write(unsigned devnum, unsigned endpoint, const char *bytes, int size)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#265: FILE: arch/x86_64/kernel/early_printk.c:303:
+static int dbgp_bulk_write(unsigned devnum, unsigned endpoint, const char *bytes, int size)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#267: FILE: arch/x86_64/kernel/early_printk.c:305:
+	unsigned pids, addr, ctrl;

WARNING:LINE_SPACING: Missing a blank line after declarations
#269: FILE: arch/x86_64/kernel/early_printk.c:307:
+	int ret;
+	if (size > DBGP_MAX_PACKET)

WARNING:BRACES: braces {} are not necessary for single statement blocks
#287: FILE: arch/x86_64/kernel/early_printk.c:325:
+	if (ret < 0) {
+		return ret;
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#293: FILE: arch/x86_64/kernel/early_printk.c:331:
+static int dbgp_bulk_read(unsigned devnum, unsigned endpoint, void *data, int size)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#293: FILE: arch/x86_64/kernel/early_printk.c:331:
+static int dbgp_bulk_read(unsigned devnum, unsigned endpoint, void *data, int size)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#295: FILE: arch/x86_64/kernel/early_printk.c:333:
+	unsigned pids, addr, ctrl;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#322: FILE: arch/x86_64/kernel/early_printk.c:360:
+static int dbgp_control_msg(unsigned devnum, int requesttype, int request,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#323: FILE: arch/x86_64/kernel/early_printk.c:361:
+static int dbgp_control_msg(unsigned devnum, int requesttype, int request,
+	int value, int index, void *data, int size)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#325: FILE: arch/x86_64/kernel/early_printk.c:363:
+	unsigned pids, addr, ctrl;

CHECK:SPACING: spaces required around that '?' (ctx:VxV)
#331: FILE: arch/x86_64/kernel/early_printk.c:369:
+	if (size > (read?DBGP_MAX_PACKET:0))
 	                ^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#331: FILE: arch/x86_64/kernel/early_printk.c:369:
+	if (size > (read?DBGP_MAX_PACKET:0))
 	                                ^

CHECK:CAMELCASE: Avoid CamelCase: <bRequestType>
#335: FILE: arch/x86_64/kernel/early_printk.c:373:
+	req.bRequestType = requesttype;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <bRequest>
#336: FILE: arch/x86_64/kernel/early_printk.c:374:
+	req.bRequest = request;

CHECK:CAMELCASE: Avoid CamelCase: <wValue>
#337: FILE: arch/x86_64/kernel/early_printk.c:375:
+	req.wValue = value;

CHECK:CAMELCASE: Avoid CamelCase: <wIndex>
#338: FILE: arch/x86_64/kernel/early_printk.c:376:
+	req.wIndex = index;

CHECK:CAMELCASE: Avoid CamelCase: <wLength>
#339: FILE: arch/x86_64/kernel/early_printk.c:377:
+	req.wLength = size;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#357: FILE: arch/x86_64/kernel/early_printk.c:395:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#363: FILE: arch/x86_64/kernel/early_printk.c:401:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#369: FILE: arch/x86_64/kernel/early_printk.c:407:
+	int bytes;
+	if (!(read_pci_config_16(num,slot,func,PCI_STATUS) & PCI_STATUS_CAP_LIST))

ERROR:SPACING: space required after that ',' (ctx:VxV)
#369: FILE: arch/x86_64/kernel/early_printk.c:407:
+	if (!(read_pci_config_16(num,slot,func,PCI_STATUS) & PCI_STATUS_CAP_LIST))
 	                            ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#369: FILE: arch/x86_64/kernel/early_printk.c:407:
+	if (!(read_pci_config_16(num,slot,func,PCI_STATUS) & PCI_STATUS_CAP_LIST))
 	                                 ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#369: FILE: arch/x86_64/kernel/early_printk.c:407:
+	if (!(read_pci_config_16(num,slot,func,PCI_STATUS) & PCI_STATUS_CAP_LIST))
 	                                      ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#371: FILE: arch/x86_64/kernel/early_printk.c:409:
+	pos = read_pci_config_byte(num,slot,func,PCI_CAPABILITY_LIST);
 	                              ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#371: FILE: arch/x86_64/kernel/early_printk.c:409:
+	pos = read_pci_config_byte(num,slot,func,PCI_CAPABILITY_LIST);
 	                                   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#371: FILE: arch/x86_64/kernel/early_printk.c:409:
+	pos = read_pci_config_byte(num,slot,func,PCI_CAPABILITY_LIST);
 	                                        ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#374: FILE: arch/x86_64/kernel/early_printk.c:412:
+		u8 id;
+		pos &= ~3;

ERROR:SPACING: space required after that ',' (ctx:VxV)
#375: FILE: arch/x86_64/kernel/early_printk.c:413:
+		id = read_pci_config_byte(num,slot,func,pos+PCI_CAP_LIST_ID);
 		                             ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#375: FILE: arch/x86_64/kernel/early_printk.c:413:
+		id = read_pci_config_byte(num,slot,func,pos+PCI_CAP_LIST_ID);
 		                                  ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#375: FILE: arch/x86_64/kernel/early_printk.c:413:
+		id = read_pci_config_byte(num,slot,func,pos+PCI_CAP_LIST_ID);
 		                                       ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#375: FILE: arch/x86_64/kernel/early_printk.c:413:
+		id = read_pci_config_byte(num,slot,func,pos+PCI_CAP_LIST_ID);
 		                                           ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#380: FILE: arch/x86_64/kernel/early_printk.c:418:
+		pos = read_pci_config_byte(num,slot,func,pos+PCI_CAP_LIST_NEXT);
 		                              ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#380: FILE: arch/x86_64/kernel/early_printk.c:418:
+		pos = read_pci_config_byte(num,slot,func,pos+PCI_CAP_LIST_NEXT);
 		                                   ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#380: FILE: arch/x86_64/kernel/early_printk.c:418:
+		pos = read_pci_config_byte(num,slot,func,pos+PCI_CAP_LIST_NEXT);
 		                                        ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#380: FILE: arch/x86_64/kernel/early_printk.c:418:
+		pos = read_pci_config_byte(num,slot,func,pos+PCI_CAP_LIST_NEXT);
 		                                            ^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int *' to bare use of 'unsigned *'
#385: FILE: arch/x86_64/kernel/early_printk.c:423:
+static __u32 __init find_dbgp(int ehci_num, unsigned *rbus, unsigned *rslot, unsigned *rfunc)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int *' to bare use of 'unsigned *'
#385: FILE: arch/x86_64/kernel/early_printk.c:423:
+static __u32 __init find_dbgp(int ehci_num, unsigned *rbus, unsigned *rslot, unsigned *rfunc)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int *' to bare use of 'unsigned *'
#385: FILE: arch/x86_64/kernel/early_printk.c:423:
+static __u32 __init find_dbgp(int ehci_num, unsigned *rbus, unsigned *rslot, unsigned *rfunc)

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#387: FILE: arch/x86_64/kernel/early_printk.c:425:
+	unsigned bus, slot, func;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#393: FILE: arch/x86_64/kernel/early_printk.c:431:
+				unsigned cap;

WARNING:LINE_SPACING: Missing a blank line after declarations
#394: FILE: arch/x86_64/kernel/early_printk.c:432:
+				unsigned cap;
+				class = read_pci_config(bus, slot, func, PCI_CLASS_REVISION);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#414: FILE: arch/x86_64/kernel/early_printk.c:452:
+	unsigned portsc;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#415: FILE: arch/x86_64/kernel/early_printk.c:453:
+	unsigned delay_time, delay;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#432: FILE: arch/x86_64/kernel/early_printk.c:470:
+			writel(portsc & ~(PORT_RWC_BITS | PORT_RESET),
+				&ehci_regs->port_status[port - 1]);

WARNING:TYPO_SPELLING: 'happend' may be misspelled - perhaps 'happened'?
#441: FILE: arch/x86_64/kernel/early_printk.c:479:
+		/* bomb out completely if something weird happend */
 		                                          ^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#454: FILE: arch/x86_64/kernel/early_printk.c:492:
+	unsigned status;

WARNING:LINE_SPACING: Missing a blank line after declarations
#456: FILE: arch/x86_64/kernel/early_printk.c:494:
+	int ret, reps;
+	for (reps = 0; reps >= 0; reps++) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#467: FILE: arch/x86_64/kernel/early_printk.c:505:
+
+

WARNING:AVOID_EXTERNS: externs should be avoided in .c files
#470: FILE: arch/x86_64/kernel/early_printk.c:508:
+void early_printk(const char *fmt, ...);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#478: FILE: arch/x86_64/kernel/early_printk.c:516:
+	unsigned cmd, ctrl, status, portsc, hcs_params, debug_port, n_ports;

ERROR:SPACING: spaces required around that '|=' (ctx:WxV)
#490: FILE: arch/x86_64/kernel/early_printk.c:528:
+	cmd |=CMD_RESET;
 	    ^

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#532: FILE: arch/x86_64/kernel/early_printk.c:570:
+
+	}

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#546: FILE: arch/x86_64/kernel/early_printk.c:584:
+	unsigned ctrl, devnum;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#547: FILE: arch/x86_64/kernel/early_printk.c:585:
+	unsigned bus, slot, func, cap;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#548: FILE: arch/x86_64/kernel/early_printk.c:586:
+	unsigned debug_port, bar, offset;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#549: FILE: arch/x86_64/kernel/early_printk.c:587:
+	unsigned bar_val;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#550: FILE: arch/x86_64/kernel/early_printk.c:588:
+	unsigned dbgp_num;

WARNING:BRACES: braces {} are not necessary for single statement blocks
#558: FILE: arch/x86_64/kernel/early_printk.c:596:
+	if (*s) {
+		dbgp_num = simple_strtoul(s, &e, 10);
+	}

WARNING:CONSIDER_KSTRTO: simple_strtoul is obsolete, use kstrtoul instead
#559: FILE: arch/x86_64/kernel/early_printk.c:597:
+		dbgp_num = simple_strtoul(s, &e, 10);

The simple_strtol(), simple_strtoll(), simple_strtoul(), and
simple_strtoull() functions explicitly ignore overflows, which
may lead to unexpected results in callers.  The respective kstrtol(),
kstrtoll(), kstrtoul(), and kstrtoull() functions tend to be the
correct replacements.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#simple-strtol-simple-strtoll-simple-strtoul-simple-strtoull

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#600: FILE: arch/x86_64/kernel/early_printk.c:638:
+		ret = dbgp_control_msg(devnum,
+			USB_DIR_IN | USB_TYPE_STANDARD | USB_RECIP_DEVICE,

CHECK:CAMELCASE: Avoid CamelCase: <bDebugOutEndpoint>
#614: FILE: arch/x86_64/kernel/early_printk.c:652:
+	dbgp_endpoint_out = dbgp_desc.bDebugOutEndpoint;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#619: FILE: arch/x86_64/kernel/early_printk.c:657:
+		ret = dbgp_control_msg(devnum,
+			USB_DIR_OUT | USB_TYPE_STANDARD | USB_RECIP_DEVICE,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#623: FILE: arch/x86_64/kernel/early_printk.c:661:
+			dbgp_printk("Could not move attached device to %d\n",
+				USB_DEBUG_DEVNUM);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#631: FILE: arch/x86_64/kernel/early_printk.c:669:
+	ret = dbgp_control_msg(USB_DEBUG_DEVNUM,
+		USB_DIR_OUT | USB_TYPE_STANDARD | USB_RECIP_DEVICE,

ERROR:SPACING: space required after that ',' (ctx:VxV)
#640: FILE: arch/x86_64/kernel/early_printk.c:678:
+	ret = dbgp_bulk_write(USB_DEBUG_DEVNUM, dbgp_endpoint_out, " ",1);
 	                                                              ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#646: FILE: arch/x86_64/kernel/early_printk.c:684:
+
+

WARNING:RETURN_VOID: void function return statements are not generally useful
#654: FILE: arch/x86_64/kernel/early_printk.c:692:
+	return;
+}

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#656: FILE: arch/x86_64/kernel/early_printk.c:694:
+static void early_dbgp_write(struct console *con, const char *str, unsigned n)

WARNING:LINE_SPACING: Missing a blank line after declarations
#659: FILE: arch/x86_64/kernel/early_printk.c:697:
+	int chunk, ret;
+	if (!ehci_debug)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#666: FILE: arch/x86_64/kernel/early_printk.c:704:
+		ret = dbgp_bulk_write(USB_DEBUG_DEVNUM,
+			dbgp_endpoint_out, str, chunk);

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#675: FILE: arch/x86_64/kernel/early_printk.c:713:
+^I.flags = ^ICON_PRINTBUFFER,$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#676: FILE: arch/x86_64/kernel/early_printk.c:714:
+^I.index = ^I-1,$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#697: FILE: arch/x86_64/kernel/early_printk.c:815:
+		early_dbgp_write(&early_dbgp_console,
+			dbgp_test_str, sizeof(dbgp_test_str) - 1);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000438244.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 14 errors, 47 warnings, 32 checks, 650 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000438244.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
