WARNING:TYPO_SPELLING: 'dynmically' may be misspelled - perhaps 'dynamically'?
#68: FILE: drivers/usb/gadget/Kconfig:164:
+	   dynmically linked module called "fsl_qe_udc".
 	   ^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#92: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#97: FILE: drivers/usb/gadget/fsl_qe_udc.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#102: FILE: drivers/usb/gadget/fsl_qe_udc.c:6:
+ * ^IXie Xiaobo <X.Xie@freescale.com>$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#103: FILE: drivers/usb/gadget/fsl_qe_udc.c:7:
+ * ^ILi Yang <leoli@freescale.com>$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#104: FILE: drivers/usb/gadget/fsl_qe_udc.c:8:
+ * ^IBased on bareboard code from Shlomi Gridish.$

CHECK:CAMELCASE: Avoid CamelCase: <bLength>
#160: FILE: drivers/usb/gadget/fsl_qe_udc.c:64:
+	.bLength =		USB_DT_ENDPOINT_SIZE,

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <bDescriptorType>
#161: FILE: drivers/usb/gadget/fsl_qe_udc.c:65:
+	.bDescriptorType =	USB_DT_ENDPOINT,

CHECK:CAMELCASE: Avoid CamelCase: <bEndpointAddress>
#163: FILE: drivers/usb/gadget/fsl_qe_udc.c:67:
+	.bEndpointAddress =	0,

CHECK:CAMELCASE: Avoid CamelCase: <bmAttributes>
#164: FILE: drivers/usb/gadget/fsl_qe_udc.c:68:
+	.bmAttributes =		USB_ENDPOINT_XFER_CONTROL,

CHECK:CAMELCASE: Avoid CamelCase: <wMaxPacketSize>
#165: FILE: drivers/usb/gadget/fsl_qe_udc.c:69:
+	.wMaxPacketSize =	USB_MAX_CTRL_PAYLOAD,

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#173: FILE: drivers/usb/gadget/fsl_qe_udc.c:77:
+ *      Internal Used Function Start
+********************************************************************/

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#176: FILE: drivers/usb/gadget/fsl_qe_udc.c:80:
+ *--------------------------------------------------------------*/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#196: FILE: drivers/usb/gadget/fsl_qe_udc.c:100:
+		dma_unmap_single(udc->gadget.dev.parent,
+			req->req.dma, req->req.length,

CHECK:BRACES: Unbalanced braces around else statement
#202: FILE: drivers/usb/gadget/fsl_qe_udc.c:106:
+	} else

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#204: FILE: drivers/usb/gadget/fsl_qe_udc.c:108:
+		dma_sync_single_for_cpu(udc->gadget.dev.parent,
+			req->req.dma, req->req.length,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#211: FILE: drivers/usb/gadget/fsl_qe_udc.c:115:
+		dev_vdbg(udc->dev, "complete %s req %p stat %d len %u/%u\n",
+			ep->ep.name, &req->req, status,

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#219: FILE: drivers/usb/gadget/fsl_qe_udc.c:123:
+	 * eg fsg->bulk_in_complete() */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#230: FILE: drivers/usb/gadget/fsl_qe_udc.c:134:
+ *--------------------------------------------------------------*/

WARNING:LINE_SPACING: Missing a blank line after declarations
#236: FILE: drivers/usb/gadget/fsl_qe_udc.c:140:
+		struct qe_req *req = NULL;
+		req = list_entry(ep->queue.next, struct qe_req, queue);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#244: FILE: drivers/usb/gadget/fsl_qe_udc.c:148:
+ *---------------------------------------------------------------------------*/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#302: FILE: drivers/usb/gadget/fsl_qe_udc.c:206:
+		clrbits16(&udc->usb_regs->usb_usbmr,
+				(USB_E_RXB_MASK | USB_E_BSY_MASK));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#319: FILE: drivers/usb/gadget/fsl_qe_udc.c:223:
+		out_be16(&udc->usb_regs->usb_usber,
+				USB_E_BSY_MASK | USB_E_RXB_MASK);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#321: FILE: drivers/usb/gadget/fsl_qe_udc.c:225:
+		setbits16(&udc->usb_regs->usb_usbmr,
+				(USB_E_RXB_MASK | USB_E_BSY_MASK));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#334: FILE: drivers/usb/gadget/fsl_qe_udc.c:238:
+		cpm_command(CPM_USB_STOP_TX | (ep->epnum << CPM_USB_EP_SHIFT),
+				CPM_USB_STOP_TX_OPCODE);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#337: FILE: drivers/usb/gadget/fsl_qe_udc.c:241:
+		qe_issue_cmd(QE_USB_STOP_TX, QE_CR_SUBBLOCK_USB,
+				ep->epnum, 0);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#349: FILE: drivers/usb/gadget/fsl_qe_udc.c:253:
+		qe_issue_cmd(QE_USB_RESTART_TX, QE_CR_SUBBLOCK_USB,
+				ep->epnum, 0);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#363: FILE: drivers/usb/gadget/fsl_qe_udc.c:267:
+	out_8(&udc->usb_regs->usb_uscom,
+		USB_CMD_FLUSH_FIFO | (USB_CMD_EP_MASK & (ep->epnum)));

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around ep->epnum
#363: FILE: drivers/usb/gadget/fsl_qe_udc.c:267:
+		USB_CMD_FLUSH_FIFO | (USB_CMD_EP_MASK & (ep->epnum)));

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#379: FILE: drivers/usb/gadget/fsl_qe_udc.c:283:
+	out_8(&udc->usb_regs->usb_uscom,
+			USB_CMD_STR_FIFO | (USB_CMD_EP_MASK & (ep->epnum)));

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around ep->epnum
#379: FILE: drivers/usb/gadget/fsl_qe_udc.c:283:
+			USB_CMD_STR_FIFO | (USB_CMD_EP_MASK & (ep->epnum)));

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ep->rxbase"
#515: FILE: drivers/usb/gadget/fsl_qe_udc.c:419:
+	if (ep->rxbase == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ep->rxframe"
#521: FILE: drivers/usb/gadget/fsl_qe_udc.c:425:
+	if (ep->rxframe == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#522: FILE: drivers/usb/gadget/fsl_qe_udc.c:426:
+	if (ep->rxframe == NULL) {
+		dev_err(ep->udc->dev, "malloc rxframe failed\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ep->rxbuffer"
#535: FILE: drivers/usb/gadget/fsl_qe_udc.c:439:
+	if (ep->rxbuffer == NULL) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#537: FILE: drivers/usb/gadget/fsl_qe_udc.c:441:
+		dev_err(ep->udc->dev, "malloc rxbuffer failed,size=%d\n",
+				size);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#545: FILE: drivers/usb/gadget/fsl_qe_udc.c:449:
+		ep->rxbuf_d = dma_map_single(udc_controller->gadget.dev.parent,
+					ep->rxbuffer,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#551: FILE: drivers/usb/gadget/fsl_qe_udc.c:455:
+		dma_sync_single_for_device(udc_controller->gadget.dev.parent,
+					ep->rxbuf_d, size,

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#638: FILE: drivers/usb/gadget/fsl_qe_udc.c:542:
+	/* Refer to USB2.0 spec table 9-13,
+	*/

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#643: FILE: drivers/usb/gadget/fsl_qe_udc.c:547:
+			if (strstr(ep->ep.name, "-iso")
+					|| strstr(ep->ep.name, "-int"))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'max == 128'
#647: FILE: drivers/usb/gadget/fsl_qe_udc.c:551:
+			if ((max == 128) || (max == 256) || (max == 512))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'max == 256'
#647: FILE: drivers/usb/gadget/fsl_qe_udc.c:551:
+			if ((max == 128) || (max == 256) || (max == 512))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'max == 512'
#647: FILE: drivers/usb/gadget/fsl_qe_udc.c:551:
+			if ((max == 128) || (max == 256) || (max == 512))

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#681: FILE: drivers/usb/gadget/fsl_qe_udc.c:585:
+			if (strstr(ep->ep.name, "-bulk")
+				|| strstr(ep->ep.name, "-int"))

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#696: FILE: drivers/usb/gadget/fsl_qe_udc.c:600:
+			if (strstr(ep->ep.name, "-iso")
+				|| strstr(ep->ep.name, "-int"))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ep->tm == USBP_TM_CTL'
#760: FILE: drivers/usb/gadget/fsl_qe_udc.c:664:
+	if ((ep->tm == USBP_TM_CTL) || (ep->dir == USB_DIR_OUT)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ep->dir == USB_DIR_OUT'
#760: FILE: drivers/usb/gadget/fsl_qe_udc.c:664:
+	if ((ep->tm == USBP_TM_CTL) || (ep->dir == USB_DIR_OUT)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ep->tm == USBP_TM_CTL'
#766: FILE: drivers/usb/gadget/fsl_qe_udc.c:670:
+	if ((ep->tm == USBP_TM_CTL) || (ep->dir == USB_DIR_IN)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ep->dir == USB_DIR_IN'
#766: FILE: drivers/usb/gadget/fsl_qe_udc.c:670:
+	if ((ep->tm == USBP_TM_CTL) || (ep->dir == USB_DIR_IN)) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ep->txframe"
#768: FILE: drivers/usb/gadget/fsl_qe_udc.c:672:
+		if (ep->txframe == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#769: FILE: drivers/usb/gadget/fsl_qe_udc.c:673:
+		if (ep->txframe == NULL) {
+			dev_err(udc->dev, "malloc txframe failed\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#778: FILE: drivers/usb/gadget/fsl_qe_udc.c:682:
+	 * until a buffer is queued to it. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#804: FILE: drivers/usb/gadget/fsl_qe_udc.c:708:
+ *----------------------------------------------------------------------------*/

CHECK:LINE_SPACING: Please don't use multiple blank lines
#806: FILE: drivers/usb/gadget/fsl_qe_udc.c:710:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#808: FILE: drivers/usb/gadget/fsl_qe_udc.c:712:
+/******************************************************************************
+		UDC transmit and receive process

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'bd == nextbd'
#844: FILE: drivers/usb/gadget/fsl_qe_udc.c:748:
+		if (stopatnext && (bd == nextbd))

CHECK:BRACES: braces {} should be used on all arms of this statement
#859: FILE: drivers/usb/gadget/fsl_qe_udc.c:763:
+	if (!(bdstatus & R_E) && !(bdstatus & BD_LENGTH_MASK)) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#874: FILE: drivers/usb/gadget/fsl_qe_udc.c:778:
+	} else

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#887: FILE: drivers/usb/gadget/fsl_qe_udc.c:791:
+static void setup_received_handle(struct qe_udc *udc,
+					struct usb_ctrlrequest *setup);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'udc->ep0_state == WAIT_FOR_SETUP'
#899: FILE: drivers/usb/gadget/fsl_qe_udc.c:803:
+	if ((frame_get_info(pframe) & PID_SETUP)
+			&& (udc->ep0_state == WAIT_FOR_SETUP)) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#900: FILE: drivers/usb/gadget/fsl_qe_udc.c:804:
+	if ((frame_get_info(pframe) & PID_SETUP)
+			&& (udc->ep0_state == WAIT_FOR_SETUP)) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#936: FILE: drivers/usb/gadget/fsl_qe_udc.c:840:
+		if ((bdstatus & R_F) && (bdstatus & R_L)
+			&& !(bdstatus & R_ERROR)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#940: FILE: drivers/usb/gadget/fsl_qe_udc.c:844:
+				dev_vdbg(udc->dev,
+					"receive a ZLP in status phase\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#946: FILE: drivers/usb/gadget/fsl_qe_udc.c:850:
+				frame_set_length(pframe,
+						(length - USB_CRC_SIZE));

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#981: FILE: drivers/usb/gadget/fsl_qe_udc.c:885:
+
+	}

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fsize < ep->ep.maxpacket'
#1016: FILE: drivers/usb/gadget/fsl_qe_udc.c:920:
+			if ((fsize < ep->ep.maxpacket) ||
+					(req->req.actual >= req->req.length)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'req->req.actual >= req->req.length'
#1016: FILE: drivers/usb/gadget/fsl_qe_udc.c:920:
+			if ((fsize < ep->ep.maxpacket) ||
+					(req->req.actual >= req->req.length)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1017: FILE: drivers/usb/gadget/fsl_qe_udc.c:921:
+			if ((fsize < ep->ep.maxpacket) ||
+					(req->req.actual >= req->req.length)) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1069: FILE: drivers/usb/gadget/fsl_qe_udc.c:973:
+			if ((bdstatus & R_F) && (bdstatus & R_L)
+				&& !(bdstatus & R_ERROR)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1074: FILE: drivers/usb/gadget/fsl_qe_udc.c:978:
+				frame_set_length(pframe,
+						(length - USB_CRC_SIZE));

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1156: FILE: drivers/usb/gadget/fsl_qe_udc.c:1060:
+		dev_vdbg(udc->dev, "The rxep have no req queued with %d BDs\n",
+				ep->has_data);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1183: FILE: drivers/usb/gadget/fsl_qe_udc.c:1087:
+	out_be16(&udc->usb_regs->usb_usbmr,
+			saveusbmr & ~(USB_E_TXB_MASK | USB_E_TXE_MASK));

CHECK:SPACING: spaces preferred around that '&' (ctx:VxV)
#1197: FILE: drivers/usb/gadget/fsl_qe_udc.c:1101:
+		bdstatus = (bdstatus&T_W);
 		                    ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ep->epnum == 0'
#1205: FILE: drivers/usb/gadget/fsl_qe_udc.c:1109:
+		if ((ep->epnum == 0) && (udc->ep0_state == DATA_STATE_NEED_ZLP))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'udc->ep0_state == DATA_STATE_NEED_ZLP'
#1205: FILE: drivers/usb/gadget/fsl_qe_udc.c:1109:
+		if ((ep->epnum == 0) && (udc->ep0_state == DATA_STATE_NEED_ZLP))

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#1230: FILE: drivers/usb/gadget/fsl_qe_udc.c:1134:
+		return 0;
+	} else {

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1238: FILE: drivers/usb/gadget/fsl_qe_udc.c:1142:
+ * handle the tx_req, not include ep0           */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "ep->tx_req"
#1241: FILE: drivers/usb/gadget/fsl_qe_udc.c:1145:
+	if (ep->tx_req != NULL) {

WARNING:TYPO_SPELLING: 'asent' may be misspelled - perhaps 'ascent'?
#1243: FILE: drivers/usb/gadget/fsl_qe_udc.c:1147:
+			int asent = ep->last;
 			    ^^^^^

WARNING:TYPO_SPELLING: 'asent' may be misspelled - perhaps 'ascent'?
#1244: FILE: drivers/usb/gadget/fsl_qe_udc.c:1148:
+			ep->sent += asent;
 			            ^^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1244: FILE: drivers/usb/gadget/fsl_qe_udc.c:1148:
+			int asent = ep->last;
+			ep->sent += asent;

WARNING:TYPO_SPELLING: 'asent' may be misspelled - perhaps 'ascent'?
#1245: FILE: drivers/usb/gadget/fsl_qe_udc.c:1149:
+			ep->last -= asent;
 			            ^^^^^

WARNING:TYPO_SPELLING: 'fot' may be misspelled - perhaps 'for'?
#1260: FILE: drivers/usb/gadget/fsl_qe_udc.c:1164:
+	/* we should gain a new tx_req fot this endpoint */
 	                               ^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ep->tx_req"
#1261: FILE: drivers/usb/gadget/fsl_qe_udc.c:1165:
+	if (ep->tx_req == NULL) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1264: FILE: drivers/usb/gadget/fsl_qe_udc.c:1168:
+			ep->tx_req = list_entry(ep->queue.next,	struct qe_req,
+							queue);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1281: FILE: drivers/usb/gadget/fsl_qe_udc.c:1185:
+	size = min_t(u32, (ep->tx_req->req.length - ep->sent),
+				ep->ep.maxpacket);

WARNING:TYPO_SPELLING: 'infor' may be misspelled - perhaps 'info'?
#1295: FILE: drivers/usb/gadget/fsl_qe_udc.c:1199:
+static int sendnulldata(struct qe_ep *ep, struct qe_frame *frame, uint infor)
                                                                        ^^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!frame"
#1299: FILE: drivers/usb/gadget/fsl_qe_udc.c:1203:
+	if (frame == NULL)

WARNING:TYPO_SPELLING: 'infor' may be misspelled - perhaps 'info'?
#1306: FILE: drivers/usb/gadget/fsl_qe_udc.c:1210:
+	frame_set_info(frame, (ZLP | NO_CRC | infor));
 	                                      ^^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req"
#1316: FILE: drivers/usb/gadget/fsl_qe_udc.c:1220:
+	if (req == NULL)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1329: FILE: drivers/usb/gadget/fsl_qe_udc.c:1233:
+ * in status phase, udc create a request and gain status */

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#1332: FILE: drivers/usb/gadget/fsl_qe_udc.c:1236:
+{
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "tx_req"
#1402: FILE: drivers/usb/gadget/fsl_qe_udc.c:1306:
+	if (tx_req != NULL) {

WARNING:TYPO_SPELLING: 'asent' may be misspelled - perhaps 'ascent'?
#1404: FILE: drivers/usb/gadget/fsl_qe_udc.c:1308:
+			int asent = ep->last;
 			    ^^^^^

WARNING:TYPO_SPELLING: 'asent' may be misspelled - perhaps 'ascent'?
#1405: FILE: drivers/usb/gadget/fsl_qe_udc.c:1309:
+			ep->sent += asent;
 			            ^^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1405: FILE: drivers/usb/gadget/fsl_qe_udc.c:1309:
+			int asent = ep->last;
+			ep->sent += asent;

WARNING:TYPO_SPELLING: 'asent' may be misspelled - perhaps 'ascent'?
#1406: FILE: drivers/usb/gadget/fsl_qe_udc.c:1310:
+			ep->last -= asent;
 			            ^^^^^

CHECK:BRACES: braces {} should be used on all arms of this statement
#1429: FILE: drivers/usb/gadget/fsl_qe_udc.c:1333:
+	if (frame_get_status(ep->txframe) & FRAME_ERROR) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1438: FILE: drivers/usb/gadget/fsl_qe_udc.c:1342:
+	} else

CHECK:BRACES: braces {} should be used on all arms of this statement
#1484: FILE: drivers/usb/gadget/fsl_qe_udc.c:1388:
+	if (frame_get_status(ep->txframe) & FRAME_ERROR) {
[...]
+	} else
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1493: FILE: drivers/usb/gadget/fsl_qe_udc.c:1397:
+	} else

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!ep->tx_req"
#1544: FILE: drivers/usb/gadget/fsl_qe_udc.c:1448:
+	if (ep->tx_req == NULL) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1579: FILE: drivers/usb/gadget/fsl_qe_udc.c:1483:
+		if ((bdstatus & R_F) && (bdstatus & R_L)
+					&& !(bdstatus & R_ERROR)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fsize < ep->ep.maxpacket'
#1607: FILE: drivers/usb/gadget/fsl_qe_udc.c:1511:
+					if ((fsize < ep->ep.maxpacket)
+						|| (req->req.actual >=
+							req->req.length)) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'req->req.actual >=
 							req->req.length'
#1607: FILE: drivers/usb/gadget/fsl_qe_udc.c:1511:
+					if ((fsize < ep->ep.maxpacket)
+						|| (req->req.actual >=
+							req->req.length)) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1608: FILE: drivers/usb/gadget/fsl_qe_udc.c:1512:
+					if ((fsize < ep->ep.maxpacket)
+						|| (req->req.actual >=

WARNING:DEEP_INDENTATION: Too many leading tabs - consider code refactoring
#1612: FILE: drivers/usb/gadget/fsl_qe_udc.c:1516:
+						if (list_empty(&ep->queue))

Indentation with 6 or more tabs usually indicate overly indented
code.

It is suggested to refactor excessive indentation of
if/else/for/do/while/switch statements.

See: https://lore.kernel.org/lkml/1328311239.21255.24.camel@joe2Laptop/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1623: FILE: drivers/usb/gadget/fsl_qe_udc.c:1527:
+		 * only Clear the length */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1660: FILE: drivers/usb/gadget/fsl_qe_udc.c:1564:
+/********************************************************************
+	Internal Used Function End

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1664: FILE: drivers/usb/gadget/fsl_qe_udc.c:1568:
+/*-----------------------------------------------------------------------
+	Endpoint Management Functions For Gadget

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1665: FILE: drivers/usb/gadget/fsl_qe_udc.c:1569:
+ -----------------------------------------------------------------------*/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1667: FILE: drivers/usb/gadget/fsl_qe_udc.c:1571:
+static int qe_ep_enable(struct usb_ep *_ep,
+			 const struct usb_endpoint_descriptor *desc)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'desc->bDescriptorType != USB_DT_ENDPOINT'
#1677: FILE: drivers/usb/gadget/fsl_qe_udc.c:1581:
+	if (!_ep || !desc || ep->desc || _ep->name == ep_name[0] ||
+			(desc->bDescriptorType != USB_DT_ENDPOINT))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1678: FILE: drivers/usb/gadget/fsl_qe_udc.c:1582:
+	if (!_ep || !desc || ep->desc || _ep->name == ep_name[0] ||
+			(desc->bDescriptorType != USB_DT_ENDPOINT))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'udc->gadget.speed == USB_SPEED_UNKNOWN'
#1682: FILE: drivers/usb/gadget/fsl_qe_udc.c:1586:
+	if (!udc->driver || (udc->gadget.speed == USB_SPEED_UNKNOWN))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1732: FILE: drivers/usb/gadget/fsl_qe_udc.c:1636:
+			dma_unmap_single(udc_controller->gadget.dev.parent,
+					ep->rxbuf_d, size,

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#1736: FILE: drivers/usb/gadget/fsl_qe_udc.c:1640:
+			dma_sync_single_for_cpu(

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1778: FILE: drivers/usb/gadget/fsl_qe_udc.c:1682:
+static int qe_ep_queue(struct usb_ep *_ep, struct usb_request *_req,
+				gfp_t gfp_flags)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1789: FILE: drivers/usb/gadget/fsl_qe_udc.c:1693:
+	if (!_req || !req->req.complete || !req->req.buf
+			|| !list_empty(&req->queue)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1806: FILE: drivers/usb/gadget/fsl_qe_udc.c:1710:
+		req->req.dma = dma_map_single(ep->udc->gadget.dev.parent,
+					req->req.buf,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1814: FILE: drivers/usb/gadget/fsl_qe_udc.c:1718:
+		dma_sync_single_for_device(ep->udc->gadget.dev.parent,
+					req->req.dma, req->req.length,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1826: FILE: drivers/usb/gadget/fsl_qe_udc.c:1730:
+	dev_vdbg(udc->dev, "gadget have request in %s! %d\n",
+			ep->name, req->req.length);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1882: FILE: drivers/usb/gadget/fsl_qe_udc.c:1786:
+*----------------------------------------------------------------*/

WARNING:BLOCK_COMMENT_STYLE: Block comments should align the * on each line
#1882: FILE: drivers/usb/gadget/fsl_qe_udc.c:1786:
+ * Returns zero, or a negative error code.
+*----------------------------------------------------------------*/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1903: FILE: drivers/usb/gadget/fsl_qe_udc.c:1807:
+	 * are still queue */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1921: FILE: drivers/usb/gadget/fsl_qe_udc.c:1825:
+	dev_vdbg(udc->dev, " %s %s halt stat %d\n", ep->ep.name,
+			value ?  "set" : "clear", status);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1940: FILE: drivers/usb/gadget/fsl_qe_udc.c:1844:
+/*------------------------------------------------------------------------
+	Gadget Driver Layer Operations

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1941: FILE: drivers/usb/gadget/fsl_qe_udc.c:1845:
+ ------------------------------------------------------------------------*/

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#1964: FILE: drivers/usb/gadget/fsl_qe_udc.c:1868:
+	return -ENOTSUPP;

ENOTSUPP is not a standard error code and should be avoided in new patches.
EOPNOTSUPP should be used instead.

See: https://lore.kernel.org/netdev/20200510182252.GA411829@lunn.ch/

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1968: FILE: drivers/usb/gadget/fsl_qe_udc.c:1872:
+/* Notify controller that VBUS is powered, Called by whatever
+   detects VBUS sessions */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1968: FILE: drivers/usb/gadget/fsl_qe_udc.c:1872:
+   detects VBUS sessions */

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#1971: FILE: drivers/usb/gadget/fsl_qe_udc.c:1875:
+	return -ENOTSUPP;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1981: FILE: drivers/usb/gadget/fsl_qe_udc.c:1885:
+static int qe_vbus_draw(struct usb_gadget *gadget, unsigned mA)

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#1983: FILE: drivers/usb/gadget/fsl_qe_udc.c:1887:
+	return -ENOTSUPP;

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#1991: FILE: drivers/usb/gadget/fsl_qe_udc.c:1895:
+	return -ENOTSUPP;

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2005: FILE: drivers/usb/gadget/fsl_qe_udc.c:1909:
+/*-------------------------------------------------------------------------
+	USB ep0 Setup process in BUS Enumeration

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2006: FILE: drivers/usb/gadget/fsl_qe_udc.c:1910:
+ -------------------------------------------------------------------------*/

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2032: FILE: drivers/usb/gadget/fsl_qe_udc.c:1936:
+static void ch9setaddress(struct qe_udc *udc, u16 value, u16 index,
+			u16 length)

CHECK:SPACING: No space is necessary after a cast
#2035: FILE: drivers/usb/gadget/fsl_qe_udc.c:1939:
+	udc->device_address = (u8) value;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2064: FILE: drivers/usb/gadget/fsl_qe_udc.c:1968:
+	req = container_of(qe_alloc_request(&ep->ep, GFP_KERNEL),
+					struct qe_req, req);

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2078: FILE: drivers/usb/gadget/fsl_qe_udc.c:1982:
+		dev_err(udc->dev, "Can't respond to getstatus request \n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2085: FILE: drivers/usb/gadget/fsl_qe_udc.c:1989:
+static void setup_received_handle(struct qe_udc *udc,
+				struct usb_ctrlrequest *setup)

CHECK:CAMELCASE: Avoid CamelCase: <wValue>
#2088: FILE: drivers/usb/gadget/fsl_qe_udc.c:1992:
+	u16 wValue = le16_to_cpu(setup->wValue);

CHECK:CAMELCASE: Avoid CamelCase: <wIndex>
#2089: FILE: drivers/usb/gadget/fsl_qe_udc.c:1993:
+	u16 wIndex = le16_to_cpu(setup->wIndex);

CHECK:CAMELCASE: Avoid CamelCase: <wLength>
#2090: FILE: drivers/usb/gadget/fsl_qe_udc.c:1994:
+	u16 wLength = le16_to_cpu(setup->wLength);

CHECK:CAMELCASE: Avoid CamelCase: <bRequestType>
#2095: FILE: drivers/usb/gadget/fsl_qe_udc.c:1999:
+	if (setup->bRequestType & USB_DIR_IN)

CHECK:CAMELCASE: Avoid CamelCase: <bRequest>
#2100: FILE: drivers/usb/gadget/fsl_qe_udc.c:2004:
+	switch (setup->bRequest) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2130: FILE: drivers/usb/gadget/fsl_qe_udc.c:2034:
+			if (wValue != 0 || wLength != 0
+				|| pipe > USB_MAX_ENDPOINTS)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2136: FILE: drivers/usb/gadget/fsl_qe_udc.c:2040:
+			qe_ep_set_halt(&ep->ep,
+					(setup->bRequest == USB_REQ_SET_FEATURE)

ERROR:SPACING: space required before the open brace '{'
#2154: FILE: drivers/usb/gadget/fsl_qe_udc.c:2058:
+		} else{

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2160: FILE: drivers/usb/gadget/fsl_qe_udc.c:2064:
+		if (udc->driver->setup(&udc->gadget,
+					&udc->local_setup_buff) < 0)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2168: FILE: drivers/usb/gadget/fsl_qe_udc.c:2072:
+		if (udc->driver->setup(&udc->gadget,
+					&udc->local_setup_buff) < 0)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2176: FILE: drivers/usb/gadget/fsl_qe_udc.c:2080:
+/*-------------------------------------------------------------------------
+	USB Interrupt handlers

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2177: FILE: drivers/usb/gadget/fsl_qe_udc.c:2081:
+ -------------------------------------------------------------------------*/

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'udc->usb_state'
#2204: FILE: drivers/usb/gadget/fsl_qe_udc.c:2108:
+		if ((udc->usb_state) != USB_STATE_SUSPENDED)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'udc->usb_state == USB_STATE_ADDRESS'
#2249: FILE: drivers/usb/gadget/fsl_qe_udc.c:2153:
+	if ((udc->usb_state == USB_STATE_ADDRESS)
+		&& (in_8(&udc->usb_regs->usb_usadr) == 0))

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2250: FILE: drivers/usb/gadget/fsl_qe_udc.c:2154:
+	if ((udc->usb_state == USB_STATE_ADDRESS)
+		&& (in_8(&udc->usb_regs->usb_usadr) == 0))

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#2253: FILE: drivers/usb/gadget/fsl_qe_udc.c:2157:
+	for (i = (USB_MAX_ENDPOINTS-1); ((i >= 0) && (res == 0)); i--) {
 	                           ^

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ep->dir != USB_DIR_OUT'
#2255: FILE: drivers/usb/gadget/fsl_qe_udc.c:2159:
+		if (ep && ep->init && (ep->dir != USB_DIR_OUT)) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2258: FILE: drivers/usb/gadget/fsl_qe_udc.c:2162:
+			if (!(in_be32((u32 __iomem *)bd) & T_R)
+						&& (in_be32(&bd->buf))) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2272: FILE: drivers/usb/gadget/fsl_qe_udc.c:2176:
+
+

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ep->dir != USB_DIR_IN'
#2282: FILE: drivers/usb/gadget/fsl_qe_udc.c:2186:
+		if (ep && ep->init && (ep->dir != USB_DIR_IN)) {

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2285: FILE: drivers/usb/gadget/fsl_qe_udc.c:2189:
+			if (!(in_be32((u32 __iomem *)bd) & R_E)
+						&& (in_be32(&bd->buf))) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2304: FILE: drivers/usb/gadget/fsl_qe_udc.c:2208:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2354: FILE: drivers/usb/gadget/fsl_qe_udc.c:2258:
+/*-------------------------------------------------------------------------
+	Gadget driver register and unregister.

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2355: FILE: drivers/usb/gadget/fsl_qe_udc.c:2259:
+ --------------------------------------------------------------------------*/

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2366: FILE: drivers/usb/gadget/fsl_qe_udc.c:2270:
+	if (!driver || (driver->speed != USB_SPEED_FULL
+			&& driver->speed != USB_SPEED_HIGH)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2367: FILE: drivers/usb/gadget/fsl_qe_udc.c:2271:
+			&& driver->speed != USB_SPEED_HIGH)
+			|| !driver->bind || !driver->disconnect

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#2368: FILE: drivers/usb/gadget/fsl_qe_udc.c:2272:
+			|| !driver->bind || !driver->disconnect
+			|| !driver->setup)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2387: FILE: drivers/usb/gadget/fsl_qe_udc.c:2291:
+		dev_err(udc_controller->dev, "bind to %s --> %d",
+				driver->driver.name, retval);

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2401: FILE: drivers/usb/gadget/fsl_qe_udc.c:2305:
+	dev_info(udc_controller->dev, "%s bind to driver %s \n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2402: FILE: drivers/usb/gadget/fsl_qe_udc.c:2306:
+	dev_info(udc_controller->dev, "%s bind to driver %s \n",
+		udc_controller->gadget.name, driver->driver.name);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2431: FILE: drivers/usb/gadget/fsl_qe_udc.c:2335:
+	list_for_each_entry(loop_ep, &udc_controller->gadget.ep_list,
+				ep.ep_list)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2441: FILE: drivers/usb/gadget/fsl_qe_udc.c:2345:
+	dev_info(udc_controller->dev, "unregistered gadget driver '%s'\r\n",
+			driver->driver.name);

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#2447: FILE: drivers/usb/gadget/fsl_qe_udc.c:2351:
+static struct qe_udc __devinit *qe_udc_config(struct of_device *ofdev)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!udc"
#2458: FILE: drivers/usb/gadget/fsl_qe_udc.c:2362:
+	if (udc == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2459: FILE: drivers/usb/gadget/fsl_qe_udc.c:2363:
+	if (udc == NULL) {
+		dev_err(&ofdev->dev, "malloc udc failed\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2485: FILE: drivers/usb/gadget/fsl_qe_udc.c:2389:
+	memset_io(udc->ep_param[0], 0,
+			USB_MAX_ENDPOINTS * sizeof(struct usb_ep_para));

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#2500: FILE: drivers/usb/gadget/fsl_qe_udc.c:2404:
+static int __devinit qe_udc_reg_init(struct qe_udc *udc)

WARNING:LINE_SPACING: Missing a blank line after declarations
#2503: FILE: drivers/usb/gadget/fsl_qe_udc.c:2407:
+	struct usb_ctlr __iomem *qe_usbregs;
+	qe_usbregs = udc->usb_regs;

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#2514: FILE: drivers/usb/gadget/fsl_qe_udc.c:2418:
+static int __devinit qe_ep_config(struct qe_udc *udc, unsigned char pipe_num)

CHECK:SPACING: No space is necessary after a cast
#2524: FILE: drivers/usb/gadget/fsl_qe_udc.c:2428:
+	ep->ep.maxpacket = (unsigned short) ~0;

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2551: FILE: drivers/usb/gadget/fsl_qe_udc.c:2455:
+ *----------------------------------------------------------------------*/

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#2566: FILE: drivers/usb/gadget/fsl_qe_udc.c:2470:
+static int __devinit qe_udc_probe(struct of_device *ofdev,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2567: FILE: drivers/usb/gadget/fsl_qe_udc.c:2471:
+static int __devinit qe_udc_probe(struct of_device *ofdev,
+			const struct of_device_id *match)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2594: FILE: drivers/usb/gadget/fsl_qe_udc.c:2498:
+	 * leave usbintr reg untouched*/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2598: FILE: drivers/usb/gadget/fsl_qe_udc.c:2502:
+	 * set the qe_udc->gadget.xxx */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2619: FILE: drivers/usb/gadget/fsl_qe_udc.c:2523:
+
+

WARNING:TYPO_SPELLING: 'intialization' may be misspelled - perhaps 'initialization'?
#2620: FILE: drivers/usb/gadget/fsl_qe_udc.c:2524:
+	/* EP:intialization qe_ep struct */
 	      ^^^^^^^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2623: FILE: drivers/usb/gadget/fsl_qe_udc.c:2527:
+		 * qe_ep_init() should be called in ep_enable() */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2626: FILE: drivers/usb/gadget/fsl_qe_udc.c:2530:
+		 * into gadget.ep_list */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!udc_controller->nullbuf"
#2637: FILE: drivers/usb/gadget/fsl_qe_udc.c:2541:
+	if (udc_controller->nullbuf == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2638: FILE: drivers/usb/gadget/fsl_qe_udc.c:2542:
+	if (udc_controller->nullbuf == NULL) {
+		dev_dbg(udc_controller->dev, "cannot alloc nullbuf\n");

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#2645: FILE: drivers/usb/gadget/fsl_qe_udc.c:2549:
+		udc_controller->nullp = dma_map_single(

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2653: FILE: drivers/usb/gadget/fsl_qe_udc.c:2557:
+		dma_sync_single_for_device(udc_controller->gadget.dev.parent,
+					udc_controller->nullp, 256,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2658: FILE: drivers/usb/gadget/fsl_qe_udc.c:2562:
+	tasklet_init(&udc_controller->rx_tasklet, ep_rx_tasklet,
+			(unsigned long)udc_controller);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2663: FILE: drivers/usb/gadget/fsl_qe_udc.c:2567:
+	ret = request_irq(udc_controller->usb_irq, qe_udc_irq, 0,
+				driver_name, udc_controller);

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2665: FILE: drivers/usb/gadget/fsl_qe_udc.c:2569:
+		dev_err(udc_controller->dev, "cannot request irq %d err %d \n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2675: FILE: drivers/usb/gadget/fsl_qe_udc.c:2579:
+	dev_info(udc_controller->dev,
+			"QE/CPM USB controller initialized as device\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2683: FILE: drivers/usb/gadget/fsl_qe_udc.c:2587:
+		dma_unmap_single(udc_controller->gadget.dev.parent,
+			udc_controller->nullp, 256,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2688: FILE: drivers/usb/gadget/fsl_qe_udc.c:2592:
+		dma_sync_single_for_cpu(udc_controller->gadget.dev.parent,
+			udc_controller->nullp, 256,

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#2709: FILE: drivers/usb/gadget/fsl_qe_udc.c:2613:
+	return -ENOTSUPP;

WARNING:ENOTSUPP: ENOTSUPP is not a SUSV4 error code, prefer EOPNOTSUPP
#2714: FILE: drivers/usb/gadget/fsl_qe_udc.c:2618:
+	return -ENOTSUPP;

WARNING:HOTPLUG_SECTION: Using __devexit is unnecessary
#2718: FILE: drivers/usb/gadget/fsl_qe_udc.c:2622:
+static int __devexit qe_udc_remove(struct of_device *ofdev)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2733: FILE: drivers/usb/gadget/fsl_qe_udc.c:2637:
+		dma_unmap_single(udc_controller->gadget.dev.parent,
+			udc_controller->nullp, 256,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2738: FILE: drivers/usb/gadget/fsl_qe_udc.c:2642:
+		dma_sync_single_for_cpu(udc_controller->gadget.dev.parent,
+			udc_controller->nullp, 256,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2750: FILE: drivers/usb/gadget/fsl_qe_udc.c:2654:
+		dma_unmap_single(udc_controller->gadget.dev.parent,
+				ep->rxbuf_d, size,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2755: FILE: drivers/usb/gadget/fsl_qe_udc.c:2659:
+		dma_sync_single_for_cpu(udc_controller->gadget.dev.parent,
+				ep->rxbuf_d, size,

WARNING:HOTPLUG_SECTION: Using __devinitdata is unnecessary
#2776: FILE: drivers/usb/gadget/fsl_qe_udc.c:2680:
+static struct of_device_id __devinitdata qe_udc_match[] = {

WARNING:MISPLACED_INIT: __devinitdata should be placed after qe_udc_match[]
#2776: FILE: drivers/usb/gadget/fsl_qe_udc.c:2680:
+static struct of_device_id __devinitdata qe_udc_match[] = {

It is possible to use section markers on variables in a way
which gcc doesn't understand (or at least not the way the
developer intended)::

  static struct __initdata samsung_pll_clock exynos4_plls[nr_plls] = {

does not put exynos4_plls in the .initdata section. The __initdata
marker can be virtually anywhere on the line, except right after
"struct". The preferred location is before the "=" sign if there is
one, or before the trailing ";" otherwise.

See: https://lore.kernel.org/lkml/1377655732.3619.19.camel@joe-AO722/

WARNING:CONST_STRUCT: struct of_device_id should normally be const
#2776: FILE: drivers/usb/gadget/fsl_qe_udc.c:2680:
+static struct of_device_id __devinitdata qe_udc_match[] = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:UNDOCUMENTED_DT_STRING: DT compatible string "fsl,mpc8272-cpm-usb" appears un-documented -- check /home/fedora/lkml-analysis/linux/Documentation/devicetree/bindings/
#2782: FILE: drivers/usb/gadget/fsl_qe_udc.c:2686:
+		.compatible = "fsl,mpc8272-cpm-usb",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#2803: FILE: drivers/usb/gadget/fsl_qe_udc.c:2707:
+	printk(KERN_INFO "%s: %s, %s\n", driver_name, driver_desc,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2804: FILE: drivers/usb/gadget/fsl_qe_udc.c:2708:
+	printk(KERN_INFO "%s: %s, %s\n", driver_name, driver_desc,
+			DRIVER_VERSION);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2826: FILE: drivers/usb/gadget/fsl_qe_udc.h:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2831: FILE: drivers/usb/gadget/fsl_qe_udc.h:6:
+ * ^IXiaobo Xie <X.Xie@freescale.com>$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2832: FILE: drivers/usb/gadget/fsl_qe_udc.h:7:
+ * ^ILi Yang <leoli@freescale.com>$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2895: FILE: drivers/usb/gadget/fsl_qe_udc.h:70:
+#define USB_RHS_SHIFT   ^I0$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2897: FILE: drivers/usb/gadget/fsl_qe_udc.h:72:
+#define USB_RHS_NORMAL  ^I0x0$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#2924: FILE: drivers/usb/gadget/fsl_qe_udc.h:99:
+#define USBER_ALL_CLEAR ^I0x0fff$

CHECK:SPACING: spaces preferred around that '|' (ctx:VxE)
#2931: FILE: drivers/usb/gadget/fsl_qe_udc.h:106:
+#define USB_E_TXE_MASK         (USB_E_TXE4_MASK | USB_E_TXE3_MASK|\
                                                                  ^

WARNING:SPACING: missing space after struct definition
#2942: FILE: drivers/usb/gadget/fsl_qe_udc.h:117:
+struct usb_device_para{

WARNING:SPACING: missing space after struct definition
#2956: FILE: drivers/usb/gadget/fsl_qe_udc.h:131:
+struct usb_ep_para{

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'EP' - possible side-effects?
#2983: FILE: drivers/usb/gadget/fsl_qe_udc.h:158:
+#define ep_is_in(EP)	((ep_index(EP) == 0) ? (EP->udc->ep0_dir == \
+			USB_DIR_IN) : ((EP)->desc->bEndpointAddress \
+			& USB_DIR_IN) == USB_DIR_IN)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3001: FILE: drivers/usb/gadget/fsl_qe_udc.h:176:
+/*-----------------------------------------------------------------------------
+	USB RX And TX DATA Frame

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3002: FILE: drivers/usb/gadget/fsl_qe_udc.h:177:
+ -----------------------------------------------------------------------------*/

WARNING:SPACING: missing space after struct definition
#3003: FILE: drivers/usb/gadget/fsl_qe_udc.h:178:
+struct qe_frame{

WARNING:TYPO_SPELLING: 'tranmitted' may be misspelled - perhaps 'transmitted'?
#3035: FILE: drivers/usb/gadget/fsl_qe_udc.h:210:
+#define FRAME_OK               0x00000000 /* Frame tranmitted or received OK */
                                                    ^^^^^^^^^^

WARNING:TYPO_SPELLING: 'occured' may be misspelled - perhaps 'occurred'?
#3036: FILE: drivers/usb/gadget/fsl_qe_udc.h:211:
+#define FRAME_ERROR            0x80000000 /* Error occured on frame */
                                                    ^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3041: FILE: drivers/usb/gadget/fsl_qe_udc.h:216:
+#define RX_ER_BITSTUFF         0x08000000 /* Frame Aborted --Received packet
+					     with bit stuff error */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3041: FILE: drivers/usb/gadget/fsl_qe_udc.h:216:
+					     with bit stuff error */

WARNING:TYPO_SPELLING: 'occured' may be misspelled - perhaps 'occurred'?
#3043: FILE: drivers/usb/gadget/fsl_qe_udc.h:218:
+#define RX_ER_OVERUN           0x02000000 /* Over-run occured on reception */
                                                       ^^^^^^^

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3055: FILE: drivers/usb/gadget/fsl_qe_udc.h:230:
+#define frame_get_length(frm) (frm->len)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3056: FILE: drivers/usb/gadget/fsl_qe_udc.h:231:
+#define frame_set_length(frm, leng) (frm->len = leng)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3057: FILE: drivers/usb/gadget/fsl_qe_udc.h:232:
+#define frame_get_data(frm) (frm->data)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3058: FILE: drivers/usb/gadget/fsl_qe_udc.h:233:
+#define frame_set_data(frm, dat) (frm->data = dat)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3059: FILE: drivers/usb/gadget/fsl_qe_udc.h:234:
+#define frame_get_info(frm) (frm->info)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3060: FILE: drivers/usb/gadget/fsl_qe_udc.h:235:
+#define frame_set_info(frm, inf) (frm->info = inf)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3061: FILE: drivers/usb/gadget/fsl_qe_udc.h:236:
+#define frame_get_status(frm) (frm->status)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3062: FILE: drivers/usb/gadget/fsl_qe_udc.h:237:
+#define frame_set_status(frm, stat) (frm->status = stat)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3063: FILE: drivers/usb/gadget/fsl_qe_udc.h:238:
+#define frame_get_privdata(frm) (frm->privdata)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'frm' may be better as '(frm)' to avoid precedence issues
#3064: FILE: drivers/usb/gadget/fsl_qe_udc.h:239:
+#define frame_set_privdata(frm, dat) (frm->privdata = dat)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around frm->node
#3078: FILE: drivers/usb/gadget/fsl_qe_udc.h:253:
+	INIT_LIST_HEAD(&(frm->node));

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3085: FILE: drivers/usb/gadget/fsl_qe_udc.h:260:
+	/* ep_queue() func will add
+	 a request->queue into a udc_ep->queue 'd tail */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3085: FILE: drivers/usb/gadget/fsl_qe_udc.h:260:
+	 a request->queue into a udc_ep->queue 'd tail */

WARNING:TYPO_SPELLING: 'reseting' may be misspelled - perhaps 'resetting'?
#3162: FILE: drivers/usb/gadget/fsl_qe_udc.h:337:
+	u32 bus_reset;          /* Device is bus reseting */
 	                                         ^^^^^^^^

WARNING:TYPO_SPELLING: 'Enpoint' may be misspelled - perhaps 'Endpoint'?
#3166: FILE: drivers/usb/gadget/fsl_qe_udc.h:341:
+	u32 ep0_state;          /* Enpoint zero state */
 	                           ^^^^^^^

WARNING:TYPO_SPELLING: 'Enpoint' may be misspelled - perhaps 'Endpoint'?
#3167: FILE: drivers/usb/gadget/fsl_qe_udc.h:342:
+	u32 ep0_dir;            /* Enpoint zero direction: can be
 	                           ^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#3168: FILE: drivers/usb/gadget/fsl_qe_udc.h:343:
+	u32 ep0_dir;            /* Enpoint zero direction: can be
+				USB_DIR_IN or USB_DIR_OUT*/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#3168: FILE: drivers/usb/gadget/fsl_qe_udc.h:343:
+				USB_DIR_IN or USB_DIR_OUT*/

WARNING:TYPO_SPELLING: 'recieved' may be misspelled - perhaps 'received'?
#3206: FILE: drivers/usb/gadget/fsl_qe_udc.h:381:
+#define T_STAL        0x00080000         /* Stall recieved */
                                                   ^^^^^^^^

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000232597.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 1 errors, 103 warnings, 147 checks, 3212 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000232597.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
