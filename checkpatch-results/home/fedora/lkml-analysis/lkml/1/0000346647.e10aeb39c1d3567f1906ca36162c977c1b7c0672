WARNING:PATCH_PREFIX: patch prefix '.' exists, appears to be a -p0 patch

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#40: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:1:
+/* GD ROM driver for the SEGA Dreamcast

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#56: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:17:
+ * with this program; if not, write to the Free Software Foundation, Inc.,$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#57: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:18:
+ * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.$

WARNING:INCLUDE_LINUX: Use #include <linux/io.h> instead of <asm/io.h>
#77: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:38:
+#include <asm/io.h>

WARNING:INCLUDE_LINUX: Use #include <linux/delay.h> instead of <asm/delay.h>
#79: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:40:
+#include <asm/delay.h>

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#94: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:55:
+#define GDROM_ALTSTATUS_REG GDROM_BASE_REG + 0x18

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#95: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:56:
+#define GDROM_DATA_REG GDROM_BASE_REG + 0x80

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#96: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:57:
+#define GDROM_ERROR_REG GDROM_BASE_REG + 0x84

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#97: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:58:
+#define GDROM_INTSEC_REG GDROM_BASE_REG + 0x88

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#98: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:59:
+#define GDROM_SECNUM_REG GDROM_BASE_REG + 0x8C

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#99: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:60:
+#define GDROM_BCL_REG  GDROM_BASE_REG + 0x90

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#100: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:61:
+#define GDROM_BCH_REG GDROM_BASE_REG + 0x94

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#101: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:62:
+#define GDROM_DSEL_REG GDROM_BASE_REG + 0x98

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#102: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:63:
+#define GDROM_STATUSCOMMAND_REG GDROM_BASE_REG + 0x9C

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#103: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:64:
+#define GDROM_RESET_REG GDROM_BASE_REG + 0x4E4

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#107: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:68:
+#define GDROM_DMA_STARTADDR_REG GDROM_BASE_REG + 0x404

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#108: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:69:
+#define GDROM_DMA_LENGTH_REG GDROM_BASE_REG + 0x408

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#109: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:70:
+#define GDROM_DMA_DIRECTION_REG GDROM_BASE_REG + 0x40C

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#110: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:71:
+#define GDROM_DMA_ENABLE_REG GDROM_BASE_REG + 0x414

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#111: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:72:
+#define GDROM_DMA_STATUS_REG GDROM_BASE_REG + 0x418

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#112: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:73:
+#define GDROM_DMA_WAIT_REG GDROM_BASE_REG + 0x4A0

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#113: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:74:
+#define GDROM_DMA_ACCESS_CTRL_REG GDROM_BASE_REG + 0x4B8

CHECK:CAMELCASE: Avoid CamelCase: <padA>
#149: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:110:
+	char padA[13];

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <padB>
#153: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:114:
+	char padB[16];

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#157: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:118:
+static int gdrom_packetcommand(struct cdrom_device_info * cd_info,

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:CORRUPTED_PATCH: patch seems to be corrupt (line wrapped?)
#158: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:118:
struct packet_command *command);

The patch seems to be corrupted or lines are wrapped.
Please regenerate the patch file before sending it to the maintainer.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#159: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:119:
+static int gdrom_packetcommand(struct cdrom_device_info * cd_info,
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#165: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:125:
+^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#173: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:133:
+}^I^I$

WARNING:LINE_SPACING: Missing a blank line after declarations
#179: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:139:
+	short *data = buf;
+	wait_clrbusy();

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#230: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:190:
+ */^I$

WARNING:LINE_SPACING: Missing a blank line after declarations
#234: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:194:
+	struct packet_command *spin_command;
+	spin_command = kzalloc(sizeof(struct packet_command), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*spin_command)...) over kzalloc(sizeof(struct packet_command)...)
#234: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:194:
+	spin_command = kzalloc(sizeof(struct packet_command), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:REPEATED_WORD: Possible repeated word: 'byte'
#257: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:217:
+ * byte 3 = sizeof TOC >> 8  ie upper byte
+ * byte 4 = sizeof TOC & 0xff ie lower byte

WARNING:LINE_SPACING: Missing a blank line after declarations
#263: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:223:
+	struct packet_command *toc_command;
+	toc_command = kzalloc(sizeof(struct packet_command), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*toc_command)...) over kzalloc(sizeof(struct packet_command)...)
#263: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:223:
+	toc_command = kzalloc(sizeof(struct packet_command), GFP_KERNEL);

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#276: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:236:
+	insw(GDROM_DATA_REG_P0, toc, tocsize/2);
 	                                    ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#277: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:237:
+^Ikfree(toc_command);^I$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#302: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:261:
+static int gdrom_get_last_session(struct cdrom_device_info *cd_info,
+{

WARNING:LINE_SPACING: Missing a blank line after declarations
#306: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:265:
+	int err = -ENOMEM;
+	tocA = kzalloc(sizeof(struct gdromtoc), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*tocA)...) over kzalloc(sizeof(struct gdromtoc)...)
#306: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:265:
+	tocA = kzalloc(sizeof(struct gdromtoc), GFP_KERNEL);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#308: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:267:
+^I^Igoto exit;^I$

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*tocB)...) over kzalloc(sizeof(struct gdromtoc)...)
#309: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:268:
+	tocB = kzalloc(sizeof(struct gdromtoc), GFP_KERNEL);

CHECK:BRACES: braces {} should be used on all arms of this statement
#314: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:273:
+	if (err) {
[...]
+	else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#319: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:278:
+			printk(KERN_INFO "Could not get CD table of contents\n");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#321: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:280:
+^I^I}^I$

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#323: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:282:
+	}
+	else

`else {` should follow the closing block `}` on the same line.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#324: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:283:
+		printk(KERN_DEBUG "Disk is GDROM\n");

WARNING:NEEDLESS_IF: kfree(NULL) is safe and this check is probably not required
#326: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:285:
+	if (gd.toc)
+		kfree(gd.toc);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*gd.toc)...) over kzalloc(sizeof(struct gdromtoc)...)
#327: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:286:
+	gd.toc = kzalloc(sizeof(struct gdromtoc), GFP_KERNEL);

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 16)
#332: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:291:
+		if (tocuse)
+		memcpy(gd.toc, tocB, sizeof (struct gdromtoc));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#333: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:292:
+		memcpy(gd.toc, tocB, sizeof (struct gdromtoc));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#335: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:294:
+		memcpy(gd.toc, tocA, sizeof (struct gdromtoc));

ERROR:TRAILING_WHITESPACE: trailing whitespace
#339: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:298:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#348: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:307:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#349: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:308:
+^Iif ((track > 100) || (track < get_entry_track(gd.toc->first))) {^I$

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'track > 100'
#349: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:308:
+	if ((track > 100) || (track < get_entry_track(gd.toc->first))) {	

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'track < get_entry_track(gd.toc->first)'
#349: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:308:
+	if ((track > 100) || (track < get_entry_track(gd.toc->first))) {	

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#351: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:310:
+		printk(KERN_INFO "GDROM: No data on the last session of the CD\n");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#359: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:318:
+^Ierr = 0;^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#367: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:326:
+^I^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#375: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:334:
+^I$

WARNING:LINE_SPACING: Missing a blank line after declarations
#387: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:346:
+	char sense = ctrl_inb(GDROM_ERROR_REG);
+	sense &=0xF0;

ERROR:SPACING: spaces required around that '&=' (ctx:WxV)
#387: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:346:
+	sense &=0xF0;
 	      ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#400: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:359:
+	char sense = ctrl_inb(GDROM_ERROR_REG);
+	if ((sense & 0xF0) == 0x60)

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#405: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:364:
+static int gdrom_hardreset(struct cdrom_device_info * cd_info)

WARNING:LINE_SPACING: Missing a blank line after declarations
#408: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:367:
+	int count;
+	ctrl_outl(0x1fffff, GDROM_RESET_REG);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#414: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:373:
+static int gdrom_packetcommand(struct cdrom_device_info * cd_info,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#416: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:374:
+static int gdrom_packetcommand(struct cdrom_device_info * cd_info,
+{

ERROR:TRAILING_WHITESPACE: trailing whitespace
#419: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:377:
+ ^I * though the return value is meaningless */^I$

ERROR:CODE_INDENT: code indent should use tabs where possible
#419: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:377:
+ ^I * though the return value is meaningless */^I$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#419: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:377:
+ ^I * though the return value is meaningless */^I$

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#419: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:377:
+ 	 * though the return value is meaningless */	

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:LINE_SPACING: Missing a blank line after declarations
#434: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:392:
+	char sense_key;
+	if (gd.pending)

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*sense_command)...) over kzalloc(sizeof(struct packet_command)...)
#438: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:396:
+	sense_command = kzalloc(sizeof(struct packet_command), GFP_KERNEL);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#454: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:412:
+		printk(KERN_INFO "GDROM: Drive not ready - command aborted\n");

ERROR:SPACING: space required before the open brace '{'
#458: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:416:
+	switch (sense_key){

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#460: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:418:
+		printk(KERN_INFO "GDROM: Command aborted\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#463: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:421:
+		printk(KERN_INFO "GDROM: Data protection error\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#466: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:424:
+		printk(KERN_NOTICE "GDROM: Unit needs attention - possible disk switch\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#469: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:427:
+		printk(KERN_INFO "GDROM: Illegal request - command has failed\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_crit([subsystem]dev, ... then dev_crit(dev, ... then pr_crit(...  to printk(KERN_CRIT ...
#472: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:430:
+		printk(KERN_CRIT "GDROM: Hardware error\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#475: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:433:
+		printk(KERN_WARNING "GDROM: Disk read error\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#478: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:436:
+		printk(KERN_INFO "GDROM: Not ready\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#481: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:439:
+		printk(KERN_DEBUG "GDROM: Recovered from error\n");

ERROR:TRAILING_WHITESPACE: trailing whitespace
#486: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:444:
+^I^I$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#488: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:446:
+		printk(KERN_INFO "GDROM: Unknown error\n");

ERROR:SPACING: space required before the open brace '{'
#491: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:449:
+	if (bufstring){

WARNING:BRACES: braces {} are not necessary for single statement blocks
#491: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:449:
+	if (bufstring){
+		memcpy(bufstring, &sense[4], 2); /* return additional sense data */
+	}

ERROR:TRAILING_WHITESPACE: trailing whitespace
#499: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:457:
+^I$

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#535: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:492:
+static int gdrom_bdops_ioctl(struct inode *inode, struct file *file,
+{

WARNING:CONST_STRUCT: struct block_device_operations should normally be const
#539: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:496:
+static struct block_device_operations gdrom_bdops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

ERROR:TRAILING_WHITESPACE: trailing whitespace
#574: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:531:
+^Iinit_waitqueue_head(&command_queue);^I$

ERROR:CODE_INDENT: code indent should use tabs where possible
#591: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:546:
+ ^I * we're not in the middle of some dma */$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#591: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:546:
+ ^I * we're not in the middle of some dma */$

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#591: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:546:
+ 	 * we're not in the middle of some dma */

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*read_command)...) over kzalloc(sizeof(struct packet_command)...)
#600: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:555:
+	read_command = kzalloc(sizeof(struct packet_command), GFP_KERNEL);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#640: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:595:
+}^I$

WARNING:LINE_SPACING: Missing a blank line after declarations
#645: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:600:
+	int err, block, block_cnt;
+	err = 0;

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#646: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:601:
+	block = req->sector/GD_TO_BLK + GD_SESSION_OFFSET;
 	                   ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#647: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:602:
+	block_cnt = req->nr_sectors/GD_TO_BLK;
 	                           ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#648: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:603:
+^Ierr = gdrom_readdisk_dma(block, block_cnt, req->buffer);^I$

CHECK:BRACES: braces {} should be used on all arms of this statement
#649: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:604:
+	if (unlikely(err)) {
[...]
+	else
[...]

ERROR:ELSE_AFTER_BRACE: else should follow close brace '}'
#655: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:610:
+	}
+	else

WARNING:LINE_SPACING: Missing a blank line after declarations
#663: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:618:
+	unsigned long pages;
+	pages = rq->backing_dev_info.ra_pages;

ERROR:SPACING: space prohibited after that '!' (ctx:BxW)
#665: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:620:
+		if (! blk_fs_request(req)) {
 		    ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#666: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:621:
+			printk(KERN_DEBUG "GDROM: Non-fs request ignored\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#670: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:625:
+			printk(KERN_NOTICE "GDROM: Read only device - write request ignored\n");

WARNING:BRACES: braces {} are not necessary for single statement blocks
#673: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:628:
+		if (req->nr_sectors) {
+			gdrom_request_handler_dma(req);
+		}

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*id)...) over kzalloc(sizeof(struct gdrom_id)...)
#685: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:640:
+	id = kzalloc(sizeof(struct gdrom_id), GFP_KERNEL);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#693: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:648:
+	printk(KERN_INFO "GDROM: %s from %s with firmware %s\n", model_name,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#695: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:649:
+	printk(KERN_INFO "GDROM: %s from %s with firmware %s\n", model_name,
+	kfree(model_name);

WARNING:LINE_SPACING: Missing a blank line after declarations
#718: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:672:
+	char err;
+	gd.toc = NULL;

CHECK:BRACES: braces {} should be used on all arms of this statement
#720: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:674:
+	if (err == 1)
[...]
+	else {
[...]

ERROR:TRAILING_WHITESPACE: trailing whitespace
#721: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:675:
+^I^Igdrom_outputversion();^I$

CHECK:BRACES: Unbalanced braces around else statement
#722: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:676:
+	else {

ERROR:TRAILING_WHITESPACE: trailing whitespace
#723: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:677:
+^I^Iprintk(KERN_WARNING "Probe for GDROM failed with error 0x%X\n", err);^I$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#723: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:677:
+		printk(KERN_WARNING "Probe for GDROM failed with error 0x%X\n", err);	

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#730: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:684:
+	printk(KERN_INFO "GDROM: Block device is registered with major

ERROR:SPACING: spaces required around that ':' (ctx:VxW)
#788: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:741:
+	printk(KERN_WARNING "GDROM: Could not probe for device - error is
 	                          ^

CHECK:CAMELCASE: Avoid CamelCase: <Could>
#788: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:741:
+	printk(KERN_WARNING "GDROM: Could not probe for device - error is

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#812: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:764:
+		printk(KERN_INFO "Could not register GDROM driver - error 0x%X\n", rc);

WARNING:NEEDLESS_IF: kfree(NULL) is safe and this check is probably not required
#834: FILE: linux-2.6/drivers/sh/gdrom/gdrom.c:786:
+	if (gd.toc)
+		kfree(gd.toc);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000346647.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 52 errors, 47 warnings, 25 checks, 802 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000346647.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
