WARNING:CONFIG_DESCRIPTION: please write a help paragraph that fully describes the config symbol
#50: FILE: drivers/media/video/Kconfig:896:
+config USB_S2255
+	tristate "USB Sensoray 2255 video capture device"
+	depends on VIDEO_V4L2
+	select VIDEOBUF_VMALLOC
+	default n
+	help
+	  Say Y here if you want support for the Sensoray 2255 USB device.
+	  This driver can be compiled as a module, called s2255drv.
+

Kconfig symbols should have a help text which fully describes
it.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#75: FILE: drivers/media/video/s2255drv.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#136: FILE: drivers/media/video/s2255drv.c:62:
+#define VX_FW ^I^I^I0x30$

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#140: FILE: drivers/media/video/s2255drv.c:66:
+#define MAX_PIPE_USBBLOCK	(40*1024)
                          	   ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#141: FILE: drivers/media/video/s2255drv.c:67:
+#define DEFAULT_PIPE_USBBLOCK	(16*1024)
                              	   ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#146: FILE: drivers/media/video/s2255drv.c:72:
+#define SYS_FRAMES_MAXSIZE	(720*288*2*2 + 4096)
                           	    ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#146: FILE: drivers/media/video/s2255drv.c:72:
+#define SYS_FRAMES_MAXSIZE	(720*288*2*2 + 4096)
                           	        ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#146: FILE: drivers/media/video/s2255drv.c:72:
+#define SYS_FRAMES_MAXSIZE	(720*288*2*2 + 4096)
                           	          ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#163: FILE: drivers/media/video/s2255drv.c:89:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#185: FILE: drivers/media/video/s2255drv.c:111:
+ *-------------------------------------------------------*/

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

CHECK:LINE_SPACING: Please don't use multiple blank lines
#221: FILE: drivers/media/video/s2255drv.c:147:
+
+

WARNING:TYPO_SPELLING: 'framei' may be misspelled - perhaps 'frame'?
#222: FILE: drivers/media/video/s2255drv.c:148:
+struct framei {
        ^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:CAMELCASE: Avoid CamelCase: <ulState>
#225: FILE: drivers/media/video/s2255drv.c:151:
+	unsigned long ulState;	/* ulState ==0 unused, 1 being filled, 2 full */

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <dwFrames>
#232: FILE: drivers/media/video/s2255drv.c:158:
+	unsigned long dwFrames;			/* number of frames in buffer */

WARNING:TYPO_SPELLING: 'framei' may be misspelled - perhaps 'frame'?
#233: FILE: drivers/media/video/s2255drv.c:159:
+	struct framei frame[SYS_FRAMES];	/* array of FRAME structures */
 	       ^^^^^^

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#236: FILE: drivers/media/video/s2255drv.c:162:
+#define DEF_MODEI_NTSC_CONT	FORMAT_NTSC, DEF_SCALE, DEF_COLOR, \
+		DEF_FDEC, DEF_BRIGHT, DEF_CONTRAST, DEF_SATURATION, \
+		DEF_HUE, 0, DEF_USB_BLOCK, 0

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#240: FILE: drivers/media/video/s2255drv.c:166:
+#define DEF_MODEI_PAL_CONT	FORMAT_PAL, DEF_SCALE, DEF_COLOR, DEF_FDEC,\
+		DEF_BRIGHT, DEF_CONTRAST, DEF_SATURATION, DEF_HUE, 0, \
+		DEF_USB_BLOCK, 0

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#244: FILE: drivers/media/video/s2255drv.c:170:
+#define DEF_MODEI_NTSC_SING	FORMAT_NTSC, DEF_SCALE, DEF_COLOR, DEF_FDEC,\
+		DEF_BRIGHT, DEF_CONTRAST, DEF_SATURATION, DEF_HUE, 1,\
+		DEF_USB_BLOCK, 0

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#248: FILE: drivers/media/video/s2255drv.c:174:
+#define DEF_MODEI_PAL_SING	FORMAT_PAL, DEF_SCALE, DEF_COLOR, DEF_FDEC, \
+		DEF_BRIGHT, DEF_CONTRAST, DEF_SATURATION, DEF_HUE, 1,\
+		DEF_USB_BLOCK, 0

WARNING:ONE_SEMICOLON: Statements terminations use 1 semicolon
#281: FILE: drivers/media/video/s2255drv.c:207:
+	u32 transfer_flags;;

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#298: FILE: drivers/media/video/s2255drv.c:224:
+	struct mutex		lock;

CHECK:UNCOMMENTED_DEFINITION: spinlock_t definition without comment
#324: FILE: drivers/media/video/s2255drv.c:250:
+	spinlock_t              slock;

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#326: FILE: drivers/media/video/s2255drv.c:252:
+};
+#define to_s2255_dev(d) container_of(d, struct s2255_dev, kref)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#353: FILE: drivers/media/video/s2255drv.c:279:
+	/* mode below is the desired mode.
+	   mode in s2255_dev is the current mode that was last set */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#353: FILE: drivers/media/video/s2255drv.c:279:
+	   mode in s2255_dev is the current mode that was last set */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#357: FILE: drivers/media/video/s2255drv.c:283:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#374: FILE: drivers/media/video/s2255drv.c:300:
+/* Because the channels were physically printed on the box in
+   reverse order than originally planned */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#374: FILE: drivers/media/video/s2255drv.c:300:
+   reverse order than originally planned */

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#394: FILE: drivers/media/video/s2255drv.c:320:
+			printk(KERN_DEBUG "s2255: " fmt, ##arg);	\

CHECK:LINE_SPACING: Please don't use multiple blank lines
#398: FILE: drivers/media/video/s2255drv.c:324:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#422: FILE: drivers/media/video/s2255drv.c:348:
+
+

CHECK:CAMELCASE: Avoid CamelCase: <YCrCb2RGB>
#553: FILE: drivers/media/video/s2255drv.c:479:
+static void YCrCb2RGB(int Y, int Cr, int Cb, unsigned char *pR,

CHECK:CAMELCASE: Avoid CamelCase: <Cr>
#553: FILE: drivers/media/video/s2255drv.c:479:
+static void YCrCb2RGB(int Y, int Cr, int Cb, unsigned char *pR,

CHECK:CAMELCASE: Avoid CamelCase: <Cb>
#553: FILE: drivers/media/video/s2255drv.c:479:
+static void YCrCb2RGB(int Y, int Cr, int Cb, unsigned char *pR,

WARNING:RETURN_VOID: void function return statements are not generally useful
#582: FILE: drivers/media/video/s2255drv.c:508:
+	return;
+}

CHECK:CAMELCASE: Avoid CamelCase: <pCb>
#589: FILE: drivers/media/video/s2255drv.c:515:
+	unsigned char *pCb;

CHECK:CAMELCASE: Avoid CamelCase: <pCr>
#590: FILE: drivers/media/video/s2255drv.c:516:
+	unsigned char *pCr;

WARNING:LINE_SPACING: Missing a blank line after declarations
#593: FILE: drivers/media/video/s2255drv.c:519:
+	unsigned int i;
+	pY = (unsigned char *)in;

WARNING:RETURN_VOID: void function return statements are not generally useful
#603: FILE: drivers/media/video/s2255drv.c:529:
+	return;
+}

CHECK:CAMELCASE: Avoid CamelCase: <pYEND>
#615: FILE: drivers/media/video/s2255drv.c:541:
+	unsigned char *pYEND;

WARNING:LINE_SPACING: Missing a blank line after declarations
#620: FILE: drivers/media/video/s2255drv.c:546:
+	unsigned long k = 0;
+	pY = (unsigned char *)in;

WARNING:RETURN_VOID: void function return statements are not generally useful
#643: FILE: drivers/media/video/s2255drv.c:569:
+	return;
+}

WARNING:LINE_SPACING: Missing a blank line after declarations
#654: FILE: drivers/media/video/s2255drv.c:580:
+	unsigned long k = 0;
+	pY = (unsigned char *)in;

WARNING:RETURN_VOID: void function return statements are not generally useful
#680: FILE: drivers/media/video/s2255drv.c:606:
+	return;
+}

WARNING:LINE_SPACING: Missing a blank line after declarations
#692: FILE: drivers/media/video/s2255drv.c:618:
+	unsigned short rgbbytes;
+	pY = (unsigned char *)in;

WARNING:RETURN_VOID: void function return statements are not generally useful
#725: FILE: drivers/media/video/s2255drv.c:651:
+	return;
+}

WARNING:LINE_SPACING: Missing a blank line after declarations
#732: FILE: drivers/media/video/s2255drv.c:658:
+	struct complete_data *data = (struct complete_data *)user_data;
+	dprintk(100, "s2255 timer\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#734: FILE: drivers/media/video/s2255drv.c:660:
+		printk(KERN_ERR "s2255: can't submit urb\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#744: FILE: drivers/media/video/s2255drv.c:670:
+/* this loads the firmware asynchronously.
+   Originally this was done synchroously in probe.

WARNING:LINE_SPACING: Missing a blank line after declarations
#754: FILE: drivers/media/video/s2255drv.c:680:
+	int len;
+	dprintk(100, "udev %p urb %p", udev, urb);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!data->fw_urb"
#760: FILE: drivers/media/video/s2255drv.c:686:
+	if (data->fw_urb == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#766: FILE: drivers/media/video/s2255drv.c:692:
+	/* all USB transfers must be done with continuous kernel memory.
+	   can't allocate more than 128k in current linux kernel, so

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#776: FILE: drivers/media/video/s2255drv.c:702:
+		dprintk(100, "completed len %d, loaded %d \n", len,

CHECK:SPACING: No space is necessary after a cast
#780: FILE: drivers/media/video/s2255drv.c:706:
+		       (char *) data->fw->data + data->fw_loaded, len);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#798: FILE: drivers/media/video/s2255drv.c:724:
+
+}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:WAITQUEUE_ACTIVE: waitqueue_active without comment
#813: FILE: drivers/media/video/s2255drv.c:739:
+	if (!waitqueue_active(&buf->vb.done)) {

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#815: FILE: drivers/media/video/s2255drv.c:741:
+		/* no one active,
+		   add timer here as process may be suspended(ctrl-z).

CHECK:LINE_SPACING: Please don't use multiple blank lines
#830: FILE: drivers/media/video/s2255drv.c:756:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#844: FILE: drivers/media/video/s2255drv.c:770:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#846: FILE: drivers/media/video/s2255drv.c:772:
+
+

WARNING:TYPO_SPELLING: 'framei' may be misspelled - perhaps 'frame'?
#863: FILE: drivers/media/video/s2255drv.c:789:
+	struct framei *frm;
 	       ^^^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#864: FILE: drivers/media/video/s2255drv.c:790:
+	struct framei *frm;
+	last_frame = dev->last_frame[chn];

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'vbuf != NULL'
#865: FILE: drivers/media/video/s2255drv.c:791:
+	if ((last_frame != -1) && (vbuf != NULL)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "vbuf"
#865: FILE: drivers/media/video/s2255drv.c:791:
+	if ((last_frame != -1) && (vbuf != NULL)) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#896: FILE: drivers/media/video/s2255drv.c:822:
+			printk(KERN_DEBUG "s2255: unknown format?\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#903: FILE: drivers/media/video/s2255drv.c:829:
+		printk(KERN_ERR "s2255: =======no frame\n");

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#906: FILE: drivers/media/video/s2255drv.c:832:
+
+	}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#918: FILE: drivers/media/video/s2255drv.c:844:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#922: FILE: drivers/media/video/s2255drv.c:848:
+	struct s2255_buffer *buf, *prev;
+	dprintk(1, "%s dma_q=0x%08lx chan %d\n", __func__,

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#950: FILE: drivers/media/video/s2255drv.c:876:
+		if (NULL == prev) {

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:LINE_SPACING: Missing a blank line after declarations
#976: FILE: drivers/media/video/s2255drv.c:902:
+	struct s2255_buffer *buf;
+	dprintk(1, "[%d]vid timeout %p\n", vidq->channel, vidq);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#989: FILE: drivers/media/video/s2255drv.c:915:
+/* ------------------------------------------------------------------
+   Videobuf operations

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#990: FILE: drivers/media/video/s2255drv.c:916:
+   ------------------------------------------------------------------*/

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#998: FILE: drivers/media/video/s2255drv.c:924:
+	if (0 == *count)

WARNING:TRACING_LOGGING: Unnecessary ftrace-like logging - prefer using ftrace
#1009: FILE: drivers/media/video/s2255drv.c:935:
+	dprintk(4, "%s\n", __func__);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1022: FILE: drivers/media/video/s2255drv.c:948:
+	int rc, init_buffer = 0;
+	dprintk(4, "%s, field=%d\n", __func__, field);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fh->fmt"
#1023: FILE: drivers/media/video/s2255drv.c:949:
+	if (fh->fmt == NULL)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fh->width < norm_minw(fh->dev->vdev[fh->channel])'
#1025: FILE: drivers/media/video/s2255drv.c:951:
+	if ((fh->width < norm_minw(fh->dev->vdev[fh->channel])) ||
+	    (fh->width > norm_maxw(fh->dev->vdev[fh->channel])) ||
+	    (fh->height < norm_minh(fh->dev->vdev[fh->channel])) ||
+	    (fh->height > norm_maxh(fh->dev->vdev[fh->channel]))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fh->width > norm_maxw(fh->dev->vdev[fh->channel])'
#1025: FILE: drivers/media/video/s2255drv.c:951:
+	if ((fh->width < norm_minw(fh->dev->vdev[fh->channel])) ||
+	    (fh->width > norm_maxw(fh->dev->vdev[fh->channel])) ||
+	    (fh->height < norm_minh(fh->dev->vdev[fh->channel])) ||
+	    (fh->height > norm_maxh(fh->dev->vdev[fh->channel]))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fh->height < norm_minh(fh->dev->vdev[fh->channel])'
#1025: FILE: drivers/media/video/s2255drv.c:951:
+	if ((fh->width < norm_minw(fh->dev->vdev[fh->channel])) ||
+	    (fh->width > norm_maxw(fh->dev->vdev[fh->channel])) ||
+	    (fh->height < norm_minh(fh->dev->vdev[fh->channel])) ||
+	    (fh->height > norm_maxh(fh->dev->vdev[fh->channel]))) {

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'fh->height > norm_maxh(fh->dev->vdev[fh->channel])'
#1025: FILE: drivers/media/video/s2255drv.c:951:
+	if ((fh->width < norm_minw(fh->dev->vdev[fh->channel])) ||
+	    (fh->width > norm_maxw(fh->dev->vdev[fh->channel])) ||
+	    (fh->height < norm_minh(fh->dev->vdev[fh->channel])) ||
+	    (fh->height > norm_maxh(fh->dev->vdev[fh->channel]))) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1035: FILE: drivers/media/video/s2255drv.c:961:
+	if (0 != buf->vb.baddr && buf->vb.bsize < buf->vb.size) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1050: FILE: drivers/media/video/s2255drv.c:976:
+	if (VIDEOBUF_NEEDS_INIT == buf->vb.state) {

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'buffer_queue', this function's name, in a string
#1076: FILE: drivers/media/video/s2255drv.c:1002:
+		dprintk(2, "[%p/%d] buffer_queue - append to queued\n",

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'buffer_queue', this function's name, in a string
#1081: FILE: drivers/media/video/s2255drv.c:1007:
+		dprintk(2, "[%p/%d] buffer_queue - first active\n",

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1088: FILE: drivers/media/video/s2255drv.c:1014:
+		if (prev->vb.width == buf->vb.width
+		    && prev->vb.height == buf->vb.height

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#1089: FILE: drivers/media/video/s2255drv.c:1015:
+		    && prev->vb.height == buf->vb.height
+		    && prev->fmt == buf->fmt) {

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'buffer_queue', this function's name, in a string
#1092: FILE: drivers/media/video/s2255drv.c:1018:
+			dprintk(2, "[%p/%d] buffer_queue - append to active\n",

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'buffer_queue', this function's name, in a string
#1098: FILE: drivers/media/video/s2255drv.c:1024:
+			dprintk(2, "[%p/%d] buffer_queue - first queued\n",

WARNING:LINE_SPACING: Missing a blank line after declarations
#1109: FILE: drivers/media/video/s2255drv.c:1035:
+	struct s2255_fh *fh = vq->priv_data;
+	dprintk(4, "%s %d\n", __func__, fh->channel);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1121: FILE: drivers/media/video/s2255drv.c:1047:
+/* ------------------------------------------------------------------
+   IOCTL handling

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1122: FILE: drivers/media/video/s2255drv.c:1048:
+   ------------------------------------------------------------------*/

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1142: FILE: drivers/media/video/s2255drv.c:1068:
+	return (dev->resources[fh->channel]);

return is not a function and as such doesn't need parentheses::

  return (bar);

can simply be::

  return bar;

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1152: FILE: drivers/media/video/s2255drv.c:1078:
+/* ------------------------------------------------------------------
+   IOCTL vidioc handling

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1153: FILE: drivers/media/video/s2255drv.c:1079:
+   ------------------------------------------------------------------*/

WARNING:LINE_SPACING: Missing a blank line after declarations
#1168: FILE: drivers/media/video/s2255drv.c:1094:
+	int index = 0;
+	if (f)

WARNING:STRLCPY: Prefer strscpy over strlcpy - see: https://lore.kernel.org/r/CAHk-=wgfRnXz0W3D37d01q3JFkr_i_uTL=V6A6G1oUZcprmknw@mail.gmail.com/
#1175: FILE: drivers/media/video/s2255drv.c:1101:
+	strlcpy(f->description, formats[index].name, sizeof(f->description));

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1192: FILE: drivers/media/video/s2255drv.c:1118:
+	return (0);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt"
#1210: FILE: drivers/media/video/s2255drv.c:1136:
+	if (fmt == NULL)

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#1217: FILE: drivers/media/video/s2255drv.c:1143:
+	dprintk(4, "try format %d \n", is_ntsc);

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#1243: FILE: drivers/media/video/s2255drv.c:1169:
+
+		}

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#1293: FILE: drivers/media/video/s2255drv.c:1219:
+	dprintk(50, "width %d height %d field %d \n", f->fmt.pix.width,

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!fmt"
#1321: FILE: drivers/media/video/s2255drv.c:1247:
+	if (fmt == NULL)

WARNING:SPLIT_STRING: quoted string split across lines
#1357: FILE: drivers/media/video/s2255drv.c:1283:
+		dprintk(2, "for lower CPU usage, use V4L2_PIX_FMT_YUV422P"
+			"V4L2_PIX_FMT_YUVV(minimal software reordering) or"

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:MISSING_SPACE: break quoted strings at a space character
#1357: FILE: drivers/media/video/s2255drv.c:1283:
+		dprintk(2, "for lower CPU usage, use V4L2_PIX_FMT_YUV422P"
+			"V4L2_PIX_FMT_YUVV(minimal software reordering) or"

WARNING:SPLIT_STRING: quoted string split across lines
#1358: FILE: drivers/media/video/s2255drv.c:1284:
+			"V4L2_PIX_FMT_YUVV(minimal software reordering) or"
+			" V4L2_PIX_FMT_GREY\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#1369: FILE: drivers/media/video/s2255drv.c:1295:
+	struct s2255_fh *fh = priv;
+	rc = videobuf_reqbufs(&fh->vb_vidq, p);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1377: FILE: drivers/media/video/s2255drv.c:1303:
+	struct s2255_fh *fh = priv;
+	rc = videobuf_querybuf(&fh->vb_vidq, p);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1385: FILE: drivers/media/video/s2255drv.c:1311:
+	struct s2255_fh *fh = priv;
+	rc = videobuf_qbuf(&fh->vb_vidq, p);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1393: FILE: drivers/media/video/s2255drv.c:1319:
+	struct s2255_fh *fh = priv;
+	rc = videobuf_dqbuf(&fh->vb_vidq, p, file->f_flags & O_NONBLOCK);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1423: FILE: drivers/media/video/s2255drv.c:1349:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#1432: FILE: drivers/media/video/s2255drv.c:1358:
+	long retval = -1;
+	if (udev) {

CHECK:CAMELCASE: Avoid CamelCase: <linesPerFrame>
#1441: FILE: drivers/media/video/s2255drv.c:1367:
+	int linesPerFrame = LINE_SZ_DEF;

CHECK:CAMELCASE: Avoid CamelCase: <pixelsPerLine>
#1442: FILE: drivers/media/video/s2255drv.c:1368:
+	int pixelsPerLine = NUM_LINES_DEF;

CHECK:CAMELCASE: Avoid CamelCase: <outImageSize>
#1443: FILE: drivers/media/video/s2255drv.c:1369:
+	u32 outImageSize;

CHECK:CAMELCASE: Avoid CamelCase: <usbInSize>
#1444: FILE: drivers/media/video/s2255drv.c:1370:
+	u32 usbInSize;

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!mode"
#1447: FILE: drivers/media/video/s2255drv.c:1373:
+	if (mode == NULL)

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1492: FILE: drivers/media/video/s2255drv.c:1418:
+	/* total bytes to send including prefix and 4K padding;
+	   must be a multiple of USB_READ_SIZE */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1492: FILE: drivers/media/video/s2255drv.c:1418:
+	   must be a multiple of USB_READ_SIZE */

WARNING:LINE_SPACING: Missing a blank line after declarations
#1504: FILE: drivers/media/video/s2255drv.c:1430:
+	struct device *dev = &sdev->udev->dev;
+	dev_info(dev, "------------------------------------------------\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!buffer"
#1544: FILE: drivers/media/video/s2255drv.c:1470:
+	if (buffer == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#1545: FILE: drivers/media/video/s2255drv.c:1471:
+	if (buffer == NULL) {
+		dev_err(&dev->udev->dev, "out of mem\n");

CHECK:SPACING: No space is necessary after a cast
#1551: FILE: drivers/media/video/s2255drv.c:1477:
+	buffer[1] = (u32) chn_rev;

WARNING:LINE_SPACING: Missing a blank line after declarations
#1580: FILE: drivers/media/video/s2255drv.c:1506:
+	int j;
+	dprintk(4, "%s\n", __func__);

WARNING:TRACING_LOGGING: Unnecessary ftrace-like logging - prefer using ftrace
#1580: FILE: drivers/media/video/s2255drv.c:1506:
+	dprintk(4, "%s\n", __func__);

WARNING:TYPO_SPELLING: 'everytime' may be misspelled - perhaps 'every time'?
#1594: FILE: drivers/media/video/s2255drv.c:1520:
+	/* send a set mode command everytime with restart.
 	                           ^^^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1595: FILE: drivers/media/video/s2255drv.c:1521:
+	/* send a set mode command everytime with restart.
+	   in case we switch resolutions or other parameters */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1595: FILE: drivers/media/video/s2255drv.c:1521:
+	   in case we switch resolutions or other parameters */

WARNING:LINE_SPACING: Missing a blank line after declarations
#1636: FILE: drivers/media/video/s2255drv.c:1562:
+	struct s2255_dmaqueue *dmaq = &dev->vidq[fh->channel];
+	dprintk(4, "%s\n, channel: %d", __func__, fh->channel);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1638: FILE: drivers/media/video/s2255drv.c:1564:
+		printk(KERN_ERR "invalid fh type0\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#1642: FILE: drivers/media/video/s2255drv.c:1568:
+		printk(KERN_ERR "invalid type i\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1647: FILE: drivers/media/video/s2255drv.c:1573:
+	/* give time for last frame to be received/flush in the usb
+	   receive pipe*/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1647: FILE: drivers/media/video/s2255drv.c:1573:
+	   receive pipe*/

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'vidioc_s_std', this function's name, in a string
#1668: FILE: drivers/media/video/s2255drv.c:1594:
+		dprintk(4, "vidioc_s_std NTSC\n");

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'vidioc_s_std', this function's name, in a string
#1671: FILE: drivers/media/video/s2255drv.c:1597:
+		dprintk(4, "vidioc_s_std PAL\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1680: FILE: drivers/media/video/s2255drv.c:1606:
+/* Sensoray 2255 is a multiple channel capture device.
+   It does not have a "crossbar" of inputs.

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1695: FILE: drivers/media/video/s2255drv.c:1621:
+	return (0);

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#1703: FILE: drivers/media/video/s2255drv.c:1629:
+}
+static int vidioc_s_input(struct file *file, void *priv, unsigned int i)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around s2255_qctrl[i]
#1718: FILE: drivers/media/video/s2255drv.c:1644:
+			memcpy(qc, &(s2255_qctrl[i]), sizeof(*qc));

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1719: FILE: drivers/media/video/s2255drv.c:1645:
+			return (0);

ERROR:RETURN_PARENTHESES: return is not a function, parentheses are not required
#1734: FILE: drivers/media/video/s2255drv.c:1660:
+			return (0);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1748: FILE: drivers/media/video/s2255drv.c:1674:
+	struct mode2255i *mode;
+	mode = &fh->mode;

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'vidioc_s_ctrl', this function's name, in a string
#1749: FILE: drivers/media/video/s2255drv.c:1675:
+	dprintk(4, "vidioc_s_ctrl\n");

WARNING:IF_1: Consider removing the #if 1 and its #endif
#1766: FILE: drivers/media/video/s2255drv.c:1692:
+#if 1

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1769: FILE: drivers/media/video/s2255drv.c:1695:
+			/* set mode here.  Note: stream does not need restarted.
+			   some V4L programs restart stream unnecessarily

WARNING:LINE_SPACING: Missing a blank line after declarations
#1789: FILE: drivers/media/video/s2255drv.c:1715:
+	int cur_channel = -1;
+	dprintk(1, "s2255: open called (minor=%d)\n", minor);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'NULL == dev'
#1801: FILE: drivers/media/video/s2255drv.c:1727:
+	if ((NULL == dev) || (cur_channel == -1)) {

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1801: FILE: drivers/media/video/s2255drv.c:1727:
+	if ((NULL == dev) || (cur_channel == -1)) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1808: FILE: drivers/media/video/s2255drv.c:1734:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1818: FILE: drivers/media/video/s2255drv.c:1744:
+		/* give 1 second for firmware to load in case
+		   driver loaded and then device immediately opened */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1818: FILE: drivers/media/video/s2255drv.c:1744:
+		   driver loaded and then device immediately opened */

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1846: FILE: drivers/media/video/s2255drv.c:1772:
+	if (NULL == fh) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1887: FILE: drivers/media/video/s2255drv.c:1813:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#1893: FILE: drivers/media/video/s2255drv.c:1819:
+	int rc;
+	dprintk(100, "%s\n", __func__);

WARNING:TRACING_LOGGING: Unnecessary ftrace-like logging - prefer using ftrace
#1893: FILE: drivers/media/video/s2255drv.c:1819:
+	dprintk(100, "%s\n", __func__);

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1895: FILE: drivers/media/video/s2255drv.c:1821:
+	if (V4L2_BUF_TYPE_VIDEO_CAPTURE != fh->type)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1905: FILE: drivers/media/video/s2255drv.c:1831:
+	struct s2255_dev *dev = to_s2255_dev(kref);
+	usb_put_dev(dev->udev);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 's2255_destroy', this function's name, in a string
#1906: FILE: drivers/media/video/s2255drv.c:1832:
+	dprintk(1, "s2255_destroy\n");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1924: FILE: drivers/media/video/s2255drv.c:1850:
+	dprintk(1, "s2255: close called (minor=%d, users=%d)\n", minor,
+	       dev->users[fh->channel]);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#2022: FILE: drivers/media/video/s2255drv.c:1948:
+	printk(KERN_INFO "Sensoray 2255 V4L driver\n");

WARNING:TYPO_SPELLING: 'framei' may be misspelled - perhaps 'frame'?
#2064: FILE: drivers/media/video/s2255drv.c:1990:
+	struct framei *frm;
 	       ^^^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#2069: FILE: drivers/media/video/s2255drv.c:1995:
+	struct bufferi *buf;
+	dprintk(100, "buffer to user\n");

CHECK:SPACING: No space is necessary after a cast
#2088: FILE: drivers/media/video/s2255drv.c:2014:
+		if (*(s32 *) pipe_info->transfer_buffer != FRAME_MARKER) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#2090: FILE: drivers/media/video/s2255drv.c:2016:
+			u32 jj;
+			if (dbgsync == 0) {

WARNING:SPLIT_STRING: quoted string split across lines
#2092: FILE: drivers/media/video/s2255drv.c:2018:
+				dprintk(3, "not synched, discarding all packets"
+					"until marker\n");

WARNING:MISSING_SPACE: break quoted strings at a space character
#2092: FILE: drivers/media/video/s2255drv.c:2018:
+				dprintk(3, "not synched, discarding all packets"
+					"until marker\n");

CHECK:SPACING: No space is necessary after a cast
#2099: FILE: drivers/media/video/s2255drv.c:2025:
+				if (*(s32 *) pdata == FRAME_MARKER) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#2101: FILE: drivers/media/video/s2255drv.c:2027:
+					int cc;
+					dprintk(3,

WARNING:SPLIT_STRING: quoted string split across lines
#2103: FILE: drivers/media/video/s2255drv.c:2029:
+						"found frame marker at offset:"
+						" %d [%x %x]\n", jj, pdata[0],

CHECK:SPACING: No space is necessary after a cast
#2107: FILE: drivers/media/video/s2255drv.c:2033:
+					cc = *(u32 *) (pdata + sizeof(u32));

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2109: FILE: drivers/media/video/s2255drv.c:2035:
+						printk(KERN_ERR

WARNING:LINE_SPACING: Missing a blank line after declarations
#2125: FILE: drivers/media/video/s2255drv.c:2051:
+			int cc;
+			dbgsync = 0;

CHECK:SPACING: No space is necessary after a cast
#2127: FILE: drivers/media/video/s2255drv.c:2053:
+			pword = (u32 *) pipe_info->transfer_buffer;

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#2131: FILE: drivers/media/video/s2255drv.c:2057:
+				printk("invalid channel found. "

WARNING:SPLIT_STRING: quoted string split across lines
#2132: FILE: drivers/media/video/s2255drv.c:2058:
+				printk("invalid channel found. "
+					"throwing out data!\n");

WARNING:SPLIT_STRING: quoted string split across lines
#2139: FILE: drivers/media/video/s2255drv.c:2065:
+				dprintk(1, "[%d][%d]unexpected payload: %d"
+					"required: %lu \n", cc, dev->cc,

WARNING:MISSING_SPACE: break quoted strings at a space character
#2139: FILE: drivers/media/video/s2255drv.c:2065:
+				dprintk(1, "[%d][%d]unexpected payload: %d"
+					"required: %lu \n", cc, dev->cc,

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2139: FILE: drivers/media/video/s2255drv.c:2065:
+					"required: %lu \n", cc, dev->cc,

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#2146: FILE: drivers/media/video/s2255drv.c:2072:
+
+		}

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2149: FILE: drivers/media/video/s2255drv.c:2075:
+	/* search done.  now find out if should be acquiring
+	   on this channel */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2149: FILE: drivers/media/video/s2255drv.c:2075:
+	   on this channel */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!frm->lpvbits"
#2176: FILE: drivers/media/video/s2255drv.c:2102:
+	if (frm->lpvbits == NULL) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#2188: FILE: drivers/media/video/s2255drv.c:2114:
+			printk("invalid copy size, overflow!\n");

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2206: FILE: drivers/media/video/s2255drv.c:2132:
+	dprintk(50, "cur_size size %lu size %lu \n", cur_size, size);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2210: FILE: drivers/media/video/s2255drv.c:2136:
+		u32 cc = dev->cc;
+		frm->ulState = 2;

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->cur_frame[cc] == SYS_FRAMES'
#2216: FILE: drivers/media/video/s2255drv.c:2142:
+		if ((dev->cur_frame[cc] == SYS_FRAMES) ||
+		    (dev->cur_frame[cc] == dev->buffer[cc].dwFrames))

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'dev->cur_frame[cc] == dev->buffer[cc].dwFrames'
#2216: FILE: drivers/media/video/s2255drv.c:2142:
+		if ((dev->cur_frame[cc] == SYS_FRAMES) ||
+		    (dev->cur_frame[cc] == dev->buffer[cc].dwFrames))

WARNING:USE_NEGATIVE_ERRNO: return of an errno should typically be negative (ie: return -EAGAIN)
#2228: FILE: drivers/media/video/s2255drv.c:2154:
+		return EAGAIN;

WARNING:LINE_SPACING: Missing a blank line after declarations
#2238: FILE: drivers/media/video/s2255drv.c:2164:
+	int res;
+	dprintk(50, "callback read video \n");

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2238: FILE: drivers/media/video/s2255drv.c:2164:
+	dprintk(50, "callback read video \n");

WARNING:RETURN_VOID: void function return statements are not generally useful
#2252: FILE: drivers/media/video/s2255drv.c:2178:
+	return;
+}

CHECK:CAMELCASE: Avoid CamelCase: <Request>
#2254: FILE: drivers/media/video/s2255drv.c:2180:
+static long s2255_vendor_req(struct s2255_dev *dev, unsigned char Request,

CHECK:CAMELCASE: Avoid CamelCase: <Index>
#2255: FILE: drivers/media/video/s2255drv.c:2181:
+			     u16 Index, u16 Value, void *TransferBuffer,

CHECK:CAMELCASE: Avoid CamelCase: <Value>
#2255: FILE: drivers/media/video/s2255drv.c:2181:
+			     u16 Index, u16 Value, void *TransferBuffer,

CHECK:CAMELCASE: Avoid CamelCase: <TransferBuffer>
#2255: FILE: drivers/media/video/s2255drv.c:2181:
+			     u16 Index, u16 Value, void *TransferBuffer,

CHECK:CAMELCASE: Avoid CamelCase: <TransferBufferLength>
#2256: FILE: drivers/media/video/s2255drv.c:2182:
+			     s32 TransferBufferLength, int bOut)

CHECK:CAMELCASE: Avoid CamelCase: <bOut>
#2256: FILE: drivers/media/video/s2255drv.c:2182:
+			     s32 TransferBufferLength, int bOut)

WARNING:LINE_SPACING: Missing a blank line after declarations
#2259: FILE: drivers/media/video/s2255drv.c:2185:
+	int r;
+	if (!bOut) {

CHECK:CAMELCASE: Avoid CamelCase: <transBuffer>
#2284: FILE: drivers/media/video/s2255drv.c:2210:
+	unsigned char transBuffer[64];

WARNING:LINE_SPACING: Missing a blank line after declarations
#2285: FILE: drivers/media/video/s2255drv.c:2211:
+	unsigned char transBuffer[64];
+	ret = s2255_vendor_req(dev, VX_FW, 0, 0, transBuffer, 2, DIR_IN);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2301: FILE: drivers/media/video/s2255drv.c:2227:
+	unsigned long reqsize;
+	dprintk(1, "create sys buffers\n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev->buffer[chn].frame[i].lpvbits"
#2321: FILE: drivers/media/video/s2255drv.c:2247:
+		if (dev->buffer[chn].frame[i].lpvbits == NULL) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#2322: FILE: drivers/media/video/s2255drv.c:2248:
+			printk(KERN_INFO "out of memory.  using less frames\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2343: FILE: drivers/media/video/s2255drv.c:2269:
+	unsigned long i;
+	dprintk(1, "release sys buffers\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2360: FILE: drivers/media/video/s2255drv.c:2286:
+	int fw_ver;
+	dprintk(4, "board init: %p", dev);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pipe->transfer_buffer"
#2374: FILE: drivers/media/video/s2255drv.c:2300:
+		if (pipe->transfer_buffer == NULL) {

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#2379: FILE: drivers/media/video/s2255drv.c:2305:
+
+	}

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#2384: FILE: drivers/media/video/s2255drv.c:2310:
+	printk(KERN_INFO "2255 usb firmware version %d \n", fw_ver);

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2384: FILE: drivers/media/video/s2255drv.c:2310:
+	printk(KERN_INFO "2255 usb firmware version %d \n", fw_ver);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2424: FILE: drivers/media/video/s2255drv.c:2350:
+		struct s2255_pipeinfo *pipe = &dev->pipes[i];
+		kfree(pipe->transfer_buffer);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!pipe_info"
#2439: FILE: drivers/media/video/s2255drv.c:2365:
+	if (pipe_info == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev"
#2445: FILE: drivers/media/video/s2255drv.c:2371:
+	if (dev == NULL) {

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'read_pipe_completion', this function's name, in a string
#2451: FILE: drivers/media/video/s2255drv.c:2377:
+		dprintk(2, "read_pipe_completion: err\n");

WARNING:RETURN_VOID: void function return statements are not generally useful
#2480: FILE: drivers/media/video/s2255drv.c:2406:
+	return;
+}

WARNING:LINE_SPACING: Missing a blank line after declarations
#2488: FILE: drivers/media/video/s2255drv.c:2414:
+	struct s2255_pipeinfo *pipe_info = dev->pipes;
+	pipe = usb_rcvbulkpipe(dev->udev, dev->read_endpoint);

CHECK:SPACING: No space is necessary after a cast
#2493: FILE: drivers/media/video/s2255drv.c:2419:
+		pipe_info->buf_index = (u32) i;

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2512: FILE: drivers/media/video/s2255drv.c:2438:
+			printk(KERN_ERR "s2255: start read pipe failed\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2527: FILE: drivers/media/video/s2255drv.c:2453:
+	int j;
+	if (chn >= MAX_CHANNELS) {

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2533: FILE: drivers/media/video/s2255drv.c:2459:
+	dprintk(1, "S2255: start acquire %lu \n", chn);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!buffer"
#2536: FILE: drivers/media/video/s2255drv.c:2462:
+	if (buffer == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2537: FILE: drivers/media/video/s2255drv.c:2463:
+	if (buffer == NULL) {
+		dev_err(&dev->udev->dev, "out of mem\n");

CHECK:SPACING: No space is necessary after a cast
#2550: FILE: drivers/media/video/s2255drv.c:2476:
+	*(u32 *) buffer = IN_DATA_TOKEN;

CHECK:SPACING: No space is necessary after a cast
#2551: FILE: drivers/media/video/s2255drv.c:2477:
+	*((u32 *) buffer + 1) = (u32) chn_rev;

CHECK:SPACING: No space is necessary after a cast
#2552: FILE: drivers/media/video/s2255drv.c:2478:
+	*((u32 *) buffer + 2) = (u32) CMD_START;

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2557: FILE: drivers/media/video/s2255drv.c:2483:
+	dprintk(2, "start acquire exit[%lu] %d \n", chn, res);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!buffer"
#2575: FILE: drivers/media/video/s2255drv.c:2501:
+	if (buffer == NULL) {

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2576: FILE: drivers/media/video/s2255drv.c:2502:
+	if (buffer == NULL) {
+		dev_err(&dev->udev->dev, "out of mem\n");

CHECK:SPACING: No space is necessary after a cast
#2582: FILE: drivers/media/video/s2255drv.c:2508:
+	*(u32 *) buffer = IN_DATA_TOKEN;

CHECK:SPACING: No space is necessary after a cast
#2583: FILE: drivers/media/video/s2255drv.c:2509:
+	*((u32 *) buffer + 1) = (u32) chn_rev;

CHECK:SPACING: No space is necessary after a cast
#2584: FILE: drivers/media/video/s2255drv.c:2510:
+	*((u32 *) buffer + 2) = CMD_STOP;

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#2590: FILE: drivers/media/video/s2255drv.c:2516:
+	dprintk(4, "stop acquire: releasing states \n");

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev"
#2602: FILE: drivers/media/video/s2255drv.c:2528:
+	if (dev == NULL) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#2609: FILE: drivers/media/video/s2255drv.c:2535:
+		struct s2255_pipeinfo *pipe_info = &dev->pipes[j];
+		if (pipe_info) {

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#2615: FILE: drivers/media/video/s2255drv.c:2541:
+
+		}

WARNING:LINE_SPACING: Missing a blank line after declarations
#2620: FILE: drivers/media/video/s2255drv.c:2546:
+		struct s2255_pipeinfo *pipe_info = &dev->pipes[j];
+		if (pipe_info->stream_urb) {

WARNING:RETURN_VOID: void function return statements are not generally useful
#2629: FILE: drivers/media/video/s2255drv.c:2555:
+	return;
+}

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*dev)...) over kzalloc(sizeof(struct s2255_dev)...)
#2644: FILE: drivers/media/video/s2255drv.c:2570:
+	dev = kzalloc(sizeof(struct s2255_dev), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev"
#2645: FILE: drivers/media/video/s2255drv.c:2571:
+	if (dev == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dev->udev"
#2652: FILE: drivers/media/video/s2255drv.c:2578:
+	if (dev->udev == NULL) {

CHECK:CAMELCASE: Avoid CamelCase: <bNumEndpoints>
#2663: FILE: drivers/media/video/s2255drv.c:2589:
+	dprintk(1, "num endpoints %d\n", iface_desc->desc.bNumEndpoints);

CHECK:CAMELCASE: Avoid CamelCase: <bEndpointAddress>
#2668: FILE: drivers/media/video/s2255drv.c:2594:
+			dev->read_endpoint = endpoint->bEndpointAddress;

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*dev->fw_data)...) over kzalloc(sizeof(struct complete_data)...)
#2687: FILE: drivers/media/video/s2255drv.c:2613:
+	dev->fw_data = kzalloc(sizeof(struct complete_data), GFP_KERNEL);

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#2700: FILE: drivers/media/video/s2255drv.c:2626:
+	if (!dev->fw_data->pfw_data) {
+		dev_err(&interface->dev, "out of memory!\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#2706: FILE: drivers/media/video/s2255drv.c:2632:
+		printk(KERN_ERR "sensoray 2255 failed to get firmware\n");

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#2751: FILE: drivers/media/video/s2255drv.c:2677:
+
+	}

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000280827.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 9 errors, 143 warnings, 93 checks, 2741 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000280827.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
