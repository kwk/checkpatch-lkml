WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#65: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#70: FILE: fs/ceph/mds_client.c:1:
+

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:LINE_SPACING: Please don't use multiple blank lines
#100: FILE: fs/ceph/mds_client.c:31:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#142: FILE: fs/ceph/mds_client.c:73:
+	ceph_decode_need(p, end, 3*sizeof(u16), bad);
 	                          ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!info->trace_in"
#161: FILE: fs/ceph/mds_client.c:92:
+	if (info->trace_in == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#200: FILE: fs/ceph/mds_client.c:131:
+		sizeof(u32)*le32_to_cpu(info->trace_dir[numd]->ndist);
 		           ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#230: FILE: fs/ceph/mds_client.c:161:
+		sizeof(u32)*le32_to_cpu(info->dir_dir->ndist);
 		           ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!info->dir_in"
#245: FILE: fs/ceph/mds_client.c:176:
+	if (info->dir_in == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#259: FILE: fs/ceph/mds_client.c:190:
+		dout(20, "parsed dir dname '%.*s'\n", info->dir_dname_len[i],
 		^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#299: FILE: fs/ceph/mds_client.c:230:
+		err = parse_reply_info_trace(&p, p+len, info);
 		                                  ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#307: FILE: fs/ceph/mds_client.c:238:
+		err = parse_reply_info_dir(&p, p+len, info);
 		                                ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#335: FILE: fs/ceph/mds_client.c:266:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#354: FILE: fs/ceph/mds_client.c:285:
+	dout(30, "get_session %p %d -> %d\n", s,
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'get_session', this function's name, in a string
#354: FILE: fs/ceph/mds_client.c:285:
+	dout(30, "get_session %p %d -> %d\n", s,

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#355: FILE: fs/ceph/mds_client.c:286:
+	     atomic_read(&s->s_ref), atomic_read(&s->s_ref)+1);
 	                                                   ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#362: FILE: fs/ceph/mds_client.c:293:
+	dout(30, "put_session %p %d -> %d\n", s,
 	^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#363: FILE: fs/ceph/mds_client.c:294:
+	     atomic_read(&s->s_ref), atomic_read(&s->s_ref)-1);
 	                                                   ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!mdsc->sessions[mds]"
#376: FILE: fs/ceph/mds_client.c:307:
+	if (mds >= mdsc->max_sessions || mdsc->sessions[mds] == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#379: FILE: fs/ceph/mds_client.c:310:
+	dout(30, "lookup_mds_session %p %d -> %d\n", session,
 	^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#380: FILE: fs/ceph/mds_client.c:311:
+	     atomic_read(&session->s_ref), atomic_read(&session->s_ref)+1);
 	                                                               ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#385: FILE: fs/ceph/mds_client.c:316:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#413: FILE: fs/ceph/mds_client.c:344:
+	dout(10, "register_session mds%d\n", mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'register_session', this function's name, in a string
#413: FILE: fs/ceph/mds_client.c:344:
+	dout(10, "register_session mds%d\n", mds);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#415: FILE: fs/ceph/mds_client.c:346:
+		int newmax = 1 << get_count_order(mds+1);
 		                                     ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#418: FILE: fs/ceph/mds_client.c:349:
+		dout(50, "register_session realloc to %d\n", newmax);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'register_session', this function's name, in a string
#418: FILE: fs/ceph/mds_client.c:349:
+		dout(50, "register_session realloc to %d\n", newmax);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#419: FILE: fs/ceph/mds_client.c:350:
+		sa = kzalloc(newmax * sizeof(void *), GFP_NOFS);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!sa"
#420: FILE: fs/ceph/mds_client.c:351:
+		if (sa == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#440: FILE: fs/ceph/mds_client.c:371:
+	dout(10, "unregister_session mds%d %p\n", mds, mdsc->sessions[mds]);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'unregister_session', this function's name, in a string
#440: FILE: fs/ceph/mds_client.c:371:
+	dout(10, "unregister_session mds%d %p\n", mds, mdsc->sessions[mds]);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#460: FILE: fs/ceph/mds_client.c:391:
+	dout(10, "put_request %p %d -> %d\n", req,
 	^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#461: FILE: fs/ceph/mds_client.c:392:
+	     atomic_read(&req->r_ref), atomic_read(&req->r_ref)-1);
 	                                                       ^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#470: FILE: fs/ceph/mds_client.c:401:
+			iput(req->r_last_inode);
 			^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#487: FILE: fs/ceph/mds_client.c:418:
+static struct ceph_mds_request *__lookup_request(struct ceph_mds_client *mdsc,
+					     u64 tid)

WARNING:LINE_SPACING: Missing a blank line after declarations
#490: FILE: fs/ceph/mds_client.c:421:
+	struct ceph_mds_request *req;
+	req = radix_tree_lookup(&mdsc->request_tree, tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#506: FILE: fs/ceph/mds_client.c:437:
+	dout(30, "__register_request %p tid %lld\n", req, req->r_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using '__register_request', this function's name, in a string
#506: FILE: fs/ceph/mds_client.c:437:
+	dout(30, "__register_request %p tid %lld\n", req, req->r_tid);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#512: FILE: fs/ceph/mds_client.c:443:
+^I^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#525: FILE: fs/ceph/mds_client.c:456:
+	dout(30, "__unregister_request %p tid %lld\n", req, req->r_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using '__unregister_request', this function's name, in a string
#525: FILE: fs/ceph/mds_client.c:456:
+	dout(30, "__unregister_request %p tid %lld\n", req, req->r_tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#571: FILE: fs/ceph/mds_client.c:502:
+		dout(20, "choose_mds using resend_mds mds%d\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#579: FILE: fs/ceph/mds_client.c:510:
+			dout(20, "choose_mds %p %llx.%llx mds%d (cap)\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#616: FILE: fs/ceph/mds_client.c:547:
+					dout(20, "choose_mds %p %llx.%llx "
 					^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#617: FILE: fs/ceph/mds_client.c:548:
+					dout(20, "choose_mds %p %llx.%llx "
+					     "frag %u mds%d (%d/%d)\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#626: FILE: fs/ceph/mds_client.c:557:
+				 * look for the authoritative mds. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#631: FILE: fs/ceph/mds_client.c:562:
+					dout(20, "choose_mds %p %llx.%llx "
 					^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#632: FILE: fs/ceph/mds_client.c:563:
+					dout(20, "choose_mds %p %llx.%llx "
+					     "frag %u mds%d (auth)\n",

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#644: FILE: fs/ceph/mds_client.c:575:
+		 * for the child's dentry name */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#653: FILE: fs/ceph/mds_client.c:584:
+	dout(20, "choose_mds chose random mds%d\n", mds);
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#657: FILE: fs/ceph/mds_client.c:588:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#692: FILE: fs/ceph/mds_client.c:623:
+	dout(10, "open_session to mds%d, state %d\n", mds, mstate);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#716: FILE: fs/ceph/mds_client.c:647:
+	dout(10, "remove_session_caps on %p\n", session);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'remove_session_caps', this function's name, in a string
#716: FILE: fs/ceph/mds_client.c:647:
+	dout(10, "remove_session_caps on %p\n", session);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#721: FILE: fs/ceph/mds_client.c:652:
+		dout(10, "removing cap %p, ci is %p, inode is %p\n",
 		^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#725: FILE: fs/ceph/mds_client.c:656:
+	BUG_ON(session->s_nr_caps > 0);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#755: FILE: fs/ceph/mds_client.c:686:
+	dout(10, "wake_up_session_caps %p mds%d\n", session, session->s_mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wake_up_session_caps', this function's name, in a string
#755: FILE: fs/ceph/mds_client.c:686:
+	dout(10, "wake_up_session_caps %p mds%d\n", session, session->s_mds);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#775: FILE: fs/ceph/mds_client.c:706:
+		dout(1, "mds%d session caps stale\n", session->s_mds);
 		^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#778: FILE: fs/ceph/mds_client.c:709:
+	 * with its clients. */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#781: FILE: fs/ceph/mds_client.c:712:
+		dout(10, "send_renew_caps ignoring mds%d\n", session->s_mds);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'send_renew_caps', this function's name, in a string
#781: FILE: fs/ceph/mds_client.c:712:
+		dout(10, "send_renew_caps ignoring mds%d\n", session->s_mds);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#785: FILE: fs/ceph/mds_client.c:716:
+	dout(10, "send_renew_caps to mds%d\n", session->s_mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'send_renew_caps', this function's name, in a string
#785: FILE: fs/ceph/mds_client.c:716:
+	dout(10, "send_renew_caps to mds%d\n", session->s_mds);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#798: FILE: fs/ceph/mds_client.c:729:
+static void renewed_caps(struct ceph_mds_client *mdsc,
+		  struct ceph_mds_session *session, int is_renew)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#808: FILE: fs/ceph/mds_client.c:739:
+		mdsc->mdsmap->m_session_timeout*HZ;
 		                               ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#812: FILE: fs/ceph/mds_client.c:743:
+			dout(1, "mds%d caps renewed\n", session->s_mds);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#815: FILE: fs/ceph/mds_client.c:746:
+			dout(1, "mds%d caps still stale\n", session->s_mds);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#818: FILE: fs/ceph/mds_client.c:749:
+	dout(10, "renewed_caps mds%d ttl now %lu, was %s, now %s\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'renewed_caps', this function's name, in a string
#818: FILE: fs/ceph/mds_client.c:749:
+	dout(10, "renewed_caps mds%d ttl now %lu, was %s, now %s\n",

CHECK:LINE_SPACING: Please don't use multiple blank lines
#827: FILE: fs/ceph/mds_client.c:758:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#849: FILE: fs/ceph/mds_client.c:780:
+static void check_all_caps(struct ceph_mds_client *mdsc,
+			 struct ceph_mds_session *session)

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#862: FILE: fs/ceph/mds_client.c:793:
+		iput(inode);
 		^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#870: FILE: fs/ceph/mds_client.c:801:
+static int __close_session(struct ceph_mds_client *mdsc,
+			 struct ceph_mds_session *session)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#875: FILE: fs/ceph/mds_client.c:806:
+	dout(10, "close_session mds%d state=%s\n", mds,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#898: FILE: fs/ceph/mds_client.c:829:
+	dout(10, "flushed_all_caps for mds%d state %s\n", session->s_mds,
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#906: FILE: fs/ceph/mds_client.c:837:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#948: FILE: fs/ceph/mds_client.c:879:
+	struct ceph_mds_request *first;
+	if (radix_tree_gang_lookup(&mdsc->request_tree,

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dentry"
#967: FILE: fs/ceph/mds_client.c:898:
+	if (dentry == NULL)

WARNING:LINE_SPACING: Missing a blank line after declarations
#974: FILE: fs/ceph/mds_client.c:905:
+		struct inode *inode = temp->d_inode;
+		if (inode && ceph_snap(inode) == CEPH_SNAPDIR)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!temp"
#979: FILE: fs/ceph/mds_client.c:910:
+		if (temp == NULL) {

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#987: FILE: fs/ceph/mds_client.c:918:
+	path = kmalloc(len+1, GFP_NOFS);
 	                  ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!path"
#988: FILE: fs/ceph/mds_client.c:919:
+	if (path == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#995: FILE: fs/ceph/mds_client.c:926:
+			dout(50, "build_path_dentry path+%d: %p SNAPDIR\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1003: FILE: fs/ceph/mds_client.c:934:
+			dout(50, "build_path_dentry path+%d: %p '%.*s'\n",
 			^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!temp"
#1009: FILE: fs/ceph/mds_client.c:940:
+		if (temp == NULL) {

WARNING:SPLIT_STRING: quoted string split across lines
#1017: FILE: fs/ceph/mds_client.c:948:
+		derr(1, "did not end path lookup where expected, "
+		     "namelen is %d, pos is %d\n", len, pos);

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1019: FILE: fs/ceph/mds_client.c:950:
+		/* presumably this is only possible if racing with a
+		   rename of one of the parent directories (we can not

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1021: FILE: fs/ceph/mds_client.c:952:
+		   retrying should be harmless) */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1028: FILE: fs/ceph/mds_client.c:959:
+	dout(10, "build_path_dentry on %p %d built %llx '%.*s'\n",
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1033: FILE: fs/ceph/mds_client.c:964:
+
+

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1054: FILE: fs/ceph/mds_client.c:985:
+		pathlen = sizeof(u32) + fhlen*sizeof(struct ceph_inopath_item);
 		                             ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1060: FILE: fs/ceph/mds_client.c:991:
+			path1 = ceph_mdsc_build_path(req->r_dentry, &pathlen1, &ino1,
+					   mds);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1065: FILE: fs/ceph/mds_client.c:996:
+			path2 = ceph_mdsc_build_path(req->r_old_dentry, &pathlen2, &ino2,
+					   mds);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1066: FILE: fs/ceph/mds_client.c:997:
+		pathlen = pathlen1 + pathlen2 + 2*(sizeof(u32) + sizeof(u64));
 		                                 ^

WARNING:LINUX_VERSION_CODE: LINUX_VERSION_CODE should be avoided, code should be for the version to which it is merged
#1082: FILE: fs/ceph/mds_client.c:1013:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 29)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1082: FILE: fs/ceph/mds_client.c:1013:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 29)

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1099: FILE: fs/ceph/mds_client.c:1030:
+			dout(10, "create_request_message path1 %llx/%s\n",
 			^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'create_request_message', this function's name, in a string
#1099: FILE: fs/ceph/mds_client.c:1030:
+			dout(10, "create_request_message path1 %llx/%s\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1102: FILE: fs/ceph/mds_client.c:1033:
+			dout(10, "create_request_message path2 %llx/%s\n",
 			^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'create_request_message', this function's name, in a string
#1102: FILE: fs/ceph/mds_client.c:1033:
+			dout(10, "create_request_message path2 %llx/%s\n",

ERROR:CODE_INDENT: code indent should use tabs where possible
#1110: FILE: fs/ceph/mds_client.c:1041:
+ ^IBUG_ON(p != end);$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1110: FILE: fs/ceph/mds_client.c:1041:
+ ^IBUG_ON(p != end);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1110: FILE: fs/ceph/mds_client.c:1041:
+ ^IBUG_ON(p != end);$

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1110: FILE: fs/ceph/mds_client.c:1041:
+ 	BUG_ON(p != end);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1140: FILE: fs/ceph/mds_client.c:1071:
+	dout(10, "prepare_send_request %p tid %lld %s (attempt %d)\n", req,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1186: FILE: fs/ceph/mds_client.c:1117:
+		dout(10, "do_request timed out\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1194: FILE: fs/ceph/mds_client.c:1125:
+		dout(30, "do_request no mds or not active, waiting for map\n");
 		^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1197: FILE: fs/ceph/mds_client.c:1128:
+					 mdsc->mdsmap->m_epoch+1);
 					                      ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1205: FILE: fs/ceph/mds_client.c:1136:
+	dout(30, "do_request mds%d session %p state %s\n", mds, session,
 	^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1213: FILE: fs/ceph/mds_client.c:1144:
+					 mdsc->mdsmap->m_epoch+1);
 					                      ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1265: FILE: fs/ceph/mds_client.c:1196:
+	dout(20, "kick_requests mds%d\n", mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'kick_requests', this function's name, in a string
#1265: FILE: fs/ceph/mds_client.c:1196:
+	dout(20, "kick_requests mds%d\n", mds);

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1271: FILE: fs/ceph/mds_client.c:1202:
+		nexttid = reqs[got-1]->r_tid + 1;
 		                  ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1279: FILE: fs/ceph/mds_client.c:1210:
+				dout(10, " kicking tid %llu\n", reqs[i]->r_tid);
 				^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1290: FILE: fs/ceph/mds_client.c:1221:
+	dout(30, "submit_request on %p\n", req);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1307: FILE: fs/ceph/mds_client.c:1238:
+	dout(30, "do_request on %p\n", req);
 	^^^^

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (16, 20)
#1334: FILE: fs/ceph/mds_client.c:1265:
+		if (!list_empty(&req->r_unsafe_item))
+		    list_del_init(&req->r_unsafe_item);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1342: FILE: fs/ceph/mds_client.c:1273:
+	dout(30, "do_request %p done, result %d\n", req, err);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1374: FILE: fs/ceph/mds_client.c:1305:
+		dout(1, "handle_reply on unknown tid %llu\n", tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1378: FILE: fs/ceph/mds_client.c:1309:
+	dout(10, "handle_reply %p expected_cap=%p\n", req, req->r_expected_cap);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1384: FILE: fs/ceph/mds_client.c:1315:
+		dout(0, "got a dup %s reply on %llu from mds%d\n",
 		^^^^

CHECK:SPACING: spaces required around that ':' (ctx:VxV)
#1385: FILE: fs/ceph/mds_client.c:1316:
+		     head->safe ? "safe":"unsafe", tid, mds);
 		                        ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1404: FILE: fs/ceph/mds_client.c:1335:
+			dout(10, "got safe reply %llu, mds%d\n", tid, mds);
 			^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1405: FILE: fs/ceph/mds_client.c:1336:
+			BUG_ON(req->r_session == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_session"
#1405: FILE: fs/ceph/mds_client.c:1336:
+			BUG_ON(req->r_session == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_session"
#1421: FILE: fs/ceph/mds_client.c:1352:
+	if (req->r_session == NULL) {

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1428: FILE: fs/ceph/mds_client.c:1359:
+	BUG_ON(req->r_reply);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1447: FILE: fs/ceph/mds_client.c:1378:
+	dout(10, "handle_reply tid %lld result %d\n", tid, result);
 	^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1453: FILE: fs/ceph/mds_client.c:1384:
+		ceph_update_snap_trace(mdsc, rinfo->snapblob,
+			       rinfo->snapblob + rinfo->snapblob_len,

WARNING:RETURN_VOID: void function return statements are not generally useful
#1487: FILE: fs/ceph/mds_client.c:1418:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1489: FILE: fs/ceph/mds_client.c:1420:
+
+

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1511: FILE: fs/ceph/mds_client.c:1442:
+	ceph_decode_need(&p, end, sizeof(u64)+2*sizeof(u32), bad);
 	                                     ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1511: FILE: fs/ceph/mds_client.c:1442:
+	ceph_decode_need(&p, end, sizeof(u64)+2*sizeof(u32), bad);
 	                                       ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1520: FILE: fs/ceph/mds_client.c:1451:
+		dout(10, "forward %llu dne\n", tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dne' may be misspelled - perhaps 'done'?
#1520: FILE: fs/ceph/mds_client.c:1451:
+		dout(10, "forward %llu dne\n", tid);
 		                       ^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1525: FILE: fs/ceph/mds_client.c:1456:
+		dout(10, "forward %llu to mds%d - old seq %d <= %d\n",
 		^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1531: FILE: fs/ceph/mds_client.c:1462:
+		 * forwarded our message for us. */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1532: FILE: fs/ceph/mds_client.c:1463:
+		dout(10, "forward %llu to mds%d (mds%d fwded)\n", tid, next_mds,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1541: FILE: fs/ceph/mds_client.c:1472:
+		dout(10, "forward %llu to mds%d (we resend)\n", tid, next_mds);
 		^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1583: FILE: fs/ceph/mds_client.c:1514:
+		session->s_ttl = jiffies + HZ*mdsc->mdsmap->m_session_autoclose;
 		                             ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1588: FILE: fs/ceph/mds_client.c:1519:
+			dout(10, "handle_session no session for mds%d\n", mds);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1591: FILE: fs/ceph/mds_client.c:1522:
+		dout(10, "handle_session creating session for mds%d\n", mds);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1597: FILE: fs/ceph/mds_client.c:1528:
+	dout(2, "handle_session mds%d %s %p state %s seq %llu\n",
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1622: FILE: fs/ceph/mds_client.c:1553:
+		dout(1, "mds%d caps went stale, renewing\n", session->s_mds);
 		^^^^

WARNING:RETURN_VOID: void function return statements are not generally useful
#1648: FILE: fs/ceph/mds_client.c:1579:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1650: FILE: fs/ceph/mds_client.c:1581:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1661: FILE: fs/ceph/mds_client.c:1592:
+	dout(10, "replay_unsafe_requests mds%d\n", session->s_mds);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'replay_unsafe_requests', this function's name, in a string
#1661: FILE: fs/ceph/mds_client.c:1592:
+	dout(10, "replay_unsafe_requests mds%d\n", session->s_mds);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1704: FILE: fs/ceph/mds_client.c:1635:
+	dout(1, "reconnect to recovering mds%d\n", mds);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1723: FILE: fs/ceph/mds_client.c:1654:
+		dout(40, "estimating i need %d bytes for %d caps\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1726: FILE: fs/ceph/mds_client.c:1657:
+		dout(20, "no session for mds%d, will send short reconnect\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1748: FILE: fs/ceph/mds_client.c:1679:
+	dout(10, "session %p state %s\n", session,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1766: FILE: fs/ceph/mds_client.c:1697:
+			dout(10, " skipping %p ino %llx.%llx cap %p %s\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1772: FILE: fs/ceph/mds_client.c:1703:
+		dout(10, " adding %p ino %llx.%llx cap %p %s\n",
 		^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1783: FILE: fs/ceph/mds_client.c:1714:
+				BUG_ON(err);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1789: FILE: fs/ceph/mds_client.c:1720:
+		ceph_decode_need(&p, end, pathlen+4, needmore);
 		                                 ^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1795: FILE: fs/ceph/mds_client.c:1726:
+		BUG_ON(p > end);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1827: FILE: fs/ceph/mds_client.c:1758:
+		struct ceph_mds_snaprealm_reconnect *sr_rec;
+		got = radix_tree_gang_lookup(&mdsc->snap_realms,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1832: FILE: fs/ceph/mds_client.c:1763:
+		dout(10, " adding snap realm %llx seq %lld parent %llx\n",
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1848: FILE: fs/ceph/mds_client.c:1779:
+	dout(10, "final len was %u (guessed %d)\n",
 	^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1849: FILE: fs/ceph/mds_client.c:1780:
+	     (unsigned)reply->front.iov_len, len);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1872: FILE: fs/ceph/mds_client.c:1803:
+	newlen = (len * (session->s_nr_caps+3)) / (num_caps + 1);
 	                                   ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1873: FILE: fs/ceph/mds_client.c:1804:
+	dout(30, "i guessed %d, and did %d of %d caps, retrying with %d\n",
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1880: FILE: fs/ceph/mds_client.c:1811:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1890: FILE: fs/ceph/mds_client.c:1821:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1906: FILE: fs/ceph/mds_client.c:1837:
+	dout(20, "check_new_map new %u old %u\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'check_new_map', this function's name, in a string
#1906: FILE: fs/ceph/mds_client.c:1837:
+	dout(20, "check_new_map new %u old %u\n",

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!mdsc->sessions[i]"
#1910: FILE: fs/ceph/mds_client.c:1841:
+		if (mdsc->sessions[i] == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1916: FILE: fs/ceph/mds_client.c:1847:
+		dout(20, "check_new_map mds%d state %d -> %d (session %s)\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'check_new_map', this function's name, in a string
#1916: FILE: fs/ceph/mds_client.c:1847:
+		dout(20, "check_new_map mds%d state %d -> %d (session %s)\n",

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1921: FILE: fs/ceph/mds_client.c:1852:
+			 * recovering in its place. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1923: FILE: fs/ceph/mds_client.c:1854:
+			 * socket. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1929: FILE: fs/ceph/mds_client.c:1860:
+				 * out now */

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1954: FILE: fs/ceph/mds_client.c:1885:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1977: FILE: fs/ceph/mds_client.c:1908:
+	dout(10, "handle_lease from mds%d\n", mds);
 	^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1987: FILE: fs/ceph/mds_client.c:1918:
+	if (dname.len != le32_to_cpu(*(__le32 *)(h+1)))
 	                                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2004: FILE: fs/ceph/mds_client.c:1935:
+	dout(20, "handle_lease action is %d, mask %d, ino %llx %p\n", h->action,
 	^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!inode"
#2006: FILE: fs/ceph/mds_client.c:1937:
+	if (inode == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2007: FILE: fs/ceph/mds_client.c:1938:
+		dout(10, "handle_lease no inode %llx\n", vino.ino);
 		^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2011: FILE: fs/ceph/mds_client.c:1942:
+	BUG_ON(h->action != CEPH_MDS_LEASE_REVOKE);  /* for now */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2020: FILE: fs/ceph/mds_client.c:1951:
+			dout(10, "no parent dentry on inode %p\n", inode);
 			^^^^

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#2038: FILE: fs/ceph/mds_client.c:1969:
+	iput(inode);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2048: FILE: fs/ceph/mds_client.c:1979:
+	dout(0, "corrupt lease message\n");
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2051: FILE: fs/ceph/mds_client.c:1982:
+
+

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2067: FILE: fs/ceph/mds_client.c:1998:
+	BUG_ON(inode == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!inode"
#2067: FILE: fs/ceph/mds_client.c:1998:
+	BUG_ON(inode == NULL);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2068: FILE: fs/ceph/mds_client.c:1999:
+	BUG_ON(dentry == NULL);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!dentry"
#2068: FILE: fs/ceph/mds_client.c:1999:
+	BUG_ON(dentry == NULL);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2091: FILE: fs/ceph/mds_client.c:2022:
+		dout(10, "lease_release inode %p dentry %p -- "
 		^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#2092: FILE: fs/ceph/mds_client.c:2023:
+		dout(10, "lease_release inode %p dentry %p -- "
+		     "no lease on %d\n",

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2096: FILE: fs/ceph/mds_client.c:2027:
+	BUG_ON(mds < 0);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2098: FILE: fs/ceph/mds_client.c:2029:
+	dout(10, "lease_release inode %p dentry %p %d mask %d to mds%d\n",
 	^^^^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#2107: FILE: fs/ceph/mds_client.c:2038:
+	lease->first = lease->last = cpu_to_le64(ceph_vino(inode).snap);

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2115: FILE: fs/ceph/mds_client.c:2046:
+
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2122: FILE: fs/ceph/mds_client.c:2053:
+	unsigned hz = round_jiffies_relative(HZ * delay);

WARNING:LINE_SPACING: Missing a blank line after declarations
#2123: FILE: fs/ceph/mds_client.c:2054:
+	unsigned hz = round_jiffies_relative(HZ * delay);
+	schedule_delayed_work(&mdsc->delayed_work, hz);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2135: FILE: fs/ceph/mds_client.c:2066:
+	dout(30, "delayed_work\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'delayed_work', this function's name, in a string
#2135: FILE: fs/ceph/mds_client.c:2066:
+	dout(30, "delayed_work\n");

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2140: FILE: fs/ceph/mds_client.c:2071:
+	renew_caps = time_after_eq(jiffies, HZ*renew_interval +
 	                                      ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#2147: FILE: fs/ceph/mds_client.c:2078:
+		struct ceph_mds_session *s = __ceph_lookup_mds_session(mdsc, i);
+		if (s == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!s"
#2147: FILE: fs/ceph/mds_client.c:2078:
+		if (s == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2150: FILE: fs/ceph/mds_client.c:2081:
+			dout(10, "resending session close request for mds%d\n",
 			^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#2158: FILE: fs/ceph/mds_client.c:2089:
+			derr(1, "mds%d session probably timed out, "
+			     "requesting mds map\n", s->s_mds);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2185: FILE: fs/ceph/mds_client.c:2116:
+
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#2200: FILE: fs/ceph/mds_client.c:2131:
+^Ispin_lock_init(&mdsc->snap_empty_lock);^I$

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2218: FILE: fs/ceph/mds_client.c:2149:
+	dout(10, "drop_leases\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'drop_leases', this function's name, in a string
#2218: FILE: fs/ceph/mds_client.c:2149:
+	dout(10, "drop_leases\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#2222: FILE: fs/ceph/mds_client.c:2153:
+		struct ceph_mds_session *s = __ceph_lookup_mds_session(mdsc, i);
+		if (!s)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2244: FILE: fs/ceph/mds_client.c:2175:
+		dout(10, "wait_requests waiting for requests\n");
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_requests', this function's name, in a string
#2244: FILE: fs/ceph/mds_client.c:2175:
+		dout(10, "wait_requests waiting for requests\n");

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2252: FILE: fs/ceph/mds_client.c:2183:
+			dout(10, "wait_requests timed out on tid %llu\n",
 			^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_requests', this function's name, in a string
#2252: FILE: fs/ceph/mds_client.c:2183:
+			dout(10, "wait_requests timed out on tid %llu\n",

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2259: FILE: fs/ceph/mds_client.c:2190:
+	dout(10, "wait_requests done\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'wait_requests', this function's name, in a string
#2259: FILE: fs/ceph/mds_client.c:2190:
+	dout(10, "wait_requests done\n");

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2268: FILE: fs/ceph/mds_client.c:2199:
+	dout(10, "pre_umount\n");
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#2278: FILE: fs/ceph/mds_client.c:2209:
+		struct ceph_inode_info *ci;
+		ci = list_first_entry(&mdsc->cap_delay_list,

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#2283: FILE: fs/ceph/mds_client.c:2214:
+		iput(&ci->vfs_inode);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2304: FILE: fs/ceph/mds_client.c:2235:
+	dout(10, "close_sessions\n");
 	^^^^

WARNING:TYPO_SPELLING: 'nastyness' may be misspelled - perhaps 'nastiness'?
#2312: FILE: fs/ceph/mds_client.c:2243:
+	 * and other nastyness.
 	             ^^^^^^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2316: FILE: fs/ceph/mds_client.c:2247:
+		dout(10, "closing sessions\n");
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2336: FILE: fs/ceph/mds_client.c:2267:
+		dout(10, "waiting for sessions to close\n");
 		^^^^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#2353: FILE: fs/ceph/mds_client.c:2284:
+^I^I^Imutex_lock(&mdsc->mutex);^I^I^I$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2357: FILE: fs/ceph/mds_client.c:2288:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2366: FILE: fs/ceph/mds_client.c:2297:
+	dout(10, "stopped\n");
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2371: FILE: fs/ceph/mds_client.c:2302:
+	dout(10, "stop\n");
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2378: FILE: fs/ceph/mds_client.c:2309:
+
+

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2399: FILE: fs/ceph/mds_client.c:2330:
+	ceph_decode_need(&p, end, sizeof(fsid)+2*sizeof(u32), bad);
 	                                      ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2399: FILE: fs/ceph/mds_client.c:2330:
+	ceph_decode_need(&p, end, sizeof(fsid)+2*sizeof(u32), bad);
 	                                        ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2410: FILE: fs/ceph/mds_client.c:2341:
+	dout(2, "handle_map epoch %u len %d\n", epoch, (int)maplen);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2416: FILE: fs/ceph/mds_client.c:2347:
+		dout(2, "handle_map epoch %u <= our %u\n",
 		^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2437: FILE: fs/ceph/mds_client.c:2368:
+		 * to reconnect. */

WARNING:RETURN_VOID: void function return statements are not generally useful
#2457: FILE: fs/ceph/mds_client.c:2388:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2459: FILE: fs/ceph/mds_client.c:2390:
+
+

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2467: FILE: fs/ceph/mds_client.h:1:
+#ifndef _FS_CEPH_MDS_CLIENT_H

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2558: FILE: fs/ceph/mds_client.h:92:
+	/* encoded blob describing snapshot contexts for certain
+	   operations (e.g., open) */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2558: FILE: fs/ceph/mds_client.h:92:
+	   operations (e.g., open) */

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_request *' should also have an identifier name
#2612: FILE: fs/ceph/mds_client.h:146:
+	ssize_t (*show)(struct ceph_mds_request *, struct ceph_mds_request_attr *,

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_request_attr *' should also have an identifier name
#2612: FILE: fs/ceph/mds_client.h:146:
+	ssize_t (*show)(struct ceph_mds_request *, struct ceph_mds_request_attr *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'char *' should also have an identifier name
#2612: FILE: fs/ceph/mds_client.h:146:
+	ssize_t (*show)(struct ceph_mds_request *, struct ceph_mds_request_attr *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_request *' should also have an identifier name
#2614: FILE: fs/ceph/mds_client.h:148:
+	ssize_t (*store)(struct ceph_mds_request *, struct ceph_mds_request_attr *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_request_attr *' should also have an identifier name
#2614: FILE: fs/ceph/mds_client.h:148:
+	ssize_t (*store)(struct ceph_mds_request *, struct ceph_mds_request_attr *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'const char *' should also have an identifier name
#2614: FILE: fs/ceph/mds_client.h:148:
+	ssize_t (*store)(struct ceph_mds_request *, struct ceph_mds_request_attr *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'size_t' should also have an identifier name
#2614: FILE: fs/ceph/mds_client.h:148:
+	ssize_t (*store)(struct ceph_mds_request *, struct ceph_mds_request_attr *,

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#2641: FILE: fs/ceph/mds_client.h:175:
+	unsigned long r_request_started; /* start time for mds request only,
+					    used to measure lease durations */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2641: FILE: fs/ceph/mds_client.h:175:
+					    used to measure lease durations */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2653: FILE: fs/ceph/mds_client.h:187:
+	 * the reply handler */

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2713: FILE: fs/ceph/mds_client.h:247:
+extern const char *ceph_mds_op_name(int op);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2715: FILE: fs/ceph/mds_client.h:249:
+extern struct ceph_mds_session *__ceph_lookup_mds_session(struct ceph_mds_client *, int mds);

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_mds_client *' should also have an identifier name
#2715: FILE: fs/ceph/mds_client.h:249:
+extern struct ceph_mds_session *__ceph_lookup_mds_session(struct ceph_mds_client *, int mds);

ERROR:INLINE_LOCATION: inline keyword should sit between storage class and type
#2717: FILE: fs/ceph/mds_client.h:251:
+inline static struct ceph_mds_session *

The inline keyword should sit between storage class and type.

For example, the following segment::

  inline static int example_function(void)
  {
          ...
  }

should be::

  static inline int example_function(void)
  {
          ...
  }

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2732: FILE: fs/ceph/mds_client.h:266:
+extern void ceph_put_mds_session(struct ceph_mds_session *s);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2734: FILE: fs/ceph/mds_client.h:268:
+extern void ceph_send_msg_mds(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2737: FILE: fs/ceph/mds_client.h:271:
+extern void ceph_mdsc_init(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2739: FILE: fs/ceph/mds_client.h:273:
+extern void ceph_mdsc_close_sessions(struct ceph_mds_client *mdsc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2740: FILE: fs/ceph/mds_client.h:274:
+extern void ceph_mdsc_stop(struct ceph_mds_client *mdsc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2742: FILE: fs/ceph/mds_client.h:276:
+extern void ceph_mdsc_handle_map(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2744: FILE: fs/ceph/mds_client.h:278:
+extern void ceph_mdsc_handle_session(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2746: FILE: fs/ceph/mds_client.h:280:
+extern void ceph_mdsc_handle_reply(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2748: FILE: fs/ceph/mds_client.h:282:
+extern void ceph_mdsc_handle_forward(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2751: FILE: fs/ceph/mds_client.h:285:
+extern void ceph_mdsc_handle_lease(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2754: FILE: fs/ceph/mds_client.h:288:
+extern void ceph_mdsc_lease_release(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2763: FILE: fs/ceph/mds_client.h:297:
+extern void ceph_mdsc_submit_request(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2765: FILE: fs/ceph/mds_client.h:299:
+extern int ceph_mdsc_do_request(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2768: FILE: fs/ceph/mds_client.h:302:
+extern void ceph_mdsc_put_request(struct ceph_mds_request *req);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2770: FILE: fs/ceph/mds_client.h:304:
+extern void ceph_mdsc_pre_umount(struct ceph_mds_client *mdsc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2772: FILE: fs/ceph/mds_client.h:306:
+extern void ceph_mdsc_handle_reset(struct ceph_mds_client *mdsc, int mds);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2774: FILE: fs/ceph/mds_client.h:308:
+extern void ceph_mdsc_flushed_all_caps(struct ceph_mds_client *mdsc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2776: FILE: fs/ceph/mds_client.h:310:
+extern struct ceph_mds_request *ceph_mdsc_get_listener_req(struct inode *inode,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#2777: FILE: fs/ceph/mds_client.h:311:
+extern struct ceph_mds_request *ceph_mdsc_get_listener_req(struct inode *inode,
+						    u64 tid);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2778: FILE: fs/ceph/mds_client.h:312:
+extern char *ceph_mdsc_build_path(struct dentry *dentry, int *plen, u64 *base, int mds);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2787: FILE: fs/ceph/mdsmap.c:1:
+#include <linux/bug.h>

CHECK:LINE_SPACING: Please don't use multiple blank lines
#2804: FILE: fs/ceph/mdsmap.c:18:
+
+

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!m"
#2843: FILE: fs/ceph/mdsmap.c:57:
+	if (m == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2846: FILE: fs/ceph/mdsmap.c:60:
+	ceph_decode_need(p, end, 8*sizeof(u32), bad);
 	                          ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2855: FILE: fs/ceph/mdsmap.c:69:
+	m->m_addr = kzalloc(m->m_max_mds*sizeof(*m->m_addr), GFP_NOFS);
 	                                ^

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#2855: FILE: fs/ceph/mdsmap.c:69:
+	m->m_addr = kzalloc(m->m_max_mds*sizeof(*m->m_addr), GFP_NOFS);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2856: FILE: fs/ceph/mdsmap.c:70:
+	m->m_state = kzalloc(m->m_max_mds*sizeof(*m->m_state), GFP_NOFS);
 	                                 ^

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#2856: FILE: fs/ceph/mdsmap.c:70:
+	m->m_state = kzalloc(m->m_max_mds*sizeof(*m->m_state), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!m->m_addr"
#2857: FILE: fs/ceph/mdsmap.c:71:
+	if (m->m_addr == NULL || m->m_state == NULL)

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!m->m_state"
#2857: FILE: fs/ceph/mdsmap.c:71:
+	if (m->m_addr == NULL || m->m_state == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2863: FILE: fs/ceph/mdsmap.c:77:
+			 n * (3*sizeof(u32) + sizeof(u64) +
 			       ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#2864: FILE: fs/ceph/mdsmap.c:78:
+			      2*sizeof(*m->m_addr) +
 			       ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2878: FILE: fs/ceph/mdsmap.c:92:
+		dout(10, "mdsmap_decode %d/%d mds%d.%d %u.%u.%u.%u:%u state %d\n",
 		^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#2879: FILE: fs/ceph/mdsmap.c:93:
+		     i+1, n, mds, inc, IPQUADPORT(addr.ipaddr), state);
 		      ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#2888: FILE: fs/ceph/mdsmap.c:102:
+	dout(30, "mdsmap_decode success epoch %u\n", m->m_epoch);
 	^^^^

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2911: FILE: fs/ceph/mdsmap.h:1:
+#ifndef _FS_CEPH_MDSMAP_H

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#2941: FILE: fs/ceph/mdsmap.h:31:
+	BUG_ON(w < 0);

WARNING:TYPO_SPELLING: 'dne' may be misspelled - perhaps 'done'?
#2951: FILE: fs/ceph/mdsmap.h:41:
+		return "dne";
 		        ^^^

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2952: FILE: fs/ceph/mdsmap.h:42:
+		return "dne";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2955: FILE: fs/ceph/mdsmap.h:45:
+		return "stopped";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2958: FILE: fs/ceph/mdsmap.h:48:
+		return "destroying";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2961: FILE: fs/ceph/mdsmap.h:51:
+		return "failed";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2964: FILE: fs/ceph/mdsmap.h:54:
+		return "boot";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2967: FILE: fs/ceph/mdsmap.h:57:
+		return "standby";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2970: FILE: fs/ceph/mdsmap.h:60:
+		return "creating";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2973: FILE: fs/ceph/mdsmap.h:63:
+		return "starting";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2976: FILE: fs/ceph/mdsmap.h:66:
+		return "standby replay";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2979: FILE: fs/ceph/mdsmap.h:69:
+		return "replay";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2982: FILE: fs/ceph/mdsmap.h:72:
+		return "resolve";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2985: FILE: fs/ceph/mdsmap.h:75:
+		return "reconnect";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2988: FILE: fs/ceph/mdsmap.h:78:
+		return "rejoin";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2991: FILE: fs/ceph/mdsmap.h:81:
+		return "active";
+		break;

WARNING:UNNECESSARY_BREAK: break is not useful after a return
#2994: FILE: fs/ceph/mdsmap.h:84:
+		return "stopping";
+		break;

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3000: FILE: fs/ceph/mdsmap.h:90:
+extern int ceph_mdsmap_get_random_mds(struct ceph_mdsmap *m);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3001: FILE: fs/ceph/mdsmap.h:91:
+extern struct ceph_mdsmap *ceph_mdsmap_decode(void **p, void *end);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#3002: FILE: fs/ceph/mdsmap.h:92:
+extern void ceph_mdsmap_destroy(struct ceph_mdsmap *m);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000157316.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 5 errors, 198 warnings, 103 checks, 2917 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000157316.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
