WARNING:SPLIT_STRING: quoted string split across lines
#183: FILE: fs/ocfs2/journal.c:1058:
+			mlog(0, "no slot for this node, so no recovery"
+			     "required.\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:MISSING_SPACE: break quoted strings at a space character
#183: FILE: fs/ocfs2/journal.c:1058:
+			mlog(0, "no slot for this node, so no recovery"
+			     "required.\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#193: FILE: fs/ocfs2/journal.c:1068:
+		 * and when everything else is done, we recover quotas. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

ERROR:TRAILING_STATEMENTS: trailing statements should be on next line
#194: FILE: fs/ocfs2/journal.c:1069:
+		for (i = 0; i < rm_quota_used && rm_quota[i] != slot_num; i++);

Trailing statements (for example after any conditional) should be
on the next line.
Statements, such as::

  if (x == y) break;

should be::

  if (x == y)
          break;

WARNING:TYPO_SPELLING: 'noone' may be misspelled - perhaps 'no one'?
#208: FILE: fs/ocfs2/journal.c:1097:
+	 * superblock lock so that noone can start using the slot (and crash)
 	                           ^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#209: FILE: fs/ocfs2/journal.c:1098:
+	 * before we recover it */

WARNING:NEEDLESS_IF: kfree(NULL) is safe and this check is probably not required
#237: FILE: fs/ocfs2/journal.c:1132:
+	if (rm_quota)
+		kfree(rm_quota);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#352: FILE: fs/ocfs2/quota.h:67:
+						 * needing it */

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#360: FILE: fs/ocfs2/quota.h:86:
+struct ocfs2_quota_recovery *ocfs2_begin_quota_recovery(

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*rc)...) over kmalloc(sizeof(struct ocfs2_recovery_chunk)...)
#427: FILE: fs/ocfs2/quota_local.c:274:
+	rc = kmalloc(sizeof(struct ocfs2_recovery_chunk), GFP_NOFS);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around rec->r_list[type]
#459: FILE: fs/ocfs2/quota_local.c:306:
+		free_recovery_list(&(rec->r_list[type]));

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*rec)...) over kmalloc(sizeof(struct ocfs2_quota_recovery)...)
#500: FILE: fs/ocfs2/quota_local.c:347:
+	rec = kmalloc(sizeof(struct ocfs2_quota_recovery), GFP_NOFS);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around rec->r_list[type]
#504: FILE: fs/ocfs2/quota_local.c:351:
+		INIT_LIST_HEAD(&(rec->r_list[type]));

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#509: FILE: fs/ocfs2/quota_local.c:356:
+struct ocfs2_quota_recovery *ocfs2_begin_quota_recovery(

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#535: FILE: fs/ocfs2/quota_local.c:382:
+		 * we can trust metadata and data of the quota file */

WARNING:SPLIT_STRING: quoted string split across lines
#552: FILE: fs/ocfs2/quota_local.c:399:
+			mlog(ML_ERROR, "failed to read quota file info header "
+				"(slot=%d type=%d)\n", slot_num, type);

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#563: FILE: fs/ocfs2/quota_local.c:410:
+		iput(lqinode);
 		^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#578: FILE: fs/ocfs2/quota_local.c:425:
+ * dqonoff_mutex locked. */

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around rec->r_list[type]
#601: FILE: fs/ocfs2/quota_local.c:448:
+	list_for_each_entry_safe(rchunk, next, &(rec->r_list[type]), rc_list) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#613: FILE: fs/ocfs2/quota_local.c:460:
+			qbh = ocfs2_read_quota_block(lqinode,
+						ol_dqblk_block(sb, chunk, bit),

WARNING:SPLIT_STRING: quoted string split across lines
#625: FILE: fs/ocfs2/quota_local.c:472:
+				mlog(ML_ERROR, "Failed to get quota structure "
+				     "for id %u, type %d. Cannot finish quota "

WARNING:SPLIT_STRING: quoted string split across lines
#626: FILE: fs/ocfs2/quota_local.c:473:
+				     "for id %u, type %d. Cannot finish quota "
+				     "file recovery.\n",

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#627: FILE: fs/ocfs2/quota_local.c:474:
+				     (unsigned)le64_to_cpu(dqblk->dqb_id),

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#642: FILE: fs/ocfs2/quota_local.c:489:
+			 * due to signedness */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#650: FILE: fs/ocfs2/quota_local.c:497:
+			 * global structure actually won't be freed. */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#658: FILE: fs/ocfs2/quota_local.c:505:
+			status = ocfs2_journal_access(handle, lqinode,
+					qbh, OCFS2_JOURNAL_ACCESS_WRITE);

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around rec->r_list[type]
#691: FILE: fs/ocfs2/quota_local.c:538:
+		free_recovery_list(&(rec->r_list[type]));

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around rec->r_list[type]
#715: FILE: fs/ocfs2/quota_local.c:562:
+		if (list_empty(&(rec->r_list[type])))

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#724: FILE: fs/ocfs2/quota_local.c:571:
+		status = ocfs2_inode_lock_full(lqinode, NULL, 1,
+						       OCFS2_META_LOCK_NOQUEUE);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#726: FILE: fs/ocfs2/quota_local.c:573:
+		 * doing the recovery. Just skip the file... */

WARNING:SPLIT_STRING: quoted string split across lines
#729: FILE: fs/ocfs2/quota_local.c:576:
+			mlog(ML_NOTICE, "skipping quota recovery for slot %d "
+			     "because quota file is locked.\n", slot_num);

WARNING:SPLIT_STRING: quoted string split across lines
#741: FILE: fs/ocfs2/quota_local.c:588:
+			mlog(ML_ERROR, "failed to read quota file info header "
+				"(slot=%d type=%d)\n", slot_num, type);

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#753: FILE: fs/ocfs2/quota_local.c:600:
+		 * active */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#757: FILE: fs/ocfs2/quota_local.c:604:
+		 * some other node. */

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#783: FILE: fs/ocfs2/quota_local.c:630:
+		iput(lqinode);
 		^^^^

ERROR:CODE_INDENT: code indent should use tabs where possible
#832: FILE: fs/ocfs2/quota_local.c:707:
+                                                   &rec->r_list[type]);$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#832: FILE: fs/ocfs2/quota_local.c:707:
+		status = ocfs2_recovery_load_quota(lqinode, ldinfo, type,
+                                                   &rec->r_list[type]);

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#832: FILE: fs/ocfs2/quota_local.c:707:
+                                                   &rec->r_list[type]);$

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000190642.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 2 errors, 23 warnings, 13 checks, 761 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000190642.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
