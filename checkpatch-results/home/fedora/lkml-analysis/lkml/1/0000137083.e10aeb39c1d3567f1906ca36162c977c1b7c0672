CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*wfstat)...) over kzalloc(sizeof(struct workfunc_stats)...)
#144: FILE: kernel/trace/trace_workqueue.c:74:
+	wfstat = kzalloc(sizeof(struct workfunc_stats), GFP_ATOMIC);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*wfstat)...) over kzalloc(sizeof(struct workfunc_stats)...)
#233: FILE: kernel/trace/trace_workqueue.c:170:
+	wfstat = kzalloc(sizeof(struct workfunc_stats), GFP_ATOMIC);

WARNING:OOM_MESSAGE: Possible unnecessary 'out of memory' message
#235: FILE: kernel/trace/trace_workqueue.c:172:
+	if (!wfstat) {
+		pr_warning("trace_workqueue: not enough memory\n");

WARNING:LINE_SPACING: Missing a blank line after declarations
#301: FILE: kernel/trace/trace_workqueue.c:233:
+		struct cpu_workqueue_stats *cws;
+		cws = list_entry(workqueue_cpu_stat(cpu)->list.next,

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#302: FILE: kernel/trace/trace_workqueue.c:234:
+		cws = list_entry(workqueue_cpu_stat(cpu)->list.next,
+			struct cpu_workqueue_stats, list);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#307: FILE: kernel/trace/trace_workqueue.c:239:
+		ret = list_entry(cws->workfunclist.next, struct workfunc_stats,
+			list);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#327: FILE: kernel/trace/trace_workqueue.c:270:
+	if (!list_is_last(&prev_wfstat->list,
+	    &prev_wfstat->parent->workfunclist)) {

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#329: FILE: kernel/trace/trace_workqueue.c:272:
+		ret = list_entry(prev_wfstat->list.next, struct workfunc_stats,
+			list);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#340: FILE: kernel/trace/trace_workqueue.c:278:
+	if (!list_is_last(&prev_wfstat->parent->list,
+	    &workqueue_cpu_stat(cpu)->list)) {

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#341: FILE: kernel/trace/trace_workqueue.c:279:
+		struct cpu_workqueue_stats *cws = list_entry(

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#345: FILE: kernel/trace/trace_workqueue.c:283:
+		ret = list_entry(cws->workfunclist.next, struct workfunc_stats,
+			list);

WARNING:LINE_SPACING: Missing a blank line after declarations
#399: FILE: kernel/trace/trace_workqueue.c:325:
+		int lastwf = list_is_last(&wfstat->list, &cws->workfunclist);
+		seq_printf(s, "%3d %6d     %6u        %c-%pF\n",

WARNING:VSPRINTF_POINTER_EXTENSION: Invalid vsprintf pointer extension '%pF' - use %pS instead
#399: FILE: kernel/trace/trace_workqueue.c:325:
+		seq_printf(s, "%3d %6d     %6u        %c-%pF\n",
+			cws->cpu,
+			atomic_read(&wfstat->inserted),
+			wfstat->executed,
+			lastwf ? '`' : '|',
+			wfstat->func);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#400: FILE: kernel/trace/trace_workqueue.c:326:
+		seq_printf(s, "%3d %6d     %6u        %c-%pF\n",
+			cws->cpu,

WARNING:PREFER_SEQ_PUTS: Prefer seq_puts to seq_printf
#413: FILE: kernel/trace/trace_workqueue.c:338:
+	seq_printf(s, "# CPU  INSERTED  EXECUTED   TASKNAME:PID\n");

WARNING:PREFER_SEQ_PUTS: Prefer seq_puts to seq_printf
#414: FILE: kernel/trace/trace_workqueue.c:339:
+	seq_printf(s, "# |      |         |        `-WORKFUNC\n");

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000137083.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 6 warnings, 10 checks, 325 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000137083.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
