WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct file *' should also have an identifier name
#89: FILE: include/linux/fs.h:1103:
+	int (*revoke)(struct file *);

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#98: FILE: include/linux/fs.h:1744:
+extern int generic_file_revoke(struct file *);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct file *' should also have an identifier name
#98: FILE: include/linux/fs.h:1744:
+extern int generic_file_revoke(struct file *);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#108: FILE: fs/revoke.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#109: FILE: fs/revoke.c:2:
+ * fs/revoke.c - Invalidate all current open file descriptors of an inode.

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#148: FILE: fs/revoke.c:41:
+	struct file *filp;
 	             ^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#151: FILE: fs/revoke.c:44:
+	filp = get_empty_filp();
 	^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#152: FILE: fs/revoke.c:45:
+	if (!filp)
 	     ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#173: FILE: fs/revoke.c:66:
+	return filp;
 	       ^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#175: FILE: fs/revoke.c:68:
+  err_dentry:

WARNING:TYPO_SPELLING: 'iput' may be misspelled - perhaps 'input'?
#176: FILE: fs/revoke.c:69:
+	iput(inode);
 	^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#177: FILE: fs/revoke.c:70:
+  err_inode:

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#178: FILE: fs/revoke.c:71:
+	fput(filp);
 	     ^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#179: FILE: fs/revoke.c:72:
+  err:

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#200: FILE: fs/revoke.c:93:
+ * ^ILOCKING: task_lock(owner)$

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#220: FILE: fs/revoke.c:113:
+		struct file *filp, *new_filp;
 		             ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#223: FILE: fs/revoke.c:116:
+		filp = fcheck_files(files, fd);
 		^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#224: FILE: fs/revoke.c:117:
+		if (!inode_matches(filp, inode, to_exclude))
 		                   ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#258: FILE: fs/revoke.c:151:
+		info->file = filp;
 		             ^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#261: FILE: fs/revoke.c:154:
+  failed:

WARNING:INDENTED_LABEL: labels should not be indented
#264: FILE: fs/revoke.c:157:
+  out:

ERROR:CODE_INDENT: code indent should use tabs where possible
#277: FILE: fs/revoke.c:170:
+ ^I * Not holding ->mmap_sem here.$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#277: FILE: fs/revoke.c:170:
+ ^I * Not holding ->mmap_sem here.$

WARNING:MEMORY_BARRIER: memory barrier without comment
#280: FILE: fs/revoke.c:173:
+	smp_mb();

WARNING:INDENTED_LABEL: labels should not be indented
#281: FILE: fs/revoke.c:174:
+  again:

WARNING:INDENTED_LABEL: labels should not be indented
#295: FILE: fs/revoke.c:188:
+  out_need_break:

WARNING:INDENTED_LABEL: labels should not be indented
#327: FILE: fs/revoke.c:220:
+  out:

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#339: FILE: fs/revoke.c:232:
+		struct file *filp;
 		             ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#344: FILE: fs/revoke.c:237:
+		filp = fdt->fd[info->fd];
 		^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#345: FILE: fs/revoke.c:238:
+		if (filp)
 		    ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#346: FILE: fs/revoke.c:239:
+			fput(filp);
 			     ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#363: FILE: fs/revoke.c:256:
+		struct file *filp;
 		             ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#365: FILE: fs/revoke.c:258:
+		filp = table->files[i];
 		^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#379: FILE: fs/revoke.c:272:
+		struct file *this, *filp;
 		                    ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#389: FILE: fs/revoke.c:282:
+		filp = info->file;
 		^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#390: FILE: fs/revoke.c:283:
+		err = filp->f_op->revoke(filp);
 		                         ^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#398: FILE: fs/revoke.c:291:
+  failed:

ERROR:WHILE_AFTER_BRACE: while should follow close brace '}'
#436: FILE: fs/revoke.c:329:
+	}
+	while_each_thread(g, p);

while should follow the closing bracket on the same line::

  do {
          ...
  } while(something);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:SIZEOF_PARENTHESIS: sizeof *table should be sizeof(*table)
#456: FILE: fs/revoke.c:349:
+	table = kzalloc(sizeof *table, GFP_KERNEL);

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#468: FILE: fs/revoke.c:361:
+		struct file *filp;
 		             ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#470: FILE: fs/revoke.c:363:
+		filp = get_revoked_file();
 		^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#471: FILE: fs/revoke.c:364:
+		if (!filp)
 		     ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#474: FILE: fs/revoke.c:367:
+		table->files[i] = filp;
 		                  ^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#477: FILE: fs/revoke.c:370:
+  err:

WARNING:INDENTED_LABEL: labels should not be indented
#505: FILE: fs/revoke.c:398:
+  retry:

ERROR:WHILE_AFTER_BRACE: while should follow close brace '}'
#537: FILE: fs/revoke.c:430:
+	}
+	while_each_thread(g, p);

WARNING:INDENTED_LABEL: labels should not be indented
#538: FILE: fs/revoke.c:431:
+  exit_loop:

WARNING:INDENTED_LABEL: labels should not be indented
#559: FILE: fs/revoke.c:452:
+  out_free_table:

WARNING:INDENTED_LABEL: labels should not be indented
#561: FILE: fs/revoke.c:454:
+  out:

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#565: FILE: fs/revoke.c:458:
+asmlinkage int sys_revokeat(int dfd, const char __user * filename)

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#567: FILE: fs/revoke.c:460:
+	struct nameidata nd;
 	                 ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#570: FILE: fs/revoke.c:463:
+	err = __user_walk_fd(dfd, filename, 0, &nd);
 	                                        ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#572: FILE: fs/revoke.c:465:
+		err = do_revoke(nd.dentry->d_inode, NULL);
 		                ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#573: FILE: fs/revoke.c:466:
+		path_release(&nd);
 		              ^^

WARNING:INDENTED_LABEL: labels should not be indented
#606: FILE: fs/revoke.c:499:
+  out:

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#610: FILE: fs/revoke.c:503:
+EXPORT_SYMBOL(generic_file_revoke);

EXPORT_SYMBOL should immediately follow the symbol to be exported.

WARNING:INDENTED_LABEL: labels should not be indented
#686: FILE: fs/revoke.c:579:
+  out:

WARNING:INDENTED_LABEL: labels should not be indented
#688: FILE: fs/revoke.c:581:
+  err_mnt:

WARNING:INDENTED_LABEL: labels should not be indented
#690: FILE: fs/revoke.c:583:
+  err_register:

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#701: FILE: fs/revoked_inode.c:1:
+/*

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#702: FILE: fs/revoked_inode.c:2:
+ * fs/revoked_inode.c

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#727: FILE: fs/revoked_inode.c:27:
+static ssize_t revoked_file_read(struct file *filp, char __user * buf,
                                               ^^^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#727: FILE: fs/revoked_inode.c:27:
+static ssize_t revoked_file_read(struct file *filp, char __user * buf,

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#728: FILE: fs/revoked_inode.c:28:
+				 size_t size, loff_t * ppos)

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#733: FILE: fs/revoked_inode.c:33:
+static ssize_t revoked_special_file_read(struct file *filp, char __user * buf,
                                                       ^^^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#733: FILE: fs/revoked_inode.c:33:
+static ssize_t revoked_special_file_read(struct file *filp, char __user * buf,

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#734: FILE: fs/revoked_inode.c:34:
+					 size_t size, loff_t * ppos)

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#739: FILE: fs/revoked_inode.c:39:
+static ssize_t revoked_file_write(struct file *filp, const char __user * buf,
                                                ^^^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#739: FILE: fs/revoked_inode.c:39:
+static ssize_t revoked_file_write(struct file *filp, const char __user * buf,

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#740: FILE: fs/revoked_inode.c:40:
+				  size_t siz, loff_t * ppos)

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#759: FILE: fs/revoked_inode.c:59:
+static int revoked_file_readdir(struct file *filp, void *dirent,
                                              ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#765: FILE: fs/revoked_inode.c:65:
+static unsigned int revoked_file_poll(struct file *filp, poll_table * wait)
                                                    ^^^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#765: FILE: fs/revoked_inode.c:65:
+static unsigned int revoked_file_poll(struct file *filp, poll_table * wait)

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#770: FILE: fs/revoked_inode.c:70:
+static int revoked_file_ioctl(struct inode *inode, struct file *filp,
                                                                 ^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#776: FILE: fs/revoked_inode.c:76:
+static long revoked_file_unlocked_ioctl(struct file *file, unsigned cmd,

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#793: FILE: fs/revoked_inode.c:93:
+static int revoked_file_open(struct inode *inode, struct file *filp)
                                                                ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#803: FILE: fs/revoked_inode.c:103:
+static int revoked_file_release(struct inode *inode, struct file *filp)
                                                                   ^^^^

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#819: FILE: fs/revoked_inode.c:119:
+static int revoked_file_fasync(int fd, struct file *filp, int on)
                                                     ^^^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#829: FILE: fs/revoked_inode.c:129:
+static ssize_t revoked_file_sendfile(struct file *in_file, loff_t * ppos,

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#837: FILE: fs/revoked_inode.c:137:
+				     int off, size_t len, loff_t * pos,

WARNING:TYPO_SPELLING: 'filp' may be misspelled - perhaps 'flip'?
#862: FILE: fs/revoked_inode.c:162:
+static int revoked_file_flock(struct file *filp, int cmd, struct file_lock *fl)
                                            ^^^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#868: FILE: fs/revoked_inode.c:168:
+					 struct file *out, loff_t * ppos,

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#874: FILE: fs/revoked_inode.c:174:
+static ssize_t revoked_file_splice_read(struct file *in, loff_t * ppos,

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#940: FILE: fs/revoked_inode.c:240:
+				int mode, struct nameidata *nd)
 				                            ^^

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#947: FILE: fs/revoked_inode.c:247:
+					   struct nameidata *nd)
 					                     ^^

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#994: FILE: fs/revoked_inode.c:294:
+static int revoked_inode_readlink(struct dentry *dentry, char __user * buffer,

WARNING:TYPO_SPELLING: 'nd' may be misspelled - perhaps 'and'?
#1001: FILE: fs/revoked_inode.c:301:
+				    struct nameidata *nd)
 				                      ^^

WARNING:CONST_STRUCT: struct inode_operations should normally be const
#1040: FILE: fs/revoked_inode.c:340:
+static struct inode_operations revoked_inode_ops = {

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#1052: FILE: fs/revoked_inode.c:352:
+	/* follow_link must be no-op, otherwise unmounting this inode
+	   won't work */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1052: FILE: fs/revoked_inode.c:352:
+	   won't work */

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1070: FILE: fs/revoked_inode.c:370:
+	inode->i_atime = inode->i_mtime = inode->i_ctime =

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1084: FILE: include/linux/revoked_fs_i.h:1:
+#ifndef _LINUX_REVOKED_FS_I_H

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000457472.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 16 errors, 74 warnings, 2 checks, 1017 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000457472.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
