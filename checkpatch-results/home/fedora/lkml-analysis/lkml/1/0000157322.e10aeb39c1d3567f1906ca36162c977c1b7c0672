WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#59: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#64: FILE: fs/ceph/osd_client.c:1:
+#include <linux/err.h>

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:LINE_SPACING: Please don't use multiple blank lines
#83: FILE: fs/ceph/osd_client.c:20:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#106: FILE: fs/ceph/osd_client.c:43:
+		dout(10, " skipping last %llu, final file extent %llu~%llu\n",
 		^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#116: FILE: fs/ceph/osd_client.c:53:
+	dout(10, "calc_layout %llx.%08x %llu~%llu pgid %llx (%d pages)\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'calc_layout', this function's name, in a string
#116: FILE: fs/ceph/osd_client.c:53:
+	dout(10, "calc_layout %llx.%08x %llu~%llu pgid %llx (%d pages)\n",

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#122: FILE: fs/ceph/osd_client.c:59:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#133: FILE: fs/ceph/osd_client.c:70:
+	dout(10, "put_request %p %d -> %d\n", req, atomic_read(&req->r_ref),
 	^^^^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#134: FILE: fs/ceph/osd_client.c:71:
+	     atomic_read(&req->r_ref)-1);
 	                             ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#135: FILE: fs/ceph/osd_client.c:72:
+	BUG_ON(atomic_read(&req->r_ref) <= 0);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#167: FILE: fs/ceph/osd_client.c:104:
+	size_t msg_size = sizeof(*head) + num_op*sizeof(*op);
 	                                        ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#172: FILE: fs/ceph/osd_client.c:109:
+	req = kzalloc(sizeof(*req) + num_pages*sizeof(void *), GFP_NOFS);
 	                                      ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req"
#173: FILE: fs/ceph/osd_client.c:110:
+	if (req == NULL)

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

ERROR:TRAILING_WHITESPACE: trailing whitespace
#204: FILE: fs/ceph/osd_client.c:141:
+^I^Iop->op = cpu_to_le16(opcode == CEPH_OSD_OP_READ ? $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#207: FILE: fs/ceph/osd_client.c:144:
+		prevofs =  le64_to_cpu((op-1)->offset);
 		                          ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#226: FILE: fs/ceph/osd_client.c:163:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#241: FILE: fs/ceph/osd_client.c:178:
+	dout(30, "register_request %p tid %lld\n", req, req->r_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'register_request', this function's name, in a string
#241: FILE: fs/ceph/osd_client.c:178:
+	dout(30, "register_request %p tid %lld\n", req, req->r_tid);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#250: FILE: fs/ceph/osd_client.c:187:
+		jiffies + osdc->client->mount_args.osd_timeout*HZ;
 		                                              ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#254: FILE: fs/ceph/osd_client.c:191:
+		dout(30, "  timeout on tid %llu at %lu\n", req->r_tid,
 		^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#257: FILE: fs/ceph/osd_client.c:194:
+		schedule_delayed_work(&osdc->timeout_work,
+		      round_jiffies_relative(req->r_timeout_stamp - jiffies));

ERROR:TRAILING_WHITESPACE: trailing whitespace
#280: FILE: fs/ceph/osd_client.c:217:
+^Iunsigned long next_timeout = timeout + jiffies; $

WARNING:LINE_SPACING: Missing a blank line after declarations
#281: FILE: fs/ceph/osd_client.c:218:
+	unsigned long next_timeout = timeout + jiffies; 
+	RADIX_TREE(pings, GFP_NOFS);  /* only send 1 ping per osd */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#285: FILE: fs/ceph/osd_client.c:222:
+	dout(10, "timeout\n");
 	^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#288: FILE: fs/ceph/osd_client.c:225:
+	ceph_monc_request_osdmap(&osdc->client->monc, osdc->osdmap->epoch+1);
 	                                                                 ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!radix_tree_lookup"
#302: FILE: fs/ceph/osd_client.c:239:
+		    radix_tree_lookup(&pings, req->r_last_osd) == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#307: FILE: fs/ceph/osd_client.c:244:
+			dout(20, " tid %llu (at least) timed out on osd%d\n",
 			^^^^

WARNING:INDENTED_LABEL: labels should not be indented
#313: FILE: fs/ceph/osd_client.c:250:
+	next:

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#336: FILE: fs/ceph/osd_client.c:273:
+	dout(30, "__unregister_request %p tid %lld\n", req, req->r_tid);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using '__unregister_request', this function's name, in a string
#336: FILE: fs/ceph/osd_client.c:273:
+	dout(30, "__unregister_request %p tid %lld\n", req, req->r_tid);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#344: FILE: fs/ceph/osd_client.c:281:
+			dout(30, "no requests, canceling timeout\n");
 			^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#353: FILE: fs/ceph/osd_client.c:290:
+			BUG_ON(ret != 1);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#355: FILE: fs/ceph/osd_client.c:292:
+			dout(30, "rescheduled timeout on tid %llu at %lu\n",
 			^^^^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#358: FILE: fs/ceph/osd_client.c:295:
+			schedule_delayed_work(&osdc->timeout_work,
+			      round_jiffies_relative(req->r_timeout_stamp -

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#372: FILE: fs/ceph/osd_client.c:309:
+	unsigned pps; /* placement ps */

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'map_osds', this function's name, in a string
#379: FILE: fs/ceph/osd_client.c:316:
+		derr(0, "map_osds no crush rule for pool %d type %d size %d\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#387: FILE: fs/ceph/osd_client.c:324:
+		pps = ceph_stable_mod(req->r_pgid.pg.ps,
+				     osdc->osdmap->lpgp_num,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#391: FILE: fs/ceph/osd_client.c:328:
+		pps = ceph_stable_mod(req->r_pgid.pg.ps,
+				     osdc->osdmap->pgp_num,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#420: FILE: fs/ceph/osd_client.c:357:
+		dout(10, "send_request %p no up osds in pg\n", req);
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'send_request', this function's name, in a string
#420: FILE: fs/ceph/osd_client.c:357:
+		dout(10, "send_request %p no up osds in pg\n", req);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#422: FILE: fs/ceph/osd_client.c:359:
+					 osdc->osdmap->epoch+1);
 					                    ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#427: FILE: fs/ceph/osd_client.c:364:
+	dout(10, "send_request %p tid %llu to osd%d flags %d\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'send_request', this function's name, in a string
#427: FILE: fs/ceph/osd_client.c:364:
+	dout(10, "send_request %p tid %llu to osd%d flags %d\n",

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#440: FILE: fs/ceph/osd_client.c:377:
+	req->r_timeout_stamp = jiffies+osdc->client->mount_args.osd_timeout*HZ;
 	                              ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#440: FILE: fs/ceph/osd_client.c:377:
+	req->r_timeout_stamp = jiffies+osdc->client->mount_args.osd_timeout*HZ;
 	                                                                   ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#465: FILE: fs/ceph/osd_client.c:402:
+	dout(10, "handle_reply %p tid %llu\n", msg, tid);
 	^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req"
#470: FILE: fs/ceph/osd_client.c:407:
+	if (req == NULL) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#471: FILE: fs/ceph/osd_client.c:408:
+		dout(10, "handle_reply tid %llu dne\n", tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dne' may be misspelled - perhaps 'done'?
#471: FILE: fs/ceph/osd_client.c:408:
+		dout(10, "handle_reply tid %llu dne\n", tid);
 		                                ^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_reply"
#476: FILE: fs/ceph/osd_client.c:413:
+	if (req->r_reply == NULL) {

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#478: FILE: fs/ceph/osd_client.c:415:
+		/* no data payload, or r_reply would have been set by
+		   prepare_pages. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#478: FILE: fs/ceph/osd_client.c:415:
+		   prepare_pages. */

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#484: FILE: fs/ceph/osd_client.c:421:
+		dout(10, "handle_reply tid %llu already had reply?\n", tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#487: FILE: fs/ceph/osd_client.c:424:
+	dout(10, "handle_reply tid %llu flags %d\n", tid,
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#506: FILE: fs/ceph/osd_client.c:443:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#536: FILE: fs/ceph/osd_client.c:473:
+			dout(20, "tid %llu maps to no valid osd\n", req->r_tid);
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#543: FILE: fs/ceph/osd_client.c:480:
+		dout(20, "kicking tid %llu osd%d\n", req->r_tid,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#558: FILE: fs/ceph/osd_client.c:495:
+		dout(10, "%d requests for down osds, need new map\n", needmap);
 		^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#560: FILE: fs/ceph/osd_client.c:497:
+					 osdc->osdmap->epoch+1);
 					                    ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#579: FILE: fs/ceph/osd_client.c:516:
+	dout(2, "handle_map have %u\n", osdc->osdmap ? osdc->osdmap->epoch : 0);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#598: FILE: fs/ceph/osd_client.c:535:
+	dout(10, " %d inc maps\n", nr_maps);
 	^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#600: FILE: fs/ceph/osd_client.c:537:
+		ceph_decode_need(&p, end, 2*sizeof(u32), bad);
 		                           ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#605: FILE: fs/ceph/osd_client.c:542:
+		if (osdc->osdmap && osdc->osdmap->epoch+1 == epoch) {
 		                                       ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#606: FILE: fs/ceph/osd_client.c:543:
+			dout(10, "applying incremental map %u len %d\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#619: FILE: fs/ceph/osd_client.c:556:
+			dout(10, "ignoring incremental map %u len %d\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#630: FILE: fs/ceph/osd_client.c:567:
+	dout(30, " %d full maps\n", nr_maps);
 	^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#632: FILE: fs/ceph/osd_client.c:569:
+		ceph_decode_need(&p, end, 2*sizeof(u32), bad);
 		                           ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#637: FILE: fs/ceph/osd_client.c:574:
+			dout(5, "skipping non-latest full map %u len %d\n",
 			^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#640: FILE: fs/ceph/osd_client.c:577:
+			dout(10, "skipping full map %u len %d, "
 			^^^^

WARNING:SPLIT_STRING: quoted string split across lines
#641: FILE: fs/ceph/osd_client.c:578:
+			dout(10, "skipping full map %u len %d, "
+			     "older than our %u\n", epoch, maplen,

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#644: FILE: fs/ceph/osd_client.c:581:
+			dout(10, "taking full map %u len %d\n", epoch, maplen);
 			^^^^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#645: FILE: fs/ceph/osd_client.c:582:
+			newmap = osdmap_decode(&p, p+maplen);
 			                            ^

WARNING:RETURN_VOID: void function return statements are not generally useful
#671: FILE: fs/ceph/osd_client.c:608:
+	return;
+}

CHECK:LINE_SPACING: Please don't use multiple blank lines
#688: FILE: fs/ceph/osd_client.c:625:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#705: FILE: fs/ceph/osd_client.c:642:
+	dout(10, "prepare_pages on msg %p want %d\n", m, want);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#713: FILE: fs/ceph/osd_client.c:650:
+		dout(10, "prepare_pages unknown tid %llu\n", tid);
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#716: FILE: fs/ceph/osd_client.c:653:
+	dout(10, "prepare_pages tid %llu has %d pages, want %d\n",
 	^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_reply"
#718: FILE: fs/ceph/osd_client.c:655:
+	if (likely(req->r_num_pages >= want && req->r_reply == NULL)) {

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#768: FILE: fs/ceph/osd_client.c:705:
+		dout(0, "tid %llu err %d, revoking %p pages\n", req->r_tid,
 		^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#795: FILE: fs/ceph/osd_client.c:732:
+	dout(10, "do_sync_request tid %llu result %d, %d bytes\n",
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'do_sync_request', this function's name, in a string
#795: FILE: fs/ceph/osd_client.c:732:
+	dout(10, "do_sync_request tid %llu result %d, %d bytes\n",

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#801: FILE: fs/ceph/osd_client.c:738:
+}
+/*

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#806: FILE: fs/ceph/osd_client.c:743:
+	dout(5, "init\n");
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#829: FILE: fs/ceph/osd_client.c:766:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#850: FILE: fs/ceph/osd_client.c:787:
+	dout(10, "sync_read on vino %llx.%llx at %llu~%llu\n", vino.ino,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#860: FILE: fs/ceph/osd_client.c:797:
+	dout(10, "sync_read %llu~%llu -> %d pages\n", off, len,
 	^^^^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_pages[i]"
#866: FILE: fs/ceph/osd_client.c:803:
+		if (req->r_pages[i] == NULL) {

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#867: FILE: fs/ceph/osd_client.c:804:
+			req->r_num_pages = i+1;
 			                    ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#881: FILE: fs/ceph/osd_client.c:818:
+			int bad;
+			l = min_t(int, left, PAGE_CACHE_SIZE-po);

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#881: FILE: fs/ceph/osd_client.c:818:
+			l = min_t(int, left, PAGE_CACHE_SIZE-po);
 			                                    ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#910: FILE: fs/ceph/osd_client.c:847:
+	dout(10, "sync_read result %d\n", finalrc);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#926: FILE: fs/ceph/osd_client.c:863:
+	dout(10, "readpage on ino %llx.%llx at %lld~%lld\n", vino.ino,
 	^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#933: FILE: fs/ceph/osd_client.c:870:
+	BUG_ON(len != PAGE_CACHE_SIZE);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#946: FILE: fs/ceph/osd_client.c:883:
+		dout(10, "readpage zeroing %p from %d\n", page, read);
 		^^^^

WARNING:LINUX_VERSION_CODE: LINUX_VERSION_CODE should be avoided, code should be for the version to which it is merged
#947: FILE: fs/ceph/osd_client.c:884:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 25)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#947: FILE: fs/ceph/osd_client.c:884:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 25)

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#950: FILE: fs/ceph/osd_client.c:887:
+		zero_user_page(page, read, PAGE_CACHE_SIZE-read, KM_USER0);
 		                                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#955: FILE: fs/ceph/osd_client.c:892:
+	dout(10, "readpage result %d\n", rc);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#985: FILE: fs/ceph/osd_client.c:922:
+	dout(10, "readpages on ino %llx.%llx on %llu~%llu\n", vino.ino,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#999: FILE: fs/ceph/osd_client.c:936:
+			dout(20, "readpages page %d %p\n", contig_pages, page);
 			^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1007: FILE: fs/ceph/osd_client.c:944:
+	BUG_ON(!contig_pages);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1014: FILE: fs/ceph/osd_client.c:951:
+	dout(10, "readpages final extent is %llu~%llu -> %d pages\n",
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1030: FILE: fs/ceph/osd_client.c:967:
+			dout(20, "readpages zeroing %d %p from %d\n", i, page,
 			^^^^

WARNING:LINUX_VERSION_CODE: LINUX_VERSION_CODE should be avoided, code should be for the version to which it is merged
#1032: FILE: fs/ceph/osd_client.c:969:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 25)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1032: FILE: fs/ceph/osd_client.c:969:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 25)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1044: FILE: fs/ceph/osd_client.c:981:
+			dout(20, "readpages zeroing %d %p\n", i, page);
 			^^^^

WARNING:LINUX_VERSION_CODE: LINUX_VERSION_CODE should be avoided, code should be for the version to which it is merged
#1045: FILE: fs/ceph/osd_client.c:982:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 25)

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#1045: FILE: fs/ceph/osd_client.c:982:
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 25)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1054: FILE: fs/ceph/osd_client.c:991:
+	dout(10, "readpages result %d\n", rc);
 	^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1058: FILE: fs/ceph/osd_client.c:995:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1080: FILE: fs/ceph/osd_client.c:1017:
+	dout(10, "sync_write on ino %llx.%llx at %llu~%llu\n", vino.ino,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1096: FILE: fs/ceph/osd_client.c:1033:
+	dout(10, "sync_write %llu~%llu -> %d pages\n", off, len,
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1104: FILE: fs/ceph/osd_client.c:1041:
+		int bad;
+		req->r_pages[i] = alloc_page(GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!req->r_pages[i]"
#1105: FILE: fs/ceph/osd_client.c:1042:
+		if (req->r_pages[i] == NULL) {

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1106: FILE: fs/ceph/osd_client.c:1043:
+			req->r_num_pages = i+1;
 			                    ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1110: FILE: fs/ceph/osd_client.c:1047:
+		l = min_t(int, PAGE_SIZE-po, left);
 		                        ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1114: FILE: fs/ceph/osd_client.c:1051:
+			req->r_num_pages = i+1;
 			                    ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1145: FILE: fs/ceph/osd_client.c:1082:
+	dout(10, "sync_write result %d\n", finalrc);
 	^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1166: FILE: fs/ceph/osd_client.c:1103:
+	BUG_ON(vino.snap != CEPH_NOSNAP);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1185: FILE: fs/ceph/osd_client.c:1122:
+	dout(10, "writepages %llu~%llu -> %d pages\n", off, len,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1199: FILE: fs/ceph/osd_client.c:1136:
+	dout(10, "writepages result %d\n", rc);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1217: FILE: fs/ceph/osd_client.c:1154:
+	dout(10, "writepages_start %llu~%llu, %d pages\n", off, len, num_pages);
 	^^^^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1229: FILE: fs/ceph/osd_client.c:1166:
+	reqm->nr_pages = req->r_num_pages = num_pages;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1243: FILE: fs/ceph/osd_client.h:1:
+#ifndef _FS_CEPH_OSD_CLIENT_H

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1298: FILE: fs/ceph/osd_client.h:56:
+	unsigned          r_num_pages;        /* size of page array (follows) */

CHECK:UNCOMMENTED_DEFINITION: struct mutex definition without comment
#1310: FILE: fs/ceph/osd_client.h:68:
+	struct mutex           request_mutex;

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1318: FILE: fs/ceph/osd_client.h:76:
+extern void ceph_osdc_init(struct ceph_osd_client *osdc,

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1320: FILE: fs/ceph/osd_client.h:78:
+extern void ceph_osdc_stop(struct ceph_osd_client *osdc);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1322: FILE: fs/ceph/osd_client.h:80:
+extern void ceph_osdc_handle_reset(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1325: FILE: fs/ceph/osd_client.h:83:
+extern void ceph_osdc_handle_reply(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1327: FILE: fs/ceph/osd_client.h:85:
+extern void ceph_osdc_handle_map(struct ceph_osd_client *osdc,

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#1331: FILE: fs/ceph/osd_client.h:89:
+ * the data payload into. */

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1332: FILE: fs/ceph/osd_client.h:90:
+extern int ceph_osdc_prepare_pages(void *p, struct ceph_msg *m, int want);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1334: FILE: fs/ceph/osd_client.h:92:
+extern struct ceph_osd_request *ceph_osdc_new_request(struct ceph_osd_client *,

WARNING:FUNCTION_ARGUMENTS: function definition argument 'struct ceph_osd_client *' should also have an identifier name
#1334: FILE: fs/ceph/osd_client.h:92:
+extern struct ceph_osd_request *ceph_osdc_new_request(struct ceph_osd_client *,

This warning is emitted due to any of the following reasons:

  1. Arguments for the function declaration do not follow
     the identifier name.  Example::

       void foo
       (int bar, int baz)

     This should be corrected to::

       void foo(int bar, int baz)

  2. Some arguments for the function definition do not
     have an identifier name.  Example::

       void foo(int)

     All arguments should have identifier names.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1335: FILE: fs/ceph/osd_client.h:93:
+extern struct ceph_osd_request *ceph_osdc_new_request(struct ceph_osd_client *,
+				      struct ceph_file_layout *layout,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1341: FILE: fs/ceph/osd_client.h:99:
+extern void ceph_osdc_put_request(struct ceph_osd_request *req);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1343: FILE: fs/ceph/osd_client.h:101:
+extern int ceph_osdc_readpage(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1349: FILE: fs/ceph/osd_client.h:107:
+extern int ceph_osdc_readpages(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1357: FILE: fs/ceph/osd_client.h:115:
+extern int ceph_osdc_writepages(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1364: FILE: fs/ceph/osd_client.h:122:
+extern int ceph_osdc_writepages_start(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1369: FILE: fs/ceph/osd_client.h:127:
+extern int ceph_osdc_sync_read(struct ceph_osd_client *osdc,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#1375: FILE: fs/ceph/osd_client.h:133:
+extern int ceph_osdc_sync_write(struct ceph_osd_client *osdc,

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#1391: FILE: fs/ceph/osdmap.c:1:
+

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1407: FILE: fs/ceph/osdmap.c:17:
+static int calc_bits_of(unsigned t)

WARNING:LINE_SPACING: Missing a blank line after declarations
#1410: FILE: fs/ceph/osdmap.c:20:
+	int b = 0;
+	while (t) {

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1422: FILE: fs/ceph/osdmap.c:32:
+	map->pg_num_mask = (1 << calc_bits_of(map->pg_num-1)) - 1;
 	                                                 ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1423: FILE: fs/ceph/osdmap.c:33:
+	map->pgp_num_mask = (1 << calc_bits_of(map->pgp_num-1)) - 1;
 	                                                   ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1424: FILE: fs/ceph/osdmap.c:34:
+	map->lpg_num_mask = (1 << calc_bits_of(map->lpg_num-1)) - 1;
 	                                                   ^

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1425: FILE: fs/ceph/osdmap.c:35:
+	map->lpgp_num_mask = (1 << calc_bits_of(map->lpgp_num-1)) - 1;
 	                                                     ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1435: FILE: fs/ceph/osdmap.c:45:
+	dout(30, "crush_decode_uniform_bucket %p to %p\n", *p, end);
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1435: FILE: fs/ceph/osdmap.c:45:
+	int j;
+	dout(30, "crush_decode_uniform_bucket %p to %p\n", *p, end);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode_uniform_bucket', this function's name, in a string
#1435: FILE: fs/ceph/osdmap.c:45:
+	dout(30, "crush_decode_uniform_bucket %p to %p\n", *p, end);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1436: FILE: fs/ceph/osdmap.c:46:
+	b->primes = kmalloc(b->h.size * sizeof(u32), GFP_NOFS);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->primes"
#1437: FILE: fs/ceph/osdmap.c:47:
+	if (b->primes == NULL)

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1439: FILE: fs/ceph/osdmap.c:49:
+	ceph_decode_need(p, end, (1+b->h.size) * sizeof(u32), bad);
 	                           ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1452: FILE: fs/ceph/osdmap.c:62:
+	dout(30, "crush_decode_list_bucket %p to %p\n", *p, end);
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1452: FILE: fs/ceph/osdmap.c:62:
+	int j;
+	dout(30, "crush_decode_list_bucket %p to %p\n", *p, end);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode_list_bucket', this function's name, in a string
#1452: FILE: fs/ceph/osdmap.c:62:
+	dout(30, "crush_decode_list_bucket %p to %p\n", *p, end);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1453: FILE: fs/ceph/osdmap.c:63:
+	b->item_weights = kmalloc(b->h.size * sizeof(u32), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->item_weights"
#1454: FILE: fs/ceph/osdmap.c:64:
+	if (b->item_weights == NULL)

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1456: FILE: fs/ceph/osdmap.c:66:
+	b->sum_weights = kmalloc(b->h.size * sizeof(u32), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->sum_weights"
#1457: FILE: fs/ceph/osdmap.c:67:
+	if (b->sum_weights == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1473: FILE: fs/ceph/osdmap.c:83:
+	dout(30, "crush_decode_tree_bucket %p to %p\n", *p, end);
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1473: FILE: fs/ceph/osdmap.c:83:
+	int j;
+	dout(30, "crush_decode_tree_bucket %p to %p\n", *p, end);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode_tree_bucket', this function's name, in a string
#1473: FILE: fs/ceph/osdmap.c:83:
+	dout(30, "crush_decode_tree_bucket %p to %p\n", *p, end);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1474: FILE: fs/ceph/osdmap.c:84:
+	b->node_weights = kmalloc(b->h.size * sizeof(u32), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->node_weights"
#1475: FILE: fs/ceph/osdmap.c:85:
+	if (b->node_weights == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1489: FILE: fs/ceph/osdmap.c:99:
+	dout(30, "crush_decode_straw_bucket %p to %p\n", *p, end);
 	^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1489: FILE: fs/ceph/osdmap.c:99:
+	int j;
+	dout(30, "crush_decode_straw_bucket %p to %p\n", *p, end);

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode_straw_bucket', this function's name, in a string
#1489: FILE: fs/ceph/osdmap.c:99:
+	dout(30, "crush_decode_straw_bucket %p to %p\n", *p, end);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1490: FILE: fs/ceph/osdmap.c:100:
+	b->item_weights = kmalloc(b->h.size * sizeof(u32), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->item_weights"
#1491: FILE: fs/ceph/osdmap.c:101:
+	if (b->item_weights == NULL)

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1493: FILE: fs/ceph/osdmap.c:103:
+	b->straws = kmalloc(b->h.size * sizeof(u32), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->straws"
#1494: FILE: fs/ceph/osdmap.c:104:
+	if (b->straws == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1515: FILE: fs/ceph/osdmap.c:125:
+	dout(30, "crush_decode %p to %p len %d\n", *p, end, (int)(end - *p));
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1515: FILE: fs/ceph/osdmap.c:125:
+	dout(30, "crush_decode %p to %p len %d\n", *p, end, (int)(end - *p));

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c"
#1518: FILE: fs/ceph/osdmap.c:128:
+	if (c == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1521: FILE: fs/ceph/osdmap.c:131:
+	ceph_decode_need(p, end, 4*sizeof(u32), bad);
 	                          ^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1524: FILE: fs/ceph/osdmap.c:134:
+		derr(0, "crush_decode magic %x != current %x\n",

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1525: FILE: fs/ceph/osdmap.c:135:
+		     (unsigned)magic, (unsigned)CRUSH_MAGIC);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#1525: FILE: fs/ceph/osdmap.c:135:
+		     (unsigned)magic, (unsigned)CRUSH_MAGIC);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1532: FILE: fs/ceph/osdmap.c:142:
+	c->device_parents = kmalloc(c->max_devices * sizeof(u32), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c->device_parents"
#1533: FILE: fs/ceph/osdmap.c:143:
+	if (c->device_parents == NULL)

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1535: FILE: fs/ceph/osdmap.c:145:
+	c->bucket_parents = kmalloc(c->max_buckets * sizeof(u32), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c->bucket_parents"
#1536: FILE: fs/ceph/osdmap.c:146:
+	if (c->bucket_parents == NULL)

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1539: FILE: fs/ceph/osdmap.c:149:
+	c->buckets = kmalloc(c->max_buckets * sizeof(*c->buckets), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c->buckets"
#1540: FILE: fs/ceph/osdmap.c:150:
+	if (c->buckets == NULL)

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1542: FILE: fs/ceph/osdmap.c:152:
+	c->rules = kmalloc(c->max_rules * sizeof(*c->rules), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!c->rules"
#1543: FILE: fs/ceph/osdmap.c:153:
+	if (c->rules == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1557: FILE: fs/ceph/osdmap.c:167:
+		dout(30, "crush_decode bucket %d off %x %p to %p\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1557: FILE: fs/ceph/osdmap.c:167:
+		dout(30, "crush_decode bucket %d off %x %p to %p\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1558: FILE: fs/ceph/osdmap.c:168:
+		     i, (int)(*p-start), *p, end);
 		                ^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1576: FILE: fs/ceph/osdmap.c:186:
+		BUG_ON(size == 0);

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1577: FILE: fs/ceph/osdmap.c:187:
+		b = c->buckets[i] = kzalloc(size, GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b"
#1578: FILE: fs/ceph/osdmap.c:188:
+		if (b == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1581: FILE: fs/ceph/osdmap.c:191:
+		ceph_decode_need(p, end, 4*sizeof(u32), bad);
 		                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1588: FILE: fs/ceph/osdmap.c:198:
+		dout(30, "crush_decode bucket size %d off %x %p to %p\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1588: FILE: fs/ceph/osdmap.c:198:
+		dout(30, "crush_decode bucket size %d off %x %p to %p\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1589: FILE: fs/ceph/osdmap.c:199:
+		     b->size, (int)(*p-start), *p, end);
 		                      ^

WARNING:ALLOC_WITH_MULTIPLY: Prefer kmalloc_array over kmalloc with multiply
#1591: FILE: fs/ceph/osdmap.c:201:
+		b->items = kmalloc(b->size * sizeof(__s32), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!b->items"
#1592: FILE: fs/ceph/osdmap.c:202:
+		if (b->items == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1595: FILE: fs/ceph/osdmap.c:205:
+		ceph_decode_need(p, end, b->size*sizeof(u32), bad);
 		                                ^

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1602: FILE: fs/ceph/osdmap.c:212:
+			err = crush_decode_uniform_bucket(p, end,
+				  (struct crush_bucket_uniform *)b);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1608: FILE: fs/ceph/osdmap.c:218:
+			err = crush_decode_list_bucket(p, end,
+			       (struct crush_bucket_list *)b);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1614: FILE: fs/ceph/osdmap.c:224:
+			err = crush_decode_tree_bucket(p, end,
+				(struct crush_bucket_tree *)b);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1620: FILE: fs/ceph/osdmap.c:230:
+			err = crush_decode_straw_bucket(p, end,
+				(struct crush_bucket_straw *)b);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1628: FILE: fs/ceph/osdmap.c:238:
+	dout(30, "rule vec is %p\n", c->rules);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1635: FILE: fs/ceph/osdmap.c:245:
+			dout(30, "crush_decode NO rule %d off %x %p to %p\n",
 			^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1635: FILE: fs/ceph/osdmap.c:245:
+			dout(30, "crush_decode NO rule %d off %x %p to %p\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1636: FILE: fs/ceph/osdmap.c:246:
+			     i, (int)(*p-start), *p, end);
 			                ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1641: FILE: fs/ceph/osdmap.c:251:
+		dout(30, "crush_decode rule %d off %x %p to %p\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1641: FILE: fs/ceph/osdmap.c:251:
+		dout(30, "crush_decode rule %d off %x %p to %p\n",

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#1642: FILE: fs/ceph/osdmap.c:252:
+		     i, (int)(*p-start), *p, end);
 		                ^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1647: FILE: fs/ceph/osdmap.c:257:
+		r = c->rules[i] = kmalloc(sizeof(*r) +

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1648: FILE: fs/ceph/osdmap.c:258:
+					  yes*sizeof(struct crush_rule_step),
 					     ^

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!r"
#1650: FILE: fs/ceph/osdmap.c:260:
+		if (r == NULL)

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1652: FILE: fs/ceph/osdmap.c:262:
+		dout(30, " rule %d is at %p\n", i, r);
 		^^^^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1655: FILE: fs/ceph/osdmap.c:265:
+		ceph_decode_need(p, end, r->len*3*sizeof(u32), bad);
 		                               ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1655: FILE: fs/ceph/osdmap.c:265:
+		ceph_decode_need(p, end, r->len*3*sizeof(u32), bad);
 		                                 ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1665: FILE: fs/ceph/osdmap.c:275:
+	dout(30, "crush_decode success\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1665: FILE: fs/ceph/osdmap.c:275:
+	dout(30, "crush_decode success\n");

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1671: FILE: fs/ceph/osdmap.c:281:
+	dout(30, "crush_decode fail %d\n", err);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'crush_decode', this function's name, in a string
#1671: FILE: fs/ceph/osdmap.c:281:
+	dout(30, "crush_decode fail %d\n", err);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1676: FILE: fs/ceph/osdmap.c:286:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1682: FILE: fs/ceph/osdmap.c:292:
+	dout(10, "osdmap_destroy %p\n", map);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_destroy', this function's name, in a string
#1682: FILE: fs/ceph/osdmap.c:292:
+	dout(10, "osdmap_destroy %p\n", map);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#1700: FILE: fs/ceph/osdmap.c:310:
+	state = kzalloc(max * sizeof(*state), GFP_NOFS);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#1701: FILE: fs/ceph/osdmap.c:311:
+	addr = kzalloc(max * sizeof(*addr), GFP_NOFS);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#1702: FILE: fs/ceph/osdmap.c:312:
+	weight = kzalloc(max * sizeof(*weight), GFP_NOFS);

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!state"
#1703: FILE: fs/ceph/osdmap.c:313:
+	if (state == NULL || addr == NULL || weight == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!addr"
#1703: FILE: fs/ceph/osdmap.c:313:
+	if (state == NULL || addr == NULL || weight == NULL) {

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!weight"
#1703: FILE: fs/ceph/osdmap.c:313:
+	if (state == NULL || addr == NULL || weight == NULL) {

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1712: FILE: fs/ceph/osdmap.c:322:
+		memcpy(state, map->osd_state, map->max_osd*sizeof(*state));
 		                                          ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1713: FILE: fs/ceph/osdmap.c:323:
+		memcpy(addr, map->osd_addr, map->max_osd*sizeof(*addr));
 		                                        ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1714: FILE: fs/ceph/osdmap.c:324:
+		memcpy(weight, map->osd_weight, map->max_osd*sizeof(*weight));
 		                                            ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1738: FILE: fs/ceph/osdmap.c:348:
+	dout(30, "osdmap_decode %p to %p len %d\n", *p, end, (int)(end - *p));
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#1738: FILE: fs/ceph/osdmap.c:348:
+	dout(30, "osdmap_decode %p to %p len %d\n", *p, end, (int)(end - *p));

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!map"
#1741: FILE: fs/ceph/osdmap.c:351:
+	if (map == NULL)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1744: FILE: fs/ceph/osdmap.c:354:
+	ceph_decode_need(p, end, 2*sizeof(u64)+11*sizeof(u32), bad);
 	                          ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1744: FILE: fs/ceph/osdmap.c:354:
+	ceph_decode_need(p, end, 2*sizeof(u64)+11*sizeof(u32), bad);
 	                                      ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1744: FILE: fs/ceph/osdmap.c:354:
+	ceph_decode_need(p, end, 2*sizeof(u64)+11*sizeof(u32), bad);
 	                                         ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1769: FILE: fs/ceph/osdmap.c:379:
+	dout(30, "osdmap_decode max_osd = %d\n", map->max_osd);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#1769: FILE: fs/ceph/osdmap.c:379:
+	dout(30, "osdmap_decode max_osd = %d\n", map->max_osd);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1773: FILE: fs/ceph/osdmap.c:383:
+	ceph_decode_need(p, end, 3*sizeof(u32) +
 	                          ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1774: FILE: fs/ceph/osdmap.c:384:
+			 map->max_osd*(1 + sizeof(*map->osd_weight) +
 			             ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1784: FILE: fs/ceph/osdmap.c:394:
+	ceph_decode_copy(p, map->osd_addr, map->max_osd*sizeof(*map->osd_addr));
 	                                               ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1788: FILE: fs/ceph/osdmap.c:398:
+	dout(30, "osdmap_decode crush len %d from off 0x%x\n", len,
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#1788: FILE: fs/ceph/osdmap.c:398:
+	dout(30, "osdmap_decode crush len %d from off 0x%x\n", len,

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1802: FILE: fs/ceph/osdmap.c:412:
+	dout(30, "osdmap_decode done %p %p\n", *p, end);
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#1802: FILE: fs/ceph/osdmap.c:412:
+	dout(30, "osdmap_decode done %p %p\n", *p, end);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1806: FILE: fs/ceph/osdmap.c:416:
+	dout(30, "osdmap_decode fail\n");
 	^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'osdmap_decode', this function's name, in a string
#1806: FILE: fs/ceph/osdmap.c:416:
+	dout(30, "osdmap_decode fail\n");

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1829: FILE: fs/ceph/osdmap.c:439:
+	ceph_decode_need(p, end, sizeof(fsid)+sizeof(ctime)+2*sizeof(u32),
 	                                     ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1829: FILE: fs/ceph/osdmap.c:439:
+	ceph_decode_need(p, end, sizeof(fsid)+sizeof(ctime)+2*sizeof(u32),
 	                                                   ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1829: FILE: fs/ceph/osdmap.c:439:
+	ceph_decode_need(p, end, sizeof(fsid)+sizeof(ctime)+2*sizeof(u32),
 	                                                     ^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1836: FILE: fs/ceph/osdmap.c:446:
+	BUG_ON(epoch != map->epoch+1);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1836: FILE: fs/ceph/osdmap.c:446:
+	BUG_ON(epoch != map->epoch+1);
 	                          ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1844: FILE: fs/ceph/osdmap.c:454:
+		dout(20, "apply_incremental full map len %d, %p to %p\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'apply_incremental', this function's name, in a string
#1844: FILE: fs/ceph/osdmap.c:454:
+		dout(20, "apply_incremental full map len %d, %p to %p\n",

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1846: FILE: fs/ceph/osdmap.c:456:
+		newmap = osdmap_decode(p, min(*p+len, end));
 		                                ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1853: FILE: fs/ceph/osdmap.c:463:
+		dout(20, "apply_incremental new crush map len %d, %p to %p\n",
 		^^^^

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'apply_incremental', this function's name, in a string
#1853: FILE: fs/ceph/osdmap.c:463:
+		dout(20, "apply_incremental new crush map len %d, %p to %p\n",

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#1855: FILE: fs/ceph/osdmap.c:465:
+		newcrush = crush_decode(*p, min(*p+len, end));
 		                                  ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1864: FILE: fs/ceph/osdmap.c:474:
+	ceph_decode_need(p, end, 5*sizeof(u32), bad);
 	                          ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1901: FILE: fs/ceph/osdmap.c:511:
+		struct ceph_entity_addr addr;
+		ceph_decode_32_safe(p, end, osd, bad);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1903: FILE: fs/ceph/osdmap.c:513:
+		dout(1, "osd%d up\n", osd);
 		^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1904: FILE: fs/ceph/osdmap.c:514:
+		BUG_ON(osd >= map->max_osd);

WARNING:LINE_SPACING: Missing a blank line after declarations
#1913: FILE: fs/ceph/osdmap.c:523:
+		u32 osd;
+		ceph_decode_32_safe(p, end, osd, bad);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1915: FILE: fs/ceph/osdmap.c:525:
+		dout(1, "osd%d down\n", osd);
 		^^^^

WARNING:LINE_SPACING: Missing a blank line after declarations
#1926: FILE: fs/ceph/osdmap.c:536:
+		u32 osd, off;
+		ceph_decode_need(p, end, sizeof(u32)*2, bad);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1926: FILE: fs/ceph/osdmap.c:536:
+		ceph_decode_need(p, end, sizeof(u32)*2, bad);
 		                                    ^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1929: FILE: fs/ceph/osdmap.c:539:
+		dout(1, "osd%d weight 0x%x %s\n", osd, off,
 		^^^^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1948: FILE: fs/ceph/osdmap.c:558:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#1950: FILE: fs/ceph/osdmap.c:560:
+
+

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1971: FILE: fs/ceph/osdmap.c:581:
+	dout(80, "mapping %llu~%llu  osize %u fl_su %u\n", off, *plen,
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1974: FILE: fs/ceph/osdmap.c:584:
+	dout(80, "osize %u / su %u = su_per_object %u\n", osize, su,
 	^^^^

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#1977: FILE: fs/ceph/osdmap.c:587:
+	BUG_ON((su & ~PAGE_MASK) != 0);

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1982: FILE: fs/ceph/osdmap.c:592:
+	dout(80, "off %llu / su %u = bl %u\n", off, su, bl);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1989: FILE: fs/ceph/osdmap.c:599:
+	dout(80, "objset %u * sc %u = bno %u\n", objsetno, sc, oid->bno);
 	^^^^

WARNING:TYPO_SPELLING: 'dout' may be misspelled - perhaps 'doubt'?
#1996: FILE: fs/ceph/osdmap.c:606:
+	dout(80, " obj extent %llu~%llu\n", *oxoff, *oxlen);
 	^^^^

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2008: FILE: fs/ceph/osdmap.c:618:
+	unsigned num, num_mask;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#2011: FILE: fs/ceph/osdmap.c:621:
+	unsigned bno = le32_to_cpu(oid->bno);

CHECK:SPACING: spaces preferred around that '>>' (ctx:VxV)
#2023: FILE: fs/ceph/osdmap.c:633:
+	pgid.pg.ps = bno + crush_hash32_2(ino, ino>>32);
 	                                          ^

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#2038: FILE: fs/ceph/osdmap.h:1:
+#ifndef _FS_CEPH_OSDMAP_H

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2064: FILE: fs/ceph/osdmap.h:27:
+	 * in the system.  foo_mask is the smallest value (2**n-1) >= foo. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#2079: FILE: fs/ceph/osdmap.h:42:
+	 * the list of osds that store+replicate them. */

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2125: FILE: fs/ceph/osdmap.h:88:
+extern struct ceph_osdmap *osdmap_decode(void **p, void *end);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2126: FILE: fs/ceph/osdmap.h:89:
+extern struct ceph_osdmap *apply_incremental(void **p, void *end,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2129: FILE: fs/ceph/osdmap.h:92:
+extern void osdmap_destroy(struct ceph_osdmap *map);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2132: FILE: fs/ceph/osdmap.h:95:
+extern void calc_file_object_mapping(struct ceph_file_layout *layout,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#2138: FILE: fs/ceph/osdmap.h:101:
+extern void calc_object_layout(struct ceph_object_layout *ol,

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000157322.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 2 errors, 169 warnings, 121 checks, 2062 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000157322.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
