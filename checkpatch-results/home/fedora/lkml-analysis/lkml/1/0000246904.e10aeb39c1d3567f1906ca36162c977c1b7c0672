WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#29: 
master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev.git upstream-linus

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#91: FILE: drivers/ata/libata-core.c:1135:
+	BUG_ON(len & 1);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#119: FILE: drivers/ata/libata-core.c:1899:
+unsigned int ata_do_dev_read_id(struct ata_device *dev,
+					struct ata_taskfile *tf, u16 *id)

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#159: FILE: drivers/ata/libata-core.c:2168:
+		ata_dev_printk(dev, KERN_WARNING,
+			"WARNING: ATAPI is %s, device ignored.\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#317: FILE: drivers/ata/pata_it821x.c:515:
+		ata_dev_printk(adev, KERN_INFO, "%sRAID%d volume",
 			adev->id[147]?"Bootable ":"",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#350: FILE: drivers/ata/pata_it821x.c:541:
+static unsigned int it821x_read_id(struct ata_device *adev,
+					struct ata_taskfile *tf, u16 *id)

WARNING:STRING_FRAGMENTS: Consecutive strings are generally better as a single string
#412: FILE: drivers/ata/pata_it821x.c:614:
+		"RAID0", "RAID1" "RAID 0+1", "JBOD", "DISK"

ERROR:TRAILING_WHITESPACE: trailing whitespace
#418: FILE: drivers/ata/pata_it821x.c:620:
+^Iata_id_c_string((u16 *)buf, id, 0, 41); $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#436: FILE: drivers/ata/pata_it821x.c:638:
+		printk(KERN_INFO "%d: %-6s %-8s          %s %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#437: FILE: drivers/ata/pata_it821x.c:639:
+		printk(KERN_INFO "%d: %-6s %-8s          %s %s\n",
+				n, mbuf, types[buf[52]], id, cbl);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#439: FILE: drivers/ata/pata_it821x.c:641:
+		printk(KERN_INFO "%d: %-6s %-8s Volume: %1d %s %s\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#440: FILE: drivers/ata/pata_it821x.c:642:
+		printk(KERN_INFO "%d: %-6s %-8s Volume: %1d %s %s\n",
+				n, mbuf, types[buf[52]], buf[53], id, cbl);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#442: FILE: drivers/ata/pata_it821x.c:644:
+		printk(KERN_INFO "%d: Rebuilding: %d%%\n", n, buf[125]);

WARNING:LINE_SPACING: Missing a blank line after declarations
#461: FILE: drivers/ata/pata_it821x.c:663:
+	u16 *buf = kmalloc(len, GFP_KERNEL);
+	if (buf == NULL) {

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "!buf"
#461: FILE: drivers/ata/pata_it821x.c:663:
+	if (buf == NULL) {

Comparisons to NULL in the form (foo == NULL) or (foo != NULL)
are better written as (!foo) and (foo).

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#462: FILE: drivers/ata/pata_it821x.c:664:
+		printk(KERN_ERR "it821x_firmware_command: Out of memory\n");

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'it821x_firmware_command', this function's name, in a string
#462: FILE: drivers/ata/pata_it821x.c:664:
+		printk(KERN_ERR "it821x_firmware_command: Out of memory\n");

Embedded function names are less appropriate to use as
refactoring can cause function renaming.  Prefer the use of
"%s", __func__ to embedded function names.

Note that this does not work with -f (--file) checkpatch option
as it depends on patch context providing the function name.

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#466: FILE: drivers/ata/pata_it821x.c:668:
+	/* This isn't quite a normal ATA command as we are talking to the
+	   firmware not the drives */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#466: FILE: drivers/ata/pata_it821x.c:668:
+	   firmware not the drives */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#474: FILE: drivers/ata/pata_it821x.c:676:
+	/* This should be almost immediate but a little paranoia goes a long
+	   way. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#474: FILE: drivers/ata/pata_it821x.c:676:
+	   way. */

ERROR:SPACING: space required before the open parenthesis '('
#475: FILE: drivers/ata/pata_it821x.c:677:
+	while(n++ < 10) {

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#479: FILE: drivers/ata/pata_it821x.c:681:
+			printk(KERN_ERR "it821x_firmware_command: rejected\n");

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'it821x_firmware_command', this function's name, in a string
#479: FILE: drivers/ata/pata_it821x.c:681:
+			printk(KERN_ERR "it821x_firmware_command: rejected\n");

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#483: FILE: drivers/ata/pata_it821x.c:685:
+			ioread16_rep(ap->ioaddr.data_addr, buf, len/2);
 			                                           ^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#489: FILE: drivers/ata/pata_it821x.c:691:
+	printk(KERN_ERR "it821x_firmware_command: timeout\n");

WARNING:EMBEDDED_FUNCTION_NAME: Prefer using '"%s...", __func__' to using 'it821x_firmware_command', this function's name, in a string
#489: FILE: drivers/ata/pata_it821x.c:691:
+	printk(KERN_ERR "it821x_firmware_command: timeout\n");

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#507: FILE: drivers/ata/pata_it821x.c:709:
+	/* This is a bit ugly as we can't just issue a task file to a device
+	   as this is controller magic */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#507: FILE: drivers/ata/pata_it821x.c:709:
+	   as this is controller magic */

CHECK:COMPARISON_TO_NULL: Comparison to NULL could be written "buf"
#511: FILE: drivers/ata/pata_it821x.c:713:
+	if (buf != NULL) {

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#512: FILE: drivers/ata/pata_it821x.c:714:
+		printk(KERN_INFO "pata_it821x: Firmware %02X/%02X/%02X%02X\n",

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#513: FILE: drivers/ata/pata_it821x.c:715:
+		printk(KERN_INFO "pata_it821x: Firmware %02X/%02X/%02X%02X\n",
+				buf[505],

ERROR:CODE_INDENT: code indent should use tabs where possible
#518: FILE: drivers/ata/pata_it821x.c:720:
+ ^I^I^Iit821x_display_disk(i, buf + 128 * i);$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#518: FILE: drivers/ata/pata_it821x.c:720:
+ ^I^I^Iit821x_display_disk(i, buf + 128 * i);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#518: FILE: drivers/ata/pata_it821x.c:720:
+ ^I^I^Iit821x_display_disk(i, buf + 128 * i);$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#523: FILE: drivers/ata/pata_it821x.c:725:
+
+

ERROR:SPACING: spaces required around that '=' (ctx:VxW)
#581: FILE: drivers/ata/pata_it821x.c:838:
+	.check_atapi_dma= it821x_check_atapi_dma,
 	                ^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#583: FILE: drivers/ata/pata_it821x.c:840:
+^I.bmdma_start ^I= it821x_passthru_bmdma_start,$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (8, 24)
#597: FILE: drivers/ata/pata_it821x.c:854:
+	if (pdev->vendor != PCI_VENDOR_ID_ITE ||
[...]
+			return;

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#598: FILE: drivers/ata/pata_it821x.c:855:
+	if (pdev->vendor != PCI_VENDOR_ID_ITE ||
+			pdev->device != PCI_DEVICE_ID_ITE_8212)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#630: FILE: drivers/ata/pata_it821x.c:907:
+^I^I$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#636: FILE: drivers/ata/pata_it821x.c:913:
+			printk(KERN_INFO DRV_NAME ": forcing bypass mode.\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#646: FILE: drivers/ata/pata_it821x.c:919:
+		printk(KERN_INFO DRV_NAME": controller in %s mode.\n",

CHECK:CONCATENATED_STRING: Concatenated strings should use spaces between elements
#646: FILE: drivers/ata/pata_it821x.c:919:
+		printk(KERN_INFO DRV_NAME": controller in %s mode.\n",

Concatenated elements should have a space in between.
Example::

  printk(KERN_INFO"bar");

should be::

  printk(KERN_INFO "bar");

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#647: FILE: drivers/ata/pata_it821x.c:920:
+		printk(KERN_INFO DRV_NAME": controller in %s mode.\n",
+								mode[conf]);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#776: FILE: include/linux/libata.h:63:
+#define DPRINTK(fmt, args...) printk(KERN_ERR "%s: " fmt, __func__, ## args)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#779: FILE: include/linux/libata.h:65:
+#define VPRINTK(fmt, args...) printk(KERN_ERR "%s: " fmt, __func__, ## args)

WARNING:LONG_LINE: line length of 111 exceeds 100 columns
#788: FILE: include/linux/libata.h:74:
+#define BPRINTK(fmt, args...) if (ap->flags & ATA_FLAG_DEBUGMSG) printk(KERN_ERR "%s: " fmt, __func__, ## args)

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_err([subsystem]dev, ... then dev_err(dev, ... then pr_err(...  to printk(KERN_ERR ...
#788: FILE: include/linux/libata.h:74:
+#define BPRINTK(fmt, args...) if (ap->flags & ATA_FLAG_DEBUGMSG) printk(KERN_ERR "%s: " fmt, __func__, ## args)

ERROR:MULTISTATEMENT_MACRO_USE_DO_WHILE: Macros starting with if should be enclosed by a do - while loop to avoid possible if/else logic defects
#788: FILE: include/linux/libata.h:74:
+#define BPRINTK(fmt, args...) if (ap->flags & ATA_FLAG_DEBUGMSG) printk(KERN_ERR "%s: " fmt, __func__, ## args)

Macros with multiple statements should be enclosed in a
do - while block.  Same should also be the case for macros
starting with `if` to avoid logic defects::

  #define macrofun(a, b, c)                 \
    do {                                    \
            if (a == 5)                     \
                    do_this(b, c);          \
    } while (0)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#macros-enums-and-rtl

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#804: FILE: include/linux/libata.h:955:
+extern unsigned int ata_do_dev_read_id(struct ata_device *dev,

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#805: FILE: include/linux/libata.h:956:
+extern unsigned int ata_do_dev_read_id(struct ata_device *dev,
+					struct ata_taskfile *tf, u16 *id);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000246904.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 6 errors, 30 warnings, 16 checks, 680 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000246904.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
