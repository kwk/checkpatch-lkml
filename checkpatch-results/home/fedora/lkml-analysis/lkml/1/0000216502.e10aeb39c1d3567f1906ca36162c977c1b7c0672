WARNING:COMMIT_MESSAGE: Missing commit description - Add an appropriate one

The patch is missing a commit description.  A brief
description of the changes made by the patch should be added.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#describe-your-changes

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#178: FILE: include/linux/relay_pagewriter.h:53:
+extern size_t pagewriter_switch_page_default_callback(struct pagewriter_buf *b,

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#325: FILE: include/linux/relay_pagewriter.h:211:
+extern void pagewriter_close(struct pagewriter *pagewriter);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*chan)...) over kzalloc(sizeof(struct rchan)...)
#461: FILE: kernel/relay.c:81:
+	chan = kzalloc(sizeof(struct rchan), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

WARNING:STRLCPY: Prefer strscpy over strlcpy - see: https://lore.kernel.org/r/CAHk-=wgfRnXz0W3D37d01q3JFkr_i_uTL=V6A6G1oUZcprmknw@mail.gmail.com/
#485: FILE: kernel/relay.c:90:
+	strlcpy(chan->base_filename, base_filename, NAME_MAX);

WARNING:LINE_SPACING: Missing a blank line after declarations
#850: FILE: kernel/relay.c:372:
+	struct rchan *chan = container_of(kref, struct rchan, kref);
+	kfree(chan);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:TYPO_SPELLING: 'fileystem' may be misspelled - perhaps 'filesystem'?
#885: FILE: kernel/relay.c:396:
+ *	Removes the file from the fileystem, which also frees the
   	                          ^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:LINE_SPACING: Missing a blank line after declarations
#892: FILE: kernel/relay.c:403:
+	struct rchan_buf *buf = container_of(kref, struct rchan_buf, kref);
+	buf->chan->cb->remove_buf_file(buf->dentry);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*buf)...) over kzalloc(sizeof(struct rchan_buf)...)
#929: FILE: kernel/relay.c:451:
+	struct rchan_buf *buf = kzalloc(sizeof(struct rchan_buf), GFP_KERNEL);

WARNING:LINE_SPACING: Missing a blank line after declarations
#930: FILE: kernel/relay.c:452:
+	struct rchan_buf *buf = kzalloc(sizeof(struct rchan_buf), GFP_KERNEL);
+	if (!buf)

WARNING:WAITQUEUE_ACTIVE: waitqueue_active without comment
#999: FILE: kernel/relay.c:514:
+	    (waitqueue_active(&buf->read_wait)))

WARNING:LINE_SPACING: Missing a blank line after declarations
#1074: FILE: kernel/relay.c:533:
+	struct rchan_buf *buf = (struct rchan_buf *)data;
+	wake_up_interruptible(&buf->read_wait);

CHECK:BRACES: braces {} should be used on all arms of this statement
#1096: FILE: kernel/relay.c:547:
+	if (init) {
[...]
+	} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1100: FILE: kernel/relay.c:551:
+	} else

WARNING:TYPO_SPELLING: 'usespace' may be misspelled - perhaps 'userspace'?
#1226: FILE: kernel/relay_pagewriter.c:5:
+ * usespace, and reclaim them after they've been read.
    ^^^^^^^^

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*pagewriter)...) over kzalloc(sizeof(struct pagewriter)...)
#1282: FILE: kernel/relay_pagewriter.c:84:
+	pagewriter = kzalloc(sizeof(struct pagewriter), GFP_KERNEL);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#1366: FILE: kernel/relay_pagewriter.c:168:
+		printk(KERN_WARNING "pagewriter: one or more items not logged "

WARNING:SPLIT_STRING: quoted string split across lines
#1367: FILE: kernel/relay_pagewriter.c:169:
+		printk(KERN_WARNING "pagewriter: one or more items not logged "
+		       "[item size (%Zd) > PAGE_SIZE (%lu)]\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:PRINTF_Z: %Zd is non-standard C, use %zd
#1367: FILE: kernel/relay_pagewriter.c:169:
+		       "[item size (%Zd) > PAGE_SIZE (%lu)]\n",

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1645: FILE: kernel/relay_pagewriter.c:439:
+ * ^Ipagewriter_page_released_callback - relay_page page_released impl$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1646: FILE: kernel/relay_pagewriter.c:440:
+ * ^I@page: the page released$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1647: FILE: kernel/relay_pagewriter.c:441:
+ * ^I@private_data: contains associated pagewriter_buf$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1652: FILE: kernel/relay_pagewriter.c:443:
+ * ^Irelay has notified us that a page we gave it has been read and$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1653: FILE: kernel/relay_pagewriter.c:444:
+ * ^Iis now available for us to re-use.  We simply add it back to$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1654: FILE: kernel/relay_pagewriter.c:445:
+ * ^Ithe page pool for that buf.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1745: FILE: kernel/relay_pagewriter.c:458:
+ * ^Ipagewriter_page_stolen_callback - relay_page page_stolen impl$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1746: FILE: kernel/relay_pagewriter.c:459:
+ * ^I@page: the page released$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1747: FILE: kernel/relay_pagewriter.c:460:
+ * ^I@private_data: contains associated pagewriter_buf$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1749: FILE: kernel/relay_pagewriter.c:462:
+ * ^Irelay has notified us that a page we gave it has been stolen.$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1750: FILE: kernel/relay_pagewriter.c:463:
+ * ^IWe simply allocate a new one and add it to the page pool for$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#1751: FILE: kernel/relay_pagewriter.c:464:
+ * ^Ithat buf.$

WARNING:SPLIT_STRING: quoted string split across lines
#1862: FILE: kernel/relay_pagewriter.c:593:
 					"pagewriter_hotcpu_callback: cpu %d "
+				       "buffer creation failed\n", hotcpu);

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000216502.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 total: 0 errors, 25 warnings, 7 checks, 1764 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

./tmp.JOzjvdpBcb//home/fedora/lkml-analysis/lkml/1/patch.offset.0000216502.commit.e10aeb39c1d3567f1906ca36162c977c1b7c0672 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
