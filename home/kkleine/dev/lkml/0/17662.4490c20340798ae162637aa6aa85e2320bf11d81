CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#60: FILE: drivers/char/hvcs.c:360:
+}
+/* The sysfs interface for the driver and devices */

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hvcs_partner_vtys_show' to 'partner_vtys_show'
#73: FILE: drivers/char/hvcs.c:373:
+}

The function names used in DEVICE_ATTR is unusual.
Typically, the store and show functions are used with <attr>_store and
<attr>_show, where <attr> is a named attribute variable of the device.

Consider the following examples::

  static DEVICE_ATTR(type, 0444, type_show, NULL);
  static DEVICE_ATTR(power, 0644, power_show, power_store);

The function names should preferably follow the above pattern.

See: https://www.kernel.org/doc/html/latest/driver-api/driver-model/device.html#attributes

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#74: FILE: drivers/char/hvcs.c:374:
+static DEVICE_ATTR(partner_vtys, S_IRUGO, hvcs_partner_vtys_show, NULL);

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hvcs_partner_clcs_show' to 'partner_clcs_show'
#87: FILE: drivers/char/hvcs.c:387:
+}

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#88: FILE: drivers/char/hvcs.c:388:
+static DEVICE_ATTR(partner_clcs, S_IRUGO, hvcs_partner_clcs_show, NULL);

WARNING:LONG_LINE: line length of 106 exceeds 100 columns
#90: FILE: drivers/char/hvcs.c:390:
+static ssize_t hvcs_current_vty_store(struct device *dev, struct device_attribute *attr, const char * buf,

The line has exceeded the specified maximum length.
To use a different maximum line length, the --max-line-length=n option
may be added while invoking checkpatch.

Earlier, the default line length was 80 columns.  Commit bdc48fa11e46
("checkpatch/coding-style: deprecate 80-column warning") increased the
limit to 100 columns.  This is not a hard limit either and it's
preferable to stay within 80 columns whenever possible.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#breaking-long-lines-and-strings

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#90: FILE: drivers/char/hvcs.c:390:
+static ssize_t hvcs_current_vty_store(struct device *dev, struct device_attribute *attr, const char * buf,

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#91: FILE: drivers/char/hvcs.c:391:
+static ssize_t hvcs_current_vty_store(struct device *dev, struct device_attribute *attr, const char * buf,
+		size_t count)

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#97: FILE: drivers/char/hvcs.c:397:
+	printk(KERN_INFO "HVCS: Denied current_vty change: -EPERM.\n");

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hvcs_current_vty_show' to 'current_vty_show' 'hvcs_current_vty_store' to 'current_vty_store'
#112: FILE: drivers/char/hvcs.c:412:
+}

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO | S_IWUSR' are not preferred. Consider using octal permissions '0644'.
#115: FILE: drivers/char/hvcs.c:415:
+	S_IRUGO | S_IWUSR, hvcs_current_vty_show, hvcs_current_vty_store);

WARNING:LONG_LINE: line length of 105 exceeds 100 columns
#117: FILE: drivers/char/hvcs.c:417:
+static ssize_t hvcs_vterm_state_store(struct device *dev, struct device_attribute *attr, const char *buf,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#118: FILE: drivers/char/hvcs.c:418:
+static ssize_t hvcs_vterm_state_store(struct device *dev, struct device_attribute *attr, const char *buf,
+		size_t count)

WARNING:CONSIDER_KSTRTO: simple_strtol is obsolete, use kstrtol instead
#125: FILE: drivers/char/hvcs.c:425:
+	if (simple_strtol(buf, NULL, 0) != 0)

The simple_strtol(), simple_strtoll(), simple_strtoul(), and
simple_strtoull() functions explicitly ignore overflows, which
may lead to unexpected results in callers.  The respective kstrtol(),
kstrtoll(), kstrtoul(), and kstrtoull() functions tend to be the
correct replacements.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#simple-strtol-simple-strtoll-simple-strtoul-simple-strtoull

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#132: FILE: drivers/char/hvcs.c:432:
+		printk(KERN_INFO "HVCS: vterm state unchanged.  "

WARNING:SPLIT_STRING: quoted string split across lines
#133: FILE: drivers/char/hvcs.c:433:
+		printk(KERN_INFO "HVCS: vterm state unchanged.  "
+				"The hvcs device node is still in use.\n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#139: FILE: drivers/char/hvcs.c:439:
+		printk(KERN_INFO "HVCS: vterm state unchanged. The"

WARNING:SPLIT_STRING: quoted string split across lines
#140: FILE: drivers/char/hvcs.c:440:
+		printk(KERN_INFO "HVCS: vterm state unchanged. The"
+				" vty-server is not connected to a vty.\n");

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#145: FILE: drivers/char/hvcs.c:445:
+	printk(KERN_INFO "HVCS: Closed vty-server@%X and"

WARNING:SPLIT_STRING: quoted string split across lines
#146: FILE: drivers/char/hvcs.c:446:
+	printk(KERN_INFO "HVCS: Closed vty-server@%X and"
+			" partner vty@%X:%d connection.\n",

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hvcs_vterm_state_show' to 'vterm_state_show' 'hvcs_vterm_state_store' to 'vterm_state_store'
#166: FILE: drivers/char/hvcs.c:466:
+}

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO | S_IWUSR' are not preferred. Consider using octal permissions '0644'.
#167: FILE: drivers/char/hvcs.c:467:
+static DEVICE_ATTR(vterm_state, S_IRUGO | S_IWUSR,

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hvcs_index_show' to 'index_show'
#181: FILE: drivers/char/hvcs.c:481:
+}

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO' are not preferred. Consider using octal permissions '0444'.
#183: FILE: drivers/char/hvcs.c:483:
+static DEVICE_ATTR(index, S_IRUGO, hvcs_index_show, NULL);

WARNING:LINE_SPACING: Missing a blank line after declarations
#201: FILE: drivers/char/hvcs.c:501:
+	struct vio_dev *vdev = hvcsd->vdev;
+	sysfs_create_group(&vdev->dev.kobj, &hvcs_attr_group);

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#215: FILE: drivers/char/hvcs.c:515:
+static ssize_t hvcs_rescan_store(struct device_driver *ddp, const char * buf,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#216: FILE: drivers/char/hvcs.c:516:
+static ssize_t hvcs_rescan_store(struct device_driver *ddp, const char * buf,
+		size_t count)

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'hvcs_rescan_status != 0'
#218: FILE: drivers/char/hvcs.c:518:
+	if ((simple_strtol(buf, NULL, 0) != 1)
+		&& (hvcs_rescan_status != 0))

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

WARNING:CONSIDER_KSTRTO: simple_strtol is obsolete, use kstrtol instead
#218: FILE: drivers/char/hvcs.c:518:
+	if ((simple_strtol(buf, NULL, 0) != 1)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#219: FILE: drivers/char/hvcs.c:519:
+	if ((simple_strtol(buf, NULL, 0) != 1)
+		&& (hvcs_rescan_status != 0))

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#223: FILE: drivers/char/hvcs.c:523:
+	printk(KERN_INFO "HVCS: rescanning partner info for all"

WARNING:SPLIT_STRING: quoted string split across lines
#224: FILE: drivers/char/hvcs.c:524:
+	printk(KERN_INFO "HVCS: rescanning partner info for all"
+		" vty-servers.\n");

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IRUGO | S_IWUSR' are not preferred. Consider using octal permissions '0644'.
#231: FILE: drivers/char/hvcs.c:531:
+	S_IRUGO | S_IWUSR, hvcs_rescan_show, hvcs_rescan_store);

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.17662.commit.4490c20340798ae162637aa6aa85e2320bf11d81 total: 2 errors, 25 warnings, 6 checks, 365 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.17662.commit.4490c20340798ae162637aa6aa85e2320bf11d81 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
