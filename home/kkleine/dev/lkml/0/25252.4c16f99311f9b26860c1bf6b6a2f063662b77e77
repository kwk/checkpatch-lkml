WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#22: 
This defines the KVM_RUN ioctl(), which enters guest mode, and a mechnism for

WARNING:TYPO_SPELLING: 'mechnism' may be misspelled - perhaps 'mechanism'?
#22: 
This defines the KVM_RUN ioctl(), which enters guest mode, and a mechnism for
                                                                 ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

ERROR:SPACING: space prohibited after that open parenthesis '('
#86: FILE: drivers/kvm/kvm_main.c:1548:
+	if ( (vectoring_info & VECTORING_INFO_VALID_MASK) &&

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#87: FILE: drivers/kvm/kvm_main.c:1549:
+	if ( (vectoring_info & VECTORING_INFO_VALID_MASK) &&
+				exit_reason != EXIT_REASON_EXCEPTION_NMI )

ERROR:SPACING: space prohibited before that close parenthesis ')'
#87: FILE: drivers/kvm/kvm_main.c:1549:
+				exit_reason != EXIT_REASON_EXCEPTION_NMI )

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#88: FILE: drivers/kvm/kvm_main.c:1550:
+		printk("%s: unexpected, valid vectoring info and exit"

WARNING:SPLIT_STRING: quoted string split across lines
#89: FILE: drivers/kvm/kvm_main.c:1551:
+		printk("%s: unexpected, valid vectoring info and exit"
+		       " reason is 0x%x\n", __FUNCTION__, exit_reason);

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#89: FILE: drivers/kvm/kvm_main.c:1551:
+		       " reason is 0x%x\n", __FUNCTION__, exit_reason);

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#92: FILE: drivers/kvm/kvm_main.c:1554:
+	if (exit_reason < kvm_vmx_max_exit_handlers
+	    && kvm_vmx_exit_handlers[exit_reason])

WARNING:UNNECESSARY_ELSE: else is not generally useful after a break or return
#94: FILE: drivers/kvm/kvm_main.c:1556:
+		return kvm_vmx_exit_handlers[exit_reason](vcpu, kvm_run);
+	else {

CHECK:BRACES: Unbalanced braces around else statement
#94: FILE: drivers/kvm/kvm_main.c:1556:
+	else {

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#194: FILE: drivers/kvm/kvm_main.c:1736:
+	asm (

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#196: FILE: drivers/kvm/kvm_main.c:1738:
+		"pushf \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#202: FILE: drivers/kvm/kvm_main.c:1744:
+		"push %%rcx \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#203: FILE: drivers/kvm/kvm_main.c:1745:
+		"vmwrite %%rsp, %2 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#205: FILE: drivers/kvm/kvm_main.c:1747:
+		"pusha; push %%ecx \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#206: FILE: drivers/kvm/kvm_main.c:1748:
+		"vmwrite %%esp, %2 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#209: FILE: drivers/kvm/kvm_main.c:1751:
+		"cmp $0, %1 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#212: FILE: drivers/kvm/kvm_main.c:1754:
+		"mov %c[cr2](%3), %%rax \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#213: FILE: drivers/kvm/kvm_main.c:1755:
+		"mov %%rax, %%cr2 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#214: FILE: drivers/kvm/kvm_main.c:1756:
+		"mov %c[rax](%3), %%rax \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#215: FILE: drivers/kvm/kvm_main.c:1757:
+		"mov %c[rbx](%3), %%rbx \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#216: FILE: drivers/kvm/kvm_main.c:1758:
+		"mov %c[rdx](%3), %%rdx \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#217: FILE: drivers/kvm/kvm_main.c:1759:
+		"mov %c[rsi](%3), %%rsi \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#218: FILE: drivers/kvm/kvm_main.c:1760:
+		"mov %c[rdi](%3), %%rdi \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#219: FILE: drivers/kvm/kvm_main.c:1761:
+		"mov %c[rbp](%3), %%rbp \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#220: FILE: drivers/kvm/kvm_main.c:1762:
+		"mov %c[r8](%3),  %%r8  \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#221: FILE: drivers/kvm/kvm_main.c:1763:
+		"mov %c[r9](%3),  %%r9  \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#222: FILE: drivers/kvm/kvm_main.c:1764:
+		"mov %c[r10](%3), %%r10 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#223: FILE: drivers/kvm/kvm_main.c:1765:
+		"mov %c[r11](%3), %%r11 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#224: FILE: drivers/kvm/kvm_main.c:1766:
+		"mov %c[r12](%3), %%r12 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#225: FILE: drivers/kvm/kvm_main.c:1767:
+		"mov %c[r13](%3), %%r13 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#226: FILE: drivers/kvm/kvm_main.c:1768:
+		"mov %c[r14](%3), %%r14 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#227: FILE: drivers/kvm/kvm_main.c:1769:
+		"mov %c[r15](%3), %%r15 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#228: FILE: drivers/kvm/kvm_main.c:1770:
+		"mov %c[rcx](%3), %%rcx \n\t" /* kills %3 (rcx) */

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#230: FILE: drivers/kvm/kvm_main.c:1772:
+		"mov %c[cr2](%3), %%eax \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#231: FILE: drivers/kvm/kvm_main.c:1773:
+		"mov %%eax,   %%cr2 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#232: FILE: drivers/kvm/kvm_main.c:1774:
+		"mov %c[rax](%3), %%eax \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#233: FILE: drivers/kvm/kvm_main.c:1775:
+		"mov %c[rbx](%3), %%ebx \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#234: FILE: drivers/kvm/kvm_main.c:1776:
+		"mov %c[rdx](%3), %%edx \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#235: FILE: drivers/kvm/kvm_main.c:1777:
+		"mov %c[rsi](%3), %%esi \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#236: FILE: drivers/kvm/kvm_main.c:1778:
+		"mov %c[rdi](%3), %%edi \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#237: FILE: drivers/kvm/kvm_main.c:1779:
+		"mov %c[rbp](%3), %%ebp \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#238: FILE: drivers/kvm/kvm_main.c:1780:
+		"mov %c[rcx](%3), %%ecx \n\t" /* kills %3 (ecx) */

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#241: FILE: drivers/kvm/kvm_main.c:1783:
+		"jne launched \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#242: FILE: drivers/kvm/kvm_main.c:1784:
+		"vmlaunch \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#243: FILE: drivers/kvm/kvm_main.c:1785:
+		"jmp kvm_vmx_return \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#244: FILE: drivers/kvm/kvm_main.c:1786:
+		"launched: vmresume \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#245: FILE: drivers/kvm/kvm_main.c:1787:
+		".globl kvm_vmx_return \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#249: FILE: drivers/kvm/kvm_main.c:1791:
+		"xchg %3,     0(%%rsp) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#250: FILE: drivers/kvm/kvm_main.c:1792:
+		"mov %%rax, %c[rax](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#251: FILE: drivers/kvm/kvm_main.c:1793:
+		"mov %%rbx, %c[rbx](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#252: FILE: drivers/kvm/kvm_main.c:1794:
+		"pushq 0(%%rsp); popq %c[rcx](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#253: FILE: drivers/kvm/kvm_main.c:1795:
+		"mov %%rdx, %c[rdx](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#254: FILE: drivers/kvm/kvm_main.c:1796:
+		"mov %%rsi, %c[rsi](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#255: FILE: drivers/kvm/kvm_main.c:1797:
+		"mov %%rdi, %c[rdi](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#256: FILE: drivers/kvm/kvm_main.c:1798:
+		"mov %%rbp, %c[rbp](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#257: FILE: drivers/kvm/kvm_main.c:1799:
+		"mov %%r8,  %c[r8](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#258: FILE: drivers/kvm/kvm_main.c:1800:
+		"mov %%r9,  %c[r9](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#259: FILE: drivers/kvm/kvm_main.c:1801:
+		"mov %%r10, %c[r10](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#260: FILE: drivers/kvm/kvm_main.c:1802:
+		"mov %%r11, %c[r11](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#261: FILE: drivers/kvm/kvm_main.c:1803:
+		"mov %%r12, %c[r12](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#262: FILE: drivers/kvm/kvm_main.c:1804:
+		"mov %%r13, %c[r13](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#263: FILE: drivers/kvm/kvm_main.c:1805:
+		"mov %%r14, %c[r14](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#264: FILE: drivers/kvm/kvm_main.c:1806:
+		"mov %%r15, %c[r15](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#265: FILE: drivers/kvm/kvm_main.c:1807:
+		"mov %%cr2, %%rax   \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#266: FILE: drivers/kvm/kvm_main.c:1808:
+		"mov %%rax, %c[cr2](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#267: FILE: drivers/kvm/kvm_main.c:1809:
+		"mov 0(%%rsp), %3 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#272: FILE: drivers/kvm/kvm_main.c:1814:
+		"pop  %%rdx; pop  %%rbx; pop  %%rax \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#274: FILE: drivers/kvm/kvm_main.c:1816:
+		"xchg %3, 0(%%esp) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#275: FILE: drivers/kvm/kvm_main.c:1817:
+		"mov %%eax, %c[rax](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#276: FILE: drivers/kvm/kvm_main.c:1818:
+		"mov %%ebx, %c[rbx](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#277: FILE: drivers/kvm/kvm_main.c:1819:
+		"pushl 0(%%esp); popl %c[rcx](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#278: FILE: drivers/kvm/kvm_main.c:1820:
+		"mov %%edx, %c[rdx](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#279: FILE: drivers/kvm/kvm_main.c:1821:
+		"mov %%esi, %c[rsi](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#280: FILE: drivers/kvm/kvm_main.c:1822:
+		"mov %%edi, %c[rdi](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#281: FILE: drivers/kvm/kvm_main.c:1823:
+		"mov %%ebp, %c[rbp](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#282: FILE: drivers/kvm/kvm_main.c:1824:
+		"mov %%cr2, %%eax  \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#283: FILE: drivers/kvm/kvm_main.c:1825:
+		"mov %%eax, %c[cr2](%3) \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#284: FILE: drivers/kvm/kvm_main.c:1826:
+		"mov 0(%%esp), %3 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#286: FILE: drivers/kvm/kvm_main.c:1828:
+		"pop %%ecx; popa \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#288: FILE: drivers/kvm/kvm_main.c:1830:
+		"setbe %0 \n\t"

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#289: FILE: drivers/kvm/kvm_main.c:1831:
+		"popf \n\t"

ERROR:SPACING: space prohibited before that close square bracket ']'
#301: FILE: drivers/kvm/kvm_main.c:1843:
+		[r8 ]"i"(offsetof(struct kvm_vcpu, regs[VCPU_REGS_R8 ])),

ERROR:SPACING: space prohibited before that close square bracket ']'
#302: FILE: drivers/kvm/kvm_main.c:1844:
+		[r9 ]"i"(offsetof(struct kvm_vcpu, regs[VCPU_REGS_R9 ])),

ERROR:SPACING: space prohibited before that close parenthesis ')'
#311: FILE: drivers/kvm/kvm_main.c:1853:
+	      : "cc", "memory" );

ERROR:SPACING: space prohibited after that open parenthesis '('
#322: FILE: drivers/kvm/kvm_main.c:1864:
+	asm ( "mov %0, %%ds; mov %0, %%es" : : "r"(__USER_DS) );

ERROR:SPACING: space prohibited before that close parenthesis ')'
#322: FILE: drivers/kvm/kvm_main.c:1864:
+	asm ( "mov %0, %%ds; mov %0, %%es" : : "r"(__USER_DS) );

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#419: FILE: drivers/kvm/kvm_main.c:2202:
+			dr7 |= 2 << (i*2);    /* global enable */
 			              ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#420: FILE: drivers/kvm/kvm_main.c:2203:
+			dr7 |= 0 << (i*4+16); /* execution breakpoint */
 			              ^

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#420: FILE: drivers/kvm/kvm_main.c:2203:
+			dr7 |= 0 << (i*4+16); /* execution breakpoint */
 			                ^

WARNING:SIZEOF_PARENTHESIS: sizeof kvm_run should be sizeof(kvm_run)
#458: FILE: drivers/kvm/kvm_main.c:2247:
+		if (copy_from_user(&kvm_run, (void *)arg, sizeof kvm_run))

WARNING:SIZEOF_PARENTHESIS: sizeof kvm_run should be sizeof(kvm_run)
#464: FILE: drivers/kvm/kvm_main.c:2253:
+		if (copy_to_user((void *)arg, &kvm_run, sizeof kvm_run))

WARNING:SIZEOF_PARENTHESIS: sizeof irq should be sizeof(irq)
#480: FILE: drivers/kvm/kvm_main.c:2331:
+		if (copy_from_user(&irq, (void *)arg, sizeof irq))

WARNING:SIZEOF_PARENTHESIS: sizeof dbg should be sizeof(dbg)
#492: FILE: drivers/kvm/kvm_main.c:2343:
+		if (copy_from_user(&dbg, (void *)arg, sizeof dbg))

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.25252.commit.4c16f99311f9b26860c1bf6b6a2f063662b77e77 total: 7 errors, 81 warnings, 7 checks, 461 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.25252.commit.4c16f99311f9b26860c1bf6b6a2f063662b77e77 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
