ERROR:DIFF_IN_COMMIT_MSG: Avoid using diff content in the commit message - patch(1) might not work
#45: 
--- a/MAINTAINERS

Avoid having diff content in commit message.
This causes problems when one tries to apply a file containing both
the changelog and the diff because patch(1) tries to apply the diff
which it found in the changelog.

See: https://lore.kernel.org/lkml/20150611134006.9df79a893e3636019ad2759e@linux-foundation.org/

WARNING:MAINTAINERS_STYLE: Misordered MAINTAINERS entry - list 'M:' before 'P:'
#53: FILE: MAINTAINERS:1812:
+P:	Mathieu Desnoyers
+M:	mathieu.desnoyers@polymtl.ca

WARNING:MAINTAINERS_STYLE: Misordered MAINTAINERS entry - list 'S:' before 'W:'
#56: FILE: MAINTAINERS:1815:
+W:	http://ltt.polymtl.ca
+S:	Maintained

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#64: FILE: ltt/ltt-core.c:1:
+

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#82: FILE: ltt/ltt-core.c:19:
+EXPORT_SYMBOL(ltt_traces);

EXPORT_SYMBOL should immediately follow the symbol to be exported.

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#84: FILE: ltt/ltt-core.c:21:
+volatile unsigned int ltt_nesting[NR_CPUS] = { [ 0 ... NR_CPUS-1 ] = 0 } ;
                                                               ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SPACING: space prohibited before semicolon
#84: FILE: ltt/ltt-core.c:21:
+volatile unsigned int ltt_nesting[NR_CPUS] = { [ 0 ... NR_CPUS-1 ] = 0 } ;

ERROR:SPACING: space prohibited after that open square bracket '['
#84: FILE: ltt/ltt-core.c:21:
+volatile unsigned int ltt_nesting[NR_CPUS] = { [ 0 ... NR_CPUS-1 ] = 0 } ;

ERROR:SPACING: space prohibited before that close square bracket ']'
#84: FILE: ltt/ltt-core.c:21:
+volatile unsigned int ltt_nesting[NR_CPUS] = { [ 0 ... NR_CPUS-1 ] = 0 } ;

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#84: FILE: ltt/ltt-core.c:21:
+volatile unsigned int ltt_nesting[NR_CPUS] = { [ 0 ... NR_CPUS-1 ] = 0 } ;

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#86: FILE: ltt/ltt-core.c:23:
+EXPORT_SYMBOL(ltt_nesting);

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#94: FILE: ltt/ltt-heartbeat.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#98: FILE: ltt/ltt-heartbeat.c:5:
+ * ^I^IMathieu Desnoyers (mathieu.desnoyers@polymtl.ca)$

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#122: FILE: ltt/ltt-heartbeat.c:29:
+#define LTT_PERCPU_TIMER_FREQ  (HZ/10)
                                   ^

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#125: FILE: ltt/ltt-heartbeat.c:32:
+static unsigned int precalc_heartbeat_expire = 0;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

WARNING:NR_CPUS: usage of NR_CPUS is often wrong - consider using cpu_possible(), num_possible_cpus(), for_each_possible_cpu(), etc
#132: FILE: ltt/ltt-heartbeat.c:39:
+} ____cacheline_aligned synthetic_tsc[NR_CPUS];

WARNING:LINE_SPACING: Missing a blank line after declarations
#138: FILE: ltt/ltt-heartbeat.c:45:
+	int cpu;
+	for_each_possible_cpu(cpu) {

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#139: FILE: ltt/ltt-heartbeat.c:46:
+^I^Isynthetic_tsc[cpu].tsc[0][0] = 0;^I$

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#140: FILE: ltt/ltt-heartbeat.c:47:
+^I^Isynthetic_tsc[cpu].tsc[0][1] = 0;^I$

WARNING:MEMORY_BARRIER: memory barrier without comment
#145: FILE: ltt/ltt-heartbeat.c:52:
+	smp_wmb();

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#163: FILE: ltt/ltt-heartbeat.c:70:
+		 * so the index read/write does not need to be atomic. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#166: FILE: ltt/ltt-heartbeat.c:73:
+			cpu_synth->tsc[cpu_synth->index][0]+1; /* MSB update */
 			                                   ^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#170: FILE: ltt/ltt-heartbeat.c:77:
+		 * synthetic TSC as it's an atomic write. */

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#191: FILE: ltt/ltt-heartbeat.c:98:
+		ret = ((u64)(cpu_synth->tsc[index][0]+1) << 32) | ((u64)tsc);
 		                                     ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#202: FILE: ltt/ltt-heartbeat.c:109:
+
+

WARNING:TYPO_SPELLING: 'hearbeat' may be misspelled - perhaps 'heartbeat'?
#229: FILE: ltt/ltt-heartbeat.c:136:
+ * heartbeat_timer : - Timer function generating hearbeat.
                                                  ^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

ERROR:TRAILING_WHITESPACE: trailing whitespace
#238: FILE: ltt/ltt-heartbeat.c:145:
+^I$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#242: FILE: ltt/ltt-heartbeat.c:149:
+
+

WARNING:TYPO_SPELLING: 'hearbeat' may be misspelled - perhaps 'heartbeat'?
#244: FILE: ltt/ltt-heartbeat.c:151:
+ * init_heartbeat_timer: - Start timer generating hearbeat events.
                                                   ^^^^^^^^

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#249: FILE: ltt/ltt-heartbeat.c:156:
+		printk(KERN_DEBUG "LTT : ltt-heartbeat start\n");

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#250: FILE: ltt/ltt-heartbeat.c:157:
+		precalc_heartbeat_expire = ( 0xffffffffUL/(loops_per_jiffy << 1)
 		                                         ^

ERROR:SPACING: space prohibited after that open parenthesis '('
#250: FILE: ltt/ltt-heartbeat.c:157:
+		precalc_heartbeat_expire = ( 0xffffffffUL/(loops_per_jiffy << 1)

CHECK:BRACES: Unbalanced braces around else statement
#259: FILE: ltt/ltt-heartbeat.c:166:
+	} else

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#260: FILE: ltt/ltt-heartbeat.c:167:
+		printk(KERN_WARNING

WARNING:SPLIT_STRING: quoted string split across lines
#262: FILE: ltt/ltt-heartbeat.c:169:
+			"LTT: No TSC for heartbeat timer "
+			"- continuing without one \n");

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

WARNING:QUOTED_WHITESPACE_BEFORE_NEWLINE: unnecessary whitespace before a quoted newline
#262: FILE: ltt/ltt-heartbeat.c:169:
+			"- continuing without one \n");

WARNING:TYPO_SPELLING: 'hearbeat' may be misspelled - perhaps 'heartbeat'?
#266: FILE: ltt/ltt-heartbeat.c:173:
+ * delete_heartbeat_timer: - Stop timer generating hearbeat events.
                                                    ^^^^^^^^

ERROR:CODE_INDENT: code indent should use tabs where possible
#270: FILE: ltt/ltt-heartbeat.c:177:
+ ^Iif (loops_per_jiffy > 0) {$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#270: FILE: ltt/ltt-heartbeat.c:177:
+ ^Iif (loops_per_jiffy > 0) {$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#270: FILE: ltt/ltt-heartbeat.c:177:
+ ^Iif (loops_per_jiffy > 0) {$

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#271: FILE: ltt/ltt-heartbeat.c:178:
+		printk(KERN_DEBUG "LTT : ltt-heartbeat stop\n");

CHECK:LINE_SPACING: Please don't use multiple blank lines
#276: FILE: ltt/ltt-heartbeat.c:183:
+
+

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_dbg([subsystem]dev, ... then dev_dbg(dev, ... then pr_debug(...  to printk(KERN_DEBUG ...
#279: FILE: ltt/ltt-heartbeat.c:186:
+	printk(KERN_DEBUG "LTT : ltt-heartbeat trigger\n");

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#280: FILE: ltt/ltt-heartbeat.c:187:
+	switch (msg) {
+		case LTT_HEARTBEAT_START:
[...]
+		case LTT_HEARTBEAT_STOP:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:EXPORT_SYMBOL: EXPORT_SYMBOL(foo); should immediately follow its function/variable
#291: FILE: ltt/ltt-heartbeat.c:198:
+EXPORT_SYMBOL_GPL(ltt_heartbeat_trigger);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#295: FILE: ltt/ltt-heartbeat.c:202:
+	printk(KERN_INFO "LTT : ltt-heartbeat init\n");

WARNING:USE_DEVICE_INITCALL: please use device_initcall() or more appropriate function instead of __initcall() (see include/linux/init.h)
#302: FILE: ltt/ltt-heartbeat.c:209:
+__initcall(ltt_heartbeat_init);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#304: FILE: ltt/ltt-heartbeat.c:211:
+
+

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.15327.commit.a59bc1636827112c0191a39024eff983e4d42afc total: 10 errors, 28 warnings, 10 checks, 251 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.15327.commit.a59bc1636827112c0191a39024eff983e4d42afc has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
