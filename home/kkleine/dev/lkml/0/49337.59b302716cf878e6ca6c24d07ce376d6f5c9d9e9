WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#30: 
  This determines the frequency of hardware queries and input device updates.

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#61: FILE: drivers/hwmon/hdaps.c:524:
+static ssize_t hdaps_sampling_rate_show(

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#67: FILE: drivers/hwmon/hdaps.c:530:
+static ssize_t hdaps_sampling_rate_store(

WARNING:LINE_SPACING: Missing a blank line after declarations
#72: FILE: drivers/hwmon/hdaps.c:535:
+	int rate, ret;
+	if (sscanf(buf, "%d", &rate) != 1 || rate>HZ || rate<0) {

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: spaces required around that '>' (ctx:VxV)
#72: FILE: drivers/hwmon/hdaps.c:535:
+	if (sscanf(buf, "%d", &rate) != 1 || rate>HZ || rate<0) {
 	                                         ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#72: FILE: drivers/hwmon/hdaps.c:535:
+	if (sscanf(buf, "%d", &rate) != 1 || rate>HZ || rate<0) {
 	                                                    ^

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#72: FILE: drivers/hwmon/hdaps.c:535:
+	if (sscanf(buf, "%d", &rate) != 1 || rate>HZ || rate<0) {
+		printk(KERN_WARNING
+		       "must have 0<input_sampling_rate<=HZ=%d\n", HZ);
+		return -EINVAL;
+	}

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#73: FILE: drivers/hwmon/hdaps.c:536:
+		printk(KERN_WARNING

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#77: FILE: drivers/hwmon/hdaps.c:540:
+	ret = hdaps_set_ec_config(rate*oversampling_ratio,
 	                              ^

ERROR:CODE_INDENT: code indent should use tabs where possible
#78: FILE: drivers/hwmon/hdaps.c:541:
+^I                          running_avg_filter_order);$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#85: FILE: drivers/hwmon/hdaps.c:548:
+static ssize_t hdaps_oversampling_ratio_show(

WARNING:LINE_SPACING: Missing a blank line after declarations
#90: FILE: drivers/hwmon/hdaps.c:553:
+	int ret = hdaps_get_ec_config(&ec_rate, &order);
+	if (ret)

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#95: FILE: drivers/hwmon/hdaps.c:558:
+static ssize_t hdaps_oversampling_ratio_store(

WARNING:LINE_SPACING: Missing a blank line after declarations
#100: FILE: drivers/hwmon/hdaps.c:563:
+	int ratio, ret;
+	if (sscanf(buf, "%d", &ratio) != 1 || ratio<1)

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#100: FILE: drivers/hwmon/hdaps.c:563:
+	if (sscanf(buf, "%d", &ratio) != 1 || ratio<1)
 	                                           ^

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#100: FILE: drivers/hwmon/hdaps.c:563:
+	if (sscanf(buf, "%d", &ratio) != 1 || ratio<1)
+		return -EINVAL;

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#102: FILE: drivers/hwmon/hdaps.c:565:
+	ret = hdaps_set_ec_config(sampling_rate*ratio,
 	                                       ^

ERROR:CODE_INDENT: code indent should use tabs where possible
#103: FILE: drivers/hwmon/hdaps.c:566:
+^I                          running_avg_filter_order);$

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#110: FILE: drivers/hwmon/hdaps.c:573:
+static ssize_t hdaps_running_avg_filter_order_show(

WARNING:LINE_SPACING: Missing a blank line after declarations
#115: FILE: drivers/hwmon/hdaps.c:578:
+	int ret = hdaps_get_ec_config(&rate, &order);
+	if (ret)

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#120: FILE: drivers/hwmon/hdaps.c:583:
+static ssize_t hdaps_running_avg_filter_order_store(

WARNING:LINE_SPACING: Missing a blank line after declarations
#125: FILE: drivers/hwmon/hdaps.c:588:
+	int order, ret;
+	if (sscanf(buf, "%d", &order) != 1)

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#125: FILE: drivers/hwmon/hdaps.c:588:
+	if (sscanf(buf, "%d", &order) != 1)
+		return -EINVAL;

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#127: FILE: drivers/hwmon/hdaps.c:590:
+	ret = hdaps_set_ec_config(sampling_rate*oversampling_ratio, order);
 	                                       ^

WARNING:LINE_SPACING: Missing a blank line after declarations
#139: FILE: drivers/hwmon/hdaps.c:602:
+	int on, ret;
+	if (sscanf(buf, "%d", &on) != 1 || on<0 || on>1)

ERROR:SPACING: spaces required around that '<' (ctx:VxV)
#139: FILE: drivers/hwmon/hdaps.c:602:
+	if (sscanf(buf, "%d", &on) != 1 || on<0 || on>1)
 	                                     ^

ERROR:SPACING: spaces required around that '>' (ctx:VxV)
#139: FILE: drivers/hwmon/hdaps.c:602:
+	if (sscanf(buf, "%d", &on) != 1 || on<0 || on>1)
 	                                             ^

WARNING:SSCANF_TO_KSTRTO: Prefer kstrto<type> to single variable sscanf
#139: FILE: drivers/hwmon/hdaps.c:602:
+	if (sscanf(buf, "%d", &on) != 1 || on<0 || on>1)
+		return -EINVAL;

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#148: FILE: drivers/hwmon/hdaps.c:611:
+static ssize_t hdaps_fake_data_mode_show(

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hdaps_position_show' to 'position_show'
#152: FILE: drivers/hwmon/hdaps.c:615:
+}

The function names used in DEVICE_ATTR is unusual.
Typically, the store and show functions are used with <attr>_store and
<attr>_show, where <attr> is a named attribute variable of the device.

Consider the following examples::

  static DEVICE_ATTR(type, 0444, type_show, NULL);
  static DEVICE_ATTR(power, 0644, power_show, power_store);

The function names should preferably follow the above pattern.

See: https://www.kernel.org/doc/html/latest/driver-api/driver-model/device.html#attributes

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hdaps_sampling_rate_show' to 'sampling_rate_show' 'hdaps_sampling_rate_store' to 'sampling_rate_store'
#161: FILE: drivers/hwmon/hdaps.c:624:
+static DEVICE_ATTR(sampling_rate, 0644,

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hdaps_oversampling_ratio_show' to 'oversampling_ratio_show' 'hdaps_oversampling_ratio_store' to 'oversampling_ratio_store'
#163: FILE: drivers/hwmon/hdaps.c:626:
+static DEVICE_ATTR(oversampling_ratio, 0644,

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hdaps_running_avg_filter_order_show' to 'running_avg_filter_order_show' 'hdaps_running_avg_filter_order_store' to 'running_avg_filter_order_store'
#166: FILE: drivers/hwmon/hdaps.c:629:
+static DEVICE_ATTR(running_avg_filter_order, 0644,

WARNING:DEVICE_ATTR_FUNCTIONS: Consider renaming function(s) 'hdaps_fake_data_mode_show' to 'fake_data_mode_show' 'hdaps_fake_data_mode_store' to 'fake_data_mode_store'
#169: FILE: drivers/hwmon/hdaps.c:632:
+static DEVICE_ATTR(fake_data_mode, 0644,

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.49337.commit.59b302716cf878e6ca6c24d07ce376d6f5c9d9e9 total: 7 errors, 17 warnings, 10 checks, 125 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.49337.commit.59b302716cf878e6ca6c24d07ce376d6f5c9d9e9 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
