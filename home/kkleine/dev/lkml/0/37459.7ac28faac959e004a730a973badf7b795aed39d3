CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*ac)...) over kzalloc(sizeof(struct acpi_ac)...)
#71: FILE: drivers/acpi/ac.c:224:
+	ac = kzalloc(sizeof(struct acpi_ac), GFP_KERNEL);

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*mem_device)...) over kzalloc(sizeof(struct acpi_memory_device)...)
#116: FILE: drivers/acpi/acpi_memhotplug.c:388:
+	mem_device = kzalloc(sizeof(struct acpi_memory_device), GFP_KERNEL);

WARNING:UNNECESSARY_CASTS: unnecessary cast may hide bugs, see http://c-faq.com/malloc/mallocnocast.html
#151: FILE: drivers/acpi/asus_acpi.c:1249:
+	    (struct asus_hotk *)kzalloc(sizeof(struct asus_hotk), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*battery)...) over kzalloc(sizeof(struct acpi_battery)...)
#197: FILE: drivers/acpi/battery.c:691:
+	battery = kzalloc(sizeof(struct acpi_battery), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*event)...) over kzalloc(sizeof(struct acpi_bus_event)...)
#230: FILE: drivers/acpi/bus.c:300:
+	event = kzalloc(sizeof(struct acpi_bus_event), GFP_ATOMIC);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*button)...) over kzalloc(sizeof(struct acpi_button)...)
#243: FILE: drivers/acpi/button.c:299:
+	button = kzalloc(sizeof(struct acpi_button), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*container)...) over kzalloc(sizeof(struct acpi_container)...)
#260: FILE: drivers/acpi/container.c:99:
+	container = kzalloc(sizeof(struct acpi_container), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*fan)...) over kzalloc(sizeof(struct acpi_fan)...)
#348: FILE: drivers/acpi/fan.c:189:
+	fan = kzalloc(sizeof(struct acpi_fan), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*ec_hc)...) over kzalloc(sizeof(struct acpi_ec_hc)...)
#364: FILE: drivers/acpi/i2c_ec.c:312:
+	ec_hc = kzalloc(sizeof(struct acpi_ec_hc), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*smbus)...) over kzalloc(sizeof(struct acpi_ec_smbus)...)
#371: FILE: drivers/acpi/i2c_ec.c:316:
+	smbus = kzalloc(sizeof(struct acpi_ec_smbus), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*data)...) over kzalloc(sizeof(struct acpi_pci_data)...)
#411: FILE: drivers/acpi/pci_bind.c:131:
+	data = kzalloc(sizeof(struct acpi_pci_data), GFP_KERNEL);

WARNING:UNNECESSARY_CASTS: unnecessary cast may hide bugs, see http://c-faq.com/malloc/mallocnocast.html
#430: FILE: drivers/acpi/pci_bind.c:280:
+	pathname = (char *)kzalloc(ACPI_PATHNAME_MAX, GFP_KERNEL);

WARNING:UNNECESSARY_CASTS: unnecessary cast may hide bugs, see http://c-faq.com/malloc/mallocnocast.html
#443: FILE: drivers/acpi/pci_bind.c:329:
+	pathname = (char *)kzalloc(ACPI_PATHNAME_MAX, GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*data)...) over kzalloc(sizeof(struct acpi_pci_data)...)
#456: FILE: drivers/acpi/pci_bind.c:340:
+	data = kzalloc(sizeof(struct acpi_pci_data), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*entry)...) over kzalloc(sizeof(struct acpi_prt_entry)...)
#486: FILE: drivers/acpi/pci_irq.c:88:
+	entry = kzalloc(sizeof(struct acpi_prt_entry), GFP_KERNEL);

WARNING:UNNECESSARY_CASTS: unnecessary cast may hide bugs, see http://c-faq.com/malloc/mallocnocast.html
#505: FILE: drivers/acpi/pci_irq.c:157:
+	pathname = (char *)kzalloc(ACPI_PATHNAME_MAX, GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*link)...) over kzalloc(sizeof(struct acpi_pci_link)...)
#548: FILE: drivers/acpi/pci_link.c:720:
+	link = kzalloc(sizeof(struct acpi_pci_link), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*root)...) over kzalloc(sizeof(struct acpi_pci_root)...)
#564: FILE: drivers/acpi/pci_root.c:167:
+	root = kzalloc(sizeof(struct acpi_pci_root), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*resource)...) over kzalloc(sizeof(struct acpi_power_resource)...)
#580: FILE: drivers/acpi/power.c:538:
+	resource = kzalloc(sizeof(struct acpi_power_resource), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*pr)...) over kzalloc(sizeof(struct acpi_processor)...)
#597: FILE: drivers/acpi/processor_core.c:618:
+	pr = kzalloc(sizeof(struct acpi_processor), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*sbs)...) over kzalloc(sizeof(struct acpi_sbs)...)
#614: FILE: drivers/acpi/sbs.c:1579:
+	sbs = kzalloc(sizeof(struct acpi_sbs), GFP_KERNEL);

WARNING:ALLOC_WITH_MULTIPLY: Prefer kcalloc over kzalloc with multiply
#640: FILE: drivers/acpi/thermal.c:909:
+	active = kzalloc(ACPI_THERMAL_MAX_ACTIVE * sizeof(int), GFP_KERNEL);

Prefer kmalloc_array/kcalloc over kmalloc/kzalloc with a
sizeof multiply.

See: https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*tz)...) over kzalloc(sizeof(struct acpi_thermal)...)
#659: FILE: drivers/acpi/thermal.c:1269:
+	tz = kzalloc(sizeof(struct acpi_thermal), GFP_KERNEL);

ERROR:CORRUPTED_PATCH: patch seems to be corrupt (line wrapped?)
#673: FILE: drivers/acpi/utils.c:265:
GFP_ATOMIC: GFP_KERNEL);

The patch seems to be corrupted or lines are wrapped.
Please regenerate the patch file before sending it to the maintainer.

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.37459.commit.7ac28faac959e004a730a973badf7b795aed39d3 total: 1 errors, 5 warnings, 18 checks, 498 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.37459.commit.7ac28faac959e004a730a973badf7b795aed39d3 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
