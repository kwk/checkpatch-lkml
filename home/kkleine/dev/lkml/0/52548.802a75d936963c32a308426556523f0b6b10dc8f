WARNING:COMMIT_MESSAGE: Missing commit description - Add an appropriate one

The patch is missing a commit description.  A brief
description of the changes made by the patch should be added.

See: https://www.kernel.org/doc/html/latest/process/submitting-patches.html#describe-your-changes

CHECK:CAMELCASE: Avoid CamelCase: <Elf64_Ehdr>
#192: FILE: arch/x86_64/boot/tools/build.c:57:
+static Elf64_Ehdr ehdr;

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <Elf64_Phdr>
#193: FILE: arch/x86_64/boot/tools/build.c:58:
+static Elf64_Phdr phdr[MAX_PHDRS];

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#238: FILE: arch/x86_64/boot/tools/build.c:105:
+		die("Cannot read ELF header: %s\n",
+			strerror(errno));

WARNING:BRACES: braces {} are not necessary for single statement blocks
#240: FILE: arch/x86_64/boot/tools/build.c:107:
+	if (memcmp(ehdr.e_ident, ELFMAG, 4) != 0) {
+		die("No ELF magic\n");
+	}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:BRACES: braces {} are not necessary for single statement blocks
#243: FILE: arch/x86_64/boot/tools/build.c:110:
+	if (ehdr.e_ident[EI_CLASS] != ELFCLASS64) {
+		die("Not a 64 bit executable\n");
+	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#246: FILE: arch/x86_64/boot/tools/build.c:113:
+	if (ehdr.e_ident[EI_DATA] != ELFDATA2LSB) {
+		die("Not a LSB ELF executable\n");
+	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#249: FILE: arch/x86_64/boot/tools/build.c:116:
+	if (ehdr.e_ident[EI_VERSION] != EV_CURRENT) {
+		die("Unknown ELF version\n");
+	}

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ehdr.e_type != ET_EXEC'
#267: FILE: arch/x86_64/boot/tools/build.c:134:
+	if ((ehdr.e_type != ET_EXEC) && (ehdr.e_type != ET_DYN)) {

Parentheses are not required in the following cases:

  1. Function pointer uses::

      (foo->bar)();

    could be::

      foo->bar();

  2. Comparisons in if::

      if ((foo->bar) && (foo->baz))
      if ((foo == bar))

    could be::

      if (foo->bar && foo->baz)
      if (foo == bar)

  3. addressof/dereference single Lvalues::

      &(foo->bar)
      *(foo->bar)

    could be::

      &foo->bar
      *foo->bar

CHECK:UNNECESSARY_PARENTHESES: Unnecessary parentheses around 'ehdr.e_type != ET_DYN'
#267: FILE: arch/x86_64/boot/tools/build.c:134:
+	if ((ehdr.e_type != ET_EXEC) && (ehdr.e_type != ET_DYN)) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#267: FILE: arch/x86_64/boot/tools/build.c:134:
+	if ((ehdr.e_type != ET_EXEC) && (ehdr.e_type != ET_DYN)) {
+		die("Unsupported ELF header type\n");
+	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#270: FILE: arch/x86_64/boot/tools/build.c:137:
+	if (ehdr.e_machine != EM_X86_64) {
+		die("Not for x86_64\n");
+	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#273: FILE: arch/x86_64/boot/tools/build.c:140:
+	if (ehdr.e_version != EV_CURRENT) {
+		die("Unknown ELF version\n");
+	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#276: FILE: arch/x86_64/boot/tools/build.c:143:
+	if (ehdr.e_ehsize != sizeof(Elf64_Ehdr)) {
+		die("Bad Elf header size\n");
+	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#279: FILE: arch/x86_64/boot/tools/build.c:146:
+	if (ehdr.e_phentsize != sizeof(Elf64_Phdr)) {
+		die("Bad program header entry\n");
+	}

CHECK:CAMELCASE: Avoid CamelCase: <Elf64_Shdr>
#282: FILE: arch/x86_64/boot/tools/build.c:149:
+	if (ehdr.e_shentsize != sizeof(Elf64_Shdr)) {

WARNING:BRACES: braces {} are not necessary for single statement blocks
#282: FILE: arch/x86_64/boot/tools/build.c:149:
+	if (ehdr.e_shentsize != sizeof(Elf64_Shdr)) {
+		die("Bad section header entry\n");
+	}

WARNING:BRACES: braces {} are not necessary for single statement blocks
#285: FILE: arch/x86_64/boot/tools/build.c:152:
+	if (ehdr.e_shstrndx >= ehdr.e_shnum) {
+		die("String table index out of bounds\n");
+	}

WARNING:LINE_SPACING: Missing a blank line after declarations
#294: FILE: arch/x86_64/boot/tools/build.c:161:
+	size_t size;
+	if (ehdr.e_phnum > MAX_PHDRS) {

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#296: FILE: arch/x86_64/boot/tools/build.c:163:
+		die("%d program headers supported: %d\n",
+			ehdr.e_phnum, MAX_PHDRS);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#300: FILE: arch/x86_64/boot/tools/build.c:167:
+		die("Seek to %d failed: %s\n",
+			ehdr.e_phoff, strerror(errno));

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#302: FILE: arch/x86_64/boot/tools/build.c:169:
+	size = sizeof(phdr[0])*ehdr.e_phnum;
 	                      ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#305: FILE: arch/x86_64/boot/tools/build.c:172:
+		die("Cannot read ELF section headers: %s\n",
+			strerror(errno));

ERROR:SPACING: space required before the open parenthesis '('
#307: FILE: arch/x86_64/boot/tools/build.c:174:
+	for(i = 0; i < ehdr.e_phnum; i++) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#323: FILE: arch/x86_64/boot/tools/build.c:190:
+	int i;
+	max = 0;

ERROR:SPACING: space required before the open parenthesis '('
#325: FILE: arch/x86_64/boot/tools/build.c:192:
+	for(i = 0; i < ehdr.e_phnum; i++) {

WARNING:LINE_SPACING: Missing a blank line after declarations
#327: FILE: arch/x86_64/boot/tools/build.c:194:
+		uint64_t start, end;
+		if (phdr[i].p_type != PT_LOAD)

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#407: FILE: arch/x86_64/boot/tools/build.c:285:
+	kernel_offset = (setup_sectors + 1)*512;
 	                                   ^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#412: FILE: arch/x86_64/boot/tools/build.c:289:
+	kernel_filesz = sz = sb.st_size;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.52548.commit.802a75d936963c32a308426556523f0b6b10dc8f total: 2 errors, 15 warnings, 12 checks, 410 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.52548.commit.802a75d936963c32a308426556523f0b6b10dc8f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
