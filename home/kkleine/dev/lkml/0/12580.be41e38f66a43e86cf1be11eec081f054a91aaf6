ERROR:EXECUTE_PERMISSIONS: do not set execute permissions for source files
#40: FILE: drivers/net/cxgb3/ael1002.c

There is no reason for source files to be executable.  The executable
bit can be removed safely.

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#40: 
new file mode 100755

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#45: FILE: drivers/net/cxgb3/ael1002.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#95: FILE: drivers/net/cxgb3/ael1002.c:51:
+	if ((err = ael1002_power_down(phy, 0)) ||

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#119: FILE: drivers/net/cxgb3/ael1002.c:75:
+		/*
+		 * BMSR_LSTATUS is latch-low, so if it is 0 we need to read it

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#226: FILE: drivers/net/cxgb3/ael1002.c:182:
+	/*
+	 * Some cards where the PHY is supposed to be at address 0 actually

ERROR:EXECUTE_PERMISSIONS: do not set execute permissions for source files
#277: FILE: drivers/net/cxgb3/mc5.c

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#282: FILE: drivers/net/cxgb3/mc5.c:1:
+/*

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#314: FILE: drivers/net/cxgb3/mc5.c:33:
+#define IDT_LAR_ADR0   ^I0x180006$

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#351: FILE: drivers/net/cxgb3/mc5.c:70:
+/*
+ * Issue a command to the TCAM and wait for its completion.  The address and

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#377: FILE: drivers/net/cxgb3/mc5.c:96:
+static inline void dbgi_rd_rsp3(struct adapter *adapter, u32 * v1, u32 * v2,

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#377: FILE: drivers/net/cxgb3/mc5.c:96:
+static inline void dbgi_rd_rsp3(struct adapter *adapter, u32 * v1, u32 * v2,

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#378: FILE: drivers/net/cxgb3/mc5.c:97:
+				u32 * v3)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#386: FILE: drivers/net/cxgb3/mc5.c:105:
+/*
+ * Write data to the TCAM register at address (0, 0, addr_lo) using the TCAM

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#408: FILE: drivers/net/cxgb3/mc5.c:127:
+	/*
+	 * We need the size of the TCAM data and mask arrays in terms of

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#450: FILE: drivers/net/cxgb3/mc5.c:169:
+	/*
+	 * Use GMRs 14-15 for ELOOKUP, GMRs 12-13 for SYN lookups, and

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#514: FILE: drivers/net/cxgb3/mc5.c:233:
+	/*
+	 * Use GMRs 24-25 for ELOOKUP, GMRs 20-21 for SYN lookups, and no mask

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#581: FILE: drivers/net/cxgb3/mc5.c:300:
+/*
+ * Initialization that requires the OS and protocol layers to already

WARNING:TYPO_SPELLING: 'intialized' may be misspelled - perhaps 'initialized'?
#582: FILE: drivers/net/cxgb3/mc5.c:301:
+ * be intialized goes here.
       ^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#637: FILE: drivers/net/cxgb3/mc5.c:356:
+/*
+ *	read_mc5_range - dump a part of the memory managed by MC5

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#646: FILE: drivers/net/cxgb3/mc5.c:365:
+		      unsigned int n, u32 * buf)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#678: FILE: drivers/net/cxgb3/mc5.c:397:
+/*
+ * MC5 interrupt handler

WARNING:HOTPLUG_SECTION: Using __devinit is unnecessary
#716: FILE: drivers/net/cxgb3/mc5.c:435:
+void __devinit t3_mc5_prep(struct adapter *adapter, struct mc5 *mc5, int mode)

ERROR:SPACING: space prohibited after that '*' (ctx:WxW)
#718: FILE: drivers/net/cxgb3/mc5.c:437:
+#define K * 1024
           ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#718: FILE: drivers/net/cxgb3/mc5.c:437:
+#define K * 1024

ERROR:EXECUTE_PERMISSIONS: do not set execute permissions for source files
#739: FILE: drivers/net/cxgb3/vsc8211.c

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#744: FILE: drivers/net/cxgb3/vsc8211.c:1:
+/*

ERROR:CODE_INDENT: code indent should use tabs where possible
#781: FILE: drivers/net/cxgb3/vsc8211.c:38:
+^I ^I^I   VSC_INTR_NEG_DONE)$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#781: FILE: drivers/net/cxgb3/vsc8211.c:38:
+^I ^I^I   VSC_INTR_NEG_DONE)$

CHECK:BIT_MACRO: Prefer using the BIT macro
#795: FILE: drivers/net/cxgb3/vsc8211.c:52:
+#define F_ACSR_DUPLEX (1 << S_ACSR_DUPLEX)

Defines like: 1 << <digit> could be BIT(digit).
The BIT() macro is defined via include/linux/bits.h::

  #define BIT(nr)         (1UL << (nr))

CHECK:BIT_MACRO: Prefer using the BIT macro
#798: FILE: drivers/net/cxgb3/vsc8211.c:55:
+#define F_ACSR_ACTIPHY (1 << S_ACSR_ACTIPHY)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#801: FILE: drivers/net/cxgb3/vsc8211.c:58:
+/*
+ * Reset the PHY.  This PHY completes reset immediately so we never wait.

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#852: FILE: drivers/net/cxgb3/vsc8211.c:109:
+		/*
+		 * BMSR_LSTATUS is latch-low, so if it is 0 we need to read it

ERROR:EXECUTE_PERMISSIONS: do not set execute permissions for source files
#953: FILE: drivers/net/cxgb3/xgmac.c

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#958: FILE: drivers/net/cxgb3/xgmac.c:1:
+/*

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#973: FILE: drivers/net/cxgb3/xgmac.c:16:
+/*
+ * # of exact address filters.  The first one is used for the station address,

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#999: FILE: drivers/net/cxgb3/xgmac.c:42:
+	udelay(15);

usleep_range() should be preferred over udelay(). The proper way of
using usleep_range() is mentioned in the kernel docs.

See: https://www.kernel.org/doc/html/latest/timers/timers-howto.html#delays-information-on-the-various-kernel-delay-sleep-mechanisms

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#1003: FILE: drivers/net/cxgb3/xgmac.c:46:
+		udelay(15);

CHECK:USLEEP_RANGE: usleep_range is preferred over udelay; see Documentation/timers/timers-howto.rst
#1011: FILE: drivers/net/cxgb3/xgmac.c:54:
+	udelay(20);

CHECK:BRACES: braces {} should be used on all arms of this statement
#1048: FILE: drivers/net/cxgb3/xgmac.c:91:
+		if (adap->params.rev == 0) {
[...]
+		} else
[...]

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:BRACES: Unbalanced braces around else statement
#1060: FILE: drivers/net/cxgb3/xgmac.c:103:
+		} else

WARNING:MSLEEP: msleep < 20ms can sleep for up to 20ms; see Documentation/timers/timers-howto.rst
#1077: FILE: drivers/net/cxgb3/xgmac.c:120:
+		msleep(1);

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1086: FILE: drivers/net/cxgb3/xgmac.c:129:
+/*
+ * Set the exact match register 'idx' to recognize the given Ethernet address.

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1088: FILE: drivers/net/cxgb3/xgmac.c:131:
+static void set_addr_filter(struct cmac *mac, int idx, const u8 * addr)

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1110: FILE: drivers/net/cxgb3/xgmac.c:153:
+/*
+ * Specify the number of exact address filters that should be reserved for

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#1123: FILE: drivers/net/cxgb3/xgmac.c:166:
+static int hash_hw_addr(const u8 * addr)

CHECK:BRACES: braces {} should be used on all arms of this statement
#1147: FILE: drivers/net/cxgb3/xgmac.c:190:
+	if (rm->dev->flags & IFF_ALLMULTI)
[...]
+	else {
[...]

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1148: FILE: drivers/net/cxgb3/xgmac.c:191:
+		hash_lo = hash_hi = 0xffffffff;

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

CHECK:BRACES: Unbalanced braces around else statement
#1149: FILE: drivers/net/cxgb3/xgmac.c:192:
+	else {

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#1153: FILE: drivers/net/cxgb3/xgmac.c:196:
+		hash_lo = hash_hi = 0;

CHECK:BRACES: braces {} should be used on all arms of this statement
#1155: FILE: drivers/net/cxgb3/xgmac.c:198:
+			if (exact_addr_idx < EXACT_ADDR_FILTERS)
[...]
+			else {
[...]

CHECK:BRACES: Unbalanced braces around else statement
#1157: FILE: drivers/net/cxgb3/xgmac.c:200:
+			else {

WARNING:TYPO_SPELLING: 'inludes' may be misspelled - perhaps 'includes'?
#1179: FILE: drivers/net/cxgb3/xgmac.c:222:
+	 * MAX_FRAME_SIZE inludes header + FCS, mtu doesn't.  The HW max
 	                  ^^^^^^^

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1179: FILE: drivers/net/cxgb3/xgmac.c:222:
+	/*
+	 * MAX_FRAME_SIZE inludes header + FCS, mtu doesn't.  The HW max

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1188: FILE: drivers/net/cxgb3/xgmac.c:231:
+	/*
+	 * Adjust the PAUSE frame watermarks.  We always set the LWM, and the

WARNING:NETWORKING_BLOCK_COMMENT_STYLE: networking block comments don't use an empty /* line, use /* Comment...
#1285: FILE: drivers/net/cxgb3/xgmac.c:328:
+/*
+ * This function is called periodically to accumulate the current values of the

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'mac' - possible side-effects?
#1293: FILE: drivers/net/cxgb3/xgmac.c:336:
+#define RMON_READ(mac, addr) t3_read_reg(mac->adapter, addr + mac->offset)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'mac' may be better as '(mac)' to avoid precedence issues
#1293: FILE: drivers/net/cxgb3/xgmac.c:336:
+#define RMON_READ(mac, addr) t3_read_reg(mac->adapter, addr + mac->offset)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'addr' may be better as '(addr)' to avoid precedence issues
#1293: FILE: drivers/net/cxgb3/xgmac.c:336:
+#define RMON_READ(mac, addr) t3_read_reg(mac->adapter, addr + mac->offset)

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#1294: FILE: drivers/net/cxgb3/xgmac.c:337:
+#define RMON_UPDATE(mac, name, reg) \
+	(mac)->stats.name += (u64)RMON_READ(mac, A_XGM_STAT_##reg)

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'mac' - possible side-effects?
#1294: FILE: drivers/net/cxgb3/xgmac.c:337:
+#define RMON_UPDATE(mac, name, reg) \
+	(mac)->stats.name += (u64)RMON_READ(mac, A_XGM_STAT_##reg)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'name' may be better as '(name)' to avoid precedence issues
#1294: FILE: drivers/net/cxgb3/xgmac.c:337:
+#define RMON_UPDATE(mac, name, reg) \
+	(mac)->stats.name += (u64)RMON_READ(mac, A_XGM_STAT_##reg)

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#1296: FILE: drivers/net/cxgb3/xgmac.c:339:
+#define RMON_UPDATE64(mac, name, reg_lo, reg_hi) \
+	(mac)->stats.name += RMON_READ(mac, A_XGM_STAT_##reg_lo) + \
+			     ((u64)RMON_READ(mac, A_XGM_STAT_##reg_hi) << 32)

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'mac' - possible side-effects?
#1296: FILE: drivers/net/cxgb3/xgmac.c:339:
+#define RMON_UPDATE64(mac, name, reg_lo, reg_hi) \
+	(mac)->stats.name += RMON_READ(mac, A_XGM_STAT_##reg_lo) + \
+			     ((u64)RMON_READ(mac, A_XGM_STAT_##reg_hi) << 32)

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'name' may be better as '(name)' to avoid precedence issues
#1296: FILE: drivers/net/cxgb3/xgmac.c:339:
+#define RMON_UPDATE64(mac, name, reg_lo, reg_hi) \
+	(mac)->stats.name += RMON_READ(mac, A_XGM_STAT_##reg_lo) + \
+			     ((u64)RMON_READ(mac, A_XGM_STAT_##reg_hi) << 32)

CHECK:SPACING: No space is necessary after a cast
#1342: FILE: drivers/net/cxgb3/xgmac.c:385:
+	lo = (u32) mac->stats.rx_cong_drops;

CHECK:SPACING: No space is necessary after a cast
#1343: FILE: drivers/net/cxgb3/xgmac.c:386:
+	mac->stats.rx_cong_drops += (u64) (v - lo);

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.12580.commit.be41e38f66a43e86cf1be11eec081f054a91aaf6 total: 16 errors, 29 warnings, 22 checks, 1284 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.12580.commit.be41e38f66a43e86cf1be11eec081f054a91aaf6 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
