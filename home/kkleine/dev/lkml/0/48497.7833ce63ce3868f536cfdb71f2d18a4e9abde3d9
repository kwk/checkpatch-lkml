ERROR:TRAILING_WHITESPACE: trailing whitespace
#52: FILE: drivers/char/watchdog/Kconfig:486:
+^I  $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#73: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#78: FILE: drivers/char/watchdog/rm9k_wdt.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#96: FILE: drivers/char/watchdog/rm9k_wdt.c:19:
+ *  along with this program; if not, write to the Free Software$

Kernel maintainers reject new instances of the GPL boilerplate paragraph
directing people to write to the FSF for a copy of the GPL, since the
FSF has moved in the past and may do so again.
So do not write paragraphs about writing to the Free Software Foundation's
mailing address.

See: https://lore.kernel.org/lkml/20131006222342.GT19510@leaf/

ERROR:FSF_MAILING_ADDRESS: Do not include the paragraph about writing to the Free Software Foundation's mailing address from the sample GPL notice. The FSF has changed addresses in the past, and may do so again. Linux already includes a copy of the GPL.
#97: FILE: drivers/char/watchdog/rm9k_wdt.c:20:
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#99: FILE: drivers/char/watchdog/rm9k_wdt.c:22:
+ $

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#99: FILE: drivers/char/watchdog/rm9k_wdt.c:22:
+ $

WARNING:INCLUDE_LINUX: Use #include <linux/io.h> instead of <asm/io.h>
#108: FILE: drivers/char/watchdog/rm9k_wdt.c:31:
+#include <asm/io.h>

WARNING:INCLUDE_LINUX: Use #include <linux/atomic.h> instead of <asm/atomic.h>
#109: FILE: drivers/char/watchdog/rm9k_wdt.c:32:
+#include <asm/atomic.h>

WARNING:INCLUDE_LINUX: Use #include <linux/processor.h> instead of <asm/processor.h>
#110: FILE: drivers/char/watchdog/rm9k_wdt.c:33:
+#include <asm/processor.h>

WARNING:INCLUDE_LINUX: Use #include <linux/uaccess.h> instead of <asm/uaccess.h>
#111: FILE: drivers/char/watchdog/rm9k_wdt.c:34:
+#include <asm/uaccess.h>

CHECK:LINE_SPACING: Please don't use multiple blank lines
#117: FILE: drivers/char/watchdog/rm9k_wdt.c:40:
+
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#124: FILE: drivers/char/watchdog/rm9k_wdt.c:47:
+
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#132: FILE: drivers/char/watchdog/rm9k_wdt.c:55:
+static ssize_t wdt_gpi_write(struct file *, const char __user *, size_t, $

ERROR:CORRUPTED_PATCH: patch seems to be corrupt (line wrapped?)
#133: FILE: drivers/char/watchdog/rm9k_wdt.c:55:
loff_t *);

The patch seems to be corrupted or lines are wrapped.
Please regenerate the patch file before sending it to the maintainer.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#134: FILE: drivers/char/watchdog/rm9k_wdt.c:56:
+static ssize_t wdt_gpi_write(struct file *, const char __user *, size_t, 
+static long wdt_gpi_ioctl(struct file *, unsigned int, unsigned long);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#135: FILE: drivers/char/watchdog/rm9k_wdt.c:57:
+static const struct resource *wdt_gpi_get_resource(struct platform_device *, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#137: FILE: drivers/char/watchdog/rm9k_wdt.c:58:
+static const struct resource *wdt_gpi_get_resource(struct platform_device *, 
+static int wdt_gpi_notify(struct notifier_block *, unsigned long, void *);

CHECK:LINE_SPACING: Please don't use multiple blank lines
#140: FILE: drivers/char/watchdog/rm9k_wdt.c:61:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#142: FILE: drivers/char/watchdog/rm9k_wdt.c:63:
+
+

ERROR:INITIALISED_STATIC: do not initialise statics to 0
#146: FILE: drivers/char/watchdog/rm9k_wdt.c:67:
+static int locked = 0;

Static variables should not be initialized explicitly to zero.
Your compiler (or rather your loader) automatically does
it for you.

CHECK:LINE_SPACING: Please don't use multiple blank lines
#148: FILE: drivers/char/watchdog/rm9k_wdt.c:69:
+
+

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#151: FILE: drivers/char/watchdog/rm9k_wdt.c:72:
+static void __iomem * wd_regs;

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please don't use multiple blank lines
#154: FILE: drivers/char/watchdog/rm9k_wdt.c:75:
+
+

ERROR:NON_OCTAL_PERMISSIONS: Use 4 digit octal (0777) not decimal permissions
#158: FILE: drivers/char/watchdog/rm9k_wdt.c:79:
+module_param(timeout, int, 444);
Permission bits should use 4 digit octal permissions (like 0700 or 0444).
Avoid using any other base like decimal.

ERROR:NON_OCTAL_PERMISSIONS: Use 4 digit octal (0777) not decimal permissions
#160: FILE: drivers/char/watchdog/rm9k_wdt.c:81:
+module_param(resetaddr, ulong, 444);
ERROR:NON_OCTAL_PERMISSIONS: Use 4 digit octal (0777) not decimal permissions
#162: FILE: drivers/char/watchdog/rm9k_wdt.c:83:
+module_param(flagaddr, ulong, 444);
ERROR:INITIALISED_STATIC: do not initialise statics to 0
#163: FILE: drivers/char/watchdog/rm9k_wdt.c:84:
+static int powercycle = 0;

ERROR:NON_OCTAL_PERMISSIONS: Use 4 digit octal (0777) not decimal permissions
#164: FILE: drivers/char/watchdog/rm9k_wdt.c:85:
+module_param(powercycle, bool, 444);
CHECK:LINE_SPACING: Please don't use multiple blank lines
#174: FILE: drivers/char/watchdog/rm9k_wdt.c:95:
+
+

WARNING:CONST_STRUCT: struct file_operations should normally be const
#176: FILE: drivers/char/watchdog/rm9k_wdt.c:97:
+static struct file_operations fops =

Using const is generally a good idea.  Checkpatch reads
a list of frequently used structs that are always or
almost always constant.

The existing structs list can be viewed from
`scripts/const_structs.checkpatch`.

See: https://lore.kernel.org/lkml/alpine.DEB.2.10.1608281509480.3321@hadrien/

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#177: FILE: drivers/char/watchdog/rm9k_wdt.c:98:
+static struct file_operations fops =
+{

The opening brace should be following the function definitions on the
next line.  For any non-functional block it should be on the same line
as the last construct.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#186: FILE: drivers/char/watchdog/rm9k_wdt.c:107:
+static struct miscdevice miscdev =
+{

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#193: FILE: drivers/char/watchdog/rm9k_wdt.c:114:
+static struct device_driver wdt_gpi_driver =
+{

CHECK:SPACING: No space is necessary after a cast
#194: FILE: drivers/char/watchdog/rm9k_wdt.c:115:
+	.name		= (char *) wdt_gpi_name,

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:OPEN_BRACE: that open brace { should be on the previous line
#205: FILE: drivers/char/watchdog/rm9k_wdt.c:126:
+static struct notifier_block wdt_gpi_shutdown =
+{

CHECK:LINE_SPACING: Please don't use multiple blank lines
#209: FILE: drivers/char/watchdog/rm9k_wdt.c:130:
+
+

WARNING:LINE_SPACING: Missing a blank line after declarations
#216: FILE: drivers/char/watchdog/rm9k_wdt.c:137:
+	char buf[80];
+	if (snprintf(buf, sizeof buf, "%s_0", name) >= sizeof buf)

WARNING:SIZEOF_PARENTHESIS: sizeof buf should be sizeof(buf)
#216: FILE: drivers/char/watchdog/rm9k_wdt.c:137:
+	if (snprintf(buf, sizeof buf, "%s_0", name) >= sizeof buf)

CHECK:LINE_SPACING: Please don't use multiple blank lines
#221: FILE: drivers/char/watchdog/rm9k_wdt.c:142:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#252: FILE: drivers/char/watchdog/rm9k_wdt.c:173:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#265: FILE: drivers/char/watchdog/rm9k_wdt.c:186:
+
+

WARNING:MEMORY_BARRIER: memory barrier without comment
#274: FILE: drivers/char/watchdog/rm9k_wdt.c:195:
+	wmb();

WARNING:MEMORY_BARRIER: memory barrier without comment
#276: FILE: drivers/char/watchdog/rm9k_wdt.c:197:
+	wmb();

WARNING:MEMORY_BARRIER: memory barrier without comment
#278: FILE: drivers/char/watchdog/rm9k_wdt.c:199:
+	wmb();

CHECK:LINE_SPACING: Please don't use multiple blank lines
#284: FILE: drivers/char/watchdog/rm9k_wdt.c:205:
+
+

WARNING:CONSTANT_COMPARISON: Comparisons should place the constant on the right side of the test
#291: FILE: drivers/char/watchdog/rm9k_wdt.c:212:
+	if (unlikely(0 > atomic_dec_if_positive(&opencnt)))

Comparisons with a constant or upper case identifier on the left
side of the test should be avoided.

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#314: FILE: drivers/char/watchdog/rm9k_wdt.c:235:
+	printk(KERN_INFO "%s: watchdog started, timeout = %u seconds\n",

CHECK:LINE_SPACING: Please don't use multiple blank lines
#319: FILE: drivers/char/watchdog/rm9k_wdt.c:240:
+
+

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#324: FILE: drivers/char/watchdog/rm9k_wdt.c:245:
+		printk(KERN_NOTICE "%s: no way out - watchdog left running\n",

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_info([subsystem]dev, ... then dev_info(dev, ... then pr_info(...  to printk(KERN_INFO ...
#340: FILE: drivers/char/watchdog/rm9k_wdt.c:261:
+			printk(KERN_INFO "%s: watchdog stopped\n", wdt_gpi_name);

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_notice([subsystem]dev, ... then dev_notice(dev, ... then pr_notice(...  to printk(KERN_NOTICE ...
#342: FILE: drivers/char/watchdog/rm9k_wdt.c:263:
+			printk(KERN_NOTICE "%s: unexpected close() -"

WARNING:SPLIT_STRING: quoted string split across lines
#343: FILE: drivers/char/watchdog/rm9k_wdt.c:264:
+			printk(KERN_NOTICE "%s: unexpected close() -"
+			       " watchdog left running\n",

Quoted strings that appear as messages in userspace and can be
grepped, should not be split across multiple lines.

See: https://lore.kernel.org/lkml/20120203052727.GA15035@leaf/

CHECK:LINE_SPACING: Please don't use multiple blank lines
#355: FILE: drivers/char/watchdog/rm9k_wdt.c:276:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#367: FILE: drivers/char/watchdog/rm9k_wdt.c:288:
+
+

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#385: FILE: drivers/char/watchdog/rm9k_wdt.c:306:
+	if ((_IOC_DIR(cmd) & _IOC_READ)
+	    && !access_ok(VERIFY_WRITE, arg, size))

ERROR:CODE_INDENT: code indent should use tabs where possible
#386: FILE: drivers/char/watchdog/rm9k_wdt.c:307:
+^I ^Ireturn -EFAULT;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#386: FILE: drivers/char/watchdog/rm9k_wdt.c:307:
+^I ^Ireturn -EFAULT;$

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#389: FILE: drivers/char/watchdog/rm9k_wdt.c:310:
+	if ((_IOC_DIR(cmd) & _IOC_WRITE)
+	    && !access_ok(VERIFY_READ, arg, size))

ERROR:CODE_INDENT: code indent should use tabs where possible
#390: FILE: drivers/char/watchdog/rm9k_wdt.c:311:
+^I ^Ireturn -EFAULT;$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#390: FILE: drivers/char/watchdog/rm9k_wdt.c:311:
+^I ^Ireturn -EFAULT;$

ERROR:SWITCH_CASE_INDENT_LEVEL: switch and case should be at the same indent
#394: FILE: drivers/char/watchdog/rm9k_wdt.c:315:
+	switch (cmd) {
+		case WDIOC_GETSUPPORT:
[...]
+		case WDIOC_GETSTATUS:
[...]
+		case WDIOC_GETBOOTSTATUS:
[...]
+		case WDIOC_SETOPTIONS:
[...]
+		case WDIOC_KEEPALIVE:
[...]
+		case WDIOC_SETTIMEOUT:
[...]
+		case WDIOC_GETTIMEOUT:

switch should be at the same indent as case.
Example::

  switch (suffix) {
  case 'G':
  case 'g':
          mem <<= 30;
          break;
  case 'M':
  case 'm':
          mem <<= 20;
          break;
  case 'K':
  case 'k':
          mem <<= 10;
          fallthrough;
  default:
          break;
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

ERROR:TRAILING_WHITESPACE: trailing whitespace
#405: FILE: drivers/char/watchdog/rm9k_wdt.c:326:
+^I^I$

CHECK:SPACING: No space is necessary after a cast
#407: FILE: drivers/char/watchdog/rm9k_wdt.c:328:
+			stat = (*(volatile char *) flagaddr & 0x01)

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#407: FILE: drivers/char/watchdog/rm9k_wdt.c:328:
+			stat = (*(volatile char *) flagaddr & 0x01)

CHECK:SPACING: No space is necessary after a cast
#424: FILE: drivers/char/watchdog/rm9k_wdt.c:345:
+				if (unlikely(__copy_from_user(&val, (const void __user *) arg,

WARNING:LINE_SPACING: Missing a blank line after declarations
#424: FILE: drivers/char/watchdog/rm9k_wdt.c:345:
+				int val;
+				if (unlikely(__copy_from_user(&val, (const void __user *) arg,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#425: FILE: drivers/char/watchdog/rm9k_wdt.c:346:
+				if (unlikely(__copy_from_user(&val, (const void __user *) arg,
+						     size))) {

WARNING:PRINTK_WITHOUT_KERN_LEVEL: printk() should include KERN_<LEVEL> facility level
#435: FILE: drivers/char/watchdog/rm9k_wdt.c:356:
+				printk("%s: timeout set to %u seconds\n",

CHECK:SPACING: No space is necessary after a cast
#441: FILE: drivers/char/watchdog/rm9k_wdt.c:362:
+			res = __copy_to_user((void __user *) arg, &timeout, size) ?

ERROR:TRAILING_WHITESPACE: trailing whitespace
#445: FILE: drivers/char/watchdog/rm9k_wdt.c:366:
+^I$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#449: FILE: drivers/char/watchdog/rm9k_wdt.c:370:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#451: FILE: drivers/char/watchdog/rm9k_wdt.c:372:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#458: FILE: drivers/char/watchdog/rm9k_wdt.c:379:
+
+

WARNING:PREFER_PR_LEVEL: Prefer [subsystem eg: netdev]_warn([subsystem]dev, ... then dev_warn(dev, ... then pr_warn(...  to printk(KERN_WARNING ...
#459: FILE: drivers/char/watchdog/rm9k_wdt.c:380:
+	printk(KERN_WARNING "%s: watchdog expired - resetting system\n",

CHECK:SPACING: No space is necessary after a cast
#462: FILE: drivers/char/watchdog/rm9k_wdt.c:383:
+	*(volatile char *) flagaddr |= 0x01;

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#462: FILE: drivers/char/watchdog/rm9k_wdt.c:383:
+	*(volatile char *) flagaddr |= 0x01;

CHECK:SPACING: No space is necessary after a cast
#463: FILE: drivers/char/watchdog/rm9k_wdt.c:384:
+	*(volatile char *) resetaddr = powercycle ? 0x01 : 0x2;

WARNING:VOLATILE: Use of volatile is usually wrong: see Documentation/process/volatile-considered-harmful.rst
#463: FILE: drivers/char/watchdog/rm9k_wdt.c:384:
+	*(volatile char *) resetaddr = powercycle ? 0x01 : 0x2;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#469: FILE: drivers/char/watchdog/rm9k_wdt.c:390:
+
+

ERROR:SPACING: space required before the open parenthesis '('
#474: FILE: drivers/char/watchdog/rm9k_wdt.c:395:
+	if(code == SYS_DOWN || code == SYS_HALT) {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#488: FILE: drivers/char/watchdog/rm9k_wdt.c:409:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#498: FILE: drivers/char/watchdog/rm9k_wdt.c:419:
+
+

CHECK:LINE_SPACING: Please don't use multiple blank lines
#508: FILE: drivers/char/watchdog/rm9k_wdt.c:429:
+
+

WARNING:REPEATED_WORD: Possible repeated word: 'to'
#516: FILE: drivers/char/watchdog/rm9k_wdt.c:437:
+MODULE_PARM_DESC(resetaddr, "Address to write to to force a reset");

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.48497.commit.7833ce63ce3868f536cfdb71f2d18a4e9abde3d9 total: 24 errors, 28 warnings, 33 checks, 465 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.48497.commit.7833ce63ce3868f536cfdb71f2d18a4e9abde3d9 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
