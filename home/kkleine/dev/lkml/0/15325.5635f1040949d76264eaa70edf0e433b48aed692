WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#48: FILE: include/ltt/ltt-tracer.h:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

WARNING:EMBEDDED_FILENAME: It's generally not useful to have the filename in the file
#49: FILE: include/ltt/ltt-tracer.h:2:
+ * include/ltt/ltt-tracer.h

Embedding the complete filename path inside the file isn't particularly
useful as often the path is moved around and becomes incorrect.

WARNING:INCLUDE_LINUX: Use #include <linux/atomic.h> instead of <asm/atomic.h>
#73: FILE: include/ltt/ltt-tracer.h:26:
+#include <asm/atomic.h>

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#83: FILE: include/ltt/ltt-tracer.h:36:
+static inline unsigned int ltt_align(size_t align_drift,
+		 size_t size_of_type)

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#85: FILE: include/ltt/ltt-tracer.h:38:
+	size_t alignment = min(sizeof(void*), size_of_type);

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LINE_SPACING: Missing a blank line after declarations
#86: FILE: include/ltt/ltt-tracer.h:39:
+	size_t alignment = min(sizeof(void*), size_of_type);
+	return ((alignment - align_drift) & (alignment-1));

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#86: FILE: include/ltt/ltt-tracer.h:39:
+	return ((alignment - align_drift) & (alignment-1));
 	                                              ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:LINE_SPACING: Please use a blank line after function/struct/union/enum declarations
#88: FILE: include/ltt/ltt-tracer.h:41:
+}
+/* Default arch alignment */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#93: FILE: include/ltt/ltt-tracer.h:46:
+static inline unsigned int ltt_align(size_t align_drift,
+		 size_t size_of_type)

WARNING:PREFER_DEFINED_ATTRIBUTE_MACRO: Prefer __packed over __attribute__((packed))
#98: FILE: include/ltt/ltt-tracer.h:51:
+#define LTT_ALIGN __attribute__((packed))

CHECK:LINE_SPACING: Please don't use multiple blank lines
#104: FILE: include/ltt/ltt-tracer.h:57:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#111: FILE: include/ltt/ltt-tracer.h:64:
+	atomic_t offset;		/* Current offset in the buffer
+					   atomic_up access. */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#111: FILE: include/ltt/ltt-tracer.h:64:
+					   atomic_up access. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#113: FILE: include/ltt/ltt-tracer.h:66:
+	atomic_t consumed;		/* Current offset in the buffer
+					   standard atomic access (shared) */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#113: FILE: include/ltt/ltt-tracer.h:66:
+					   standard atomic access (shared) */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#115: FILE: include/ltt/ltt-tracer.h:68:
+	atomic_t active_readers;	/* Active readers count
+					   standard atomic access (shared) */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#115: FILE: include/ltt/ltt-tracer.h:68:
+					   standard atomic access (shared) */

WARNING:BLOCK_COMMENT_STYLE: Block comments use * on subsequent lines
#118: FILE: include/ltt/ltt-tracer.h:71:
+	atomic_t *commit_count;		/* Commit count per sub-buffer
+					   atomic_up access. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#118: FILE: include/ltt/ltt-tracer.h:71:
+					   atomic_up access. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#121: FILE: include/ltt/ltt-tracer.h:74:
+					 * synchronisation with reader. */

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#126: FILE: include/ltt/ltt-tracer.h:79:
+					 * writers */

WARNING:SPACING: Unnecessary space before function pointer arguments
#143: FILE: include/ltt/ltt-tracer.h:96:
+	void (*buffer_begin) (struct rchan_buf *buf,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#144: FILE: include/ltt/ltt-tracer.h:97:
+	void (*buffer_begin) (struct rchan_buf *buf,
+			u64 tsc, unsigned int subbuf_idx);

WARNING:SPACING: Unnecessary space before function pointer arguments
#149: FILE: include/ltt/ltt-tracer.h:102:
+	void (*buffer_end) (struct rchan_buf *buf,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#150: FILE: include/ltt/ltt-tracer.h:103:
+	void (*buffer_end) (struct rchan_buf *buf,
+			u64 tsc, unsigned int offset, unsigned int subbuf_idx);

WARNING:SPACING: Unnecessary space before function pointer arguments
#160: FILE: include/ltt/ltt-tracer.h:113:
+	int (*create_dirs) (struct ltt_trace_struct *new_trace);

WARNING:SPACING: Unnecessary space before function pointer arguments
#161: FILE: include/ltt/ltt-tracer.h:114:
+	void (*remove_dirs) (struct ltt_trace_struct *new_trace);

WARNING:SPACING: Unnecessary space before function pointer arguments
#162: FILE: include/ltt/ltt-tracer.h:115:
+	int (*create_channel) (char *trace_name, struct ltt_trace_struct *trace,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#163: FILE: include/ltt/ltt-tracer.h:116:
+	int (*create_channel) (char *trace_name, struct ltt_trace_struct *trace,
+				struct dentry *dir, char *channel_name,

WARNING:SPACING: Unnecessary space before function pointer arguments
#167: FILE: include/ltt/ltt-tracer.h:120:
+	void (*wakeup_channel) (struct ltt_channel_struct *ltt_channel);

WARNING:SPACING: Unnecessary space before function pointer arguments
#168: FILE: include/ltt/ltt-tracer.h:121:
+	void (*finish_channel) (struct ltt_channel_struct *channel);

WARNING:SPACING: Unnecessary space before function pointer arguments
#169: FILE: include/ltt/ltt-tracer.h:122:
+	void (*remove_channel) (struct ltt_channel_struct *channel);

WARNING:SPACING: Unnecessary space before function pointer arguments
#170: FILE: include/ltt/ltt-tracer.h:123:
+	void *(*reserve_slot) (struct ltt_trace_struct *trace,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#171: FILE: include/ltt/ltt-tracer.h:124:
+	void *(*reserve_slot) (struct ltt_trace_struct *trace,
+				struct ltt_channel_struct *channel,

WARNING:SPACING: Unnecessary space before function pointer arguments
#176: FILE: include/ltt/ltt-tracer.h:129:
+	void (*commit_slot) (struct ltt_channel_struct *channel,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#177: FILE: include/ltt/ltt-tracer.h:130:
+	void (*commit_slot) (struct ltt_channel_struct *channel,
+				void **transport_data, void *reserved,

WARNING:SPACING: Unnecessary space before function pointer arguments
#179: FILE: include/ltt/ltt-tracer.h:132:
+	int (*user_blocking) (struct ltt_trace_struct *trace,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#180: FILE: include/ltt/ltt-tracer.h:133:
+	int (*user_blocking) (struct ltt_trace_struct *trace,
+				unsigned int index, size_t data_size,

WARNING:SPACING: Unnecessary space before function pointer arguments
#182: FILE: include/ltt/ltt-tracer.h:135:
+	void (*user_errors) (struct ltt_trace_struct *trace,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#183: FILE: include/ltt/ltt-tracer.h:136:
+	void (*user_errors) (struct ltt_trace_struct *trace,
+				unsigned int index, size_t data_size,

WARNING:SPACING: Unnecessary space before function pointer arguments
#186: FILE: include/ltt/ltt-tracer.h:139:
+	int (*handle_cpuhp) (struct notifier_block *nb,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#187: FILE: include/ltt/ltt-tracer.h:140:
+	int (*handle_cpuhp) (struct notifier_block *nb,
+				unsigned long action, void *hcpu,

CHECK:LINE_SPACING: Please don't use multiple blank lines
#199: FILE: include/ltt/ltt-tracer.h:152:
+
+

WARNING:TYPO_SPELLING: 'Remeber' may be misspelled - perhaps 'Remember'?
#245: FILE: include/ltt/ltt-tracer.h:198:
+ * Remeber that the C compiler does align each member on the boundary equivalent
    ^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#251: FILE: include/ltt/ltt-tracer.h:204:
+ * Event headers are aligned depending on the trace alignment option. */

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#254: FILE: include/ltt/ltt-tracer.h:207:
+	uint32_t timestamp;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u16' over 'uint16_t'
#257: FILE: include/ltt/ltt-tracer.h:210:
+	uint16_t event_size;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#261: FILE: include/ltt/ltt-tracer.h:214:
+	uint64_t timestamp;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u16' over 'uint16_t'
#264: FILE: include/ltt/ltt-tracer.h:217:
+	uint16_t event_size;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#268: FILE: include/ltt/ltt-tracer.h:221:
+	uint32_t magic_number;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#269: FILE: include/ltt/ltt-tracer.h:222:
+	uint32_t arch_type;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#270: FILE: include/ltt/ltt-tracer.h:223:
+	uint32_t arch_variant;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#271: FILE: include/ltt/ltt-tracer.h:224:
+	uint32_t float_word_order;	 /* Only useful for user space traces */

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#272: FILE: include/ltt/ltt-tracer.h:225:
+	uint8_t arch_size;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#273: FILE: include/ltt/ltt-tracer.h:226:
+	uint8_t major_version;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#274: FILE: include/ltt/ltt-tracer.h:227:
+	uint8_t minor_version;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#275: FILE: include/ltt/ltt-tracer.h:228:
+	uint8_t flight_recorder;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#276: FILE: include/ltt/ltt-tracer.h:229:
+	uint8_t has_heartbeat;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u8' over 'uint8_t'
#277: FILE: include/ltt/ltt-tracer.h:230:
+	uint8_t has_alignment;		/* Event header alignment */

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#278: FILE: include/ltt/ltt-tracer.h:231:
+	uint32_t freq_scale;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#279: FILE: include/ltt/ltt-tracer.h:232:
+	uint64_t start_freq;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#280: FILE: include/ltt/ltt-tracer.h:233:
+	uint64_t start_tsc;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#281: FILE: include/ltt/ltt-tracer.h:234:
+	uint64_t start_monotonic;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#282: FILE: include/ltt/ltt-tracer.h:235:
+	uint64_t start_time_sec;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#283: FILE: include/ltt/ltt-tracer.h:236:
+	uint64_t start_time_usec;

CHECK:LINE_SPACING: Please don't use multiple blank lines
#286: FILE: include/ltt/ltt-tracer.h:239:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#291: FILE: include/ltt/ltt-tracer.h:244:
+ * of a buffer that would be before a frequency change. */

ERROR:TRAILING_WHITESPACE: trailing whitespace
#293: FILE: include/ltt/ltt-tracer.h:246:
+^Istruct { $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#294: FILE: include/ltt/ltt-tracer.h:247:
+		uint64_t cycle_count;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#295: FILE: include/ltt/ltt-tracer.h:248:
+		uint64_t freq; /* khz */

ERROR:TRAILING_WHITESPACE: trailing whitespace
#297: FILE: include/ltt/ltt-tracer.h:250:
+^Istruct { $

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#298: FILE: include/ltt/ltt-tracer.h:251:
+		uint64_t cycle_count;

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u64' over 'uint64_t'
#299: FILE: include/ltt/ltt-tracer.h:252:
+		uint64_t freq; /* khz */

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#301: FILE: include/ltt/ltt-tracer.h:254:
+	uint32_t lost_size;	/* Size unused at the end of the buffer */

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#302: FILE: include/ltt/ltt-tracer.h:255:
+	uint32_t buf_size;	/* The size of this sub-buffer */

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#317: FILE: include/ltt/ltt-tracer.h:270:
+#define GET_CHANNEL_INDEX(chan)	\
+	(unsigned int)&((struct ltt_trace_struct*)NULL)->channel.chan

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#318: FILE: include/ltt/ltt-tracer.h:271:
+	(unsigned int)&((struct ltt_trace_struct*)NULL)->channel.chan

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#320: FILE: include/ltt/ltt-tracer.h:273:
+static inline struct ltt_channel_struct *ltt_get_channel_from_index(

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#323: FILE: include/ltt/ltt-tracer.h:276:
+	return *(struct ltt_channel_struct **)((void*)trace+index);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#323: FILE: include/ltt/ltt-tracer.h:276:
+	return *(struct ltt_channel_struct **)((void*)trace+index);
 	                                                   ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#326: FILE: include/ltt/ltt-tracer.h:279:
+
+

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#341: FILE: include/ltt/ltt-tracer.h:294:
+ * */

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#343: FILE: include/ltt/ltt-tracer.h:296:
+static inline unsigned char ltt_get_header_size(struct ltt_trace_struct *trace,
+		void *address,

ERROR:TRAILING_WHITESPACE: trailing whitespace
#350: FILE: include/ltt/ltt-tracer.h:303:
+^I$

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#362: FILE: include/ltt/ltt-tracer.h:315:
+	 * Calculated statically if header size if known. */

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#363: FILE: include/ltt/ltt-tracer.h:316:
+	*after_hdr_pad = ltt_align(header, sizeof(void*));

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#368: FILE: include/ltt/ltt-tracer.h:321:
+	return header+padding;
 	             ^

CHECK:LINE_SPACING: Please don't use multiple blank lines
#371: FILE: include/ltt/ltt-tracer.h:324:
+
+

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#386: FILE: include/ltt/ltt-tracer.h:339:
+static inline void ltt_write_event_header(struct ltt_trace_struct *trace,
+		struct ltt_channel_struct *channel,

CHECK:CAMELCASE: Avoid CamelCase: <fID>
#387: FILE: include/ltt/ltt-tracer.h:340:
+		void *ptr, ltt_facility_t fID,

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <eID>
#388: FILE: include/ltt/ltt-tracer.h:341:
+		uint32_t eID, size_t event_size,

CHECK:PREFER_KERNEL_TYPES: Prefer kernel type 'u32' over 'uint32_t'
#388: FILE: include/ltt/ltt-tracer.h:341:
+		uint32_t eID, size_t event_size,

WARNING:MINMAX: min() should probably be min_t(size_t, event_size, 0xFFFFU)
#394: FILE: include/ltt/ltt-tracer.h:347:
+	event_size = min(event_size, (size_t)0xFFFFU);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#395: FILE: include/ltt/ltt-tracer.h:348:
+	hb = (struct ltt_event_header_hb *)(ptr+offset);
 	                                       ^

ERROR:TRAILING_WHITESPACE: trailing whitespace
#402: FILE: include/ltt/ltt-tracer.h:355:
+^I$

WARNING:MINMAX: min() should probably be min_t(size_t, event_size, 0xFFFFU)
#403: FILE: include/ltt/ltt-tracer.h:356:
+	event_size = min(event_size, (size_t)0xFFFFU);

CHECK:SPACING: spaces preferred around that '+' (ctx:VxV)
#404: FILE: include/ltt/ltt-tracer.h:357:
+	nohb = (struct ltt_event_header_nohb *)(ptr+offset);
 	                                           ^

WARNING:TYPO_SPELLING: 'occured' may be misspelled - perhaps 'occurred'?
#415: FILE: include/ltt/ltt-tracer.h:368:
+ * which occured at the wrong moment).
          ^^^^^^^

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#418: FILE: include/ltt/ltt-tracer.h:371:
+ * This function does nothing if trace is in normal mode. */

WARNING:IF_0: Consider removing the code enclosed by this #if 0 and its #endif
#419: FILE: include/ltt/ltt-tracer.h:372:
+#if 0

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#421: FILE: include/ltt/ltt-tracer.h:374:
+static inline void ltt_write_commit_counter(struct rchan_buf *buf,
+		void *reserved)

ERROR:TRAILING_WHITESPACE: trailing whitespace
#423: FILE: include/ltt/ltt-tracer.h:376:
+^Istruct ltt_channel_struct *channel = $

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#424: FILE: include/ltt/ltt-tracer.h:377:
+		(struct ltt_channel_struct*)buf->chan->client_data;

ERROR:POINTER_LOCATION: "(foo*)" should be "(foo *)"
#426: FILE: include/ltt/ltt-tracer.h:379:
+		(struct ltt_block_start_header*)buf->data;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#427: FILE: include/ltt/ltt-tracer.h:380:
+	unsigned offset, subbuf_idx;

ERROR:TRAILING_WHITESPACE: trailing whitespace
#428: FILE: include/ltt/ltt-tracer.h:381:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#433: FILE: include/ltt/ltt-tracer.h:386:
+^I^Iheader->lost_size = buf->chan->subbuf_size - $

CHECK:BRACES: Blank lines aren't necessary before a close brace '}'
#436: FILE: include/ltt/ltt-tracer.h:389:
+
+}

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#443: FILE: include/ltt/ltt-tracer.h:396:
+#define BUFFER_OFFSET(offset, chan) ((offset) & (chan->alloc_size-1))
                                                                  ^

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'chan' may be better as '(chan)' to avoid precedence issues
#443: FILE: include/ltt/ltt-tracer.h:396:
+#define BUFFER_OFFSET(offset, chan) ((offset) & (chan->alloc_size-1))

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#444: FILE: include/ltt/ltt-tracer.h:397:
+#define SUBBUF_OFFSET(offset, chan) ((offset) & (chan->subbuf_size-1))
                                                                   ^

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'chan' may be better as '(chan)' to avoid precedence issues
#444: FILE: include/ltt/ltt-tracer.h:397:
+#define SUBBUF_OFFSET(offset, chan) ((offset) & (chan->subbuf_size-1))

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'chan' - possible side-effects?
#445: FILE: include/ltt/ltt-tracer.h:398:
+#define SUBBUF_ALIGN(offset, chan) \
+	(((offset) + chan->subbuf_size) & (~(chan->subbuf_size-1)))

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'chan' may be better as '(chan)' to avoid precedence issues
#445: FILE: include/ltt/ltt-tracer.h:398:
+#define SUBBUF_ALIGN(offset, chan) \
+	(((offset) + chan->subbuf_size) & (~(chan->subbuf_size-1)))

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#446: FILE: include/ltt/ltt-tracer.h:399:
+	(((offset) + chan->subbuf_size) & (~(chan->subbuf_size-1)))
 	                                                      ^

CHECK:MACRO_ARG_PRECEDENCE: Macro argument 'chan' may be better as '(chan)' to avoid precedence issues
#447: FILE: include/ltt/ltt-tracer.h:400:
+#define SUBBUF_TRUNC(offset, chan) \
+	((offset) & (~(chan->subbuf_size-1)))

CHECK:SPACING: spaces preferred around that '-' (ctx:VxV)
#448: FILE: include/ltt/ltt-tracer.h:401:
+	((offset) & (~(chan->subbuf_size-1)))
 	                                ^

CHECK:MACRO_ARG_REUSE: Macro argument reuse 'chan' - possible side-effects?
#449: FILE: include/ltt/ltt-tracer.h:402:
+#define SUBBUF_INDEX(offset, chan) \
+	(BUFFER_OFFSET((offset),chan)/chan->subbuf_size)

ERROR:SPACING: space required after that ',' (ctx:VxV)
#450: FILE: include/ltt/ltt-tracer.h:403:
+	(BUFFER_OFFSET((offset),chan)/chan->subbuf_size)
 	                       ^

CHECK:SPACING: spaces preferred around that '/' (ctx:VxV)
#450: FILE: include/ltt/ltt-tracer.h:403:
+	(BUFFER_OFFSET((offset),chan)/chan->subbuf_size)
 	                             ^

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#468: FILE: include/ltt/ltt-tracer.h:421:
+ * ^I^I^I^I^Ito the beginning of the reserved slot. */$

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#468: FILE: include/ltt/ltt-tracer.h:421:
+ * 					to the beginning of the reserved slot. */

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#469: FILE: include/ltt/ltt-tracer.h:422:
+static inline void *ltt_reserve_slot(

ERROR:TRAILING_WHITESPACE: trailing whitespace
#484: FILE: include/ltt/ltt-tracer.h:437:
+^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#485: FILE: include/ltt/ltt-tracer.h:438:
+^I$

CHECK:LINE_SPACING: Please don't use multiple blank lines
#485: FILE: include/ltt/ltt-tracer.h:438:
+	
+	

WARNING:TYPO_SPELLING: 'beginnig' may be misspelled - perhaps 'beginning'?
#494: FILE: include/ltt/ltt-tracer.h:447:
+ * @reserved : address of the beginnig of the reserved slot.
                               ^^^^^^^^

CHECK:OPEN_ENDED_LINE: Lines should not end with a '('
#498: FILE: include/ltt/ltt-tracer.h:451:
+static inline void ltt_commit_slot(

WARNING:PREFER_IS_ENABLED: Prefer IS_ENABLED(<FOO>) to CONFIG_<FOO> || CONFIG_<FOO>_MODULE
#512: FILE: include/ltt/ltt-tracer.h:465:
+#if defined(CONFIG_LTT_TRACER) || defined(CONFIG_LTT_TRACER_MODULE)

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#565: FILE: include/ltt/ltt-tracer.h:518:
+ * written by this user space event. */

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#576: FILE: include/ltt/ltt-tracer.h:529:
+extern int ltt_module_register(enum ltt_module_function name, void *function,

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#577: FILE: include/ltt/ltt-tracer.h:530:
+extern int ltt_module_register(enum ltt_module_function name, void *function,
+		struct module *owner);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#578: FILE: include/ltt/ltt-tracer.h:531:
+extern void ltt_module_unregister(enum ltt_module_function name);

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#597: FILE: include/ltt/ltt-tracer.h:550:
+		unsigned subbuf_size_low;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#598: FILE: include/ltt/ltt-tracer.h:551:
+		unsigned n_subbufs_low;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#599: FILE: include/ltt/ltt-tracer.h:552:
+		unsigned subbuf_size_med;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#600: FILE: include/ltt/ltt-tracer.h:553:
+		unsigned n_subbufs_med;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#601: FILE: include/ltt/ltt-tracer.h:554:
+		unsigned subbuf_size_high;

WARNING:UNSPECIFIED_INT: Prefer 'unsigned int' to bare use of 'unsigned'
#602: FILE: include/ltt/ltt-tracer.h:555:
+		unsigned n_subbufs_high;

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#606: FILE: include/ltt/ltt-tracer.h:559:
+extern int ltt_control(enum ltt_control_msg msg, char *trace_name,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#607: FILE: include/ltt/ltt-tracer.h:560:
+extern int ltt_control(enum ltt_control_msg msg, char *trace_name,
+		char *trace_type, union ltt_control_args args);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#609: FILE: include/ltt/ltt-tracer.h:562:
+enum ltt_filter_control_msg { $

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#613: FILE: include/ltt/ltt-tracer.h:566:
+extern int ltt_filter_control(enum ltt_filter_control_msg msg,

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#614: FILE: include/ltt/ltt-tracer.h:567:
+extern int ltt_filter_control(enum ltt_filter_control_msg msg,
+		char *trace_name);

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#617: FILE: include/ltt/ltt-tracer.h:570:
+void ltt_write_trace_header(struct ltt_trace_struct *trace,
+		struct ltt_trace_header *header);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#618: FILE: include/ltt/ltt-tracer.h:571:
+extern void ltt_buffer_destroy(struct ltt_channel_struct *ltt_chan);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#619: FILE: include/ltt/ltt-tracer.h:572:
+extern void ltt_wakeup_writers(void *private);

ERROR:SPACING: space required after that ',' (ctx:VxV)
#635: FILE: include/ltt/ltt-tracer.h:588:
+#define RELAY_GET_SUBBUF		_IOR(0xF4, 0x00,__u32)
                         		               ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#637: FILE: include/ltt/ltt-tracer.h:590:
+#define RELAY_PUT_SUBBUF		_IOW(0xF4, 0x01,__u32)
                         		               ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#639: FILE: include/ltt/ltt-tracer.h:592:
+#define RELAY_GET_N_SUBBUFS		_IOR(0xF4, 0x02,__u32)
                            		               ^

ERROR:SPACING: space required after that ',' (ctx:VxV)
#641: FILE: include/ltt/ltt-tracer.h:594:
+#define RELAY_GET_SUBBUF_SIZE		_IOR(0xF4, 0x03,__u32)
                              		               ^

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.15325.commit.5635f1040949d76264eaa70edf0e433b48aed692 total: 22 errors, 50 warnings, 79 checks, 597 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.15325.commit.5635f1040949d76264eaa70edf0e433b48aed692 has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
