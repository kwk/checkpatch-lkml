WARNING:FILE_PATH_CHANGES: added, moved or deleted file(s), does MAINTAINERS need updating?
#39: 
new file mode 100644

Whenever files are added, moved, or deleted, the MAINTAINERS file
patterns can be out of sync or outdated.

So MAINTAINERS might need updating in these cases.

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#44: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:1:
+/*

The source file is missing or has an improper SPDX identifier tag.
The Linux kernel requires the precise SPDX identifier in all source files,
and it is thoroughly documented in the kernel docs.

See: https://www.kernel.org/doc/html/latest/process/license-rules.html

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#92: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:49:
+static int __cxio_init_resource_fifo(struct kfifo **fifo,
+				   spinlock_t *fifo_lock,

WARNING:LINE_SPACING: Missing a blank line after declarations
#100: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:57:
+	u32 rarray[16];
+	spin_lock_init(fifo_lock);

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:SPACING: No space is necessary after a cast
#107: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:64:
+		__kfifo_put(*fifo, (unsigned char *) &entry, sizeof(u32));

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#119: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:76:
+^I^I^I__kfifo_put(*fifo, $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#120: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:77:
+			__kfifo_put(*fifo, 
+				(unsigned char *) &rarray[idx],

CHECK:SPACING: No space is necessary after a cast
#120: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:77:
+				(unsigned char *) &rarray[idx],

ERROR:TRAILING_WHITESPACE: trailing whitespace
#123: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:80:
+^I^I^Ij++;^I$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#126: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:83:
+^I^I^I__kfifo_put(*fifo, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#127: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:84:
+			__kfifo_put(*fifo, 
+				(unsigned char *) &rarray[i],

CHECK:SPACING: No space is necessary after a cast
#127: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:84:
+				(unsigned char *) &rarray[i],

CHECK:BRACES: Unbalanced braces around else statement
#129: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:86:
+	} else

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

CHECK:SPACING: No space is necessary after a cast
#131: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:88:
+			__kfifo_put(*fifo, (unsigned char *) &i, sizeof(u32));

CHECK:SPACING: No space is necessary after a cast
#134: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:91:
+		kfifo_get(*fifo, (unsigned char *) &entry, sizeof(u32));

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#138: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:95:
+static int cxio_init_resource_fifo(struct kfifo **fifo, spinlock_t * fifo_lock,

When using pointer data or a function that returns a pointer type,
the preferred use of * is adjacent to the data name or function name
and not adjacent to the type name.
Examples::

  char *linux_banner;
  unsigned long long memparse(char *ptr, char **retptr);
  char *match_strdup(substring_t *s);

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:TRAILING_WHITESPACE: trailing whitespace
#141: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:98:
+^Ireturn (__cxio_init_resource_fifo(fifo, fifo_lock, nr, skip_low, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#146: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:103:
+static int cxio_init_resource_fifo_random(struct kfifo **fifo,
+				   spinlock_t * fifo_lock,

ERROR:POINTER_LOCATION: "foo * bar" should be "foo *bar"
#146: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:103:
+				   spinlock_t * fifo_lock,

CHECK:BRACES: Blank lines aren't necessary after an open brace '{'
#149: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:106:
+{
+

ERROR:TRAILING_WHITESPACE: trailing whitespace
#150: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:107:
+^Ireturn (__cxio_init_resource_fifo(fifo, fifo_lock, nr, skip_low, $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#160: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:117:
+^Irdev_p->rscp->qpid_fifo = kfifo_alloc(T3_MAX_NUM_QP * sizeof(u32), $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#161: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:118:
+^I^I^I^I^I      GFP_KERNEL, $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#168: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:125:
+^I^I^I__kfifo_put(rdev_p->rscp->qpid_fifo, $

CHECK:SPACING: No space is necessary after a cast
#169: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:126:
+				    (unsigned char *) &i, sizeof(u32));

ERROR:TRAILING_WHITESPACE: trailing whitespace
#197: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:154:
+^I^I^I^I      &rscp->tpt_fifo_lock, $

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#197: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:154:
+	err = cxio_init_resource_fifo_random(&rscp->tpt_fifo,
+				      &rscp->tpt_fifo_lock, 

ERROR:TRAILING_WHITESPACE: trailing whitespace
#204: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:161:
+^Ierr = cxio_init_resource_fifo(&rscp->cqid_fifo, &rscp->cqid_fifo_lock, $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#208: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:165:
+^Ierr = cxio_init_resource_fifo(&rscp->pdid_fifo, &rscp->pdid_fifo_lock, $

CHECK:SPACING: No space is necessary after a cast
#229: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:186:
+	if (kfifo_get(fifo, (unsigned char *) &entry, sizeof(u32)))

WARNING:LINE_SPACING: Missing a blank line after declarations
#229: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:186:
+	u32 entry;
+	if (kfifo_get(fifo, (unsigned char *) &entry, sizeof(u32)))

WARNING:TYPO_SPELLING: 'emptry' may be misspelled - perhaps 'empty'?
#232: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:189:
+		return 0;	/* fifo emptry */
 		         	        ^^^^^^

Some words may have been misspelled.  Consider reviewing them.

CHECK:SPACING: No space is necessary after a cast
#237: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:194:
+	BUG_ON(kfifo_put(fifo, (unsigned char *) &entry, sizeof(u32)) == 0);

WARNING:AVOID_BUG: Avoid crashing the kernel - try using WARN_ON & recovery code rather than BUG() or BUG_ON()
#237: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:194:
+	BUG_ON(kfifo_put(fifo, (unsigned char *) &entry, sizeof(u32)) == 0);

BUG() or BUG_ON() should be avoided totally.
Use WARN() and WARN_ON() instead, and handle the "impossible"
error condition as gracefully as possible.

See: https://www.kernel.org/doc/html/latest/process/deprecated.html#bug-and-bug-on

WARNING:LINE_SPACING: Missing a blank line after declarations
#263: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:220:
+	u32 qpid = cxio_hal_get_resource(rscp->qpid_fifo);
+	PDBG("%s qpid 0x%x\n", __FUNCTION__, qpid);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#263: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:220:
+	PDBG("%s qpid 0x%x\n", __FUNCTION__, qpid);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#269: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:226:
+	PDBG("%s qpid 0x%x\n", __FUNCTION__, qpid);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#307: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:264:
+#define PBL_CHUNK 2*1024*1024 ^I^I$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#307: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:264:
+#define PBL_CHUNK 2*1024*1024 ^I^I$

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#307: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:264:
+#define PBL_CHUNK 2*1024*1024 		
                    ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#307: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:264:
+#define PBL_CHUNK 2*1024*1024 		
                         ^

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#307: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:264:
+#define PBL_CHUNK 2*1024*1024 		

WARNING:LINE_SPACING: Missing a blank line after declarations
#312: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:269:
+	unsigned long addr = gen_pool_alloc(rdev_p->pbl_pool, size);
+	PDBG("%s addr 0x%x size %d\n", __FUNCTION__, (u32)addr, size);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#312: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:269:
+	PDBG("%s addr 0x%x size %d\n", __FUNCTION__, (u32)addr, size);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#318: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:275:
+	PDBG("%s addr 0x%x size %d\n", __FUNCTION__, addr, size);

WARNING:LINE_SPACING: Missing a blank line after declarations
#325: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:282:
+	unsigned long i;
+	rdev_p->pbl_pool = gen_pool_create(MIN_PBL_SHIFT, -1);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#327: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:284:
+^I^Ifor (i = rdev_p->rnic_info.pbl_base; $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#328: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:285:
+^I^I     i <= rdev_p->rnic_info.pbl_top - PBL_CHUNK + 1; $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#344: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:301:
+#define RQT_CHUNK 2*1024*1024 ^I^I$

WARNING:SPACE_BEFORE_TAB: please, no space before tabs
#344: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:301:
+#define RQT_CHUNK 2*1024*1024 ^I^I$

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#344: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:301:
+#define RQT_CHUNK 2*1024*1024 		
                    ^

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#344: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:301:
+#define RQT_CHUNK 2*1024*1024 		
                         ^

ERROR:COMPLEX_MACRO: Macros with complex values should be enclosed in parentheses
#344: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:301:
+#define RQT_CHUNK 2*1024*1024 		

WARNING:LINE_SPACING: Missing a blank line after declarations
#349: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:306:
+	unsigned long addr = gen_pool_alloc(rdev_p->rqt_pool, size << 6);
+	PDBG("%s addr 0x%x size %d\n", __FUNCTION__, (u32)addr, size << 6);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#349: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:306:
+	PDBG("%s addr 0x%x size %d\n", __FUNCTION__, (u32)addr, size << 6);

WARNING:USE_FUNC: __func__ should be used instead of gcc specific __FUNCTION__
#355: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:312:
+	PDBG("%s addr 0x%x size %d\n", __FUNCTION__, addr, size << 6);

WARNING:LINE_SPACING: Missing a blank line after declarations
#362: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:319:
+	unsigned long i;
+	rdev_p->rqt_pool = gen_pool_create(MIN_RQT_SHIFT, -1);

ERROR:TRAILING_WHITESPACE: trailing whitespace
#364: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:321:
+^I^Ifor (i = rdev_p->rnic_info.rqt_base; $

ERROR:TRAILING_WHITESPACE: trailing whitespace
#365: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.c:322:
+^I^I     i <= rdev_p->rnic_info.rqt_top - RQT_CHUNK + 1; $

WARNING:SPDX_LICENSE_TAG: Missing or malformed SPDX-License-Identifier tag in line 1
#381: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:1:
+/*

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#425: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:45:
+extern int cxio_hal_init_rhdl_resource(u32 nr_rhdl);

Function prototypes don't need to be declared extern in .h
files.  It's assumed by the compiler and is unnecessary.

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#426: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:46:
+extern void cxio_hal_destroy_rhdl_resource(void);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#427: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:47:
+extern int cxio_hal_init_resource(struct cxio_rdev *rdev_p,

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#431: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:51:
+extern u32 cxio_hal_get_stag(struct cxio_hal_resource *rscp);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#432: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:52:
+extern void cxio_hal_put_stag(struct cxio_hal_resource *rscp, u32 stag);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#433: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:53:
+extern u32 cxio_hal_get_qpid(struct cxio_hal_resource *rscp);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#434: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:54:
+extern void cxio_hal_put_qpid(struct cxio_hal_resource *rscp, u32 qpid);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#435: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:55:
+extern u32 cxio_hal_get_cqid(struct cxio_hal_resource *rscp);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#436: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:56:
+extern void cxio_hal_put_cqid(struct cxio_hal_resource *rscp, u32 cqid);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#437: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:57:
+extern void cxio_hal_destroy_resource(struct cxio_hal_resource *rscp);

ERROR:SPACING: space prohibited after that open parenthesis '('
#439: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:59:
+#define PBL_OFF(rdev_p, a) ( (a) - (rdev_p)->rnic_info.pbl_base )

ERROR:SPACING: space prohibited before that close parenthesis ')'
#439: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:59:
+#define PBL_OFF(rdev_p, a) ( (a) - (rdev_p)->rnic_info.pbl_base )

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#440: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:60:
+extern int cxio_hal_pblpool_create(struct cxio_rdev *rdev_p);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#441: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:61:
+extern void cxio_hal_pblpool_destroy(struct cxio_rdev *rdev_p);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#442: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:62:
+extern u32 cxio_hal_pblpool_alloc(struct cxio_rdev *rdev_p, int size);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#443: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:63:
+extern void cxio_hal_pblpool_free(struct cxio_rdev *rdev_p, u32 addr, int size);

ERROR:SPACING: space prohibited after that open parenthesis '('
#445: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:65:
+#define RQT_OFF(rdev_p, a) ( (a) - (rdev_p)->rnic_info.rqt_base )

ERROR:SPACING: space prohibited before that close parenthesis ')'
#445: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:65:
+#define RQT_OFF(rdev_p, a) ( (a) - (rdev_p)->rnic_info.rqt_base )

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#446: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:66:
+extern int cxio_hal_rqtpool_create(struct cxio_rdev *rdev_p);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#447: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:67:
+extern void cxio_hal_rqtpool_destroy(struct cxio_rdev *rdev_p);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#448: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:68:
+extern u32 cxio_hal_rqtpool_alloc(struct cxio_rdev *rdev_p, int size);

CHECK:AVOID_EXTERNS: extern prototypes should be avoided in .h files
#449: FILE: drivers/infiniband/hw/cxgb3/core/cxio_resource.h:69:
+extern void cxio_hal_rqtpool_free(struct cxio_rdev *rdev_p, u32 addr, int size);

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.10568.commit.af3325614f525e4e692b9d6032bf22086cb0ca7e total: 25 errors, 20 warnings, 37 checks, 401 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.10568.commit.af3325614f525e4e692b9d6032bf22086cb0ca7e has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
