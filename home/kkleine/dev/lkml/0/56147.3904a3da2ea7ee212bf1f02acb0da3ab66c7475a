ERROR:SPACING: space required after that ',' (ctx:VxV)
#134: FILE: drivers/atm/zatm.c:606:
+	zatm_dev->rx_map = kzalloc(size,GFP_KERNEL);
 	                               ^

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required after that ',' (ctx:VxV)
#145: FILE: drivers/atm/zatm.c:953:
+	zatm_vcc->ring = kzalloc(RING_SIZE,GFP_KERNEL);
 	                                  ^

CHECK:MULTIPLE_ASSIGNMENTS: multiple assignments should be avoided
#161: FILE: drivers/char/consolemap.c:195:
+		q = p->inverse_translations[i] = kzalloc(MAX_GLYPH, GFP_KERNEL);

Multiple assignments on a single line makes the code unnecessarily
complicated. So on a single line assign value to a single variable
only, this makes the code more readable and helps avoid typos.

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#191: FILE: drivers/char/keyboard.c:1301:
+	if (!(handle = kzalloc(sizeof(struct input_handle), GFP_KERNEL)))

Do not use assignments in if condition.
Example::

  if ((foo = bar(...)) < BAZ) {

should be written as::

  foo = bar(...);
  if (foo < BAZ) {

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*handle)...) over kzalloc(sizeof(struct input_handle)...)
#191: FILE: drivers/char/keyboard.c:1301:
+	if (!(handle = kzalloc(sizeof(struct input_handle), GFP_KERNEL)))

The allocation style is bad.  In general for family of
allocation functions using sizeof() to get memory size,
constructs like::

  p = alloc(sizeof(struct foo), ...)

should be::

  p = alloc(sizeof(*p), ...)

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#allocating-memory

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*state)...) over kzalloc(sizeof(struct timer_rand_state)...)
#206: FILE: drivers/char/random.c:914:
+	state = kzalloc(sizeof(struct timer_rand_state), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*state)...) over kzalloc(sizeof(struct timer_rand_state)...)
#217: FILE: drivers/char/random.c:928:
+	state = kzalloc(sizeof(struct timer_rand_state), GFP_KERNEL);

CHECK:CAMELCASE: Avoid CamelCase: <CmdBlkP>
#252: FILE: drivers/char/rio/riocmd.c:559:
+	CmdBlkP = kzalloc(sizeof(struct CmdBlk), GFP_ATOMIC);

Avoid CamelCase Identifiers.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#naming

CHECK:CAMELCASE: Avoid CamelCase: <CmdBlk>
#252: FILE: drivers/char/rio/riocmd.c:559:
+	CmdBlkP = kzalloc(sizeof(struct CmdBlk), GFP_ATOMIC);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*CmdBlkP)...) over kzalloc(sizeof(struct CmdBlk)...)
#252: FILE: drivers/char/rio/riocmd.c:559:
+	CmdBlkP = kzalloc(sizeof(struct CmdBlk), GFP_ATOMIC);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*tty)...) over kzalloc(sizeof(struct tty_struct)...)
#286: FILE: drivers/char/tty_io.c:160:
+	tty = kzalloc(sizeof(struct tty_struct), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*ltp)...) over kzalloc(sizeof(struct termios)...)
#296: FILE: drivers/char/tty_io.c:1502:
+		ltp = kzalloc(sizeof(struct termios), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*o_ltp)...) over kzalloc(sizeof(struct termios)...)
#309: FILE: drivers/char/tty_io.c:1533:
+			o_ltp = kzalloc(sizeof(struct termios), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*driver)...) over kzalloc(sizeof(struct tty_driver)...)
#321: FILE: drivers/char/tty_io.c:2992:
+	driver = kzalloc(sizeof(struct tty_driver), GFP_KERNEL);

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#348: FILE: drivers/isdn/hisax/elsa_cs.c:149:
+    local = kzalloc(sizeof(local_info_t), GFP_KERNEL);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#378: FILE: drivers/isdn/hisax/sedlbauer_cs.c:158:
+    local = kzalloc(sizeof(local_info_t), GFP_KERNEL);$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#393: FILE: drivers/isdn/hisax/teles_cs.c:140:
+    local = kzalloc(sizeof(local_info_t), GFP_KERNEL);$

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#409: FILE: drivers/isdn/hysdn/hysdn_proclog.c:411:
+	if ((pd = kzalloc(sizeof(struct procdata), GFP_KERNEL)) != NULL) {

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*pd)...) over kzalloc(sizeof(struct procdata)...)
#409: FILE: drivers/isdn/hysdn/hysdn_proclog.c:411:
+	if ((pd = kzalloc(sizeof(struct procdata), GFP_KERNEL)) != NULL) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#422: FILE: drivers/isdn/i4l/isdn_v110.c:95:
+	if ((v = kzalloc(sizeof(isdn_v110_stream), GFP_ATOMIC)) == NULL)

ERROR:SPACING: spaces required around that '=' (ctx:VxV)
#437: FILE: drivers/macintosh/therm_windtunnel.c:433:
+	if( !(cl=kzalloc(sizeof(*cl), GFP_KERNEL)) )
 	        ^

ERROR:SPACING: space prohibited after that open parenthesis '('
#437: FILE: drivers/macintosh/therm_windtunnel.c:433:
+	if( !(cl=kzalloc(sizeof(*cl), GFP_KERNEL)) )

ERROR:SPACING: space prohibited before that close parenthesis ')'
#437: FILE: drivers/macintosh/therm_windtunnel.c:433:
+	if( !(cl=kzalloc(sizeof(*cl), GFP_KERNEL)) )

ERROR:SPACING: space required before the open parenthesis '('
#437: FILE: drivers/macintosh/therm_windtunnel.c:433:
+	if( !(cl=kzalloc(sizeof(*cl), GFP_KERNEL)) )

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#437: FILE: drivers/macintosh/therm_windtunnel.c:433:
+	if( !(cl=kzalloc(sizeof(*cl), GFP_KERNEL)) )

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#492: FILE: drivers/media/video/planb.c:356:
+	if ((pb->priv_space = kzalloc (size, GFP_KERNEL)) == 0)

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#492: FILE: drivers/media/video/planb.c:356:
+	if ((pb->priv_space = kzalloc (size, GFP_KERNEL)) == 0)

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*mcp)...) over kzalloc(sizeof(struct mcp)...)
#507: FILE: drivers/mfd/mcp-core.c:203:
+	mcp = kzalloc(sizeof(struct mcp) + size, GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*sp)...) over kzalloc(sizeof(struct service_processor)...)
#522: FILE: drivers/misc/ibmasm/module.c:80:
+	sp = kzalloc(sizeof(struct service_processor), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*host)...) over kzalloc(sizeof(struct mmc_host)...)
#541: FILE: drivers/mmc/mmc_sysfs.c:265:
+	host = kzalloc(sizeof(struct mmc_host) + extra, GFP_KERNEL);

ERROR:SPACING: space required before the open parenthesis '('
#557: FILE: drivers/net/e100.c:1933:
+	if(!(nic->rxs = kcalloc(count, sizeof(struct rx), GFP_ATOMIC)))

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#557: FILE: drivers/net/e100.c:1933:
+	if(!(nic->rxs = kcalloc(count, sizeof(struct rx), GFP_ATOMIC)))

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*stats)...) over kzalloc(sizeof(struct net_device_stats)...)
#572: FILE: drivers/net/loopback.c:227:
+	stats = kzalloc(sizeof(struct net_device_stats), GFP_KERNEL);

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#587: FILE: drivers/net/pcmcia/ibmtr_cs.c:149:
+    info = kzalloc(sizeof(*info), GFP_KERNEL);$

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*pch)...) over kzalloc(sizeof(struct channel)...)
#602: FILE: drivers/net/ppp_generic.c:1998:
+	pch = kzalloc(sizeof(struct channel), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*ppp)...) over kzalloc(sizeof(struct ppp)...)
#614: FILE: drivers/net/ppp_generic.c:2410:
+	ppp = kzalloc(sizeof(struct ppp), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*new_crypt)...) over kzalloc(sizeof(struct ieee80211_crypt_data)...)
#654: FILE: drivers/net/wireless/hostap/hostap_ioctl.c:184:
+		new_crypt = kzalloc(sizeof(struct ieee80211_crypt_data),

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#655: FILE: drivers/net/wireless/hostap/hostap_ioctl.c:185:
+		new_crypt = kzalloc(sizeof(struct ieee80211_crypt_data),
 				GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*new_crypt)...) over kzalloc(sizeof(struct ieee80211_crypt_data)...)
#668: FILE: drivers/net/wireless/hostap/hostap_ioctl.c:3321:
+		new_crypt = kzalloc(sizeof(struct ieee80211_crypt_data),

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#669: FILE: drivers/net/wireless/hostap/hostap_ioctl.c:3322:
+		new_crypt = kzalloc(sizeof(struct ieee80211_crypt_data),
 				GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*new_crypt)...) over kzalloc(sizeof(struct ieee80211_crypt_data)...)
#684: FILE: drivers/net/wireless/hostap/hostap_ioctl.c:3537:
+		new_crypt = kzalloc(sizeof(struct ieee80211_crypt_data),

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#685: FILE: drivers/net/wireless/hostap/hostap_ioctl.c:3538:
+		new_crypt = kzalloc(sizeof(struct ieee80211_crypt_data),
 				GFP_KERNEL);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#703: FILE: drivers/nubus/nubus.c:469:
+	if ((dev = kzalloc(sizeof(*dev), GFP_ATOMIC)) == NULL)

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#714: FILE: drivers/nubus/nubus.c:802:
+	if ((board = kzalloc(sizeof(*board), GFP_ATOMIC)) == NULL)

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#729: FILE: drivers/parport/parport_cs.c:109:
+    info = kzalloc(sizeof(*info), GFP_KERNEL);$

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*rdev)...) over kzalloc(sizeof(struct rio_dev)...)
#744: FILE: drivers/rapidio/rio-scan.c:300:
+	rdev = kzalloc(sizeof(struct rio_dev), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*net)...) over kzalloc(sizeof(struct rio_net)...)
#757: FILE: drivers/rapidio/rio-scan.c:786:
+	net = kzalloc(sizeof(struct rio_net), GFP_KERNEL);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#772: FILE: drivers/scsi/ide-scsi.c:262:
+			if ((atapi_buf = kzalloc(pc->buffer_size + 4, GFP_ATOMIC)) == NULL)

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*sdev)...) over kzalloc(sizeof(struct scsi_device)...)
#788: FILE: drivers/scsi/megaraid.c:4490:
+	sdev = kzalloc(sizeof(struct scsi_device), GFP_KERNEL);

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#801: FILE: drivers/scsi/pcmcia/aha152x_stub.c:110:
+    info = kzalloc(sizeof(*info), GFP_KERNEL);$

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*state->info)...) over kzalloc(sizeof(struct uart_info)...)
#1013: FILE: drivers/serial/serial_core.c:1525:
+		state->info = kzalloc(sizeof(struct uart_info), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1043: FILE: drivers/usb/host/ohci-hcd.c:226:
+	urb_priv = kzalloc (sizeof (urb_priv_t) + size * sizeof (struct td *),

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1043: FILE: drivers/usb/host/ohci-hcd.c:226:
+	urb_priv = kzalloc (sizeof (urb_priv_t) + size * sizeof (struct td *),

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1043: FILE: drivers/usb/host/ohci-hcd.c:226:
+	urb_priv = kzalloc (sizeof (urb_priv_t) + size * sizeof (struct td *),

CHECK:PARENTHESIS_ALIGNMENT: Alignment should match open parenthesis
#1044: FILE: drivers/usb/host/ohci-hcd.c:227:
+	urb_priv = kzalloc (sizeof (urb_priv_t) + size * sizeof (struct td *),
 			mem_flags);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1076: FILE: drivers/usb/serial/ark3116.c:87:
+		priv = kzalloc (sizeof (struct ark3116_private), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1076: FILE: drivers/usb/serial/ark3116.c:87:
+		priv = kzalloc (sizeof (struct ark3116_private), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*priv)...) over kzalloc(sizeof (struct ark3116_private)...)
#1076: FILE: drivers/usb/serial/ark3116.c:87:
+		priv = kzalloc (sizeof (struct ark3116_private), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1092: FILE: drivers/usb/serial/console.c:169:
+		tty = kzalloc (sizeof (*tty), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1092: FILE: drivers/usb/serial/console.c:169:
+		tty = kzalloc (sizeof (*tty), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1098: FILE: drivers/usb/serial/console.c:174:
+		termios = kzalloc (sizeof (*termios), GFP_KERNEL);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#1098: FILE: drivers/usb/serial/console.c:174:
+		termios = kzalloc (sizeof (*termios), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*tport)...) over kzalloc(sizeof(struct ti_port)...)
#1118: FILE: drivers/usb/serial/ti_usb_3410_5052.c:462:
+		tport = kzalloc(sizeof(struct ti_port), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kmalloc(sizeof(*cb)...) over kmalloc(sizeof(struct circ_buf)...)
#1133: FILE: drivers/usb/serial/ti_usb_3410_5052.c:1711:
+	cb = kmalloc(sizeof(struct circ_buf), GFP_KERNEL);

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*fb)...) over kzalloc(sizeof(struct clcd_fb)...)
#1146: FILE: drivers/video/amba-clcd.c:450:
+	fb = kzalloc(sizeof(struct clcd_fb), GFP_KERNEL);

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1183: FILE: drivers/video/au1100fb.c:456:
+	if (!(fbdev = kzalloc(sizeof(struct au1100fb_device), GFP_KERNEL))) {

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*fbdev)...) over kzalloc(sizeof(struct au1100fb_device)...)
#1183: FILE: drivers/video/au1100fb.c:456:
+	if (!(fbdev = kzalloc(sizeof(struct au1100fb_device), GFP_KERNEL))) {

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1196: FILE: drivers/video/au1100fb.c:536:
+	if (!(fbdev->info.pseudo_palette = kzalloc(16, sizeof(u32), GFP_KERNEL))) {

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*cfb)...) over kzalloc(sizeof(struct cfb_info)...)
#1263: FILE: drivers/video/cyber2000fb.c:1224:
+	cfb = kzalloc(sizeof(struct cfb_info), GFP_KERNEL);

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1281: FILE: drivers/video/i810/i810_main.c:2013:
+	if (!(info->pixmap.addr = kzalloc(8*1024, GFP_KERNEL))) {
 	                                   ^

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1281: FILE: drivers/video/i810/i810_main.c:2013:
+	if (!(info->pixmap.addr = kzalloc(8*1024, GFP_KERNEL))) {

ERROR:CODE_INDENT: code indent should use tabs where possible
#1298: FILE: drivers/video/igafb.c:403:
+        info = kzalloc(size, GFP_ATOMIC);$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#1298: FILE: drivers/video/igafb.c:403:
+        info = kzalloc(size, GFP_ATOMIC);$

ERROR:ASSIGN_IN_IF: do not use assignment in if condition
#1428: FILE: drivers/video/retz3fb.c:1372:
+		if (!(zinfo = kzalloc(sizeof(struct retz3_fb_info),

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*zinfo)...) over kzalloc(sizeof(struct retz3_fb_info)...)
#1428: FILE: drivers/video/retz3fb.c:1372:
+		if (!(zinfo = kzalloc(sizeof(struct retz3_fb_info),

CHECK:SPACING: spaces preferred around that '*' (ctx:VxV)
#1462: FILE: drivers/video/savage/savagefb_driver.c:2125:
+	info->pixmap.addr = kzalloc(8*1024, GFP_KERNEL);
 	                             ^

CHECK:ALLOC_SIZEOF_STRUCT: Prefer kzalloc(sizeof(*fb)...) over kzalloc(sizeof(struct fb_info_sbusfb)...)
#1495: FILE: drivers/video/sun3fb.c:527:
+	fb = kzalloc(sizeof(struct fb_info_sbusfb), GFP_ATOMIC);

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.56147.commit.3904a3da2ea7ee212bf1f02acb0da3ab66c7475a total: 21 errors, 17 warnings, 39 checks, 1069 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.56147.commit.3904a3da2ea7ee212bf1f02acb0da3ab66c7475a has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
