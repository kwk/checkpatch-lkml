WARNING:TYPO_SPELLING: 'capabilies' may be misspelled - perhaps 'capabilities'?
#48: 
programs nor those that use the current capabilies system
                                        ^^^^^^^^^^

Some words may have been misspelled.  Consider reviewing them.

WARNING:TYPO_SPELLING: 'capabilites' may be misspelled - perhaps 'capabilities'?
#56: 
bunch of "regular" capabilites, which are present on all normal
                   ^^^^^^^^^^^

WARNING:COMMIT_LOG_LONG_LINE: Possible unwrapped commit description (prefer a maximum 75 chars per line)
#85: 
Content-Disposition: attachment; filename="caps-0.3.1-linux-2.6.18-rc6.patch"

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IXGRP' are not preferred. Consider using octal permissions '0010'.
#111: FILE: fs/exec.c:945:
+		if ((mode & (S_ISGID | S_IXGRP)) == (S_ISGID | S_IXGRP)

Permission bits in the octal form are more readable and easier to
understand than their symbolic counterparts because many command-line
tools use this notation. Experienced kernel developers have been using
these traditional Unix permission bits for decades and so they find it
easier to understand the octal notation than the symbolic macros.
For example, it is harder to read S_IWUSR|S_IRUGO than 0644, which
obscures the developer's intent rather than clarifying it.

See: https://lore.kernel.org/lkml/CA+55aFw5v23T-zvDZp-MmD_EYxF8WbafwwB59934FV7g21uMGQ@mail.gmail.com/

WARNING:SYMBOLIC_PERMS: Symbolic permissions 'S_IXGRP' are not preferred. Consider using octal permissions '0010'.
#111: FILE: fs/exec.c:945:
+		if ((mode & (S_ISGID | S_IXGRP)) == (S_ISGID | S_IXGRP)

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#112: FILE: fs/exec.c:946:
+		if ((mode & (S_ISGID | S_IXGRP)) == (S_ISGID | S_IXGRP)
+		    && capable(CAP_REG_SXID)) {

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#165: FILE: fs/proc/array.c:288:
+    return buffer + sprintf(buffer, "CapInh:\t%016llx\n"$

ERROR:CODE_INDENT: code indent should use tabs where possible
#201: FILE: include/linux/capability.h:39:
+        __u64 effective;$

Code indent should use tabs instead of spaces.
Outside of comments, documentation and Kconfig,
spaces are never used for indentation.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#indentation

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#201: FILE: include/linux/capability.h:39:
+        __u64 effective;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#202: FILE: include/linux/capability.h:40:
+        __u64 permitted;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#202: FILE: include/linux/capability.h:40:
+        __u64 permitted;$

ERROR:CODE_INDENT: code indent should use tabs where possible
#203: FILE: include/linux/capability.h:41:
+        __u64 inheritable;$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#203: FILE: include/linux/capability.h:41:
+        __u64 inheritable;$

ERROR:TRAILING_WHITESPACE: trailing whitespace
#205: FILE: include/linux/capability.h:43:
+ $

Trailing whitespace should always be removed.
Some editors highlight the trailing whitespace and cause visual
distractions when editing files.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#205: FILE: include/linux/capability.h:43:
+ $

WARNING:NEW_TYPEDEFS: do not add new typedefs
#206: FILE: include/linux/capability.h:44:
+typedef struct __user_cap_data_old_struct {

CHECK:LINE_SPACING: Please don't use multiple blank lines
#234: FILE: include/linux/capability.h:298:
 
+

Vertical space is wasted given the limited number of lines an
editor window can display when multiple blank lines are used.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

ERROR:SPACING: space required before the open parenthesis '('
#279: FILE: include/linux/capability.h:379:
+#define cap_clear(c)         do { cap_t(c) =  0ULL; } while(0)

Whitespace style used in the kernel sources is described in kernel docs.

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#spaces

WARNING:SINGLE_STATEMENT_DO_WHILE_MACRO: Single statement macros should not use a do {} while (0) loop
#279: FILE: include/linux/capability.h:379:
+#define cap_clear(c)         do { cap_t(c) =  0ULL; } while(0)

For the multi-statement macros, it is necessary to use the do-while
loop to avoid unpredictable code paths. The do-while loop helps to
group the multiple statements into a single one so that a
function-like macro can be used as a function only.

But for the single statement macros, it is unnecessary to use the
do-while loop. Although the code is syntactically correct but using
the do-while loop is redundant. So remove the do-while loop for single
statement macros.

ERROR:SPACING: space required before the open parenthesis '('
#280: FILE: include/linux/capability.h:380:
+#define cap_set_full(c)      do { cap_t(c) = ~0ULL; } while(0)

WARNING:SINGLE_STATEMENT_DO_WHILE_MACRO: Single statement macros should not use a do {} while (0) loop
#280: FILE: include/linux/capability.h:380:
+#define cap_set_full(c)      do { cap_t(c) = ~0ULL; } while(0)

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#302: FILE: kernel/capability.c:55:
+     if (version != _LINUX_CAPABILITY_VERSION$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (5, 13)
#302: FILE: kernel/capability.c:55:
+     if (version != _LINUX_CAPABILITY_VERSION
[...]
 	     if (put_user(_LINUX_CAPABILITY_VERSION, &header->version))

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#303: FILE: kernel/capability.c:56:
+     if (version != _LINUX_CAPABILITY_VERSION
+	 && version != _LINUX_CAPABILITY_OLD_VERSION) {

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#313: FILE: kernel/capability.c:86:
+     if (!ret) {$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (5, 13)
#313: FILE: kernel/capability.c:86:
+     if (!ret) {
+	     if (version == _LINUX_CAPABILITY_OLD_VERSION) {

WARNING:TABSTOP: Statements should start on a tabstop
#314: FILE: kernel/capability.c:87:
+	     if (version == _LINUX_CAPABILITY_OLD_VERSION) {

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (13, 21)
#314: FILE: kernel/capability.c:87:
+	     if (version == _LINUX_CAPABILITY_OLD_VERSION) {
+		     struct __user_cap_data_old_struct data_old;

WARNING:TABSTOP: Statements should start on a tabstop
#315: FILE: kernel/capability.c:88:
+		     struct __user_cap_data_old_struct data_old;

WARNING:LINE_SPACING: Missing a blank line after declarations
#316: FILE: kernel/capability.c:89:
+		     struct __user_cap_data_old_struct data_old;
+		     data_old.effective = data_old.effective & 0xffffffffULL;

WARNING:TABSTOP: Statements should start on a tabstop
#319: FILE: kernel/capability.c:92:
+		     if (copy_to_user(dataptr, &data_old, sizeof data_old))

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (21, 29)
#319: FILE: kernel/capability.c:92:
+		     if (copy_to_user(dataptr, &data_old, sizeof data_old))
+			     return -EFAULT;

WARNING:SIZEOF_PARENTHESIS: sizeof data_old should be sizeof(data_old)
#319: FILE: kernel/capability.c:92:
+		     if (copy_to_user(dataptr, &data_old, sizeof data_old))

WARNING:TABSTOP: Statements should start on a tabstop
#320: FILE: kernel/capability.c:93:
+			     return -EFAULT;

WARNING:TABSTOP: Statements should start on a tabstop
#321: FILE: kernel/capability.c:94:
+	     } else

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (13, 21)
#321: FILE: kernel/capability.c:94:
+	     } else
+		     if (copy_to_user(dataptr, &data, sizeof data))

CHECK:BRACES: Unbalanced braces around else statement
#321: FILE: kernel/capability.c:94:
+	     } else

The placement of braces is stylistically incorrect.
The preferred way is to put the opening brace last on the line,
and put the closing brace first::

  if (x is true) {
          we do y
  }

This applies for all non-functional blocks.
However, there is one special case, namely functions: they have the
opening brace at the beginning of the next line, thus::

  int function(int x)
  {
          body of function
  }

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#placing-braces-and-spaces

WARNING:TABSTOP: Statements should start on a tabstop
#322: FILE: kernel/capability.c:95:
+		     if (copy_to_user(dataptr, &data, sizeof data))

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (21, 29)
#322: FILE: kernel/capability.c:95:
+		     if (copy_to_user(dataptr, &data, sizeof data))
+			     return -EFAULT;

WARNING:SIZEOF_PARENTHESIS: sizeof data should be sizeof(data)
#322: FILE: kernel/capability.c:95:
+		     if (copy_to_user(dataptr, &data, sizeof data))

WARNING:TABSTOP: Statements should start on a tabstop
#323: FILE: kernel/capability.c:96:
+			     return -EFAULT;

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#324: FILE: kernel/capability.c:97:
+     }$

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#333: FILE: kernel/capability.c:193:
+     if (version != _LINUX_CAPABILITY_VERSION$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (5, 13)
#333: FILE: kernel/capability.c:193:
+     if (version != _LINUX_CAPABILITY_VERSION
[...]
 	     if (put_user(_LINUX_CAPABILITY_VERSION, &header->version))

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#334: FILE: kernel/capability.c:194:
+     if (version != _LINUX_CAPABILITY_VERSION
+	 && version != _LINUX_CAPABILITY_OLD_VERSION) {

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#346: FILE: kernel/capability.c:206:
+     if (version == _LINUX_CAPABILITY_OLD_VERSION) {$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (5, 13)
#346: FILE: kernel/capability.c:206:
+     if (version == _LINUX_CAPABILITY_OLD_VERSION) {
+	     const cap_user_data_old_t data2 = (void *)data;

WARNING:TABSTOP: Statements should start on a tabstop
#347: FILE: kernel/capability.c:207:
+	     const cap_user_data_old_t data2 = (void *)data;

WARNING:TABSTOP: Statements should start on a tabstop
#348: FILE: kernel/capability.c:208:
+	     __u32 w;

WARNING:TABSTOP: Statements should start on a tabstop
#349: FILE: kernel/capability.c:209:
+	     if (copy_from_user(&w, &data2->effective, sizeof(w)))

WARNING:LINE_SPACING: Missing a blank line after declarations
#349: FILE: kernel/capability.c:209:
+	     __u32 w;
+	     if (copy_from_user(&w, &data2->effective, sizeof(w)))

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (13, 21)
#349: FILE: kernel/capability.c:209:
+	     if (copy_from_user(&w, &data2->effective, sizeof(w)))
+		     return -EFAULT;

WARNING:TABSTOP: Statements should start on a tabstop
#350: FILE: kernel/capability.c:210:
+		     return -EFAULT;

WARNING:TABSTOP: Statements should start on a tabstop
#352: FILE: kernel/capability.c:212:
+	     if (copy_from_user(&w, &data2->inheritable, sizeof(w)))

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (13, 21)
#352: FILE: kernel/capability.c:212:
+	     if (copy_from_user(&w, &data2->inheritable, sizeof(w)))
+		     return -EFAULT;

WARNING:TABSTOP: Statements should start on a tabstop
#353: FILE: kernel/capability.c:213:
+		     return -EFAULT;

WARNING:TABSTOP: Statements should start on a tabstop
#355: FILE: kernel/capability.c:215:
+	     if (copy_from_user(&w, &data2->permitted, sizeof(w)))

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (13, 21)
#355: FILE: kernel/capability.c:215:
+	     if (copy_from_user(&w, &data2->permitted, sizeof(w)))
+		     return -EFAULT;

WARNING:TABSTOP: Statements should start on a tabstop
#356: FILE: kernel/capability.c:216:
+		     return -EFAULT;

WARNING:LEADING_SPACE: please, no spaces at the start of a line
#358: FILE: kernel/capability.c:218:
+     } else$

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (5, 13)
#358: FILE: kernel/capability.c:218:
+     } else
+	     if (copy_from_user(&effective, &data->effective, sizeof(effective)) ||

CHECK:BRACES: Unbalanced braces around else statement
#358: FILE: kernel/capability.c:218:
+     } else

WARNING:TABSTOP: Statements should start on a tabstop
#359: FILE: kernel/capability.c:219:
+	     if (copy_from_user(&effective, &data->effective, sizeof(effective)) ||

WARNING:SUSPECT_CODE_INDENT: suspect code indent for conditional statements (13, 21)
#359: FILE: kernel/capability.c:219:
+	     if (copy_from_user(&effective, &data->effective, sizeof(effective)) ||
[...]
+		     return -EFAULT; 

ERROR:TRAILING_WHITESPACE: trailing whitespace
#362: FILE: kernel/capability.c:222:
+^I^I     return -EFAULT; $

WARNING:TABSTOP: Statements should start on a tabstop
#362: FILE: kernel/capability.c:222:
+		     return -EFAULT; 

WARNING:BLOCK_COMMENT_STYLE: Block comments use a trailing */ on a separate line
#388: FILE: security/commoncap.c:101:
+	 * cap_capset_set will intersect them anyway */

The comment style is incorrect.  The preferred style for multi-
line comments is::

  /*
  * This is the preferred style
  * for multi line comments.
  */

The networking comment style is a bit different, with the first line
not empty like the former::

  /* This is the preferred comment style
  * for files in net/ and drivers/net/
  */

See: https://www.kernel.org/doc/html/latest/process/coding-style.html#commenting

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#397: FILE: security/commoncap.c:110:
+	target->cap_inheritable = cap_intersect (*effective, *inheritable);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#406: FILE: security/commoncap.c:119:
+	cap_set_full (bprm->cap_inheritable);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#409: FILE: security/commoncap.c:121:
+	cap_set_full (bprm->cap_effective);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#446: FILE: security/commoncap.c:150:
+	new_effective = cap_intersect (bprm->cap_permitted, bprm->cap_effective);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#447: FILE: security/commoncap.c:151:
+	new_effective = cap_intersect (new_effective, cap_bset);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#448: FILE: security/commoncap.c:152:
+	working = cap_intersect (bprm->cap_inheritable,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#450: FILE: security/commoncap.c:154:
+	working = cap_intersect (working, current->cap_inheritable);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#451: FILE: security/commoncap.c:155:
+	new_effective = cap_combine (new_effective, working);

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#462: FILE: security/commoncap.c:171:
+				new_effective = cap_intersect (new_permitted,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#490: FILE: security/commoncap.c:189:
+	cap_task_post_setuid (old_ruid, old_euid, old_suid, LSM_SETID_RES);

CHECK:LOGICAL_CONTINUATIONS: Logical continuations should be on the previous line
#503: FILE: security/commoncap.c:202:
+	return ((bprm->is_suid || bprm->is_sgid)
+		&& !cap_issubset (cap_bset, current->cap_permitted));

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#503: FILE: security/commoncap.c:202:
+		&& !cap_issubset (cap_bset, current->cap_permitted));

CHECK:ASSIGNMENT_CONTINUATIONS: Assignment operator '=' should be on the previous line
#518: FILE: security/commoncap.c:261:
+			current->cap_permitted
+				= cap_intersect (current->cap_permitted,

Assignment operators should not be written at the start of a
line but should follow the operand at the previous line.

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#518: FILE: security/commoncap.c:261:
+				= cap_intersect (current->cap_permitted,

CHECK:ASSIGNMENT_CONTINUATIONS: Assignment operator '=' should be on the previous line
#521: FILE: security/commoncap.c:264:
+			current->cap_effective
+				= cap_intersect (current->cap_effective,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#521: FILE: security/commoncap.c:264:
+				= cap_intersect (current->cap_effective,

CHECK:ASSIGNMENT_CONTINUATIONS: Assignment operator '=' should be on the previous line
#525: FILE: security/commoncap.c:268:
+		current->cap_inheritable
+			= cap_intersect (current->cap_inheritable,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#525: FILE: security/commoncap.c:268:
+			= cap_intersect (current->cap_inheritable,

WARNING:SPACING: space prohibited between function name and open parenthesis '('
#531: FILE: security/commoncap.c:272:
+		current->cap_effective = cap_intersect (current->cap_effective,

WARNING:BRACES: braces {} are not necessary for single statement blocks
#535: FILE: security/commoncap.c:275:
+	if (old_euid != 0 && current->euid == 0 && !current->keep_capabilities) {
 		current->cap_effective = current->cap_permitted;
 	}

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.40868.commit.28305dd30cac3efff3d8a921f95ee758f3d9530f total: 7 errors, 70 warnings, 10 checks, 408 lines checked

NOTE: For some of the reported defects, checkpatch may be able to
      mechanically convert to the typical style using --fix or --fix-inplace.

NOTE: Whitespace errors detected.
      You may wish to use scripts/cleanpatch or scripts/cleanfile

/tmp/tmp.gGZ8aIRHtl//home/kkleine/dev/lkml/0/patch.offset.40868.commit.28305dd30cac3efff3d8a921f95ee758f3d9530f has style problems, please review.

NOTE: If any of the errors are false positives, please report
      them to the maintainer, see CHECKPATCH in MAINTAINERS.
